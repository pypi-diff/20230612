# Comparing `tmp/apidev-coop_cms-1.5.9.tar.gz` & `tmp/apidev-coop_cms-1.6.0.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "dist/apidev-coop_cms-1.5.9.tar", last modified: Thu Dec 10 07:20:48 2020, max compression
+gzip compressed data, was "apidev-coop_cms-1.6.0.tar", last modified: Mon Jun 12 12:56:06 2023, max compression
```

## Comparing `apidev-coop_cms-1.5.9.tar` & `apidev-coop_cms-1.6.0.tar`

### file list

```diff
@@ -1,643 +1,644 @@
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:48.921784 apidev-coop_cms-1.5.9/
--rw-r--r--   0 lucjean    (501) staff       (20)      162 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/MANIFEST.in
--rw-r--r--   0 lucjean    (501) staff       (20)    13345 2020-12-10 07:20:48.920942 apidev-coop_cms-1.5.9/PKG-INFO
--rw-r--r--   0 lucjean    (501) staff       (20)    10336 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/README.rst
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.626529 apidev-coop_cms-1.5.9/apidev_coop_cms.egg-info/
--rw-r--r--   0 lucjean    (501) staff       (20)    13345 2020-12-10 07:20:43.000000 apidev-coop_cms-1.5.9/apidev_coop_cms.egg-info/PKG-INFO
--rw-r--r--   0 lucjean    (501) staff       (20)    23792 2020-12-10 07:20:43.000000 apidev-coop_cms-1.5.9/apidev_coop_cms.egg-info/SOURCES.txt
--rw-r--r--   0 lucjean    (501) staff       (20)        1 2020-12-10 07:20:43.000000 apidev-coop_cms-1.5.9/apidev_coop_cms.egg-info/dependency_links.txt
--rw-r--r--   0 lucjean    (501) staff       (20)        1 2020-12-03 20:28:04.000000 apidev-coop_cms-1.5.9/apidev_coop_cms.egg-info/not-zip-safe
--rw-r--r--   0 lucjean    (501) staff       (20)      182 2020-12-10 07:20:43.000000 apidev-coop_cms-1.5.9/apidev_coop_cms.egg-info/requires.txt
--rw-r--r--   0 lucjean    (501) staff       (20)        9 2020-12-10 07:20:43.000000 apidev-coop_cms-1.5.9/apidev_coop_cms.egg-info/top_level.txt
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.836304 apidev-coop_cms-1.5.9/coop_cms/
--rw-r--r--   0 lucjean    (501) staff       (20)      327 2020-12-10 07:17:12.000000 apidev-coop_cms-1.5.9/coop_cms/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)     9300 2020-12-09 08:39:01.000000 apidev-coop_cms-1.5.9/coop_cms/admin.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.839595 apidev-coop_cms-1.5.9/coop_cms/apps/
--rw-r--r--   0 lucjean    (501) staff       (20)      208 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/__init__.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.857905 apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/
--rw-r--r--   0 lucjean    (501) staff       (20)      155 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)      206 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/apps.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.877143 apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/migrations/
--rw-r--r--   0 lucjean    (501) staff       (20)     3722 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/migrations/0001_initial.py
--rw-r--r--   0 lucjean    (501) staff       (20)      478 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/migrations/0002_auto_20150924_1433.py
--rw-r--r--   0 lucjean    (501) staff       (20)      680 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/migrations/0003_auto_20160129_1524.py
--rw-r--r--   0 lucjean    (501) staff       (20)      470 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/migrations/0004_auto_20161031_1401.py
--rw-r--r--   0 lucjean    (501) staff       (20)     2092 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/migrations/0005_auto_20190719_1408.py
--rw-r--r--   0 lucjean    (501) staff       (20)        0 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/migrations/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)      417 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/models.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.586859 apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/templates/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.586954 apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/templates/admin/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.587054 apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/templates/admin/basic_cms/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.878791 apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/templates/admin/basic_cms/navtree/
--rw-r--r--   0 lucjean    (501) staff       (20)       55 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/templates/admin/basic_cms/navtree/change_form.html
--rw-r--r--   0 lucjean    (501) staff       (20)       54 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/tests.py
--rw-r--r--   0 lucjean    (501) staff       (20)      449 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/translation.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.917359 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/
--rw-r--r--   0 lucjean    (501) staff       (20)      164 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)      257 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/apps.py
--rw-r--r--   0 lucjean    (501) staff       (20)      383 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/forms.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.587455 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.587866 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.057537 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/css/
--rw-r--r--   0 lucjean    (501) staff       (20)    22608 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/css/bootstrap-theme.css
--rw-r--r--   0 lucjean    (501) staff       (20)    19963 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/css/bootstrap-theme.min.css
--rw-r--r--   0 lucjean    (501) staff       (20)   141622 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/css/bootstrap.css
--rw-r--r--   0 lucjean    (501) staff       (20)   117305 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/css/bootstrap.min.css
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.205877 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/fonts/
--rw-r--r--   0 lucjean    (501) staff       (20)    20127 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/fonts/glyphicons-halflings-regular.eot
--rw-r--r--   0 lucjean    (501) staff       (20)   108738 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/fonts/glyphicons-halflings-regular.svg
--rw-r--r--   0 lucjean    (501) staff       (20)    45404 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/fonts/glyphicons-halflings-regular.ttf
--rw-r--r--   0 lucjean    (501) staff       (20)    23424 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/fonts/glyphicons-halflings-regular.woff
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.253918 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/js/
--rw-r--r--   0 lucjean    (501) staff       (20)    67546 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/js/bootstrap.js
--rw-r--r--   0 lucjean    (501) staff       (20)    35951 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/js/bootstrap.min.js
--rw-r--r--   0 lucjean    (501) staff       (20)      484 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/js/npm.js
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.589072 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.267309 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/coop_bootstrap/
--rw-r--r--   0 lucjean    (501) staff       (20)     1035 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/coop_bootstrap/carousel.html
--rw-r--r--   0 lucjean    (501) staff       (20)     1874 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/coop_bootstrap/form.html
--rw-r--r--   0 lucjean    (501) staff       (20)     1257 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/coop_bootstrap/headline_carousel.html
--rw-r--r--   0 lucjean    (501) staff       (20)      642 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/coop_bootstrap/li_node.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.274430 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/coop_cms/
--rw-r--r--   0 lucjean    (501) staff       (20)      851 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/coop_cms/article_list_item.html
--rw-r--r--   0 lucjean    (501) staff       (20)       43 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/coop_cms/navigation_node.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.277798 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/coop_cms/widgets/
--rw-r--r--   0 lucjean    (501) staff       (20)       15 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/coop_cms/widgets/_imageedit_cssclass.html
--rw-r--r--   0 lucjean    (501) staff       (20)       52 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/coop_cms/widgets/_img_logo.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.279557 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/pagination/
--rw-r--r--   0 lucjean    (501) staff       (20)      998 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/pagination/pagination.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.286567 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templatetags/
--rw-r--r--   0 lucjean    (501) staff       (20)       53 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templatetags/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)      733 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templatetags/coop_bs.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.314521 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/
--rw-r--r--   0 lucjean    (501) staff       (20)      432 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)      493 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/admin.py
--rw-r--r--   0 lucjean    (501) staff       (20)      186 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/apps.py
--rw-r--r--   0 lucjean    (501) staff       (20)      973 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/coop_cms_settings.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1271 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/forms.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.319446 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/migrations/
--rw-r--r--   0 lucjean    (501) staff       (20)     3603 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/migrations/0001_initial.py
--rw-r--r--   0 lucjean    (501) staff       (20)        0 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/migrations/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1468 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/models.py
--rw-r--r--   0 lucjean    (501) staff       (20)      847 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/my_coop_bar.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.590516 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/static/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.322324 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/static/css/
--rw-r--r--   0 lucjean    (501) staff       (20)     4845 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/static/css/demo-style.css
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.339208 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/static/js/
--rw-r--r--   0 lucjean    (501) staff       (20)     1931 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/static/js/jquery.sortElements.js
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.389470 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/templates/
--rw-r--r--   0 lucjean    (501) staff       (20)      340 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/templates/404.html
--rw-r--r--   0 lucjean    (501) staff       (20)      689 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/templates/500.html
--rw-r--r--   0 lucjean    (501) staff       (20)     1144 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/templates/base.html
--rw-r--r--   0 lucjean    (501) staff       (20)      195 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/templates/basic_newsletter.html
--rw-r--r--   0 lucjean    (501) staff       (20)      964 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/templates/blog.html
--rw-r--r--   0 lucjean    (501) staff       (20)      185 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/templates/homepage.html
--rw-r--r--   0 lucjean    (501) staff       (20)     1522 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/templates/sortable_newsletter.html
--rw-r--r--   0 lucjean    (501) staff       (20)      499 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/templates/special_newsletter.html
--rw-r--r--   0 lucjean    (501) staff       (20)      824 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/templates/standard.html
--rw-r--r--   0 lucjean    (501) staff       (20)      390 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/templates/standard_en.html
--rw-r--r--   0 lucjean    (501) staff       (20)     4990 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/tests.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.446250 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/
--rw-r--r--   0 lucjean    (501) staff       (20)      158 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)      411 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/admin.py
--rw-r--r--   0 lucjean    (501) staff       (20)      218 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/apps.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1449 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/auth_backends.py
--rw-r--r--   0 lucjean    (501) staff       (20)     3470 2020-12-03 20:30:37.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/forms.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.447876 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/management/
--rw-r--r--   0 lucjean    (501) staff       (20)       23 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/management/__init__.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.479817 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/management/commands/
--rw-r--r--   0 lucjean    (501) staff       (20)       23 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/management/commands/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)      707 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/management/commands/invalidate_passwords.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.484841 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/migrations/
--rw-r--r--   0 lucjean    (501) staff       (20)      732 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/migrations/0001_initial.py
--rw-r--r--   0 lucjean    (501) staff       (20)       24 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/migrations/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)      435 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/models.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.522693 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/registration_backend/
--rw-r--r--   0 lucjean    (501) staff       (20)       24 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/registration_backend/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1090 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/registration_backend/forms.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1307 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/registration_backend/urls.py
--rw-r--r--   0 lucjean    (501) staff       (20)     2408 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/registration_backend/views.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.591897 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/templates/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.544885 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/templates/email_auth/
--rw-r--r--   0 lucjean    (501) staff       (20)       85 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/templates/email_auth/activation_notification.txt
--rw-r--r--   0 lucjean    (501) staff       (20)       73 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/templates/email_auth/registration_notification.txt
--rw-r--r--   0 lucjean    (501) staff       (20)    25030 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/tests.py
--rw-r--r--   0 lucjean    (501) staff       (20)      954 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/urls.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.602585 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/
--rw-r--r--   0 lucjean    (501) staff       (20)       89 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1720 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/admin.py
--rw-r--r--   0 lucjean    (501) staff       (20)      218 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/apps.py
--rw-r--r--   0 lucjean    (501) staff       (20)      833 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/coop_bar_cfg.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.604975 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/files/
--rw-r--r--   0 lucjean    (501) staff       (20)      178 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/files/email-tracking.png
--rw-r--r--   0 lucjean    (501) staff       (20)      358 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/forms.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.608112 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/management/
--rw-r--r--   0 lucjean    (501) staff       (20)       24 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/management/__init__.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.614507 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/management/commands/
--rw-r--r--   0 lucjean    (501) staff       (20)       24 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/management/commands/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1459 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/management/commands/send_newsletters.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.619238 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/migrations/
--rw-r--r--   0 lucjean    (501) staff       (20)     6018 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/migrations/0001_initial.py
--rw-r--r--   0 lucjean    (501) staff       (20)        0 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/migrations/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)     6400 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/models.py
--rw-r--r--   0 lucjean    (501) staff       (20)      553 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/settings.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.593281 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.631100 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/newsletters/
--rw-r--r--   0 lucjean    (501) staff       (20)      871 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/newsletters/_link_bar.html
--rw-r--r--   0 lucjean    (501) staff       (20)       47 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/newsletters/_linkbar_link_style.html
--rw-r--r--   0 lucjean    (501) staff       (20)       72 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/newsletters/_linkbar_style.html
--rw-r--r--   0 lucjean    (501) staff       (20)      410 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/newsletters/newsletter.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.642099 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/newsletters/public/
--rw-r--r--   0 lucjean    (501) staff       (20)      846 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/newsletters/public/base.html
--rw-r--r--   0 lucjean    (501) staff       (20)       86 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/newsletters/public/base_custom.html
--rw-r--r--   0 lucjean    (501) staff       (20)      489 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/newsletters/public/unregister_confirm.html
--rw-r--r--   0 lucjean    (501) staff       (20)      483 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/newsletters/public/unregister_done.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.649130 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/test/
--rw-r--r--   0 lucjean    (501) staff       (20)      850 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/test/newsletter_contact.html
--rw-r--r--   0 lucjean    (501) staff       (20)      302 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/test/newsletter_contact_lang.html
--rw-r--r--   0 lucjean    (501) staff       (20)      706 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/test/newsletter_no_link.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.659453 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templatetags/
--rw-r--r--   0 lucjean    (501) staff       (20)       24 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templatetags/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)      707 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templatetags/newsletters_utils.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.688920 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/tests/
--rw-r--r--   0 lucjean    (501) staff       (20)      532 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/tests/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)     2534 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/tests/test_customize_content.py
--rw-r--r--   0 lucjean    (501) staff       (20)      969 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/tests/test_magic_links.py
--rw-r--r--   0 lucjean    (501) staff       (20)     3918 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/tests/test_max_length.py
--rw-r--r--   0 lucjean    (501) staff       (20)      660 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/tests/test_newsletter.py
--rw-r--r--   0 lucjean    (501) staff       (20)    23608 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/tests/test_sending.py
--rw-r--r--   0 lucjean    (501) staff       (20)     6681 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/tests/test_tracking.py
--rw-r--r--   0 lucjean    (501) staff       (20)     5457 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/tests/test_unregister.py
--rw-r--r--   0 lucjean    (501) staff       (20)     8054 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/tests/test_view_online.py
--rw-r--r--   0 lucjean    (501) staff       (20)      958 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/urls.py
--rw-r--r--   0 lucjean    (501) staff       (20)     9434 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/utils.py
--rw-r--r--   0 lucjean    (501) staff       (20)     4208 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/views.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.726428 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/
--rw-r--r--   0 lucjean    (501) staff       (20)      146 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1560 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/admin.py
--rw-r--r--   0 lucjean    (501) staff       (20)      213 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/apps.py
--rw-r--r--   0 lucjean    (501) staff       (20)      952 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/forms.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.596134 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/locale/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.594285 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/locale/en/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.736181 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/locale/en/LC_MESSAGES/
--rw-r--r--   0 lucjean    (501) staff       (20)      380 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/locale/en/LC_MESSAGES/django.mo
--rw-r--r--   0 lucjean    (501) staff       (20)     1936 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/locale/en/LC_MESSAGES/django.po
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.596375 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/locale/fr/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.771317 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/locale/fr/LC_MESSAGES/
--rw-r--r--   0 lucjean    (501) staff       (20)     1375 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/locale/fr/LC_MESSAGES/django.mo
--rw-r--r--   0 lucjean    (501) staff       (20)     2263 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/locale/fr/LC_MESSAGES/django.po
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.785073 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/management/
--rw-r--r--   0 lucjean    (501) staff       (20)       51 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/management/__init__.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.807955 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/management/commands/
--rw-r--r--   0 lucjean    (501) staff       (20)       49 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/management/commands/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)      376 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/management/commands/collect_rss.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.812452 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/migrations/
--rw-r--r--   0 lucjean    (501) staff       (20)     1861 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/migrations/0001_initial.py
--rw-r--r--   0 lucjean    (501) staff       (20)        0 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/migrations/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1352 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/models.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.597466 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/static/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.597798 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/static/css/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.813778 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/static/css/rss_sync/
--rw-r--r--   0 lucjean    (501) staff       (20)       93 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/static/css/rss_sync/admin-cust.css
--rw-r--r--   0 lucjean    (501) staff       (20)     7558 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/tests.py
--rw-r--r--   0 lucjean    (501) staff       (20)      366 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/urls.py
--rw-r--r--   0 lucjean    (501) staff       (20)     2304 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/utils.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1869 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/views.py
--rw-r--r--   0 lucjean    (501) staff       (20)     2006 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/widgets.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.897079 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/
--rw-r--r--   0 lucjean    (501) staff       (20)      160 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)      197 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/admin.py
--rw-r--r--   0 lucjean    (501) staff       (20)      220 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/apps.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1134 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/forms.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.899823 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/migrations/
--rw-r--r--   0 lucjean    (501) staff       (20)     1278 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/migrations/0001_initial.py
--rw-r--r--   0 lucjean    (501) staff       (20)        0 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/migrations/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1441 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/models.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.598950 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/templates/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.599052 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/templates/coop_cms/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.917823 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/templates/coop_cms/test_app/
--rw-r--r--   0 lucjean    (501) staff       (20)      600 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/templates/coop_cms/test_app/base.html
--rw-r--r--   0 lucjean    (501) staff       (20)      674 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/templates/coop_cms/test_app/custom_tag_template.html
--rw-r--r--   0 lucjean    (501) staff       (20)      887 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/templates/coop_cms/test_app/detail.html
--rw-r--r--   0 lucjean    (501) staff       (20)      387 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/templates/coop_cms/test_app/formset.html
--rw-r--r--   0 lucjean    (501) staff       (20)      217 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/templates/coop_cms/test_app/list.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.923739 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/templatetags/
--rw-r--r--   0 lucjean    (501) staff       (20)       23 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/templatetags/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)      358 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/templatetags/coop_unit_test.py
--rw-r--r--   0 lucjean    (501) staff       (20)    32232 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/tests.py
--rw-r--r--   0 lucjean    (501) staff       (20)      657 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/urls.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1066 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/apps/test_app/views.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1617 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/bs_forms.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.599487 apidev-coop_cms-1.5.9/coop_cms/ci/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.942692 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.600277 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/locale/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.600061 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/locale/en/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:44.975862 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/locale/en/LC_MESSAGES/
--rw-r--r--   0 lucjean    (501) staff       (20)      380 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/locale/en/LC_MESSAGES/django.mo
--rw-r--r--   0 lucjean    (501) staff       (20)     5293 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/locale/en/LC_MESSAGES/django.po
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.600384 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/locale/fr/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.009012 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/locale/fr/LC_MESSAGES/
--rw-r--r--   0 lucjean    (501) staff       (20)      379 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/locale/fr/LC_MESSAGES/django.mo
--rw-r--r--   0 lucjean    (501) staff       (20)     5293 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/locale/fr/LC_MESSAGES/django.po
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.010037 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/public/
--rw-r--r--   0 lucjean    (501) staff       (20)        0 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/public/dummy.txt
--rw-r--r--   0 lucjean    (501) staff       (20)       74 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/requirements.txt
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.010317 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/static/
--rw-r--r--   0 lucjean    (501) staff       (20)        0 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/static/dummy.js
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.042696 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/
--rw-r--r--   0 lucjean    (501) staff       (20)      252 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/_field.html
--rw-r--r--   0 lucjean    (501) staff       (20)     2082 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/base.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.095534 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/django_registration/
--rw-r--r--   0 lucjean    (501) staff       (20)      146 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/django_registration/activate.html
--rw-r--r--   0 lucjean    (501) staff       (20)      345 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/django_registration/activation_complete.html
--rw-r--r--   0 lucjean    (501) staff       (20)      488 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/django_registration/activation_email_body.txt
--rw-r--r--   0 lucjean    (501) staff       (20)       59 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/django_registration/activation_email_subject.txt
--rw-r--r--   0 lucjean    (501) staff       (20)      276 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/django_registration/registration_complete.html
--rw-r--r--   0 lucjean    (501) staff       (20)     1377 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/django_registration/registration_form.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.131394 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/registration/
--rw-r--r--   0 lucjean    (501) staff       (20)      136 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/registration/base.html
--rw-r--r--   0 lucjean    (501) staff       (20)      478 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/registration/logged_out.html
--rw-r--r--   0 lucjean    (501) staff       (20)     1107 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/registration/login.html
--rw-r--r--   0 lucjean    (501) staff       (20)       46 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/registration/logout.html
--rw-r--r--   0 lucjean    (501) staff       (20)      268 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/registration/password_change_done.html
--rw-r--r--   0 lucjean    (501) staff       (20)      386 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/registration/password_change_form.html
--rw-r--r--   0 lucjean    (501) staff       (20)      250 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/registration/password_reset_complete.html
--rw-r--r--   0 lucjean    (501) staff       (20)      424 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/registration/password_reset_confirm.html
--rw-r--r--   0 lucjean    (501) staff       (20)      237 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/registration/password_reset_done.html
--rw-r--r--   0 lucjean    (501) staff       (20)      500 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/registration/password_reset_form.html
--rw-r--r--   0 lucjean    (501) staff       (20)      393 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/standard.html
--rw-r--r--   0 lucjean    (501) staff       (20)      691 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/context_processors.py
--rw-r--r--   0 lucjean    (501) staff       (20)    16688 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/coop_bar_cfg.py
--rw-r--r--   0 lucjean    (501) staff       (20)       79 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/exceptions.py
--rw-r--r--   0 lucjean    (501) staff       (20)      674 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/feeds.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.188493 apidev-coop_cms-1.5.9/coop_cms/forms/
--rw-r--r--   0 lucjean    (501) staff       (20)      454 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/forms/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)     8239 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/forms/articles.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1030 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/forms/base.py
--rw-r--r--   0 lucjean    (501) staff       (20)     4581 2020-12-09 08:39:01.000000 apidev-coop_cms-1.5.9/coop_cms/forms/content.py
--rw-r--r--   0 lucjean    (501) staff       (20)      371 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/forms/fields.py
--rw-r--r--   0 lucjean    (501) staff       (20)     4605 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/forms/fragments.py
--rw-r--r--   0 lucjean    (501) staff       (20)     3724 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/forms/navigation.py
--rw-r--r--   0 lucjean    (501) staff       (20)     7280 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/forms/newsletters.py
--rw-r--r--   0 lucjean    (501) staff       (20)      377 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/forms/webutils.py
--rw-r--r--   0 lucjean    (501) staff       (20)    12479 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/generic_views.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.601842 apidev-coop_cms-1.5.9/coop_cms/locale/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.601686 apidev-coop_cms-1.5.9/coop_cms/locale/en/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.220845 apidev-coop_cms-1.5.9/coop_cms/locale/en/LC_MESSAGES/
--rw-r--r--   0 lucjean    (501) staff       (20)      337 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/locale/en/LC_MESSAGES/django.mo
--rw-r--r--   0 lucjean    (501) staff       (20)    26559 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/locale/en/LC_MESSAGES/django.po
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.601937 apidev-coop_cms-1.5.9/coop_cms/locale/fr/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.254045 apidev-coop_cms-1.5.9/coop_cms/locale/fr/LC_MESSAGES/
--rw-r--r--   0 lucjean    (501) staff       (20)    24224 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/locale/fr/LC_MESSAGES/django.mo
--rw-r--r--   0 lucjean    (501) staff       (20)    36263 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/locale/fr/LC_MESSAGES/django.po
--rw-r--r--   0 lucjean    (501) staff       (20)       92 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/logger.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.273642 apidev-coop_cms-1.5.9/coop_cms/management/
--rw-r--r--   0 lucjean    (501) staff       (20)       49 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/management/__init__.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.323366 apidev-coop_cms-1.5.9/coop_cms/management/commands/
--rw-r--r--   0 lucjean    (501) staff       (20)       46 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/management/commands/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)      415 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/management/commands/create_db_password.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1058 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/management/commands/create_newsletter_items.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1026 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/management/commands/migrate.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1753 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/management/commands/migrate_coop_cms_dump.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1620 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/management/commands/patch_alias_translation.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1413 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/management/commands/send_newsletter.py
--rw-r--r--   0 lucjean    (501) staff       (20)      728 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/middleware.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.432754 apidev-coop_cms-1.5.9/coop_cms/migrations/
--rw-r--r--   0 lucjean    (501) staff       (20)    16604 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/0001_initial.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1528 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/0002_auto_20160108_1628.py
--rw-r--r--   0 lucjean    (501) staff       (20)      885 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/0003_auto_20160204_1540.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1082 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/0004_auto_20160620_1310.py
--rw-r--r--   0 lucjean    (501) staff       (20)      495 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/0005_articlecategory_pagination_size.py
--rw-r--r--   0 lucjean    (501) staff       (20)      428 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/0006_image_copyright.py
--rw-r--r--   0 lucjean    (501) staff       (20)      425 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/0007_newsletter_newsletter_date.py
--rw-r--r--   0 lucjean    (501) staff       (20)      442 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/0008_alias_redirect_code.py
--rw-r--r--   0 lucjean    (501) staff       (20)      830 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/0009_auto_20170301_1621.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1068 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/0010_auto_20170320_1349.py
--rw-r--r--   0 lucjean    (501) staff       (20)      413 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/0011_auto_20170502_1124.py
--rw-r--r--   0 lucjean    (501) staff       (20)      830 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/0012_auto_20170502_1125.py
--rw-r--r--   0 lucjean    (501) staff       (20)      211 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/0013_auto_20170607_1508.py
--rw-r--r--   0 lucjean    (501) staff       (20)      353 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/0014_auto_20171006_1040.py
--rw-r--r--   0 lucjean    (501) staff       (20)     3508 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/0015_auto_20170608_1600.py
--rw-r--r--   0 lucjean    (501) staff       (20)      719 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/0016_auto_20190509_2158.py
--rw-r--r--   0 lucjean    (501) staff       (20)      600 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/0017_auto_20200124_1341.py
--rw-r--r--   0 lucjean    (501) staff       (20)      628 2020-12-09 08:44:02.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/0018_auto_20201209_0944.py
--rw-r--r--   0 lucjean    (501) staff       (20)        0 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/migrations/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)    53364 2020-12-09 08:39:01.000000 apidev-coop_cms-1.5.9/coop_cms/models.py
--rw-r--r--   0 lucjean    (501) staff       (20)     2246 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/moves.py
--rw-r--r--   0 lucjean    (501) staff       (20)      624 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/optionals.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1019 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/perms_backends.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1449 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/secrets.py
--rw-r--r--   0 lucjean    (501) staff       (20)    16466 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/settings.py
--rw-r--r--   0 lucjean    (501) staff       (20)     4386 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/shortcuts.py
--rw-r--r--   0 lucjean    (501) staff       (20)     3457 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/sitemap.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.605863 apidev-coop_cms-1.5.9/coop_cms/static/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.550981 apidev-coop_cms-1.5.9/coop_cms/static/chosen/
--rw-r--r--   0 lucjean    (501) staff       (20)     4621 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/chosen/chosen-bootstrap.css
--rwxr-xr-x   0 lucjean    (501) staff       (20)      646 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/chosen/chosen-sprite.png
--rwxr-xr-x   0 lucjean    (501) staff       (20)      872 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/chosen/chosen-sprite@2x.png
--rwxr-xr-x   0 lucjean    (501) staff       (20)    13586 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/chosen/chosen.css
--rwxr-xr-x   0 lucjean    (501) staff       (20)    40437 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/chosen/chosen.jquery.js
--rwxr-xr-x   0 lucjean    (501) staff       (20)    25688 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/chosen/chosen.jquery.min.js
--rwxr-xr-x   0 lucjean    (501) staff       (20)    11634 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/chosen/chosen.min.css
--rwxr-xr-x   0 lucjean    (501) staff       (20)    40895 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/chosen/chosen.proto.js
--rwxr-xr-x   0 lucjean    (501) staff       (20)    26064 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/chosen/chosen.proto.min.js
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.601933 apidev-coop_cms-1.5.9/coop_cms/static/css/
--rw-r--r--   0 lucjean    (501) staff       (20)       39 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/admin-tricks.css
--rw-r--r--   0 lucjean    (501) staff       (20)     1694 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/coop_cms.css
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.635493 apidev-coop_cms-1.5.9/coop_cms/static/css/images/
--rw-r--r--   0 lucjean    (501) staff       (20)      112 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/images/border.png
--rw-r--r--   0 lucjean    (501) staff       (20)     2893 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/images/controls.png
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.687471 apidev-coop_cms-1.5.9/coop_cms/static/css/images/ie6/
--rw-r--r--   0 lucjean    (501) staff       (20)      111 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/images/ie6/borderBottomCenter.png
--rw-r--r--   0 lucjean    (501) staff       (20)      215 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/images/ie6/borderBottomLeft.png
--rw-r--r--   0 lucjean    (501) staff       (20)      217 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/images/ie6/borderBottomRight.png
--rw-r--r--   0 lucjean    (501) staff       (20)      108 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/images/ie6/borderMiddleLeft.png
--rw-r--r--   0 lucjean    (501) staff       (20)      108 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/images/ie6/borderMiddleRight.png
--rw-r--r--   0 lucjean    (501) staff       (20)      111 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/images/ie6/borderTopCenter.png
--rw-r--r--   0 lucjean    (501) staff       (20)      216 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/images/ie6/borderTopLeft.png
--rw-r--r--   0 lucjean    (501) staff       (20)      214 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/images/ie6/borderTopRight.png
--rw-r--r--   0 lucjean    (501) staff       (20)     9427 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/images/loading.gif
--rw-r--r--   0 lucjean    (501) staff       (20)      157 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/images/loading_background.png
--rw-r--r--   0 lucjean    (501) staff       (20)      182 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/images/overlay.png
--rw-r--r--   0 lucjean    (501) staff       (20)     2986 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/mediatheque.css
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.694588 apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.741552 apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/
--rw-r--r--   0 lucjean    (501) staff       (20)      180 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/ui-bg_flat_0_aaaaaa_40x100.png
--rw-r--r--   0 lucjean    (501) staff       (20)      178 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/ui-bg_flat_75_ffffff_40x100.png
--rw-r--r--   0 lucjean    (501) staff       (20)      120 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/ui-bg_glass_55_fbf9ee_1x400.png
--rw-r--r--   0 lucjean    (501) staff       (20)      105 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/ui-bg_glass_65_ffffff_1x400.png
--rw-r--r--   0 lucjean    (501) staff       (20)      111 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/ui-bg_glass_75_dadada_1x400.png
--rw-r--r--   0 lucjean    (501) staff       (20)      110 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/ui-bg_glass_75_e6e6e6_1x400.png
--rw-r--r--   0 lucjean    (501) staff       (20)      119 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/ui-bg_glass_95_fef1ec_1x400.png
--rw-r--r--   0 lucjean    (501) staff       (20)      101 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/ui-bg_highlight-soft_75_cccccc_1x100.png
--rw-r--r--   0 lucjean    (501) staff       (20)     4369 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/ui-icons_222222_256x240.png
--rw-r--r--   0 lucjean    (501) staff       (20)     4369 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/ui-icons_2e83ff_256x240.png
--rw-r--r--   0 lucjean    (501) staff       (20)     4369 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/ui-icons_454545_256x240.png
--rw-r--r--   0 lucjean    (501) staff       (20)     4369 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/ui-icons_888888_256x240.png
--rw-r--r--   0 lucjean    (501) staff       (20)     4369 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/ui-icons_cd0a0a_256x240.png
--rw-r--r--   0 lucjean    (501) staff       (20)    33378 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/jquery-ui-1.8.14.custom.css
--rw-r--r--   0 lucjean    (501) staff       (20)     2108 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/css/tree.css
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.780340 apidev-coop_cms-1.5.9/coop_cms/static/img/
--rwxr-xr-x   0 lucjean    (501) staff       (20)      473 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/cross.png
--rw-r--r--   0 lucjean    (501) staff       (20)     1109 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/default-logo.png
--rw-r--r--   0 lucjean    (501) staff       (20)      382 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/facebook.png
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.604117 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:45.971773 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/
--rw-r--r--   0 lucjean    (501) staff       (20)     6066 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/avi.png
--rw-r--r--   0 lucjean    (501) staff       (20)     4896 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/default.png
--rw-r--r--   0 lucjean    (501) staff       (20)     5573 2020-12-03 20:27:51.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/doc.png
--rw-r--r--   0 lucjean    (501) staff       (20)     5573 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/docx.png
--rw-r--r--   0 lucjean    (501) staff       (20)     5634 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/gif.png
--rw-r--r--   0 lucjean    (501) staff       (20)     5958 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/html.png
--rw-r--r--   0 lucjean    (501) staff       (20)     5634 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/jpg.png
--rw-r--r--   0 lucjean    (501) staff       (20)     6066 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/mov.png
--rw-r--r--   0 lucjean    (501) staff       (20)     5789 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/mp3.png
--rw-r--r--   0 lucjean    (501) staff       (20)     6066 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/mp4.png
--rw-r--r--   0 lucjean    (501) staff       (20)     5789 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/ogg.png
--rw-r--r--   0 lucjean    (501) staff       (20)     5598 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/pdf.png
--rw-r--r--   0 lucjean    (501) staff       (20)     5634 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/png.png
--rw-r--r--   0 lucjean    (501) staff       (20)     5507 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/pps.png
--rw-r--r--   0 lucjean    (501) staff       (20)     5507 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/ppt.png
--rw-r--r--   0 lucjean    (501) staff       (20)     5573 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/rtf.png
--rw-r--r--   0 lucjean    (501) staff       (20)     5625 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/xls.png
--rw-r--r--   0 lucjean    (501) staff       (20)     5625 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/xlsx.png
--rw-r--r--   0 lucjean    (501) staff       (20)     6155 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/zip.png
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:46.191490 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/
--rw-r--r--   0 lucjean    (501) staff       (20)     2269 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/avi.png
--rwxr-xr-x   0 lucjean    (501) staff       (20)      621 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/default.png
--rwxr-xr-x   0 lucjean    (501) staff       (20)     1237 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/doc.png
--rwxr-xr-x   0 lucjean    (501) staff       (20)     1237 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/docx.png
--rwxr-xr-x   0 lucjean    (501) staff       (20)     1548 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/gif.png
--rwxr-xr-x   0 lucjean    (501) staff       (20)     2154 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/html.png
--rwxr-xr-x   0 lucjean    (501) staff       (20)     1548 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/jpg.png
--rw-r--r--   0 lucjean    (501) staff       (20)     2269 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/mov.png
--rwxr-xr-x   0 lucjean    (501) staff       (20)     1378 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/mp3.png
--rw-r--r--   0 lucjean    (501) staff       (20)     2269 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/mp4.png
--rwxr-xr-x   0 lucjean    (501) staff       (20)     1378 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/ogg.png
--rwxr-xr-x   0 lucjean    (501) staff       (20)     1294 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/pdf.png
--rwxr-xr-x   0 lucjean    (501) staff       (20)     1548 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/png.png
--rwxr-xr-x   0 lucjean    (501) staff       (20)     1142 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/pps.png
--rwxr-xr-x   0 lucjean    (501) staff       (20)     1142 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/ppt.png
--rwxr-xr-x   0 lucjean    (501) staff       (20)     1237 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/rtf.png
--rw-r--r--   0 lucjean    (501) staff       (20)      621 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/txt.png
--rwxr-xr-x   0 lucjean    (501) staff       (20)     1270 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/xls.png
--rwxr-xr-x   0 lucjean    (501) staff       (20)     1270 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/xlsx.png
--rwxr-xr-x   0 lucjean    (501) staff       (20)     1746 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/zip.png
--rw-r--r--   0 lucjean    (501) staff       (20)     2025 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/gplus.png
--rw-r--r--   0 lucjean    (501) staff       (20)     3343 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/in_nav.png
--rw-r--r--   0 lucjean    (501) staff       (20)     3272 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/out_nav.png
--rw-r--r--   0 lucjean    (501) staff       (20)     1221 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/img/twitter.png
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:46.666434 apidev-coop_cms-1.5.9/coop_cms/static/js/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:46.712401 apidev-coop_cms-1.5.9/coop_cms/static/js/_lib/
--rw-r--r--   0 lucjean    (501) staff       (20)     4246 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/_lib/jquery.cookie.js
--rw-r--r--   0 lucjean    (501) staff       (20)     3080 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/_lib/jquery.hotkeys.js
--rw-r--r--   0 lucjean    (501) staff       (20)    91341 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/_lib/jquery.js
--rw-r--r--   0 lucjean    (501) staff       (20)   284393 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-1.11.3.js
--rw-r--r--   0 lucjean    (501) staff       (20)    95956 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-1.11.3.min.js
--rw-r--r--   0 lucjean    (501) staff       (20)    93867 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-1.7.1.min.js
--rw-r--r--   0 lucjean    (501) staff       (20)   266057 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-1.8.3.js
--rw-r--r--   0 lucjean    (501) staff       (20)    93636 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-1.8.3.min.js
--rw-r--r--   0 lucjean    (501) staff       (20)   280364 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-3.4.1.js
--rw-r--r--   0 lucjean    (501) staff       (20)     1589 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-ajax-csrf.js
--rw-r--r--   0 lucjean    (501) staff       (20)    16620 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-migrate-1.2.1.js
--rw-r--r--   0 lucjean    (501) staff       (20)     7199 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-migrate-1.2.1.min.js
--rw-r--r--   0 lucjean    (501) staff       (20)   210246 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-ui-1.8.14.custom.min.js
--rw-r--r--   0 lucjean    (501) staff       (20)   180213 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/jquery.jstree.js
--rw-r--r--   0 lucjean    (501) staff       (20)     6956 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/jquery.pageslide.js
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.605703 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:46.814623 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/apple/
--rw-r--r--   0 lucjean    (501) staff       (20)      331 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/apple/bg.jpg
--rw-r--r--   0 lucjean    (501) staff       (20)     7765 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/apple/d.png
--rw-r--r--   0 lucjean    (501) staff       (20)       43 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/apple/dot_for_ie.gif
--rw-r--r--   0 lucjean    (501) staff       (20)     3987 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/apple/style.css
--rw-r--r--   0 lucjean    (501) staff       (20)     1849 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/apple/throbber.gif
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:46.855646 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/classic/
--rw-r--r--   0 lucjean    (501) staff       (20)     3003 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/classic/d.gif
--rw-r--r--   0 lucjean    (501) staff       (20)     7535 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/classic/d.png
--rw-r--r--   0 lucjean    (501) staff       (20)       43 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/classic/dot_for_ie.gif
--rw-r--r--   0 lucjean    (501) staff       (20)     4997 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/classic/style.css
--rw-r--r--   0 lucjean    (501) staff       (20)     1849 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/classic/throbber.gif
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:46.905493 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default/
--rw-r--r--   0 lucjean    (501) staff       (20)     2944 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default/d.gif
--rw-r--r--   0 lucjean    (501) staff       (20)     7635 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default/d.png
--rw-r--r--   0 lucjean    (501) staff       (20)     4723 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default/style.css
--rw-r--r--   0 lucjean    (501) staff       (20)     1849 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default/throbber.gif
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:46.950318 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default-rtl/
--rw-r--r--   0 lucjean    (501) staff       (20)     2872 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default-rtl/d.gif
--rw-r--r--   0 lucjean    (501) staff       (20)     7459 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default-rtl/d.png
--rw-r--r--   0 lucjean    (501) staff       (20)      132 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default-rtl/dots.gif
--rw-r--r--   0 lucjean    (501) staff       (20)     5811 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default-rtl/style.css
--rw-r--r--   0 lucjean    (501) staff       (20)     1849 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default-rtl/throbber.gif
--rw-r--r--   0 lucjean    (501) staff       (20)     1340 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/js/utils.coop.js
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:46.970107 apidev-coop_cms-1.5.9/coop_cms/static/slickmap/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:47.119001 apidev-coop_cms-1.5.9/coop_cms/static/slickmap/images/
--rw-r--r--   0 lucjean    (501) staff       (20)      300 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/slickmap/images/L1-center.png
--rw-r--r--   0 lucjean    (501) staff       (20)      305 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/slickmap/images/L1-left.png
--rw-r--r--   0 lucjean    (501) staff       (20)      295 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/slickmap/images/L1-right.png
--rw-r--r--   0 lucjean    (501) staff       (20)      353 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/slickmap/images/L3-bottom.png
--rw-r--r--   0 lucjean    (501) staff       (20)      326 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/slickmap/images/L3-center.png
--rw-r--r--   0 lucjean    (501) staff       (20)     3019 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/slickmap/images/L3-li-top.png
--rw-r--r--   0 lucjean    (501) staff       (20)      201 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/slickmap/images/L3-ul-top.png
--rw-r--r--   0 lucjean    (501) staff       (20)      152 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/slickmap/images/vertical-line.png
--rw-r--r--   0 lucjean    (501) staff       (20)      189 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/slickmap/images/white-highlight.png
--rw-r--r--   0 lucjean    (501) staff       (20)     5235 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/static/slickmap/slickmap.css
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.607769 apidev-coop_cms-1.5.9/coop_cms/templates/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.606375 apidev-coop_cms-1.5.9/coop_cms/templates/admin/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:43.606615 apidev-coop_cms-1.5.9/coop_cms/templates/admin/coop_cms/
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:47.127529 apidev-coop_cms-1.5.9/coop_cms/templates/admin/coop_cms/navnode/
--rw-r--r--   0 lucjean    (501) staff       (20)      782 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/admin/coop_cms/navnode/change_form.html
--rw-r--r--   0 lucjean    (501) staff       (20)      282 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/admin/coop_cms/navnode/change_list.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:47.133181 apidev-coop_cms-1.5.9/coop_cms/templates/admin/coop_cms/navtree/
--rw-r--r--   0 lucjean    (501) staff       (20)    12274 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/admin/coop_cms/navtree/change_form.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:47.160643 apidev-coop_cms-1.5.9/coop_cms/templates/bs/
--rw-r--r--   0 lucjean    (501) staff       (20)      676 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/bs/form_fields.html
--rw-r--r--   0 lucjean    (501) staff       (20)      718 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/bs/horizontal_form_fields.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:47.574000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/
--rw-r--r--   0 lucjean    (501) staff       (20)     1149 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_accept_cookies_message.html
--rw-r--r--   0 lucjean    (501) staff       (20)      210 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_article_form.html
--rw-r--r--   0 lucjean    (501) staff       (20)      570 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_article_publication.html
--rw-r--r--   0 lucjean    (501) staff       (20)      494 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_change_language.html
--rw-r--r--   0 lucjean    (501) staff       (20)     4137 2020-12-09 08:33:23.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_coop_bar_js.html
--rw-r--r--   0 lucjean    (501) staff       (20)      886 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_csrf_failure_message.html
--rw-r--r--   0 lucjean    (501) staff       (20)      532 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_facebook_like.html
--rw-r--r--   0 lucjean    (501) staff       (20)      150 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_field.html
--rw-r--r--   0 lucjean    (501) staff       (20)      124 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_form_error.html
--rw-r--r--   0 lucjean    (501) staff       (20)     1204 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_js_includes.html
--rw-r--r--   0 lucjean    (501) staff       (20)      544 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_messages.html
--rw-r--r--   0 lucjean    (501) staff       (20)      439 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_newsletter_articles.html
--rw-r--r--   0 lucjean    (501) staff       (20)      854 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_newsletter_categories.html
--rw-r--r--   0 lucjean    (501) staff       (20)      354 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_newsletter_categories_index.html
--rw-r--r--   0 lucjean    (501) staff       (20)     2115 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_pagination.html
--rw-r--r--   0 lucjean    (501) staff       (20)      975 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_pagination_js.html
--rw-r--r--   0 lucjean    (501) staff       (20)     1181 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_social_share.html
--rw-r--r--   0 lucjean    (501) staff       (20)      382 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/article.html
--rw-r--r--   0 lucjean    (501) staff       (20)      111 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/article_list.html
--rw-r--r--   0 lucjean    (501) staff       (20)      498 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/article_list_item.html
--rw-r--r--   0 lucjean    (501) staff       (20)      449 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/articles_category.html
--rw-r--r--   0 lucjean    (501) staff       (20)       26 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/base.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:47.577944 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/categories/
--rw-r--r--   0 lucjean    (501) staff       (20)      520 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/categories/only-for-unit-testing.html
--rw-r--r--   0 lucjean    (501) staff       (20)      275 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/csrf_403.html
--rw-r--r--   0 lucjean    (501) staff       (20)      234 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/dropdown_li.html
--rw-r--r--   0 lucjean    (501) staff       (20)       54 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/dropdown_li_class.html
--rw-r--r--   0 lucjean    (501) staff       (20)       97 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/dropdown_ul.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:47.659618 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/medialib/
--rw-r--r--   0 lucjean    (501) staff       (20)     3793 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/medialib/slide_base.html
--rw-r--r--   0 lucjean    (501) staff       (20)      506 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/medialib/slide_docs_content.html
--rw-r--r--   0 lucjean    (501) staff       (20)     1155 2020-12-09 08:40:53.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/medialib/slide_images_content.html
--rw-r--r--   0 lucjean    (501) staff       (20)     1286 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/medialib/slide_photologue_content.html
--rw-r--r--   0 lucjean    (501) staff       (20)      538 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/navigation_node.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:47.709512 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/navtree_content/
--rw-r--r--   0 lucjean    (501) staff       (20)      502 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/navtree_content/article.html
--rw-r--r--   0 lucjean    (501) staff       (20)      958 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/navtree_content/default.html
--rw-r--r--   0 lucjean    (501) staff       (20)     2546 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/newsletter.html
--rw-r--r--   0 lucjean    (501) staff       (20)     2090 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/newsletter_base.html
--rw-r--r--   0 lucjean    (501) staff       (20)     1149 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_add_fragment.html
--rw-r--r--   0 lucjean    (501) staff       (20)      299 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_article_settings.html
--rw-r--r--   0 lucjean    (501) staff       (20)      234 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_change_newsletter_template.html
--rw-r--r--   0 lucjean    (501) staff       (20)      217 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_change_template.html
--rw-r--r--   0 lucjean    (501) staff       (20)     2612 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_edit_fragments.html
--rw-r--r--   0 lucjean    (501) staff       (20)      278 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_new_article.html
--rw-r--r--   0 lucjean    (501) staff       (20)      180 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_new_link.html
--rw-r--r--   0 lucjean    (501) staff       (20)      494 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_newsletter_settings.html
--rw-r--r--   0 lucjean    (501) staff       (20)      946 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_publish_article.html
--rw-r--r--   0 lucjean    (501) staff       (20)      232 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_schedule_newsletter_sending.html
--rw-r--r--   0 lucjean    (501) staff       (20)      184 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_set_homepage.html
--rw-r--r--   0 lucjean    (501) staff       (20)      200 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_swicth_language.html
--rw-r--r--   0 lucjean    (501) staff       (20)      400 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_test_newsletter.html
--rw-r--r--   0 lucjean    (501) staff       (20)      205 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_update_logo.html
--rw-r--r--   0 lucjean    (501) staff       (20)      239 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_upload_doc.html
--rw-r--r--   0 lucjean    (501) staff       (20)      238 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_upload_image.html
--rw-r--r--   0 lucjean    (501) staff       (20)       45 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/test_li.html
--rw-r--r--   0 lucjean    (501) staff       (20)     2570 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/view_all_articles.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:47.744408 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/widgets/
--rw-r--r--   0 lucjean    (501) staff       (20)        0 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/widgets/_imageedit_cssclass.html
--rw-r--r--   0 lucjean    (501) staff       (20)      507 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/widgets/chosen.html
--rw-r--r--   0 lucjean    (501) staff       (20)      170 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/widgets/imageedit.html
--rw-r--r--   0 lucjean    (501) staff       (20)      195 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/widgets/readonlyinput.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:48.154646 apidev-coop_cms-1.5.9/coop_cms/templates/test/
--rw-r--r--   0 lucjean    (501) staff       (20)       14 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/_accept_cookies_message.html
--rw-r--r--   0 lucjean    (501) staff       (20)      233 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/_fragment.html
--rw-r--r--   0 lucjean    (501) staff       (20)       54 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/article.html
--rw-r--r--   0 lucjean    (501) staff       (20)      460 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/article_li_node.html
--rw-r--r--   0 lucjean    (501) staff       (20)      316 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/article_no_logo_size.html
--rw-r--r--   0 lucjean    (501) staff       (20)      443 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/article_with_blocks.html
--rw-r--r--   0 lucjean    (501) staff       (20)      354 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/article_with_blocks_parent.html
--rw-r--r--   0 lucjean    (501) staff       (20)      495 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/article_with_fragments.html
--rw-r--r--   0 lucjean    (501) staff       (20)      539 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/article_with_fragments_extra_id.html
--rw-r--r--   0 lucjean    (501) staff       (20)      564 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/article_with_fragments_template.html
--rw-r--r--   0 lucjean    (501) staff       (20)      334 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/article_with_logo_size.html
--rw-r--r--   0 lucjean    (501) staff       (20)      350 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/article_with_logo_size_and_crop.html
--rw-r--r--   0 lucjean    (501) staff       (20)     2082 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/base.html
--rw-r--r--   0 lucjean    (501) staff       (20)      378 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/base_article.html
--rw-r--r--   0 lucjean    (501) staff       (20)     1035 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/carousel.html
--rw-r--r--   0 lucjean    (501) staff       (20)      173 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/nav_tag_in_edit_tag.html
--rw-r--r--   0 lucjean    (501) staff       (20)      645 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/navigation_li_node.html
--rw-r--r--   0 lucjean    (501) staff       (20)      575 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/navigation_node.html
--rw-r--r--   0 lucjean    (501) staff       (20)      147 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/newsletter_blue.html
--rw-r--r--   0 lucjean    (501) staff       (20)      483 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/newsletter_red.html
--rw-r--r--   0 lucjean    (501) staff       (20)      394 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/standard.html
--rw-r--r--   0 lucjean    (501) staff       (20)      148 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templates/test/test_send_email.html
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:48.230284 apidev-coop_cms-1.5.9/coop_cms/templatetags/
--rw-r--r--   0 lucjean    (501) staff       (20)       43 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templatetags/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)     2240 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templatetags/article_tags.py
--rw-r--r--   0 lucjean    (501) staff       (20)    21085 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templatetags/coop_edition.py
--rw-r--r--   0 lucjean    (501) staff       (20)     7267 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templatetags/coop_navigation.py
--rw-r--r--   0 lucjean    (501) staff       (20)    16218 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/templatetags/coop_utils.py
--rw-r--r--   0 lucjean    (501) staff       (20)      404 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/test_runners.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:48.537608 apidev-coop_cms-1.5.9/coop_cms/tests/
--rw-r--r--   0 lucjean    (501) staff       (20)     6220 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/__init__.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:48.546926 apidev-coop_cms-1.5.9/coop_cms/tests/fixtures/
--rw-r--r--   0 lucjean    (501) staff       (20)      221 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/fixtures/unittest1.png
--rw-r--r--   0 lucjean    (501) staff       (20)       60 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/fixtures/unittest1.txt
--rw-r--r--   0 lucjean    (501) staff       (20)      215 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/fixtures/unittest2.png
--rw-r--r--   0 lucjean    (501) staff       (20)     3819 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_admin.py
--rw-r--r--   0 lucjean    (501) staff       (20)     8464 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_alias.py
--rw-r--r--   0 lucjean    (501) staff       (20)    36138 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_articles.py
--rw-r--r--   0 lucjean    (501) staff       (20)     4540 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_cache.py
--rw-r--r--   0 lucjean    (501) staff       (20)    12639 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_categories.py
--rw-r--r--   0 lucjean    (501) staff       (20)     8794 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_edition.py
--rw-r--r--   0 lucjean    (501) staff       (20)    63490 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_fragments.py
--rw-r--r--   0 lucjean    (501) staff       (20)      787 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_generic_views.py
--rw-r--r--   0 lucjean    (501) staff       (20)    33420 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_homepage.py
--rw-r--r--   0 lucjean    (501) staff       (20)     7811 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_link.py
--rw-r--r--   0 lucjean    (501) staff       (20)    23585 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_localization.py
--rw-r--r--   0 lucjean    (501) staff       (20)    41175 2020-12-09 08:53:21.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_media.py
--rw-r--r--   0 lucjean    (501) staff       (20)      657 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_middleware.py
--rw-r--r--   0 lucjean    (501) staff       (20)     8992 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_multisites.py
--rw-r--r--   0 lucjean    (501) staff       (20)    64755 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_navigation.py
--rw-r--r--   0 lucjean    (501) staff       (20)    64532 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_newsletter.py
--rw-r--r--   0 lucjean    (501) staff       (20)     2194 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_permissions.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1390 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_settings.py
--rw-r--r--   0 lucjean    (501) staff       (20)     8230 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_sitemap.py
--rw-r--r--   0 lucjean    (501) staff       (20)     5075 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_slugs.py
--rw-r--r--   0 lucjean    (501) staff       (20)     3075 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_special_pages.py
--rw-r--r--   0 lucjean    (501) staff       (20)     2834 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_templates.py
--rw-r--r--   0 lucjean    (501) staff       (20)    22142 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_templatetags.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1947 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/tests/test_utils.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1022 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/thumbnail_backend.py
--rw-r--r--   0 lucjean    (501) staff       (20)     2946 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/translation.py
--rw-r--r--   0 lucjean    (501) staff       (20)     5457 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/urls.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:48.702157 apidev-coop_cms-1.5.9/coop_cms/utils/
--rw-r--r--   0 lucjean    (501) staff       (20)      543 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/utils/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)     5868 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/utils/emails.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1839 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/utils/i18n.py
--rw-r--r--   0 lucjean    (501) staff       (20)      969 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/utils/loaders.py
--rw-r--r--   0 lucjean    (501) staff       (20)      658 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/utils/pagination.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1590 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/utils/requests.py
--rw-r--r--   0 lucjean    (501) staff       (20)      261 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/utils/settings.py
--rw-r--r--   0 lucjean    (501) staff       (20)     2525 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/utils/text.py
--rw-r--r--   0 lucjean    (501) staff       (20)     2174 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/utils/xsendfile.py
-drwxr-xr-x   0 lucjean    (501) staff       (20)        0 2020-12-10 07:20:48.904711 apidev-coop_cms-1.5.9/coop_cms/views/
--rw-r--r--   0 lucjean    (501) staff       (20)       24 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/views/__init__.py
--rw-r--r--   0 lucjean    (501) staff       (20)    11802 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/views/articles.py
--rw-r--r--   0 lucjean    (501) staff       (20)     2283 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/views/fragments.py
--rw-r--r--   0 lucjean    (501) staff       (20)     2332 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/views/homepage.py
--rw-r--r--   0 lucjean    (501) staff       (20)     1553 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/views/links.py
--rw-r--r--   0 lucjean    (501) staff       (20)     7266 2020-12-09 08:47:55.000000 apidev-coop_cms-1.5.9/coop_cms/views/medialib.py
--rw-r--r--   0 lucjean    (501) staff       (20)    13223 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/views/navigation.py
--rw-r--r--   0 lucjean    (501) staff       (20)     8280 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/views/newsletters.py
--rw-r--r--   0 lucjean    (501) staff       (20)     4969 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/views/webutils.py
--rw-r--r--   0 lucjean    (501) staff       (20)     5770 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/coop_cms/widgets.py
--rw-r--r--   0 lucjean    (501) staff       (20)       38 2020-12-10 07:20:48.922067 apidev-coop_cms-1.5.9/setup.cfg
--rw-r--r--   0 lucjean    (501) staff       (20)     1721 2020-12-03 20:27:52.000000 apidev-coop_cms-1.5.9/setup.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:06.000368 apidev-coop_cms-1.6.0/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      162 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/MANIFEST.in
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    11162 2023-06-12 12:56:06.000368 apidev-coop_cms-1.6.0/PKG-INFO
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    10336 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/README.rst
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.916367 apidev-coop_cms-1.6.0/apidev_coop_cms.egg-info/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    11162 2023-06-12 12:56:05.000000 apidev-coop_cms-1.6.0/apidev_coop_cms.egg-info/PKG-INFO
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    23840 2023-06-12 12:56:05.000000 apidev-coop_cms-1.6.0/apidev_coop_cms.egg-info/SOURCES.txt
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)        1 2023-06-12 12:56:05.000000 apidev-coop_cms-1.6.0/apidev_coop_cms.egg-info/dependency_links.txt
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)        1 2023-05-22 10:26:48.000000 apidev-coop_cms-1.6.0/apidev_coop_cms.egg-info/not-zip-safe
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      177 2023-06-12 12:56:05.000000 apidev-coop_cms-1.6.0/apidev_coop_cms.egg-info/requires.txt
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)        9 2023-06-12 12:56:05.000000 apidev-coop_cms-1.6.0/apidev_coop_cms.egg-info/top_level.txt
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.920367 apidev-coop_cms-1.6.0/coop_cms/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      327 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     9252 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/admin.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.920367 apidev-coop_cms-1.6.0/coop_cms/apps/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      208 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/__init__.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.920367 apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      155 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      206 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/apps.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.920367 apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/migrations/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     3722 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/migrations/0001_initial.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      478 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/migrations/0002_auto_20150924_1433.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      680 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/migrations/0003_auto_20160129_1524.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      470 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/migrations/0004_auto_20161031_1401.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2092 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/migrations/0005_auto_20190719_1408.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)        0 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/migrations/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      411 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/models.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.908367 apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/templates/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.908367 apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/templates/admin/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.908367 apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/templates/admin/basic_cms/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.920367 apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/templates/admin/basic_cms/navtree/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       55 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/templates/admin/basic_cms/navtree/change_form.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       54 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/tests.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      427 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/translation.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.920367 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      164 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      257 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/apps.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      378 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/forms.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.908367 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.908367 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.924367 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/css/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    22608 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/css/bootstrap-theme.css
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    19963 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/css/bootstrap-theme.min.css
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)   141622 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/css/bootstrap.css
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)   117305 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/css/bootstrap.min.css
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.924367 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/fonts/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    20127 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/fonts/glyphicons-halflings-regular.eot
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)   108738 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/fonts/glyphicons-halflings-regular.svg
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    45404 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/fonts/glyphicons-halflings-regular.ttf
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    23424 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/fonts/glyphicons-halflings-regular.woff
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.924367 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/js/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    67546 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/js/bootstrap.js
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    35951 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/js/bootstrap.min.js
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      484 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/js/npm.js
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.908367 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.924367 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/coop_bootstrap/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1035 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/coop_bootstrap/carousel.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1874 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/coop_bootstrap/form.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1257 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/coop_bootstrap/headline_carousel.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      642 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/coop_bootstrap/li_node.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.924367 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/coop_cms/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      851 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/coop_cms/article_list_item.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       43 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/coop_cms/navigation_node.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.928367 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/coop_cms/widgets/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       15 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/coop_cms/widgets/_imageedit_cssclass.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       52 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/coop_cms/widgets/_img_logo.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.928367 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/pagination/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      998 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/pagination/pagination.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.928367 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templatetags/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       53 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templatetags/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      723 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templatetags/coop_bs.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.928367 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      434 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      481 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/admin.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      186 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/apps.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      978 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/coop_cms_settings.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1238 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/forms.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.928367 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/migrations/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     3603 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/migrations/0001_initial.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)        0 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/migrations/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1462 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/models.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      841 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/my_coop_bar.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.908367 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/static/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.928367 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/static/css/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4845 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/static/css/demo-style.css
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.928367 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/static/js/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1931 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/static/js/jquery.sortElements.js
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.928367 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/templates/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      340 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/templates/404.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      689 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/templates/500.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1144 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/templates/base.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      195 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/templates/basic_newsletter.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      964 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/templates/blog.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      185 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/templates/homepage.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1522 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/templates/sortable_newsletter.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      499 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/templates/special_newsletter.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      824 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/templates/standard.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      390 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/templates/standard_en.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4984 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/tests.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.932367 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      158 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      411 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/admin.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      218 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/apps.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1448 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/auth_backends.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     3462 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/forms.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.932367 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/management/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       23 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/management/__init__.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.932367 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/management/commands/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       23 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/management/commands/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      707 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/management/commands/invalidate_passwords.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.932367 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/migrations/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      732 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/migrations/0001_initial.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       24 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/migrations/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      430 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/models.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.932367 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/registration_backend/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       24 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/registration_backend/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1084 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/registration_backend/forms.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1247 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/registration_backend/urls.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2362 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/registration_backend/views.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.912367 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/templates/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.932367 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/templates/email_auth/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       85 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/templates/email_auth/activation_notification.txt
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       73 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/templates/email_auth/registration_notification.txt
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    25018 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/tests.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      924 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/urls.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.936367 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       89 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1709 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/admin.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      216 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/apps.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      811 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/coop_bar_cfg.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.936367 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/files/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      178 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/files/email-tracking.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      342 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/forms.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.936367 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/management/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       24 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/management/__init__.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.936367 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/management/commands/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       24 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/management/commands/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1459 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/management/commands/send_newsletters.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.936367 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/migrations/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     6018 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/migrations/0001_initial.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)        0 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/migrations/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     6393 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/models.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      552 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/settings.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.912367 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.936367 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/newsletters/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      871 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/newsletters/_link_bar.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       47 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/newsletters/_linkbar_link_style.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       72 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/newsletters/_linkbar_style.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      410 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/newsletters/newsletter.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.936367 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/newsletters/public/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      846 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/newsletters/public/base.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       86 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/newsletters/public/base_custom.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      489 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/newsletters/public/unregister_confirm.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      483 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/newsletters/public/unregister_done.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.936367 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/test/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      850 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/test/newsletter_contact.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      302 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/test/newsletter_contact_lang.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      706 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/test/newsletter_no_link.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.936367 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templatetags/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       24 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templatetags/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      707 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templatetags/newsletters_utils.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.940367 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/tests/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       24 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/tests/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2525 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/tests/test_customize_content.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      949 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/tests/test_magic_links.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     3913 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/tests/test_max_length.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      655 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/tests/test_newsletter.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    23608 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/tests/test_sending.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     6672 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/tests/test_tracking.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5453 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/tests/test_unregister.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     8041 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/tests/test_view_online.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      863 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/urls.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     9219 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/utils.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4202 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/views.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.940367 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      146 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1516 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/admin.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      214 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/apps.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      931 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/forms.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.912367 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/locale/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.912367 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/locale/en/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.940367 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/locale/en/LC_MESSAGES/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      380 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/locale/en/LC_MESSAGES/django.mo
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1936 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/locale/en/LC_MESSAGES/django.po
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.912367 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/locale/fr/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.940367 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/locale/fr/LC_MESSAGES/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1375 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/locale/fr/LC_MESSAGES/django.mo
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2263 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/locale/fr/LC_MESSAGES/django.po
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.940367 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/management/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       51 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/management/__init__.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.940367 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/management/commands/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       49 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/management/commands/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      356 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/management/commands/collect_rss.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.940367 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/migrations/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1861 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/migrations/0001_initial.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)        0 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/migrations/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1351 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/models.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.912367 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/static/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.912367 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/static/css/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.940367 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/static/css/rss_sync/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       93 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/static/css/rss_sync/admin-cust.css
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     7462 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/tests.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      333 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/urls.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2272 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/utils.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1823 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/views.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1983 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/widgets.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.944367 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      160 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      177 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/admin.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      220 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/apps.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1084 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/forms.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.944367 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/migrations/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1278 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/migrations/0001_initial.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)        0 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/migrations/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1458 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/models.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.912367 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/templates/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.912367 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/templates/coop_cms/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.944367 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/templates/coop_cms/test_app/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      600 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/templates/coop_cms/test_app/base.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      674 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/templates/coop_cms/test_app/custom_tag_template.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      887 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/templates/coop_cms/test_app/detail.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      387 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/templates/coop_cms/test_app/formset.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      217 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/templates/coop_cms/test_app/list.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.944367 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/templatetags/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       23 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/templatetags/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      358 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/templatetags/coop_unit_test.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    32394 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/tests.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      617 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/urls.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1017 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/apps/test_app/views.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1598 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/bs_forms.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.912367 apidev-coop_cms-1.6.0/coop_cms/ci/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.944367 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.912367 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/locale/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.912367 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/locale/en/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.944367 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/locale/en/LC_MESSAGES/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      380 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/locale/en/LC_MESSAGES/django.mo
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5293 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/locale/en/LC_MESSAGES/django.po
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.912367 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/locale/fr/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.944367 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/locale/fr/LC_MESSAGES/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      379 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/locale/fr/LC_MESSAGES/django.mo
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5293 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/locale/fr/LC_MESSAGES/django.po
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.944367 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/public/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)        0 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/public/dummy.txt
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       74 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/requirements.txt
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.944367 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/static/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)        0 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/static/dummy.js
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.944367 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      252 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/_field.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2082 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/base.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.948367 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/django_registration/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      146 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/django_registration/activate.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      345 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/django_registration/activation_complete.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      488 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/django_registration/activation_email_body.txt
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       59 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/django_registration/activation_email_subject.txt
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      276 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/django_registration/registration_complete.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1377 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/django_registration/registration_form.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.948367 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/registration/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      136 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/registration/base.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      478 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/registration/logged_out.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1107 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/registration/login.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       46 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/registration/logout.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      268 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/registration/password_change_done.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      386 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/registration/password_change_form.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      250 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/registration/password_reset_complete.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      424 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/registration/password_reset_confirm.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      237 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/registration/password_reset_done.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      500 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/registration/password_reset_form.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      393 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/standard.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      675 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/context_processors.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    16929 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/coop_bar_cfg.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       79 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/exceptions.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      658 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/feeds.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.948367 apidev-coop_cms-1.6.0/coop_cms/forms/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      426 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/forms/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     8180 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/forms/articles.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1019 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/forms/base.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4528 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/forms/content.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      360 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/forms/fields.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4586 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/forms/fragments.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     3702 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/forms/navigation.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     7234 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/forms/newsletters.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      365 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/forms/webutils.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    12471 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/generic_views.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.912367 apidev-coop_cms-1.6.0/coop_cms/locale/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.912367 apidev-coop_cms-1.6.0/coop_cms/locale/en/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.948367 apidev-coop_cms-1.6.0/coop_cms/locale/en/LC_MESSAGES/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      337 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/locale/en/LC_MESSAGES/django.mo
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    26559 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/locale/en/LC_MESSAGES/django.po
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.912367 apidev-coop_cms-1.6.0/coop_cms/locale/fr/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.948367 apidev-coop_cms-1.6.0/coop_cms/locale/fr/LC_MESSAGES/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    24224 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/locale/fr/LC_MESSAGES/django.mo
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    36263 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/locale/fr/LC_MESSAGES/django.po
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       92 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/logger.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.952367 apidev-coop_cms-1.6.0/coop_cms/management/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       49 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/management/__init__.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.952367 apidev-coop_cms-1.6.0/coop_cms/management/commands/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       46 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/management/commands/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      409 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/management/commands/create_db_password.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1046 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/management/commands/create_newsletter_items.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1013 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/management/commands/migrate.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1753 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/management/commands/migrate_coop_cms_dump.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1608 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/management/commands/patch_alias_translation.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1401 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/management/commands/send_newsletter.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      712 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/middleware.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.956367 apidev-coop_cms-1.6.0/coop_cms/migrations/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    16604 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0001_initial.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1528 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0002_auto_20160108_1628.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      885 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0003_auto_20160204_1540.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1079 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0004_auto_20160620_1310.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      495 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0005_articlecategory_pagination_size.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      428 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0006_image_copyright.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      425 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0007_newsletter_newsletter_date.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      442 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0008_alias_redirect_code.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      830 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0009_auto_20170301_1621.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1068 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0010_auto_20170320_1349.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      413 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0011_auto_20170502_1124.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      830 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0012_auto_20170502_1125.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      211 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0013_auto_20170607_1508.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      353 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0014_auto_20171006_1040.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     3508 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0015_auto_20170608_1600.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      719 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0016_auto_20190509_2158.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      600 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0017_auto_20200124_1341.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      628 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0018_auto_20201209_0944.py
+-rw-r--r--   0 lucjean   (1001) lucjean   (1001)      455 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/0019_alter_navtree_types.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)        0 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/migrations/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    53670 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/models.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1302 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/moves.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      625 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/optionals.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1020 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/perms_backends.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1449 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/secrets.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    16681 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/settings.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4362 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/shortcuts.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     3418 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/sitemap.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.916367 apidev-coop_cms-1.6.0/coop_cms/static/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.956367 apidev-coop_cms-1.6.0/coop_cms/static/chosen/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4621 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/chosen/chosen-bootstrap.css
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)      646 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/chosen/chosen-sprite.png
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)      872 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/chosen/chosen-sprite@2x.png
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)    13586 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/chosen/chosen.css
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)    40437 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/chosen/chosen.jquery.js
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)    25688 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/chosen/chosen.jquery.min.js
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)    11634 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/chosen/chosen.min.css
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)    40895 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/chosen/chosen.proto.js
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)    26064 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/chosen/chosen.proto.min.js
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.956367 apidev-coop_cms-1.6.0/coop_cms/static/css/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       39 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/admin-tricks.css
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1431 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/coop_cms.css
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.956367 apidev-coop_cms-1.6.0/coop_cms/static/css/images/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      112 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/images/border.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2893 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/images/controls.png
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.960367 apidev-coop_cms-1.6.0/coop_cms/static/css/images/ie6/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      111 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/images/ie6/borderBottomCenter.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      215 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/images/ie6/borderBottomLeft.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      217 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/images/ie6/borderBottomRight.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      108 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/images/ie6/borderMiddleLeft.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      108 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/images/ie6/borderMiddleRight.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      111 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/images/ie6/borderTopCenter.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      216 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/images/ie6/borderTopLeft.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      214 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/images/ie6/borderTopRight.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     9427 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/images/loading.gif
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      157 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/images/loading_background.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      182 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/images/overlay.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2986 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/mediatheque.css
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.960367 apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.960367 apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      180 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/ui-bg_flat_0_aaaaaa_40x100.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      178 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/ui-bg_flat_75_ffffff_40x100.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      120 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/ui-bg_glass_55_fbf9ee_1x400.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      105 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/ui-bg_glass_65_ffffff_1x400.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      111 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/ui-bg_glass_75_dadada_1x400.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      110 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/ui-bg_glass_75_e6e6e6_1x400.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      119 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/ui-bg_glass_95_fef1ec_1x400.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      101 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/ui-bg_highlight-soft_75_cccccc_1x100.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4369 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/ui-icons_222222_256x240.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4369 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/ui-icons_2e83ff_256x240.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4369 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/ui-icons_454545_256x240.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4369 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/ui-icons_888888_256x240.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4369 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/ui-icons_cd0a0a_256x240.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    33378 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/jquery-ui-1.8.14.custom.css
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2108 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/css/tree.css
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.960367 apidev-coop_cms-1.6.0/coop_cms/static/img/
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)      473 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/cross.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1109 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/default-logo.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      382 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/facebook.png
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.912367 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.964367 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     6066 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/avi.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4896 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/default.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5573 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/doc.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5573 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/docx.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5634 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/gif.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5958 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/html.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5634 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/jpg.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     6066 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/mov.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5789 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/mp3.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     6066 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/mp4.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5789 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/ogg.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5598 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/pdf.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5634 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/png.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5507 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/pps.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5507 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/ppt.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5573 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/rtf.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5625 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/xls.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5625 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/xlsx.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     6155 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/zip.png
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.968367 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2269 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/avi.png
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)      621 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/default.png
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)     1237 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/doc.png
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)     1237 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/docx.png
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)     1548 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/gif.png
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)     2154 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/html.png
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)     1548 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/jpg.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2269 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/mov.png
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)     1378 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/mp3.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2269 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/mp4.png
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)     1378 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/ogg.png
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)     1294 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/pdf.png
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)     1548 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/png.png
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)     1142 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/pps.png
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)     1142 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/ppt.png
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)     1237 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/rtf.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      621 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/txt.png
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)     1270 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/xls.png
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)     1270 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/xlsx.png
+-rwxrwxr-x   0 lucjean   (1001) lucjean   (1001)     1746 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/zip.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2025 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/gplus.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     3343 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/in_nav.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     3272 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/out_nav.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1221 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/img/twitter.png
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.972367 apidev-coop_cms-1.6.0/coop_cms/static/js/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.972367 apidev-coop_cms-1.6.0/coop_cms/static/js/_lib/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4246 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/_lib/jquery.cookie.js
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     3080 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/_lib/jquery.hotkeys.js
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    91341 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/_lib/jquery.js
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)   284393 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-1.11.3.js
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    95956 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-1.11.3.min.js
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    93867 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-1.7.1.min.js
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)   266057 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-1.8.3.js
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    93636 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-1.8.3.min.js
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)   280364 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-3.4.1.js
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1589 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-ajax-csrf.js
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    16620 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-migrate-1.2.1.js
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     7199 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-migrate-1.2.1.min.js
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)   210246 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-ui-1.8.14.custom.min.js
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)   180213 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/jquery.jstree.js
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     6956 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/jquery.pageslide.js
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.912367 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.976368 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/apple/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      331 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/apple/bg.jpg
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     7765 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/apple/d.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       43 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/apple/dot_for_ie.gif
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     3987 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/apple/style.css
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1849 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/apple/throbber.gif
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.976368 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/classic/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     3003 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/classic/d.gif
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     7535 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/classic/d.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       43 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/classic/dot_for_ie.gif
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4997 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/classic/style.css
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1849 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/classic/throbber.gif
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.976368 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2944 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default/d.gif
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     7635 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default/d.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4723 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default/style.css
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1849 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default/throbber.gif
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.976368 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default-rtl/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2872 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default-rtl/d.gif
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     7459 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default-rtl/d.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      132 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default-rtl/dots.gif
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5811 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default-rtl/style.css
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1849 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default-rtl/throbber.gif
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1340 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/js/utils.coop.js
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.976368 apidev-coop_cms-1.6.0/coop_cms/static/slickmap/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.980368 apidev-coop_cms-1.6.0/coop_cms/static/slickmap/images/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      300 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/slickmap/images/L1-center.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      305 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/slickmap/images/L1-left.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      295 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/slickmap/images/L1-right.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      353 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/slickmap/images/L3-bottom.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      326 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/slickmap/images/L3-center.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     3019 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/slickmap/images/L3-li-top.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      201 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/slickmap/images/L3-ul-top.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      152 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/slickmap/images/vertical-line.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      189 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/slickmap/images/white-highlight.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5235 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/static/slickmap/slickmap.css
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.916367 apidev-coop_cms-1.6.0/coop_cms/templates/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.916367 apidev-coop_cms-1.6.0/coop_cms/templates/admin/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.916367 apidev-coop_cms-1.6.0/coop_cms/templates/admin/coop_cms/
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.980368 apidev-coop_cms-1.6.0/coop_cms/templates/admin/coop_cms/navnode/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      782 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/admin/coop_cms/navnode/change_form.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      282 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/admin/coop_cms/navnode/change_list.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.980368 apidev-coop_cms-1.6.0/coop_cms/templates/admin/coop_cms/navtree/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    12274 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/admin/coop_cms/navtree/change_form.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.980368 apidev-coop_cms-1.6.0/coop_cms/templates/bs/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      676 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/bs/form_fields.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      718 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/bs/horizontal_form_fields.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.988368 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1149 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_accept_cookies_message.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      210 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_article_form.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      570 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_article_publication.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      487 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_change_language.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     3531 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_coop_bar_js.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      886 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_csrf_failure_message.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      532 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_facebook_like.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      150 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_field.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      124 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_form_error.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1204 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_js_includes.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      544 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_messages.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      439 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_newsletter_articles.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      854 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_newsletter_categories.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      354 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_newsletter_categories_index.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2115 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_pagination.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      975 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_pagination_js.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1164 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_social_share.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      382 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/article.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      111 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/article_list.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      498 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/article_list_item.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      449 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/articles_category.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       26 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/base.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.988368 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/categories/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      520 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/categories/only-for-unit-testing.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      275 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/csrf_403.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      234 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/dropdown_li.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       54 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/dropdown_li_class.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       97 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/dropdown_ul.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.988368 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/medialib/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4384 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/medialib/slide_base.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      506 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/medialib/slide_docs_content.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1155 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/medialib/slide_images_content.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1286 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/medialib/slide_photologue_content.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      538 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/navigation_node.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.988368 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/navtree_content/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      502 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/navtree_content/article.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      958 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/navtree_content/default.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2546 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/newsletter.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2090 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/newsletter_base.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1149 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_add_fragment.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      299 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_article_settings.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      234 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_change_newsletter_template.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      217 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_change_template.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2684 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_edit_fragments.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      278 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_new_article.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      180 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_new_link.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      494 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_newsletter_settings.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      946 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_publish_article.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      232 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_schedule_newsletter_sending.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      184 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_set_homepage.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      200 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_swicth_language.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      400 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_test_newsletter.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      205 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_update_logo.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      239 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_upload_doc.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      238 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_upload_image.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       45 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/test_li.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2570 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/view_all_articles.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.988368 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/widgets/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)        0 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/widgets/_imageedit_cssclass.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      507 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/widgets/chosen.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      170 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/widgets/imageedit.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      195 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/widgets/readonlyinput.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.992368 apidev-coop_cms-1.6.0/coop_cms/templates/test/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       14 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/_accept_cookies_message.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      233 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/_fragment.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       54 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/article.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      460 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/article_li_node.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      316 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/article_no_logo_size.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      443 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/article_with_blocks.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      354 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/article_with_blocks_parent.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      495 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/article_with_fragments.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      539 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/article_with_fragments_extra_id.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      564 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/article_with_fragments_template.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      334 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/article_with_logo_size.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      350 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/article_with_logo_size_and_crop.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2082 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/base.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      378 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/base_article.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1035 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/carousel.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      173 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/nav_tag_in_edit_tag.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      645 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/navigation_li_node.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      575 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/navigation_node.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      147 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/newsletter_blue.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      483 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/newsletter_red.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      394 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/standard.html
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      148 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templates/test/test_send_email.html
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.996368 apidev-coop_cms-1.6.0/coop_cms/templatetags/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       43 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/templatetags/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2233 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/templatetags/article_tags.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    21043 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/templatetags/coop_edition.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     7258 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/templatetags/coop_navigation.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    16166 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/templatetags/coop_utils.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      396 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/test_runners.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.996368 apidev-coop_cms-1.6.0/coop_cms/tests/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     6329 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/__init__.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:05.996368 apidev-coop_cms-1.6.0/coop_cms/tests/fixtures/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      221 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/tests/fixtures/unittest1.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       60 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/tests/fixtures/unittest1.txt
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      215 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/tests/fixtures/unittest2.png
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     3719 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_admin.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     8437 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_alias.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    33962 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_articles.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4513 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_cache.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    12612 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_categories.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     8767 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_edition.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    63456 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_fragments.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      761 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_generic_views.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    33312 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_homepage.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     7678 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_link.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    23485 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_localization.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    41138 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_media.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      637 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_middleware.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     8965 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_multisites.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    64715 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_navigation.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    69167 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_newsletter.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2160 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_permissions.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1363 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_settings.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     8190 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_sitemap.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5039 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_slugs.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     3048 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_special_pages.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2814 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_templates.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    22100 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_templatetags.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1927 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/tests/test_utils.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1022 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/thumbnail_backend.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2937 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/translation.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5352 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/urls.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:06.000368 apidev-coop_cms-1.6.0/coop_cms/utils/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      543 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/utils/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5948 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/utils/emails.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1839 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/utils/i18n.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      969 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/utils/loaders.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      658 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/utils/pagination.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1583 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/utils/requests.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)      257 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/utils/settings.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2511 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/utils/text.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2261 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/utils/xsendfile.py
+drwxrwxr-x   0 lucjean   (1001) lucjean   (1001)        0 2023-06-12 12:56:06.000368 apidev-coop_cms-1.6.0/coop_cms/views/
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       24 2023-05-22 06:59:48.000000 apidev-coop_cms-1.6.0/coop_cms/views/__init__.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    11773 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/views/articles.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2467 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/views/fragments.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     2239 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/views/homepage.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1513 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/views/links.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     7225 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/views/medialib.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)    13211 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/views/navigation.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     8233 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/views/newsletters.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     4933 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/views/webutils.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     5774 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/coop_cms/widgets.py
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)       38 2023-06-12 12:56:06.000368 apidev-coop_cms-1.6.0/setup.cfg
+-rw-rw-r--   0 lucjean   (1001) lucjean   (1001)     1723 2023-06-12 12:47:18.000000 apidev-coop_cms-1.6.0/setup.py
```

### Comparing `apidev-coop_cms-1.5.9/PKG-INFO` & `apidev-coop_cms-1.6.0/PKG-INFO`

 * *Files 17% similar despite different names*

```diff
@@ -1,291 +1,290 @@
-Metadata-Version: 1.1
+Metadata-Version: 2.1
 Name: apidev-coop_cms
-Version: 1.5.9
+Version: 1.6.0
 Summary: Small CMS built around a tree navigation open to any django models
 Home-page: https://github.com/ljean/coop_cms/
+Download-URL: https://github.com/ljean/coop_cms/tarball/master
 Author: Luc Jean
 Author-email: ljean@apidev.fr
 License: BSD
-Download-URL: https://github.com/ljean/coop_cms/tarball/master
-Description: coop_cms is a Content Management System (CMS) for Django
-        ========================================================
-        
-        * `Yet another CMS ?`_
-        * `Quick start`_
-        
-        .. _Yet another CMS?: #yacms
-        .. _Quick start?: #quick-start
-        
-        
-        .. _yacms:
-        
-        Yet another CMS ?
-        ------------------------------------
-        
-        #. Coop-cms is built around Articles. It defines a basic abstract model so you can define your own model.
-        #. It has a website tree in a nice admin widget, to let you order Articles and *any other standard django model* you've defined in your project.
-        #. Based on the tree, you get templatetags for menu navigation, siblings links, breadcrumb, etc
-        
-        Coop-cms has some sister apps to make it more usable:
-        
-        * `coop_bar <https://github.com/ljean/coop-bar/>`_, an extensible toolbar (same concept : any app you create can add links in the toolbar).
-        * `coop_html_editor <https://github.com/ljean/coop_html_editor/>`_, integration of in-site html editors._
-        * `colorbox <https://github.com/ljean/coop-colorbox/>`_, make easy integration of jquery colorbox library.
-        
-        .. _quick-start:
-        
-        Quick start
-        -----------
-        
-        Python 3, Django >=2.0, < 3.0 required
-        
-        Install it with ``pip install apidev_coop_cms``
-        
-        urls.py
-        ~~~~~~~
-        
-        At *the very end* of your urls.py file, add::
-        
-            urlpatterns += [
-                url(r'^html-editor/', include('coop_html_editor.urls')),
-                url(r'^', include('coop_cms.urls')),
-                url(r'^coop_bar/', include('coop_bar.urls')),
-            ]
-        
-        Please note that coop-cms will handle any page slug, except the ones you will have defined before.
-        
-        settings.py
-        ~~~~~~~~~~~
-        In settings.py::
-        
-            MIDDLEWARE_CLASSES = (
-                'django.contrib.sessions.middleware.SessionMiddleware',
-                'django.middleware.common.CommonMiddleware',
-                'django.middleware.locale.LocaleMiddleware',
-                'django.middleware.csrf.CsrfViewMiddleware',
-                'django.contrib.auth.middleware.AuthenticationMiddleware',
-                'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
-                'django.contrib.messages.middleware.MessageMiddleware',
-                'django.middleware.clickjacking.XFrameOptionsMiddleware',
-                'django.middleware.security.SecurityMiddleware',
-                'coop_cms.middleware.PermissionsMiddleware',  # Optional: redirect to login when PermissionDenied is raised
-                'coop_cms.utils.RequestMiddleware',
-                ...
-            )
-        
-            TEMPLATE_CONTEXT_PROCESSORS = (
-                "django.contrib.auth.context_processors.auth",
-                "django.template.context_processors.debug",
-                "django.template.context_processors.i18n",
-                'django.template.context_processors.request',
-                "django.template.context_processors.media",
-                "django.template.context_processors.static",
-                "django.contrib.messages.context_processors.messages",
-                ...
-            )
-        
-            AUTHENTICATION_BACKENDS = (
-                'coop_cms.perms_backends.ArticlePermissionBackend',
-                'coop_cms.apps.email_auth.auth_backends.EmailAuthBackend',  # Optional -> login with email rather than username
-                'django.contrib.auth.backends.ModelBackend', # Django's default auth backend
-            )
-        
-            INSTALLED_APPS = (
-                # Contribs
-                'django.contrib.auth',
-                'django.contrib.contenttypes',
-                'django.contrib.sessions',
-                'django.contrib.sites',
-                'django.contrib.messages',
-                'django.contrib.staticfiles',
-                'django.contrib.admin',
-                'django.contrib.admindocs',
-        
-                # 3rd parties
-                'django_extensions',
-                'sorl.thumbnail',
-                'floppyforms',
-                'registration', # Optional
-        
-                # apps
-                'coop_bar',
-                'coop_html_editor',
-                'colorbox',
-                'coop_cms',
-                'coop_cms.apps.coop_bootstrap', # Optional -> utilities for Bootstrap CSS framework
-                'coop_cms.apps.email_auth', # Optional -> login with email rather than username
-        
-                # The coop_cms Article is an abstract model, you must define an Article in one of your app
-                # We provide 2 apps that can be used if needed. Choose one or the other
-                # 'coop_cms.apps.basic_cms', # Nothing else than a concrete Article model.
-                'coop_cms.apps.demo_cms', # A ready-to-use example app.
-        
-                # The app below make possible to create articles from a RSS feed. Add it if needed
-                'coop_cms.apps.rss_sync',
-            )
-        
-            # These are settings to customize the CMS behavior. The values are just examples and correspond to the demo_cms app.
-        
-            # Define the Concrete Article to use. Not required if basic_cms is used
-            COOP_CMS_ARTICLE_CLASS = 'coop_cms.apps.demo_cms.models.Article'
-        
-            # Define a custom form for Article editing. Not required if basic_cms is used
-            COOP_CMS_ARTICLE_FORM = 'coop_cms.apps.demo_cms.forms.ArticleForm'
-        
-            # Make possible to customize the menus in the admin bar. Optional.
-            # If not defined, the tuple is build with the coop_bar_cfg modules of all INSTALLED_APPS
-            COOPBAR_MODULES = (
-                'coop_cms.apps.demo_cms.my_coop_bar',
-            )
-        
-            # Populate the urls when editing <a> tag in HTML editor
-            COOP_HTML_EDITOR_LINK_MODELS = (
-                'demo_cms.Article',
-            )
-        
-            # Optional: you can overload the aloha plugins used by coop_cms --> see coop_html_editor docs for details
-            ALOHA_PLUGINS = (
-                "common/format",
-                "common/highlighteditables",
-            )
-        
-            # Optional: you can change the jquery version used by aloha --> see coop_html_editor docs for details
-            ALOHA_JQUERY = 'js/jquery.1.7.2.js'
-        
-            # Optional : you can customize the whole behavior of aloha by proving the url of config file.
-            # It will overload the config provided by coop_html_editor --> see coop_html_editor for details
-            ALOHA_INIT_URL = '/static/js/my_aloha_config.js'
-        
-            # Default size of the article logo. Can be changed in template
-            COOP_CMS_ARTICLE_LOGO_SIZE = "128x128"
-        
-            # Templates that can be used for an article
-            # It can be a tuple or a function returning a tuple
-            COOP_CMS_ARTICLE_TEMPLATES = 'coop_cms.apps.demo_cms.get_article_templates'
-            # COOP_CMS_ARTICLE_TEMPLATES = (
-            #     ('standard.html', 'Standard'),
-            #     ('homepage.html', 'Homepage'),
-            #     ('blog.html', 'Blog'),
-            # )
-        
-            # Prefix for making absolute links
-            COOP_CMS_SITE_PREFIX = 'http://127.0.0.1:8000'
-        
-            # from email : the domain of this address should allow the IP of your SMTP server : See SPF
-            COOP_CMS_FROM_EMAIL = '"Your name" <your@email.com>'
-        
-            # TODO : REPLY-TO
-            COOP_CMS_REPLY_TO = '"Your name" <your@email.com>'
-        
-            # Email address to send a newsletter test
-            COOP_CMS_TEST_EMAILS = (
-                '"Your name" <your@email.com>',
-            )
-        
-            # tuples of templates that can be used for a newsletter.
-            COOP_CMS_NEWSLETTER_TEMPLATES = (
-                ('basic_newsletter.html', 'Basic'),
-                ('special_newsletter.html', 'With sections'),
-                ('sortable_newsletter.html', 'Sortable sections'),
-            )
-            # optional : A custom form for editing the newsletter
-            COOP_CMS_NEWSLETTER_FORM = 'coop_cms.apps.demo_cms.forms.SortableNewsletterForm'
-        
-        Base template
-        ~~~~~~~~~~~~~
-        You need to create a base template ``base.html`` in one of your template folders. The ``article.html`` will inherit from this base template.
-        
-        You need the following templatetags libs::
-        
-            {% load coop_navigation coop_bar_tags %}
-        
-        In the <head> of the document::
-        
-            {% coop_bar_headers %}
-            {% block jquery_declaration %}{% endblock %}
-            {% block extra_head %}{% endblock %}
-        
-        In the <body> of the document::
-        
-            {% block document %}...{% endblock %}
-            {% coop_bar %}
-        
-        Just before </body> at the end of the document::
-        
-            {% coop_bar_footer %}
-        
-        You can also put some navigations in the <body>::
-        
-            {% navigation_as_nested_ul %}
-        
-        The navigation_as_nested_ul templatetag accepts several args
-         * tree="english" --> The name of the navigation_tree to use. "default" if missing
-         * li_template="dropdown_li.html" --> a template for every <li> tags
-         * ul_template="dropdown_ul.html" --> a template for every <ul> tags
-         * li_args="dropdown_li_class.html" --> args to be used for any <li> tags
-        
-        There are others templatetags for navigation : ``navigation_breadcrumb``, ``navigation_children``, ``navigation_siblings`` with similar behavior
-        
-        Navigation configuration
-        ~~~~~~~~~~~~~~~~~~~~~~~~
-        Don't forget to register the navigable types. In order to be accessible from the navigation, Model classes must be registered.
-         * In the django admin, go to coop_cms - Navigable types
-         * Add a new object and choose the model class you want to make accessible in navigation
-         * Define how to get the label in navigation for a given object : use the __unicode__, use the search field or use a custom get_label method
-         * If search_field is choosed, define the name of this field.
-         * The search field make possible to define which field to use when the navigation tree ask for matching objects.
-        
-         * Then Go to a Navigation object in admin, the admin page propose to configure it thanks to a tree view
-         * Type some text in the text field at the top
-         * The field autocomplete propose all the objects of a NavigableType matching the text you entered
-         * Select one object and click 'Add a new item'
-         * The object is now part of the current navigation
-        
-        
-        Going further
-        -------------
-        
-        You can look at the demo_app in apps folder to see how to customize the behavior of coop_cms:
-         * Editable "pieces of HTML" in your page : A editable block that can be shared by several pages.
-         * Custom templates for articles and newsletters
-         * Custom fields in article
-         * Custom admin bar
-         * Configuration values
-         
-        Internationalization
-        --------------------
-        
-        If you want to make an international site, coop_cms works well with `django-modeltranslation`.
-        
-        We recommend to remove `django-modeltranslation` from the apps when making the model migrations
-        
-        
-            if not (len(sys.argv) > 1 and sys.argv[1] in ('makemigrations', )):
-                INSTALLED_APPS = ('modeltranslation', ) + INSTALLED_APPS
-        
-        The model migrations wil not take the translation fields into account and it will be easier to add or remove languages
-        with the following commands
-        
-            python manage.py sync_translation_fields --noinput
-            python manage.py update_translation_fields
-        
-        
-        License
-        =======
-        
-        apidev-coop-cms is a fork of credis/coop_cms and uses BSD license see license.txt.
-        
-        coop-cms development was funded by `CREDIS <http://credis.org/>`_, FSE (European Social Fund) and Conseil Regional d'Auvergne.
-        
-Platform: UNKNOWN
 Classifier: Development Status :: 5 - Production/Stable
 Classifier: Environment :: Web Environment
 Classifier: Intended Audience :: Developers
 Classifier: License :: OSI Approved :: BSD License
 Classifier: Operating System :: OS Independent
 Classifier: Programming Language :: Python
 Classifier: Framework :: Django
 Classifier: Natural Language :: English
 Classifier: Natural Language :: French
 Classifier: Topic :: Internet :: WWW/HTTP :: Dynamic Content
 Classifier: Topic :: Internet :: WWW/HTTP :: WSGI :: Application
+
+coop_cms is a Content Management System (CMS) for Django
+========================================================
+
+* `Yet another CMS ?`_
+* `Quick start`_
+
+.. _Yet another CMS?: #yacms
+.. _Quick start?: #quick-start
+
+
+.. _yacms:
+
+Yet another CMS ?
+------------------------------------
+
+#. Coop-cms is built around Articles. It defines a basic abstract model so you can define your own model.
+#. It has a website tree in a nice admin widget, to let you order Articles and *any other standard django model* you've defined in your project.
+#. Based on the tree, you get templatetags for menu navigation, siblings links, breadcrumb, etc
+
+Coop-cms has some sister apps to make it more usable:
+
+* `coop_bar <https://github.com/ljean/coop-bar/>`_, an extensible toolbar (same concept : any app you create can add links in the toolbar).
+* `coop_html_editor <https://github.com/ljean/coop_html_editor/>`_, integration of in-site html editors._
+* `colorbox <https://github.com/ljean/coop-colorbox/>`_, make easy integration of jquery colorbox library.
+
+.. _quick-start:
+
+Quick start
+-----------
+
+Python 3, Django >=2.0, < 3.0 required
+
+Install it with ``pip install apidev_coop_cms``
+
+urls.py
+~~~~~~~
+
+At *the very end* of your urls.py file, add::
+
+    urlpatterns += [
+        url(r'^html-editor/', include('coop_html_editor.urls')),
+        url(r'^', include('coop_cms.urls')),
+        url(r'^coop_bar/', include('coop_bar.urls')),
+    ]
+
+Please note that coop-cms will handle any page slug, except the ones you will have defined before.
+
+settings.py
+~~~~~~~~~~~
+In settings.py::
+
+    MIDDLEWARE_CLASSES = (
+        'django.contrib.sessions.middleware.SessionMiddleware',
+        'django.middleware.common.CommonMiddleware',
+        'django.middleware.locale.LocaleMiddleware',
+        'django.middleware.csrf.CsrfViewMiddleware',
+        'django.contrib.auth.middleware.AuthenticationMiddleware',
+        'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
+        'django.contrib.messages.middleware.MessageMiddleware',
+        'django.middleware.clickjacking.XFrameOptionsMiddleware',
+        'django.middleware.security.SecurityMiddleware',
+        'coop_cms.middleware.PermissionsMiddleware',  # Optional: redirect to login when PermissionDenied is raised
+        'coop_cms.utils.RequestMiddleware',
+        ...
+    )
+
+    TEMPLATE_CONTEXT_PROCESSORS = (
+        "django.contrib.auth.context_processors.auth",
+        "django.template.context_processors.debug",
+        "django.template.context_processors.i18n",
+        'django.template.context_processors.request',
+        "django.template.context_processors.media",
+        "django.template.context_processors.static",
+        "django.contrib.messages.context_processors.messages",
+        ...
+    )
+
+    AUTHENTICATION_BACKENDS = (
+        'coop_cms.perms_backends.ArticlePermissionBackend',
+        'coop_cms.apps.email_auth.auth_backends.EmailAuthBackend',  # Optional -> login with email rather than username
+        'django.contrib.auth.backends.ModelBackend', # Django's default auth backend
+    )
+
+    INSTALLED_APPS = (
+        # Contribs
+        'django.contrib.auth',
+        'django.contrib.contenttypes',
+        'django.contrib.sessions',
+        'django.contrib.sites',
+        'django.contrib.messages',
+        'django.contrib.staticfiles',
+        'django.contrib.admin',
+        'django.contrib.admindocs',
+
+        # 3rd parties
+        'django_extensions',
+        'sorl.thumbnail',
+        'floppyforms',
+        'registration', # Optional
+
+        # apps
+        'coop_bar',
+        'coop_html_editor',
+        'colorbox',
+        'coop_cms',
+        'coop_cms.apps.coop_bootstrap', # Optional -> utilities for Bootstrap CSS framework
+        'coop_cms.apps.email_auth', # Optional -> login with email rather than username
+
+        # The coop_cms Article is an abstract model, you must define an Article in one of your app
+        # We provide 2 apps that can be used if needed. Choose one or the other
+        # 'coop_cms.apps.basic_cms', # Nothing else than a concrete Article model.
+        'coop_cms.apps.demo_cms', # A ready-to-use example app.
+
+        # The app below make possible to create articles from a RSS feed. Add it if needed
+        'coop_cms.apps.rss_sync',
+    )
+
+    # These are settings to customize the CMS behavior. The values are just examples and correspond to the demo_cms app.
+
+    # Define the Concrete Article to use. Not required if basic_cms is used
+    COOP_CMS_ARTICLE_CLASS = 'coop_cms.apps.demo_cms.models.Article'
+
+    # Define a custom form for Article editing. Not required if basic_cms is used
+    COOP_CMS_ARTICLE_FORM = 'coop_cms.apps.demo_cms.forms.ArticleForm'
+
+    # Make possible to customize the menus in the admin bar. Optional.
+    # If not defined, the tuple is build with the coop_bar_cfg modules of all INSTALLED_APPS
+    COOPBAR_MODULES = (
+        'coop_cms.apps.demo_cms.my_coop_bar',
+    )
+
+    # Populate the urls when editing <a> tag in HTML editor
+    COOP_HTML_EDITOR_LINK_MODELS = (
+        'demo_cms.Article',
+    )
+
+    # Optional: you can overload the aloha plugins used by coop_cms --> see coop_html_editor docs for details
+    ALOHA_PLUGINS = (
+        "common/format",
+        "common/highlighteditables",
+    )
+
+    # Optional: you can change the jquery version used by aloha --> see coop_html_editor docs for details
+    ALOHA_JQUERY = 'js/jquery.1.7.2.js'
+
+    # Optional : you can customize the whole behavior of aloha by proving the url of config file.
+    # It will overload the config provided by coop_html_editor --> see coop_html_editor for details
+    ALOHA_INIT_URL = '/static/js/my_aloha_config.js'
+
+    # Default size of the article logo. Can be changed in template
+    COOP_CMS_ARTICLE_LOGO_SIZE = "128x128"
+
+    # Templates that can be used for an article
+    # It can be a tuple or a function returning a tuple
+    COOP_CMS_ARTICLE_TEMPLATES = 'coop_cms.apps.demo_cms.get_article_templates'
+    # COOP_CMS_ARTICLE_TEMPLATES = (
+    #     ('standard.html', 'Standard'),
+    #     ('homepage.html', 'Homepage'),
+    #     ('blog.html', 'Blog'),
+    # )
+
+    # Prefix for making absolute links
+    COOP_CMS_SITE_PREFIX = 'http://127.0.0.1:8000'
+
+    # from email : the domain of this address should allow the IP of your SMTP server : See SPF
+    COOP_CMS_FROM_EMAIL = '"Your name" <your@email.com>'
+
+    # TODO : REPLY-TO
+    COOP_CMS_REPLY_TO = '"Your name" <your@email.com>'
+
+    # Email address to send a newsletter test
+    COOP_CMS_TEST_EMAILS = (
+        '"Your name" <your@email.com>',
+    )
+
+    # tuples of templates that can be used for a newsletter.
+    COOP_CMS_NEWSLETTER_TEMPLATES = (
+        ('basic_newsletter.html', 'Basic'),
+        ('special_newsletter.html', 'With sections'),
+        ('sortable_newsletter.html', 'Sortable sections'),
+    )
+    # optional : A custom form for editing the newsletter
+    COOP_CMS_NEWSLETTER_FORM = 'coop_cms.apps.demo_cms.forms.SortableNewsletterForm'
+
+Base template
+~~~~~~~~~~~~~
+You need to create a base template ``base.html`` in one of your template folders. The ``article.html`` will inherit from this base template.
+
+You need the following templatetags libs::
+
+    {% load coop_navigation coop_bar_tags %}
+
+In the <head> of the document::
+
+    {% coop_bar_headers %}
+    {% block jquery_declaration %}{% endblock %}
+    {% block extra_head %}{% endblock %}
+
+In the <body> of the document::
+
+    {% block document %}...{% endblock %}
+    {% coop_bar %}
+
+Just before </body> at the end of the document::
+
+    {% coop_bar_footer %}
+
+You can also put some navigations in the <body>::
+
+    {% navigation_as_nested_ul %}
+
+The navigation_as_nested_ul templatetag accepts several args
+ * tree="english" --> The name of the navigation_tree to use. "default" if missing
+ * li_template="dropdown_li.html" --> a template for every <li> tags
+ * ul_template="dropdown_ul.html" --> a template for every <ul> tags
+ * li_args="dropdown_li_class.html" --> args to be used for any <li> tags
+
+There are others templatetags for navigation : ``navigation_breadcrumb``, ``navigation_children``, ``navigation_siblings`` with similar behavior
+
+Navigation configuration
+~~~~~~~~~~~~~~~~~~~~~~~~
+Don't forget to register the navigable types. In order to be accessible from the navigation, Model classes must be registered.
+ * In the django admin, go to coop_cms - Navigable types
+ * Add a new object and choose the model class you want to make accessible in navigation
+ * Define how to get the label in navigation for a given object : use the __unicode__, use the search field or use a custom get_label method
+ * If search_field is choosed, define the name of this field.
+ * The search field make possible to define which field to use when the navigation tree ask for matching objects.
+
+ * Then Go to a Navigation object in admin, the admin page propose to configure it thanks to a tree view
+ * Type some text in the text field at the top
+ * The field autocomplete propose all the objects of a NavigableType matching the text you entered
+ * Select one object and click 'Add a new item'
+ * The object is now part of the current navigation
+
+
+Going further
+-------------
+
+You can look at the demo_app in apps folder to see how to customize the behavior of coop_cms:
+ * Editable "pieces of HTML" in your page : A editable block that can be shared by several pages.
+ * Custom templates for articles and newsletters
+ * Custom fields in article
+ * Custom admin bar
+ * Configuration values
+ 
+Internationalization
+--------------------
+
+If you want to make an international site, coop_cms works well with `django-modeltranslation`.
+
+We recommend to remove `django-modeltranslation` from the apps when making the model migrations
+
+
+    if not (len(sys.argv) > 1 and sys.argv[1] in ('makemigrations', )):
+        INSTALLED_APPS = ('modeltranslation', ) + INSTALLED_APPS
+
+The model migrations wil not take the translation fields into account and it will be easier to add or remove languages
+with the following commands
+
+    python manage.py sync_translation_fields --noinput
+    python manage.py update_translation_fields
+
+
+License
+=======
+
+apidev-coop-cms is a fork of credis/coop_cms and uses BSD license see license.txt.
+
+coop-cms development was funded by `CREDIS <http://credis.org/>`_, FSE (European Social Fund) and Conseil Regional d'Auvergne.
```

### Comparing `apidev-coop_cms-1.5.9/README.rst` & `apidev-coop_cms-1.6.0/README.rst`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/apidev_coop_cms.egg-info/PKG-INFO` & `apidev-coop_cms-1.6.0/apidev_coop_cms.egg-info/PKG-INFO`

 * *Files 17% similar despite different names*

```diff
@@ -1,291 +1,290 @@
-Metadata-Version: 1.1
+Metadata-Version: 2.1
 Name: apidev-coop-cms
-Version: 1.5.9
+Version: 1.6.0
 Summary: Small CMS built around a tree navigation open to any django models
 Home-page: https://github.com/ljean/coop_cms/
+Download-URL: https://github.com/ljean/coop_cms/tarball/master
 Author: Luc Jean
 Author-email: ljean@apidev.fr
 License: BSD
-Download-URL: https://github.com/ljean/coop_cms/tarball/master
-Description: coop_cms is a Content Management System (CMS) for Django
-        ========================================================
-        
-        * `Yet another CMS ?`_
-        * `Quick start`_
-        
-        .. _Yet another CMS?: #yacms
-        .. _Quick start?: #quick-start
-        
-        
-        .. _yacms:
-        
-        Yet another CMS ?
-        ------------------------------------
-        
-        #. Coop-cms is built around Articles. It defines a basic abstract model so you can define your own model.
-        #. It has a website tree in a nice admin widget, to let you order Articles and *any other standard django model* you've defined in your project.
-        #. Based on the tree, you get templatetags for menu navigation, siblings links, breadcrumb, etc
-        
-        Coop-cms has some sister apps to make it more usable:
-        
-        * `coop_bar <https://github.com/ljean/coop-bar/>`_, an extensible toolbar (same concept : any app you create can add links in the toolbar).
-        * `coop_html_editor <https://github.com/ljean/coop_html_editor/>`_, integration of in-site html editors._
-        * `colorbox <https://github.com/ljean/coop-colorbox/>`_, make easy integration of jquery colorbox library.
-        
-        .. _quick-start:
-        
-        Quick start
-        -----------
-        
-        Python 3, Django >=2.0, < 3.0 required
-        
-        Install it with ``pip install apidev_coop_cms``
-        
-        urls.py
-        ~~~~~~~
-        
-        At *the very end* of your urls.py file, add::
-        
-            urlpatterns += [
-                url(r'^html-editor/', include('coop_html_editor.urls')),
-                url(r'^', include('coop_cms.urls')),
-                url(r'^coop_bar/', include('coop_bar.urls')),
-            ]
-        
-        Please note that coop-cms will handle any page slug, except the ones you will have defined before.
-        
-        settings.py
-        ~~~~~~~~~~~
-        In settings.py::
-        
-            MIDDLEWARE_CLASSES = (
-                'django.contrib.sessions.middleware.SessionMiddleware',
-                'django.middleware.common.CommonMiddleware',
-                'django.middleware.locale.LocaleMiddleware',
-                'django.middleware.csrf.CsrfViewMiddleware',
-                'django.contrib.auth.middleware.AuthenticationMiddleware',
-                'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
-                'django.contrib.messages.middleware.MessageMiddleware',
-                'django.middleware.clickjacking.XFrameOptionsMiddleware',
-                'django.middleware.security.SecurityMiddleware',
-                'coop_cms.middleware.PermissionsMiddleware',  # Optional: redirect to login when PermissionDenied is raised
-                'coop_cms.utils.RequestMiddleware',
-                ...
-            )
-        
-            TEMPLATE_CONTEXT_PROCESSORS = (
-                "django.contrib.auth.context_processors.auth",
-                "django.template.context_processors.debug",
-                "django.template.context_processors.i18n",
-                'django.template.context_processors.request',
-                "django.template.context_processors.media",
-                "django.template.context_processors.static",
-                "django.contrib.messages.context_processors.messages",
-                ...
-            )
-        
-            AUTHENTICATION_BACKENDS = (
-                'coop_cms.perms_backends.ArticlePermissionBackend',
-                'coop_cms.apps.email_auth.auth_backends.EmailAuthBackend',  # Optional -> login with email rather than username
-                'django.contrib.auth.backends.ModelBackend', # Django's default auth backend
-            )
-        
-            INSTALLED_APPS = (
-                # Contribs
-                'django.contrib.auth',
-                'django.contrib.contenttypes',
-                'django.contrib.sessions',
-                'django.contrib.sites',
-                'django.contrib.messages',
-                'django.contrib.staticfiles',
-                'django.contrib.admin',
-                'django.contrib.admindocs',
-        
-                # 3rd parties
-                'django_extensions',
-                'sorl.thumbnail',
-                'floppyforms',
-                'registration', # Optional
-        
-                # apps
-                'coop_bar',
-                'coop_html_editor',
-                'colorbox',
-                'coop_cms',
-                'coop_cms.apps.coop_bootstrap', # Optional -> utilities for Bootstrap CSS framework
-                'coop_cms.apps.email_auth', # Optional -> login with email rather than username
-        
-                # The coop_cms Article is an abstract model, you must define an Article in one of your app
-                # We provide 2 apps that can be used if needed. Choose one or the other
-                # 'coop_cms.apps.basic_cms', # Nothing else than a concrete Article model.
-                'coop_cms.apps.demo_cms', # A ready-to-use example app.
-        
-                # The app below make possible to create articles from a RSS feed. Add it if needed
-                'coop_cms.apps.rss_sync',
-            )
-        
-            # These are settings to customize the CMS behavior. The values are just examples and correspond to the demo_cms app.
-        
-            # Define the Concrete Article to use. Not required if basic_cms is used
-            COOP_CMS_ARTICLE_CLASS = 'coop_cms.apps.demo_cms.models.Article'
-        
-            # Define a custom form for Article editing. Not required if basic_cms is used
-            COOP_CMS_ARTICLE_FORM = 'coop_cms.apps.demo_cms.forms.ArticleForm'
-        
-            # Make possible to customize the menus in the admin bar. Optional.
-            # If not defined, the tuple is build with the coop_bar_cfg modules of all INSTALLED_APPS
-            COOPBAR_MODULES = (
-                'coop_cms.apps.demo_cms.my_coop_bar',
-            )
-        
-            # Populate the urls when editing <a> tag in HTML editor
-            COOP_HTML_EDITOR_LINK_MODELS = (
-                'demo_cms.Article',
-            )
-        
-            # Optional: you can overload the aloha plugins used by coop_cms --> see coop_html_editor docs for details
-            ALOHA_PLUGINS = (
-                "common/format",
-                "common/highlighteditables",
-            )
-        
-            # Optional: you can change the jquery version used by aloha --> see coop_html_editor docs for details
-            ALOHA_JQUERY = 'js/jquery.1.7.2.js'
-        
-            # Optional : you can customize the whole behavior of aloha by proving the url of config file.
-            # It will overload the config provided by coop_html_editor --> see coop_html_editor for details
-            ALOHA_INIT_URL = '/static/js/my_aloha_config.js'
-        
-            # Default size of the article logo. Can be changed in template
-            COOP_CMS_ARTICLE_LOGO_SIZE = "128x128"
-        
-            # Templates that can be used for an article
-            # It can be a tuple or a function returning a tuple
-            COOP_CMS_ARTICLE_TEMPLATES = 'coop_cms.apps.demo_cms.get_article_templates'
-            # COOP_CMS_ARTICLE_TEMPLATES = (
-            #     ('standard.html', 'Standard'),
-            #     ('homepage.html', 'Homepage'),
-            #     ('blog.html', 'Blog'),
-            # )
-        
-            # Prefix for making absolute links
-            COOP_CMS_SITE_PREFIX = 'http://127.0.0.1:8000'
-        
-            # from email : the domain of this address should allow the IP of your SMTP server : See SPF
-            COOP_CMS_FROM_EMAIL = '"Your name" <your@email.com>'
-        
-            # TODO : REPLY-TO
-            COOP_CMS_REPLY_TO = '"Your name" <your@email.com>'
-        
-            # Email address to send a newsletter test
-            COOP_CMS_TEST_EMAILS = (
-                '"Your name" <your@email.com>',
-            )
-        
-            # tuples of templates that can be used for a newsletter.
-            COOP_CMS_NEWSLETTER_TEMPLATES = (
-                ('basic_newsletter.html', 'Basic'),
-                ('special_newsletter.html', 'With sections'),
-                ('sortable_newsletter.html', 'Sortable sections'),
-            )
-            # optional : A custom form for editing the newsletter
-            COOP_CMS_NEWSLETTER_FORM = 'coop_cms.apps.demo_cms.forms.SortableNewsletterForm'
-        
-        Base template
-        ~~~~~~~~~~~~~
-        You need to create a base template ``base.html`` in one of your template folders. The ``article.html`` will inherit from this base template.
-        
-        You need the following templatetags libs::
-        
-            {% load coop_navigation coop_bar_tags %}
-        
-        In the <head> of the document::
-        
-            {% coop_bar_headers %}
-            {% block jquery_declaration %}{% endblock %}
-            {% block extra_head %}{% endblock %}
-        
-        In the <body> of the document::
-        
-            {% block document %}...{% endblock %}
-            {% coop_bar %}
-        
-        Just before </body> at the end of the document::
-        
-            {% coop_bar_footer %}
-        
-        You can also put some navigations in the <body>::
-        
-            {% navigation_as_nested_ul %}
-        
-        The navigation_as_nested_ul templatetag accepts several args
-         * tree="english" --> The name of the navigation_tree to use. "default" if missing
-         * li_template="dropdown_li.html" --> a template for every <li> tags
-         * ul_template="dropdown_ul.html" --> a template for every <ul> tags
-         * li_args="dropdown_li_class.html" --> args to be used for any <li> tags
-        
-        There are others templatetags for navigation : ``navigation_breadcrumb``, ``navigation_children``, ``navigation_siblings`` with similar behavior
-        
-        Navigation configuration
-        ~~~~~~~~~~~~~~~~~~~~~~~~
-        Don't forget to register the navigable types. In order to be accessible from the navigation, Model classes must be registered.
-         * In the django admin, go to coop_cms - Navigable types
-         * Add a new object and choose the model class you want to make accessible in navigation
-         * Define how to get the label in navigation for a given object : use the __unicode__, use the search field or use a custom get_label method
-         * If search_field is choosed, define the name of this field.
-         * The search field make possible to define which field to use when the navigation tree ask for matching objects.
-        
-         * Then Go to a Navigation object in admin, the admin page propose to configure it thanks to a tree view
-         * Type some text in the text field at the top
-         * The field autocomplete propose all the objects of a NavigableType matching the text you entered
-         * Select one object and click 'Add a new item'
-         * The object is now part of the current navigation
-        
-        
-        Going further
-        -------------
-        
-        You can look at the demo_app in apps folder to see how to customize the behavior of coop_cms:
-         * Editable "pieces of HTML" in your page : A editable block that can be shared by several pages.
-         * Custom templates for articles and newsletters
-         * Custom fields in article
-         * Custom admin bar
-         * Configuration values
-         
-        Internationalization
-        --------------------
-        
-        If you want to make an international site, coop_cms works well with `django-modeltranslation`.
-        
-        We recommend to remove `django-modeltranslation` from the apps when making the model migrations
-        
-        
-            if not (len(sys.argv) > 1 and sys.argv[1] in ('makemigrations', )):
-                INSTALLED_APPS = ('modeltranslation', ) + INSTALLED_APPS
-        
-        The model migrations wil not take the translation fields into account and it will be easier to add or remove languages
-        with the following commands
-        
-            python manage.py sync_translation_fields --noinput
-            python manage.py update_translation_fields
-        
-        
-        License
-        =======
-        
-        apidev-coop-cms is a fork of credis/coop_cms and uses BSD license see license.txt.
-        
-        coop-cms development was funded by `CREDIS <http://credis.org/>`_, FSE (European Social Fund) and Conseil Regional d'Auvergne.
-        
-Platform: UNKNOWN
 Classifier: Development Status :: 5 - Production/Stable
 Classifier: Environment :: Web Environment
 Classifier: Intended Audience :: Developers
 Classifier: License :: OSI Approved :: BSD License
 Classifier: Operating System :: OS Independent
 Classifier: Programming Language :: Python
 Classifier: Framework :: Django
 Classifier: Natural Language :: English
 Classifier: Natural Language :: French
 Classifier: Topic :: Internet :: WWW/HTTP :: Dynamic Content
 Classifier: Topic :: Internet :: WWW/HTTP :: WSGI :: Application
+
+coop_cms is a Content Management System (CMS) for Django
+========================================================
+
+* `Yet another CMS ?`_
+* `Quick start`_
+
+.. _Yet another CMS?: #yacms
+.. _Quick start?: #quick-start
+
+
+.. _yacms:
+
+Yet another CMS ?
+------------------------------------
+
+#. Coop-cms is built around Articles. It defines a basic abstract model so you can define your own model.
+#. It has a website tree in a nice admin widget, to let you order Articles and *any other standard django model* you've defined in your project.
+#. Based on the tree, you get templatetags for menu navigation, siblings links, breadcrumb, etc
+
+Coop-cms has some sister apps to make it more usable:
+
+* `coop_bar <https://github.com/ljean/coop-bar/>`_, an extensible toolbar (same concept : any app you create can add links in the toolbar).
+* `coop_html_editor <https://github.com/ljean/coop_html_editor/>`_, integration of in-site html editors._
+* `colorbox <https://github.com/ljean/coop-colorbox/>`_, make easy integration of jquery colorbox library.
+
+.. _quick-start:
+
+Quick start
+-----------
+
+Python 3, Django >=2.0, < 3.0 required
+
+Install it with ``pip install apidev_coop_cms``
+
+urls.py
+~~~~~~~
+
+At *the very end* of your urls.py file, add::
+
+    urlpatterns += [
+        url(r'^html-editor/', include('coop_html_editor.urls')),
+        url(r'^', include('coop_cms.urls')),
+        url(r'^coop_bar/', include('coop_bar.urls')),
+    ]
+
+Please note that coop-cms will handle any page slug, except the ones you will have defined before.
+
+settings.py
+~~~~~~~~~~~
+In settings.py::
+
+    MIDDLEWARE_CLASSES = (
+        'django.contrib.sessions.middleware.SessionMiddleware',
+        'django.middleware.common.CommonMiddleware',
+        'django.middleware.locale.LocaleMiddleware',
+        'django.middleware.csrf.CsrfViewMiddleware',
+        'django.contrib.auth.middleware.AuthenticationMiddleware',
+        'django.contrib.auth.middleware.SessionAuthenticationMiddleware',
+        'django.contrib.messages.middleware.MessageMiddleware',
+        'django.middleware.clickjacking.XFrameOptionsMiddleware',
+        'django.middleware.security.SecurityMiddleware',
+        'coop_cms.middleware.PermissionsMiddleware',  # Optional: redirect to login when PermissionDenied is raised
+        'coop_cms.utils.RequestMiddleware',
+        ...
+    )
+
+    TEMPLATE_CONTEXT_PROCESSORS = (
+        "django.contrib.auth.context_processors.auth",
+        "django.template.context_processors.debug",
+        "django.template.context_processors.i18n",
+        'django.template.context_processors.request',
+        "django.template.context_processors.media",
+        "django.template.context_processors.static",
+        "django.contrib.messages.context_processors.messages",
+        ...
+    )
+
+    AUTHENTICATION_BACKENDS = (
+        'coop_cms.perms_backends.ArticlePermissionBackend',
+        'coop_cms.apps.email_auth.auth_backends.EmailAuthBackend',  # Optional -> login with email rather than username
+        'django.contrib.auth.backends.ModelBackend', # Django's default auth backend
+    )
+
+    INSTALLED_APPS = (
+        # Contribs
+        'django.contrib.auth',
+        'django.contrib.contenttypes',
+        'django.contrib.sessions',
+        'django.contrib.sites',
+        'django.contrib.messages',
+        'django.contrib.staticfiles',
+        'django.contrib.admin',
+        'django.contrib.admindocs',
+
+        # 3rd parties
+        'django_extensions',
+        'sorl.thumbnail',
+        'floppyforms',
+        'registration', # Optional
+
+        # apps
+        'coop_bar',
+        'coop_html_editor',
+        'colorbox',
+        'coop_cms',
+        'coop_cms.apps.coop_bootstrap', # Optional -> utilities for Bootstrap CSS framework
+        'coop_cms.apps.email_auth', # Optional -> login with email rather than username
+
+        # The coop_cms Article is an abstract model, you must define an Article in one of your app
+        # We provide 2 apps that can be used if needed. Choose one or the other
+        # 'coop_cms.apps.basic_cms', # Nothing else than a concrete Article model.
+        'coop_cms.apps.demo_cms', # A ready-to-use example app.
+
+        # The app below make possible to create articles from a RSS feed. Add it if needed
+        'coop_cms.apps.rss_sync',
+    )
+
+    # These are settings to customize the CMS behavior. The values are just examples and correspond to the demo_cms app.
+
+    # Define the Concrete Article to use. Not required if basic_cms is used
+    COOP_CMS_ARTICLE_CLASS = 'coop_cms.apps.demo_cms.models.Article'
+
+    # Define a custom form for Article editing. Not required if basic_cms is used
+    COOP_CMS_ARTICLE_FORM = 'coop_cms.apps.demo_cms.forms.ArticleForm'
+
+    # Make possible to customize the menus in the admin bar. Optional.
+    # If not defined, the tuple is build with the coop_bar_cfg modules of all INSTALLED_APPS
+    COOPBAR_MODULES = (
+        'coop_cms.apps.demo_cms.my_coop_bar',
+    )
+
+    # Populate the urls when editing <a> tag in HTML editor
+    COOP_HTML_EDITOR_LINK_MODELS = (
+        'demo_cms.Article',
+    )
+
+    # Optional: you can overload the aloha plugins used by coop_cms --> see coop_html_editor docs for details
+    ALOHA_PLUGINS = (
+        "common/format",
+        "common/highlighteditables",
+    )
+
+    # Optional: you can change the jquery version used by aloha --> see coop_html_editor docs for details
+    ALOHA_JQUERY = 'js/jquery.1.7.2.js'
+
+    # Optional : you can customize the whole behavior of aloha by proving the url of config file.
+    # It will overload the config provided by coop_html_editor --> see coop_html_editor for details
+    ALOHA_INIT_URL = '/static/js/my_aloha_config.js'
+
+    # Default size of the article logo. Can be changed in template
+    COOP_CMS_ARTICLE_LOGO_SIZE = "128x128"
+
+    # Templates that can be used for an article
+    # It can be a tuple or a function returning a tuple
+    COOP_CMS_ARTICLE_TEMPLATES = 'coop_cms.apps.demo_cms.get_article_templates'
+    # COOP_CMS_ARTICLE_TEMPLATES = (
+    #     ('standard.html', 'Standard'),
+    #     ('homepage.html', 'Homepage'),
+    #     ('blog.html', 'Blog'),
+    # )
+
+    # Prefix for making absolute links
+    COOP_CMS_SITE_PREFIX = 'http://127.0.0.1:8000'
+
+    # from email : the domain of this address should allow the IP of your SMTP server : See SPF
+    COOP_CMS_FROM_EMAIL = '"Your name" <your@email.com>'
+
+    # TODO : REPLY-TO
+    COOP_CMS_REPLY_TO = '"Your name" <your@email.com>'
+
+    # Email address to send a newsletter test
+    COOP_CMS_TEST_EMAILS = (
+        '"Your name" <your@email.com>',
+    )
+
+    # tuples of templates that can be used for a newsletter.
+    COOP_CMS_NEWSLETTER_TEMPLATES = (
+        ('basic_newsletter.html', 'Basic'),
+        ('special_newsletter.html', 'With sections'),
+        ('sortable_newsletter.html', 'Sortable sections'),
+    )
+    # optional : A custom form for editing the newsletter
+    COOP_CMS_NEWSLETTER_FORM = 'coop_cms.apps.demo_cms.forms.SortableNewsletterForm'
+
+Base template
+~~~~~~~~~~~~~
+You need to create a base template ``base.html`` in one of your template folders. The ``article.html`` will inherit from this base template.
+
+You need the following templatetags libs::
+
+    {% load coop_navigation coop_bar_tags %}
+
+In the <head> of the document::
+
+    {% coop_bar_headers %}
+    {% block jquery_declaration %}{% endblock %}
+    {% block extra_head %}{% endblock %}
+
+In the <body> of the document::
+
+    {% block document %}...{% endblock %}
+    {% coop_bar %}
+
+Just before </body> at the end of the document::
+
+    {% coop_bar_footer %}
+
+You can also put some navigations in the <body>::
+
+    {% navigation_as_nested_ul %}
+
+The navigation_as_nested_ul templatetag accepts several args
+ * tree="english" --> The name of the navigation_tree to use. "default" if missing
+ * li_template="dropdown_li.html" --> a template for every <li> tags
+ * ul_template="dropdown_ul.html" --> a template for every <ul> tags
+ * li_args="dropdown_li_class.html" --> args to be used for any <li> tags
+
+There are others templatetags for navigation : ``navigation_breadcrumb``, ``navigation_children``, ``navigation_siblings`` with similar behavior
+
+Navigation configuration
+~~~~~~~~~~~~~~~~~~~~~~~~
+Don't forget to register the navigable types. In order to be accessible from the navigation, Model classes must be registered.
+ * In the django admin, go to coop_cms - Navigable types
+ * Add a new object and choose the model class you want to make accessible in navigation
+ * Define how to get the label in navigation for a given object : use the __unicode__, use the search field or use a custom get_label method
+ * If search_field is choosed, define the name of this field.
+ * The search field make possible to define which field to use when the navigation tree ask for matching objects.
+
+ * Then Go to a Navigation object in admin, the admin page propose to configure it thanks to a tree view
+ * Type some text in the text field at the top
+ * The field autocomplete propose all the objects of a NavigableType matching the text you entered
+ * Select one object and click 'Add a new item'
+ * The object is now part of the current navigation
+
+
+Going further
+-------------
+
+You can look at the demo_app in apps folder to see how to customize the behavior of coop_cms:
+ * Editable "pieces of HTML" in your page : A editable block that can be shared by several pages.
+ * Custom templates for articles and newsletters
+ * Custom fields in article
+ * Custom admin bar
+ * Configuration values
+ 
+Internationalization
+--------------------
+
+If you want to make an international site, coop_cms works well with `django-modeltranslation`.
+
+We recommend to remove `django-modeltranslation` from the apps when making the model migrations
+
+
+    if not (len(sys.argv) > 1 and sys.argv[1] in ('makemigrations', )):
+        INSTALLED_APPS = ('modeltranslation', ) + INSTALLED_APPS
+
+The model migrations wil not take the translation fields into account and it will be easier to add or remove languages
+with the following commands
+
+    python manage.py sync_translation_fields --noinput
+    python manage.py update_translation_fields
+
+
+License
+=======
+
+apidev-coop-cms is a fork of credis/coop_cms and uses BSD license see license.txt.
+
+coop-cms development was funded by `CREDIS <http://credis.org/>`_, FSE (European Social Fund) and Conseil Regional d'Auvergne.
```

### Comparing `apidev-coop_cms-1.5.9/apidev_coop_cms.egg-info/SOURCES.txt` & `apidev-coop_cms-1.6.0/apidev_coop_cms.egg-info/SOURCES.txt`

 * *Files 0% similar despite different names*

```diff
@@ -245,14 +245,15 @@
 coop_cms/migrations/0012_auto_20170502_1125.py
 coop_cms/migrations/0013_auto_20170607_1508.py
 coop_cms/migrations/0014_auto_20171006_1040.py
 coop_cms/migrations/0015_auto_20170608_1600.py
 coop_cms/migrations/0016_auto_20190509_2158.py
 coop_cms/migrations/0017_auto_20200124_1341.py
 coop_cms/migrations/0018_auto_20201209_0944.py
+coop_cms/migrations/0019_alter_navtree_types.py
 coop_cms/migrations/__init__.py
 coop_cms/static/chosen/chosen-bootstrap.css
 coop_cms/static/chosen/chosen-sprite.png
 coop_cms/static/chosen/chosen-sprite@2x.png
 coop_cms/static/chosen/chosen.css
 coop_cms/static/chosen/chosen.jquery.js
 coop_cms/static/chosen/chosen.jquery.min.js
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/admin.py` & `apidev-coop_cms-1.6.0/coop_cms/admin.py`

 * *Files 2% similar despite different names*

```diff
@@ -2,22 +2,22 @@
 """
 Admin pages for coop_cms
 """
 
 from django.conf import settings
 from django.contrib import admin
 from django.http import Http404
-from django.utils.translation import ugettext_lazy as _
+from django.utils.translation import gettext_lazy as _
 
-from coop_cms.forms.articles import ArticleAdminForm
-from coop_cms.forms.content import AliasAdminForm
-from coop_cms.forms.navigation import NavTypeForm, NavNodeAdminForm
-from coop_cms.forms.newsletters import NewsletterItemAdminForm, NewsletterAdminForm
-from coop_cms import models
-from coop_cms.settings import get_article_class, import_module
+from .forms.articles import ArticleAdminForm
+from .forms.content import AliasAdminForm
+from .forms.navigation import NavTypeForm, NavNodeAdminForm
+from .forms.newsletters import NewsletterItemAdminForm, NewsletterAdminForm
+from . import models
+from .settings import get_article_class, import_module
 
 
 # The BASE_ADMIN_CLASS can be a Translation admin if needed or regular modelAdmin if not
 if 'modeltranslation' in settings.INSTALLED_APPS:
     BASE_ADMIN_CLASS = import_module('modeltranslation.admin').TranslationAdmin
 else:
     BASE_ADMIN_CLASS = admin.ModelAdmin
@@ -71,15 +71,15 @@
 
     def change_view(self, request, object_id, extra_context=None, *args, **kwargs):
         """override the change view"""
         extra_context = extra_context or {}
         try:
             object_id = int(object_id)
         except ValueError:
-            #if the object_id is not a valid number, returns 404
+            # if the object_id is not a valid number, returns 404
             raise Http404
         tree = models.get_navtree_class().objects.get(id=object_id)
         extra_context['navtree'] = tree
         extra_context['navtree_nodes'] = self.nodes_li(tree)
         return super(NavTreeAdmin, self).change_view(
             request, str(object_id), extra_context=extra_context, *args, **kwargs
         )  # pylint: disable=E1002
@@ -274,8 +274,7 @@
 class DocumentAdmin(admin.ModelAdmin):
     pass
 
 
 @admin.register(models.SiteSettings)
 class SiteSettingsAdmin(BASE_ADMIN_CLASS):
     list_display = ('site', 'homepage_url', 'homepage_article', 'sitemap_mode')
-
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/migrations/0001_initial.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/migrations/0001_initial.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/migrations/0003_auto_20160129_1524.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/migrations/0003_auto_20160129_1524.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/basic_cms/migrations/0005_auto_20190719_1408.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/basic_cms/migrations/0005_auto_20190719_1408.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/css/bootstrap-theme.css` & `apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/css/bootstrap-theme.css`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/css/bootstrap-theme.min.css` & `apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/css/bootstrap-theme.min.css`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/css/bootstrap.css` & `apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/css/bootstrap.css`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/css/bootstrap.min.css` & `apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/css/bootstrap.min.css`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/fonts/glyphicons-halflings-regular.eot` & `apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/fonts/glyphicons-halflings-regular.eot`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/fonts/glyphicons-halflings-regular.svg` & `apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/fonts/glyphicons-halflings-regular.svg`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/fonts/glyphicons-halflings-regular.ttf` & `apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/fonts/glyphicons-halflings-regular.ttf`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/fonts/glyphicons-halflings-regular.woff` & `apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/fonts/glyphicons-halflings-regular.woff`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/js/bootstrap.js` & `apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/js/bootstrap.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/static/bs/js/bootstrap.min.js` & `apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/static/bs/js/bootstrap.min.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/coop_bootstrap/carousel.html` & `apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/coop_bootstrap/carousel.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/coop_bootstrap/form.html` & `apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/coop_bootstrap/form.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/coop_bootstrap/headline_carousel.html` & `apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/coop_bootstrap/headline_carousel.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/coop_bootstrap/li_node.html` & `apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/coop_bootstrap/li_node.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/coop_cms/article_list_item.html` & `apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/coop_cms/article_list_item.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templates/pagination/pagination.html` & `apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templates/pagination/pagination.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/coop_bootstrap/templatetags/coop_bs.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/coop_bootstrap/templatetags/coop_bs.py`

 * *Files 26% similar despite different names*

```diff
@@ -1,20 +1,19 @@
 # -*- coding: utf-8 -*-
 """
-Some tools for templates
+Some tools for templates # Just for compatibility
 """
 
 from django import template
 
-from coop_cms.templatetags.coop_utils import is_checkbox as _is_checkbox
-from coop_cms.templatetags.coop_navigation import NavigationAsNestedUlNode, extract_kwargs
+from ....templatetags.coop_utils import is_checkbox as _is_checkbox
+from ....templatetags.coop_navigation import NavigationAsNestedUlNode, extract_kwargs
 
 register = template.Library()
 
-# Just for compatibility
 
 @register.filter(name='is_checkbox')
 def is_checkbox(field):
     """returns true if field is a checkbox"""
     return _is_checkbox(field)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/coop_cms_settings.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/coop_cms_settings.py`

 * *Files 2% similar despite different names*

```diff
@@ -7,19 +7,19 @@
 COOP_CMS_ARTICLE_FORM = 'coop_cms.apps.demo_cms.forms.ArticleForm'
 
 COOPBAR_MODULES = ('coop_cms.apps.demo_cms.my_coop_bar',)
 DJALOHA_LINK_MODELS = ('demo_cms.Article',)
 COOP_CMS_ARTICLE_LOGO_SIZE = "128x128"
 
 COOP_CMS_ARTICLE_TEMPLATES = 'coop_cms.apps.demo_cms.get_article_templates'
-#COOP_CMS_ARTICLE_TEMPLATES = (
-#    ('standard.html', 'Standard'),
-#    ('homepage.html', 'Homepage'),
-#    ('blog.html', 'Blog'),
-#)
+# COOP_CMS_ARTICLE_TEMPLATES = (
+#     ('standard.html', 'Standard'),
+#     ('homepage.html', 'Homepage'),
+#     ('blog.html', 'Blog'),
+# )
 
 COOP_CMS_SITE_PREFIX = 'http://127.0.0.1:8000'
 COOP_CMS_FROM_EMAIL = '"Your name" <your@email.com>'
 COOP_CMS_TEST_EMAILS = ('"Your name" <your@email.com>',)
 COOP_CMS_NEWSLETTER_TEMPLATES = (
     ('basic_newsletter.html', 'Basic'),
     ('special_newsletter.html', 'With categories'),
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/forms.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/forms.py`

 * *Files 27% similar despite different names*

```diff
@@ -1,36 +1,36 @@
 # -*- coding: utf-8 -*-
 """
 Example of custom forms
 """
 
-import floppyforms.__future__ as forms
+import floppyforms as forms
 
-from coop_cms.forms.articles import ArticleForm as CmsArticleForm
-from coop_cms.forms.newsletters import NewsletterForm
-from coop_cms.settings import get_article_class
-from coop_cms.models import ArticleCategory
+from ...forms.articles import ArticleForm as CmsArticleForm
+from ...forms.newsletters import NewsletterForm
+from ...settings import get_article_class
+from ...models import ArticleCategory
 
 
 class ArticleForm(CmsArticleForm):
     """Custom article form"""
 
     class Meta(CmsArticleForm.Meta):
         model = get_article_class()
-        fields = CmsArticleForm.Meta.fields + ('author',)
+        fields = CmsArticleForm.Meta.fields + ('author', )
 
 
 class SortableNewsletterForm(NewsletterForm):
     """Example of newsletter form"""
     # cleaned_data = None
 
     sortable = forms.CharField(required=False, widget=forms.HiddenInput())
 
     class Media(NewsletterForm.Media):
-        js = NewsletterForm.Media.js + ('js/jquery.sortElements.js',)
+        js = NewsletterForm.Media.js + ('js/jquery.sortElements.js', )
 
     def save(self, *args, **kwargs):
         """override save"""
         ret = super(SortableNewsletterForm, self).save(*args, **kwargs)
 
         order = self.cleaned_data['sortable']
         if order:
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/migrations/0001_initial.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/migrations/0001_initial.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/models.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/models.py`

 * *Files 1% similar despite different names*

```diff
@@ -2,15 +2,15 @@
 """
 models for demo application : how to customize an article
 """
 
 from django.contrib.auth.models import User
 from django.db import models
 
-from coop_cms.models import BaseArticle
+from ...models import BaseArticle
 
 
 class Article(BaseArticle):
     """Example of custom article: add an author field"""
     author = models.ForeignKey(User, blank=True, default=None, null=True)
 
     def __str__(self):
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/my_coop_bar.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/my_coop_bar.py`

 * *Files 10% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 # -*- coding: utf-8 -*-
 """
 Example of a custom coop_bar configuration
 """
 
-from coop_cms import coop_bar_cfg
+from ... import coop_bar_cfg
 
 
 def load_commands(coop_bar):
     """This is where to define menus displayed by the coop_bar"""
 
     coop_bar.register([
         [
@@ -30,8 +30,7 @@
             coop_bar_cfg.cms_upload_image,
             coop_bar_cfg.cms_upload_doc,
         ],
         [
             coop_bar_cfg.log_out,
         ],
     ])
-
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/static/css/demo-style.css` & `apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/static/css/demo-style.css`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/static/js/jquery.sortElements.js` & `apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/static/js/jquery.sortElements.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/templates/500.html` & `apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/templates/500.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/templates/base.html` & `apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/templates/base.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/templates/blog.html` & `apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/templates/blog.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/templates/sortable_newsletter.html` & `apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/templates/sortable_newsletter.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/templates/standard.html` & `apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/templates/standard.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/demo_cms/tests.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/demo_cms/tests.py`

 * *Files 2% similar despite different names*

```diff
@@ -7,15 +7,15 @@
 
 from django.contrib.auth.models import User
 from django.conf import settings
 from django.test import TestCase
 
 from model_mommy import mommy
 
-from coop_cms.settings import get_article_class
+from ...settings import get_article_class
 
 
 @skipUnless('coop_cms.apps.demo_cms' in settings.INSTALLED_APPS, "demo_cms not installed installed")
 class AuthorPermissionTest(TestCase):
     """test author permission is taken into account"""
 
     def setUp(self):
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/auth_backends.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/auth_backends.py`

 * *Files 0% similar despite different names*

```diff
@@ -36,8 +36,7 @@
                     # If password is correct: return user to accept it as logged user
                     # authenticate successful : Mark password changed if invalidation
                     InvalidatedUser.objects.filter(user=user).update(password_changed=True)
                     return user
 
         # No valid user found : refuse login
         return None
-
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/forms.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/forms.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,16 +1,16 @@
 # -*- coding: utf-8 -*-
 """login form with Email rather than Username"""
 
 from django import forms
 from django.contrib.auth import authenticate, REDIRECT_FIELD_NAME
 from django.contrib.auth.forms import PasswordChangeForm, PasswordResetForm, SetPasswordForm
-from django.utils.translation import ugettext as _, ugettext_lazy as __
+from django.utils.translation import gettext as _, gettext_lazy as __
 
-from coop_cms.bs_forms import Form, BootstrapableMixin
+from ...bs_forms import Form, BootstrapableMixin
 
 from .models import InvalidatedUser
 
 
 class EmailAuthForm(Form):
     """Email form"""
     invalidated_password = False
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/management/commands/invalidate_passwords.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/management/commands/invalidate_passwords.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/migrations/0001_initial.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/migrations/0001_initial.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/registration_backend/forms.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/registration_backend/forms.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 # -*- coding: utf-8 -*-
 
 from django import forms
-from django.utils.translation import ugettext_lazy as _
+from django.utils.translation import gettext_lazy as _
 
 from django_registration.forms import RegistrationFormUniqueEmail
 
-from coop_cms.bs_forms import BootstrapableMixin
+from ....bs_forms import BootstrapableMixin
 
 
 class RegistrationFormUniqueEmailAndTermsOfService(BootstrapableMixin, RegistrationFormUniqueEmail):
     
     terms_of_service = forms.BooleanField(
         widget=forms.CheckboxInput,
         label=_('I have read and agree to the Terms of Service'),
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/registration_backend/urls.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/registration_backend/urls.py`

 * *Files 15% similar despite different names*

```diff
@@ -1,37 +1,38 @@
 # -*- coding: utf-8 -*-
 
-from django.conf.urls import url
+from django.urls import path
 from django.views.generic.base import TemplateView
-from coop_cms.apps.email_auth.registration_backend.views import EmailRegistrationView, EmailActivationView
+
+from .views import EmailRegistrationView, EmailActivationView
 
 urlpatterns = [
-    url(
-        r'^activate/complete/$',
+    path(
+        'activate/complete/',
         TemplateView.as_view(template_name='django_registration/activation_complete.html'),
         name='django_registration_activation_complete'
     ),
     # Activation keys get matched by \w+ instead of the more specific
     # [a-fA-F0-9]{40} because a bad activation key should still get to the view;
     # that way it can return a sensible "invalid key" message instead of a
     # confusing 404.
-    url(
-        r'^activate/(?P<activation_key>.+)/$',
+    path(
+        'activate/<str:activation_key>/',
         EmailActivationView.as_view(),
         name='registration_activate'
     ),
-    url(
-        r'^register/$',
+    path(
+        'register/',
         EmailRegistrationView.as_view(),
         name='registration_register'
     ),
-    url(
-        r'^register/complete/$',
+    path(
+        'register/complete/',
         TemplateView.as_view(template_name='django_registration/registration_complete.html'),
         name='django_registration_complete'
     ),
-    url(
-        r'^register/closed/$',
+    path(
+        'register/closed/',
         TemplateView.as_view(template_name='django_registration/registration_closed.html'),
         name='django_registration_disallowed'
     ),
 ]
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/registration_backend/views.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/registration_backend/views.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,18 +1,18 @@
 # -*- coding: utf-8 -*-
 
 from django.conf import settings
 from django.contrib.sites.models import Site
 from django.core.mail import send_mail
 from django.template.loader import get_template
-from django.utils.translation import ugettext as _
+from django.utils.translation import gettext as _
 
 from django_registration.backends.activation.views import RegistrationView, ActivationView
 
-from coop_cms.apps.email_auth.registration_backend.forms import RegistrationFormUniqueEmailAndTermsOfService
+from .forms import RegistrationFormUniqueEmailAndTermsOfService
 
 
 def notify_event(emails_to_notify, subject, template_name, extra_context):
     """notify an event to site managers"""
     if emails_to_notify:
         site = Site.objects.get_current()
         full_subject = "{0} - {1}".format(site, subject)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/tests.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/tests.py`

 * *Files 0% similar despite different names*

```diff
@@ -10,16 +10,16 @@
 from django.core import mail, management
 from django.test import TestCase
 from django.test.utils import override_settings
 from django.urls import reverse
 
 from model_mommy import mommy
 
-from coop_cms.moves import is_anonymous
-from coop_cms.tests import BeautifulSoup
+from ...moves import is_anonymous
+from ...tests import BeautifulSoup
 
 from .models import InvalidatedUser
 
 
 TEST_AUTHENTICATION_BACKENDS = (
     'coop_cms.perms_backends.ArticlePermissionBackend',
     'coop_cms.apps.email_auth.auth_backends.EmailAuthBackend',
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/email_auth/urls.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/email_auth/urls.py`

 * *Files 26% similar despite different names*

```diff
@@ -1,30 +1,30 @@
 # -*- coding: utf-8 -*-
 """urls"""
 
-from django.conf.urls import include, url
+from django.urls import path, re_path
 from django.contrib.auth.views import LoginView, PasswordChangeView, PasswordResetView, PasswordResetConfirmView
 
-from coop_cms.apps.email_auth.forms import BsPasswordChangeForm, BsPasswordResetForm, EmailAuthForm, BsSetPasswordForm
+from .forms import BsPasswordChangeForm, BsPasswordResetForm, EmailAuthForm, BsSetPasswordForm
 
 
 urlpatterns = [
-    url(
-        r'^login/$',
+    path(
+        'login/',
         LoginView.as_view(authentication_form=EmailAuthForm),
         name='login'
     ),
-    url(r'^password_change/$',
+    path('password_change/',
         PasswordChangeView.as_view(form_class=BsPasswordChangeForm),
         name='password_change'
     ),
-    url(
-        r'^password_reset/$',
+    path(
+        'password_reset/',
         PasswordResetView.as_view(form_class=BsPasswordResetForm),
         name='password_reset'
     ),
-    url(
+    re_path(
         r'^reset/(?P<uidb64>[0-9A-Za-z_\-]+)/(?P<token>[0-9A-Za-z]{1,13}-[0-9A-Za-z]{1,20})/$',
         PasswordResetConfirmView.as_view(form_class=BsSetPasswordForm),
         name='password_reset_confirm'
     ),
 ]
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/admin.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/admin.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 # -*- coding: utf-8 -*-
 """admin site"""
 
 from django.contrib import admin
 
-import floppyforms.__future__ as forms
+import floppyforms as forms
 
 from . import models
 from . import settings
 
 
 @admin.register(models.Emailing)
 class EmailingAdmin(admin.ModelAdmin):
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/coop_bar_cfg.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/coop_bar_cfg.py`

 * *Files 13% similar despite different names*

```diff
@@ -1,16 +1,17 @@
 # -*- coding: utf-8 -*-
 """coop_bar configuration: add links to balafon"""
 
 from django.urls import reverse
-from django.utils.translation import ugettext as _
+from django.utils.translation import gettext as _
 
 from coop_bar.utils import make_link
 
-from coop_cms.utils import get_model_name, get_model_app, get_model_label
+from ...utils import get_model_name, get_model_app
+
 from .models import Emailing
 
 
 def newsletters(request, context):
     """back to balafon newsletters"""
     if request and request.user.is_authenticated and request.user.is_staff:
         view_name = 'admin:{0}_{1}_changelist'.format(get_model_app(Emailing), get_model_name(Emailing))
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/management/commands/send_newsletters.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/management/commands/send_newsletters.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/migrations/0001_initial.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/migrations/0001_initial.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/models.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/models.py`

 * *Files 1% similar despite different names*

```diff
@@ -5,17 +5,17 @@
 import uuid
 
 from django.conf import settings
 
 from django.contrib.sites.models import Site
 from django.db import models
 from django.urls import reverse
-from django.utils.translation import ugettext_lazy as _
+from django.utils.translation import gettext_lazy as _
 
-from coop_cms.models import Newsletter
+from ...models import Newsletter
 
 
 class Contact(models.Model):
     email = models.EmailField(verbose_name=_('email'), db_index=True)
     last_name = models.CharField(verbose_name=_('last name'), max_length=200, blank=True, default='')
     first_name = models.CharField(verbose_name=_('first name'), max_length=200, blank=True, default='')
     email_verified = models.BooleanField(_("email verified"), default=False)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/settings.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/settings.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,11 +1,11 @@
 # -*- coding: utf-8 -*-
 """common place for settings. Define defaults"""
 
-from django.utils.translation import ugettext as _
+from django.utils.translation import gettext as _
 from django.conf import settings as project_settings
 
 
 def get_language_choices(default_label=None):
     """returns list of languages"""
     if default_label is None:
         default_label = _('Default')
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/newsletters/_link_bar.html` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/newsletters/_link_bar.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/newsletters/public/base.html` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/newsletters/public/base.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/test/newsletter_contact.html` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/test/newsletter_contact.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templates/test/newsletter_no_link.html` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templates/test/newsletter_no_link.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/templatetags/newsletters_utils.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/templatetags/newsletters_utils.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/tests/test_customize_content.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/tests/test_customize_content.py`

 * *Files 2% similar despite different names*

```diff
@@ -4,18 +4,19 @@
 from datetime import datetime
 
 from django.conf import settings
 from django.contrib.sites.models import Site
 from django.core import management
 from django.core import mail
 
-from coop_cms.models import Newsletter
-from coop_cms.tests import BaseTestCase
 from model_mommy import mommy
 
+from ....models import Newsletter
+from ....tests import BaseTestCase
+
 from .. import models
 
 
 class CustomTemplateTest(BaseTestCase):
     """Test the user-templating"""
 
     def test_send_newsletter(self):
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/tests/test_magic_links.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/tests/test_magic_links.py`

 * *Files 15% similar despite different names*

```diff
@@ -1,15 +1,16 @@
 # -*- coding: utf-8 -*-
 """test email sending"""
 
 from django.urls import reverse
 
-from coop_cms.tests.test_newsletter import BaseTestCase
 from model_mommy import mommy
 
+from ....tests import BaseTestCase
+
 from .. import models
 
 
 class MagicLinkTest(BaseTestCase):
 
     def test_view_magic_link(self):
         contact = mommy.make(models.Contact,email='toto@toto.fr', last_name='Toto')
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/tests/test_max_length.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/tests/test_max_length.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,11 +1,11 @@
 # -*- coding: utf-8 -*-
 """test email sending"""
 
-from coop_cms.tests import BaseTestCase
+from ....tests import BaseTestCase
 
 from ..utils import force_line_max_length
 
 
 class MaxLineLengthTest(BaseTestCase):
     """Check that we can control the max length of line"""
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/tests/test_newsletter.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/tests/test_newsletter.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 # -*- coding: utf-8 -*-
 """test email sending"""
 
 from django.conf import settings
 from django.contrib.sites.models import Site
 
-from coop_cms.tests.test_newsletter import NewsletterTest as BaseNewsletterTest
+from ....tests.test_newsletter import NewsletterTest as BaseNewsletterTest
 
 
 class NewsletterTest(BaseNewsletterTest):
     """test coop_cms newsletter"""
 
     def test_send_newsletter_template(self):
         def extra_checker(e):
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/tests/test_sending.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/tests/test_sending.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/tests/test_tracking.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/tests/test_tracking.py`

 * *Files 4% similar despite different names*

```diff
@@ -6,16 +6,17 @@
 from django.conf import settings
 from django.contrib.sites.models import Site
 from django.core import management
 from django.core import mail
 from django.urls import reverse
 
 from model_mommy import mommy
-from coop_cms.models import Newsletter
-from coop_cms.tests import BaseTestCase
+
+from ....models import Newsletter
+from ....tests import BaseTestCase
 
 from .. import models
 
 
 class EmailTrackingTest(BaseTestCase):
     """Use a image to track opened emails"""
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/tests/test_unregister.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/tests/test_unregister.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,16 +1,17 @@
 # -*- coding: utf-8 -*-
 """test email sending"""
 
 from django.contrib.sites.models import Site
 from django.urls import reverse
 
-from coop_cms.tests import BaseTestCase
 from model_mommy import mommy
 
+from ....tests import BaseTestCase
+
 from .. import models
 
 
 class UnregisterTest(BaseTestCase):
 
     def test_unregister_mailinglist(self):
         site1 = Site.objects.get_current()
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/tests/test_view_online.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/tests/test_view_online.py`

 * *Files 1% similar despite different names*

```diff
@@ -3,19 +3,21 @@
 
 from unittest import skipIf
 
 from django.conf import settings
 from django.test.utils import override_settings
 from django.urls import reverse
 
-from coop_cms.models import Newsletter
-from coop_cms.settings import is_localized, is_multilang
-from coop_cms.tests import BaseTestCase
 from model_mommy import mommy
 
+from ....models import Newsletter
+from ....settings import is_localized, is_multilang
+from ....tests import BaseTestCase
+
+
 from .. import models
 
 
 class ViewOnlineTest(BaseTestCase):
 
     def test_view_online(self):
         contact = mommy.make(models.Contact, email='toto@toto.fr')
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/utils.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/utils.py`

 * *Files 8% similar despite different names*

```diff
@@ -2,29 +2,26 @@
 """utilities"""
 
 from datetime import datetime
 import re
 import sys
 
 from django.conf import settings
-from django.contrib import messages
-from django.contrib.sites.models import Site
-from django.core.mail import get_connection, EmailMessage, EmailMultiAlternatives
+from django.core.mail import get_connection, EmailMultiAlternatives
 from django.template.loader import get_template
 from django.utils import translation
-from django.utils.safestring import mark_safe
-from django.utils.translation import get_language as django_get_language, ugettext as _
+from django.utils.translation import get_language as django_get_language
 from django.urls import reverse
 
-from coop_cms.logger import logger
-from coop_cms.models import Newsletter
-from coop_cms.settings import get_newsletter_context_callbacks
-from coop_cms.utils import dehtml, make_links_absolute
+from ...logger import logger
+from ...models import Newsletter
+from ...settings import get_newsletter_context_callbacks
+from ...utils import dehtml, make_links_absolute
 
-from .models import Emailing, MagicLink, Contact, Subscription, SubscriptionType
+from .models import Emailing, MagicLink, Contact
 
 
 class EmailSendError(Exception):
     """An exception raise when sending email failed"""
     pass
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/newsletters/views.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/newsletters/views.py`

 * *Files 2% similar despite different names*

```diff
@@ -5,15 +5,15 @@
 import os.path
 
 from django.urls import reverse
 from django.http import HttpResponse, HttpResponseRedirect, Http404
 from django.shortcuts import render, get_object_or_404
 from django.template.loader import get_template
 
-from coop_cms.utils import redirect_to_language
+from ...utils import redirect_to_language
 from wsgiref.util import FileWrapper
 
 from . import models
 from . import forms
 from .utils import get_emailing_context, patch_emailing_html
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/admin.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/admin.py`

 * *Files 12% similar despite different names*

```diff
@@ -1,17 +1,17 @@
 # -*- coding: utf-8 -*-
 """
 Admin
 """
 
 from django.contrib import admin
-from django.utils.translation import ugettext_lazy as _
+from django.utils.translation import gettext_lazy as _
 
-from coop_cms.apps.rss_sync import models, views
-from coop_cms.apps.rss_sync.forms import RssSourceAdminForm, RssItemAdminForm
+from . import models, views
+from .forms import RssSourceAdminForm, RssItemAdminForm
 
 
 @admin.register(models.RssSource)
 class RssSourceAdmin(admin.ModelAdmin):
     """Rss source admin"""
 
     list_display = ('url', 'title', 'last_collect')
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/forms.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/forms.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 # -*- coding: utf-8 -*-
 """Admin forms"""
 
 from django import forms
 from django.conf import settings
 
-from coop_cms.apps.rss_sync import models, widgets
+from . import models, widgets
 
 # These 2 admin forms makes possible to add custom widgets for the id field
 
 
 class RssSourceAdminForm(forms.ModelForm):
     """Admin form"""
     url = forms.CharField(widget=widgets.AdminCollectRssWidget)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/locale/en/LC_MESSAGES/django.po` & `apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/locale/en/LC_MESSAGES/django.po`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/locale/fr/LC_MESSAGES/django.mo` & `apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/locale/fr/LC_MESSAGES/django.mo`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/locale/fr/LC_MESSAGES/django.po` & `apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/locale/fr/LC_MESSAGES/django.po`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/migrations/0001_initial.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/migrations/0001_initial.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/models.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/models.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 # -*- coding: utf-8 -*-
 """
 models
 """
 
 from django.db import models
-from django.utils.translation import ugettext_lazy as _
+from django.utils.translation import gettext_lazy as _
 
 
 class RssSource(models.Model):
     """a Rss feed to use as source of items (which are used to create CMS articles)"""
 
     url = models.URLField(_('url'), unique=True)
     title = models.CharField(_("title"), max_length=200, blank=True, default="")
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/tests.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/tests.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,21 +1,22 @@
 # -*- coding: utf-8 -*-
 
-from django.test import TestCase
+from unittest import skipUnless
+
+from django.conf import settings
 from django.contrib.auth.models import User, Permission
-try:
-    from django.urls import reverse
-except:
-    from django.core.urlresolvers import reverse
-from coop_cms.settings import get_article_class
-from coop_cms.apps.rss_sync.models import RssItem, RssSource
-from coop_cms.models import BaseArticle
 from django.contrib.contenttypes.models import ContentType
-from django.conf import settings
-from unittest import skipUnless
+from django.test import TestCase
+from django.urls import reverse
+
+from ...settings import get_article_class
+from ...models import BaseArticle
+
+from .models import RssItem, RssSource
+
 
 class BaseTestCase(TestCase):
     def setUp(self):
         self.sync = None
         self.staff = None
         self.editor = None
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/utils.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/utils.py`

 * *Files 13% similar despite different names*

```diff
@@ -1,23 +1,25 @@
 # -*- coding: utf-8 -*-
 """
 utils
 """
 
 from datetime import datetime
-import feedparser
 from time import mktime
 
+import feedparser
+
 from django.conf import settings
 from django.contrib.contenttypes.models import ContentType
 from django.core.exceptions import PermissionDenied
 
-from coop_cms.apps.rss_sync.models import RssSource, RssItem
-from coop_cms.models import BaseArticle
-from coop_cms.settings import get_article_class
+from ...models import BaseArticle
+from ...settings import get_article_class
+
+from .models import RssSource, RssItem
 
 
 def collect_rss_items(user, source, check_user_rights=True):
     """
     download a rss feed and create rss_items
     the source can be a RssSource or any object with a get_absolute_url method
     """
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/views.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/views.py`

 * *Files 8% similar despite different names*

```diff
@@ -2,37 +2,34 @@
 """
 views
 """
 
 from django.http import HttpResponseRedirect
 from django.shortcuts import get_object_or_404
 from django.urls import reverse
-from django.utils.translation import ugettext as _
+from django.utils.translation import gettext as _
 
-from coop_cms.apps.rss_sync.models import RssSource, RssItem
-from coop_cms.apps.rss_sync.utils import collect_rss_items, create_cms_article
+from .models import RssSource, RssItem
+from .utils import collect_rss_items, create_cms_article
 
 
 def collect_rss_items_view(request, source_id):
     """The view called when clicking on the button in the object admin form"""
     rss_source = get_object_or_404(RssSource, id=source_id)
-
     collect_rss_items(request.user, rss_source)
-
     url = reverse('admin:rss_sync_rssitem_changelist') + '?source__id__exact={0}'.format(rss_source.id)
     return HttpResponseRedirect(url)
 
 
 def collect_rss_items_action(modeladmin, request, queryset):
     """The action called when executed from admin list of rss sources"""
     for source in queryset:
         collect_rss_items(request.user, source)
     url = reverse('admin:rss_sync_rssitem_changelist')
     return HttpResponseRedirect(url)
-collect_rss_items_action.short_description = _('Collect RSS items')
 
 
 def create_cms_article_view(request, item_id):
     """The view called when clicking on the button in admin object form"""
     item = get_object_or_404(RssItem, id=item_id)
     art = create_cms_article(request.user, item)
     return HttpResponseRedirect(art.get_edit_url())  # redirect to cms article edit page
@@ -43,8 +40,10 @@
     for item in queryset:
         art = create_cms_article(request.user, item)
 
     # if only 1 item processed (checked)
     if queryset.count() == 1:
         return HttpResponseRedirect(art.get_edit_url())  # redirect to cms article edit page
 
+
 create_cms_article_action.short_description = _('Create CMS Article')
+collect_rss_items_action.short_description = _('Collect RSS items')
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/rss_sync/widgets.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/rss_sync/widgets.py`

 * *Files 7% similar despite different names*

```diff
@@ -1,16 +1,16 @@
 # -*- coding: utf-8 -*-
 """widgets"""
 
 from django.forms import HiddenInput
 from django.urls import reverse
 from django.utils.safestring import mark_safe
-from django.utils.translation import ugettext_lazy as _
+from django.utils.translation import gettext_lazy as _
 
-from coop_cms.apps.rss_sync.models import RssSource
+from .models import RssSource
 
 
 def get_button_code(label, url, is_default=False):
     """create a html button"""
     css_class = u' default' if is_default else ''
     html = "&nbsp;&nbsp;"
     html += """<button class="btn btn-primary cust-btn{2}" onclick="window.location=\'{1}\'">{0}</button>""".format(
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/test_app/forms.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/test_app/forms.py`

 * *Files 19% similar despite different names*

```diff
@@ -1,18 +1,19 @@
 # -*- coding: utf-8 -*-
 """forms"""
 
-import floppyforms.__future__ as forms
+import floppyforms as forms
 
 from coop_html_editor.widgets import get_inline_html_widget
 
-from coop_cms.apps.test_app.models import TestClass
-from coop_cms.forms.articles import NewArticleForm, ArticleSettingsForm
-from coop_cms.forms.base import InlineHtmlEditableModelForm
-from coop_cms.forms.newsletters import NewsletterSettingsForm
+from ...forms.articles import NewArticleForm, ArticleSettingsForm
+from ...forms.base import InlineHtmlEditableModelForm
+from ...forms.newsletters import NewsletterSettingsForm
+
+from .models import TestClass
 
 
 class TestClassForm(InlineHtmlEditableModelForm):
     """for unit-testing"""
     class Meta:
         model = TestClass
         fields = ('field1', 'field2', 'field3', 'bool_field', 'int_field', 'float_field')
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/test_app/migrations/0001_initial.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/test_app/migrations/0001_initial.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/test_app/models.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/test_app/models.py`

 * *Files 8% similar despite different names*

```diff
@@ -1,13 +1,14 @@
 # -*- coding: utf-8 -*-
 """models"""
 
 from django.db import models
+from django.urls import reverse
 
-from coop_cms.moves import reverse, is_authenticated
+from ...moves import is_authenticated
 
 
 class TestTag(models.Model):
     """for unit-testing : test_view_object_m2m_relationships"""
     name = models.CharField(max_length=100)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/test_app/templates/coop_cms/test_app/base.html` & `apidev-coop_cms-1.6.0/coop_cms/apps/test_app/templates/coop_cms/test_app/base.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/test_app/templates/coop_cms/test_app/custom_tag_template.html` & `apidev-coop_cms-1.6.0/coop_cms/apps/test_app/templates/coop_cms/test_app/custom_tag_template.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/test_app/templates/coop_cms/test_app/detail.html` & `apidev-coop_cms-1.6.0/coop_cms/apps/test_app/templates/coop_cms/test_app/detail.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/test_app/tests.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/test_app/tests.py`

 * *Files 2% similar despite different names*

```diff
@@ -9,20 +9,21 @@
 from django.contrib.contenttypes.models import ContentType
 from django.test import TestCase
 from django.urls import reverse
 from django.test.utils import override_settings
 
 from model_mommy import mommy
 
-from coop_cms.apps.test_app.models import TestClass, TestTag
-from coop_cms import settings as coop_settings
-from coop_cms.models import BaseArticle, Newsletter
-from coop_cms.tests import BeautifulSoup, BaseArticleTest
-from coop_cms.tests.test_newsletter import NewsletterSettingsTest
-from coop_cms.utils import get_login_url
+from ... import settings as coop_settings
+from ...models import BaseArticle, Newsletter
+from ...tests import BeautifulSoup, BaseArticleTest
+from ...tests.test_newsletter import NewsletterSettingsTest
+from ...utils import get_login_url
+
+from .models import TestClass, TestTag
 
 
 class BaseTestCase(TestCase):
     
     def setUp(self):
         logging.disable(logging.CRITICAL)
         
@@ -542,15 +543,15 @@
             'COOP_CMS_ARTICLE_SETTINGS_FORM', 'COOP_CMS_NEW_ARTICLE_FORM', 'COOP_CMS_ARTICLE_TEMPLATES',
         )
     
     def setUp(self):
         self._settings_backup = {}
         for s in self._settings_fields_to_backup():
             v = getattr(settings, s, None)
-            if v != None:
+            if v is None:
                 self._settings_backup[s] = v
         
         self.LOGIN_URL = settings.LOGIN_URL
         settings.LOGIN_URL = get_login_url()
         settings.COOP_CMS_NEW_ARTICLE_FORM = 'coop_cms.apps.test_app.forms.MyNewArticleForm'
         settings.COOP_CMS_ARTICLE_SETTINGS_FORM = 'coop_cms.apps.test_app.forms.MyArticleSettingsForm'
         settings.COOP_CMS_ARTICLE_TEMPLATES = (
@@ -597,36 +598,38 @@
         article_class = coop_settings.get_article_class()
         url = reverse('coop_cms_new_article')
         data = {
             'title': 'test',
             'template': settings.COOP_CMS_ARTICLE_TEMPLATES[0][0],
             'publication': BaseArticle.PUBLISHED,
             'in_newsletter': False,
-            'navigation_parent': None,
+            'navigation_parent': '',
             'sites': [settings.SITE_ID]
         }
         response = self.client.post(url, data=data)
         self.assertEqual(response.status_code, 200)
         self.assertEqual(article_class.objects.count(), 1)
         article = article_class.objects.all()[0]
         for field in data:
             if field == "sites":
                 self.assertEqual([x.id for x in getattr(article, field).all()], data[field])
+            elif field == "navigation_parent":
+                self.assertEqual(getattr(article, field), None)
             else:
                 self.assertEqual(getattr(article, field), data[field])
 
     def test_new_article_anoymous(self):
         article_class = coop_settings.get_article_class()
         url = reverse('coop_cms_new_article')
         data = {
             'title': 'test',
             'template': settings.COOP_CMS_ARTICLE_TEMPLATES[0][0],
             'publication': BaseArticle.PUBLISHED,
             'in_newsletter': False,
-            'navigation_parent': None,
+            'navigation_parent': '',
             'sites': [settings.SITE_ID],
         }
         response = self.client.post(url, data=data)
         self.assertEqual(response.status_code, 302)
         login_url = get_login_url()
         self.assertTrue(response['Location'].find(login_url) >= 0)
         
@@ -637,15 +640,15 @@
         article_class = coop_settings.get_article_class()
         url = reverse('coop_cms_new_article')
         data = {
             'title': 'test',
             'template': settings.COOP_CMS_ARTICLE_TEMPLATES[0][0],
             'publication': BaseArticle.PUBLISHED,
             'in_newsletter': False,
-            'navigation_parent': None,
+            'navigation_parent': '',
             'sites': [settings.SITE_ID],
         }
         response = self.client.post(url, data=data)
         self.assertEqual(response.status_code, 403)
         
         self.assertEqual(article_class.objects.count(), 0)
         
@@ -687,39 +690,41 @@
         now = now.replace(microsecond=0)
         data = {
             'template': settings.COOP_CMS_ARTICLE_TEMPLATES[0][0],
             'publication_date': now,
             'publication': BaseArticle.PUBLISHED,
             'in_newsletter': False,
             'summary': 'Summary',
-            'navigation_parent': None,
+            'navigation_parent': '',
             'sites': [settings.SITE_ID],
         }
         response = self.client.post(url, data=data)
         self.assertEqual(response.status_code, 200)
         self.assertEqual(article_class.objects.count(), 1)
         article = article_class.objects.all()[0]
         for field in data:
             if field == "sites":
                 self.assertEqual([x.id for x in getattr(article, field).all()], data[field])
+            elif field == "navigation_parent":
+                self.assertEqual(article.navigation_parent, None)
             else:
                 self.assertEqual(getattr(article, field), data[field])
         
     def test_article_settings_anonymous(self):
         article_class = coop_settings.get_article_class()
         article = mommy.make(article_class, slug="test")
         url = reverse('coop_cms_article_settings', args=[article.id])
         
         data = {
             'template': settings.COOP_CMS_ARTICLE_TEMPLATES[0][0],
             'publication_date': datetime.now(),
             'publication': BaseArticle.PUBLISHED,
             'in_newsletter': False,
             'summary': 'Summary',
-            'navigation_parent': None,
+            'navigation_parent': '',
             'sites': [settings.SITE_ID],
         }
         response = self.client.post(url, data=data)
         self.assertEqual(response.status_code, 302)
         login_url = get_login_url()
         self.assertTrue(response['Location'].find(login_url) >= 0)
         
@@ -735,15 +740,15 @@
         
         data = {
             'template': settings.COOP_CMS_ARTICLE_TEMPLATES[0][0],
             'publication_date': datetime.now(),
             'publication': BaseArticle.PUBLISHED,
             'in_newsletter': False,
             'summary': 'Summary',
-            'navigation_parent': None,
+            'navigation_parent': '',
             'sites': [settings.SITE_ID],
         }
         response = self.client.post(url, data=data)
         self.assertEqual(response.status_code, 403)
         
         self.assertEqual(article_class.objects.count(), 1)
         article = article_class.objects.all()[0]
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/apps/test_app/views.py` & `apidev-coop_cms-1.6.0/coop_cms/apps/test_app/views.py`

 * *Files 9% similar despite different names*

```diff
@@ -1,14 +1,15 @@
 # -*- coding: utf-8 -*-
 """for unit-testing"""
 
-from coop_cms.apps.test_app.models import TestClass
-from coop_cms.apps.test_app.forms import TestClassForm
+from ...generic_views import EditableObjectView, ListView, EditableFormsetView
 
-from coop_cms.generic_views import EditableObjectView, ListView, EditableFormsetView
+
+from .models import TestClass
+from .forms import TestClassForm
 
 
 class TestClassListView(ListView):
     """for unit-testing"""
     model = TestClass
     template_name = "coop_cms/test_app/list.html"
     ordering = 'other_field'
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/bs_forms.py` & `apidev-coop_cms-1.6.0/coop_cms/bs_forms.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 # -*- coding: utf-8 -*-
 """Boptstrap-css friendly forms"""
 
 import types
 
-import floppyforms.__future__ as forms
+import floppyforms as forms
 
-from coop_cms.templatetags.coop_utils import is_checkbox
+from .templatetags.coop_utils import is_checkbox
 
 
 def _build_attrs(widget, base_attrs, extra_attrs=None, **kwargs):
     """Patch > Helper function for building an attribute dictionary."""
     attrs = base_attrs.copy()
     if widget.attrs:
         attrs.update(widget.attrs)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/locale/en/LC_MESSAGES/django.po` & `apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/locale/en/LC_MESSAGES/django.po`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/locale/fr/LC_MESSAGES/django.po` & `apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/locale/fr/LC_MESSAGES/django.po`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/base.html` & `apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/base.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/django_registration/registration_form.html` & `apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/django_registration/registration_form.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/ci/semaphore_project/templates/registration/login.html` & `apidev-coop_cms-1.6.0/coop_cms/ci/semaphore_project/templates/registration/login.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/context_processors.py` & `apidev-coop_cms-1.6.0/coop_cms/context_processors.py`

 * *Files 3% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 # -*- coding: utf-8 -*-
 """This can be added to default context"""
 
 from django.conf import settings
 from django.urls import reverse
 
-from coop_cms.models import get_homepage_url
-from coop_cms.settings import homepage_no_redirection
+from .models import get_homepage_url
+from .settings import homepage_no_redirection
 
 
 def cms_settings(request):
     """add jquery version to context"""
     context = {}
 
     if hasattr(settings, 'COOP_CMS_JQUERY_VERSION'):
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/coop_bar_cfg.py` & `apidev-coop_cms-1.6.0/coop_cms/coop_bar_cfg.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,25 +1,25 @@
 # -*- coding: utf-8 -*-
 """configuration file for coop_bar"""
 
 from django.conf import settings
 from django.contrib.contenttypes.models import ContentType
 from django.urls import reverse, NoReverseMatch
 from django.template.loader import get_template
-from django.utils.translation import ugettext as _
+from django.utils.translation import gettext as _
 
 from coop_bar.utils import make_link
 from coop_html_editor.settings import get_html_editor
 
-from coop_cms.models import Link, Fragment
-from coop_cms.moves import is_authenticated
-from coop_cms.settings import (
+from .models import Link, Fragment
+from .moves import is_authenticated
+from .settings import (
     get_article_class, get_navtree_class, cms_no_homepage, hide_media_library_menu, is_localized
 )
-from coop_cms.utils import get_model_name, get_model_app, get_model_label
+from .utils import get_model_name, get_model_app, get_model_label
 
 
 def can_do(perm, object_names):
     """can_do decorator: check that user has permission before calling it. If not return empty value"""
     def inner_decorator(func):
         """inner decorator"""
         def wrapper(request, context):
@@ -39,14 +39,15 @@
                         yes_we_can = func(request, context)
                         if yes_we_can:
                             return yes_we_can
             return
         return wrapper
     return inner_decorator
 
+
 can_edit_article = can_do('can_edit', ['article'])
 can_edit_object = can_do('can_edit', ['article', 'object', 'objects', 'newsletter'])
 can_publish_article = can_do('can_publish', ['article'])
 can_edit_newsletter = can_do('can_edit', ['newsletter'])
 can_edit = can_do('can_edit', ['article', 'newsletter', 'object'])
 
 
@@ -330,17 +331,20 @@
     template_ = get_template("coop_cms/_coop_bar_js.html")
     return template_.render(context)
 
 
 def log_out(request, context):
     """show menu"""
     if request and is_authenticated(request.user) and request.user.is_staff:
-        return make_link(
-            reverse("logout"), _('Log out'), 'power-off', classes=['alert_on_click', 'icon']
-        )
+        try:
+            return make_link(
+                reverse("logout"), _('Log out'), 'power-off', classes=['alert_on_click', 'icon']
+            )
+        except NoReverseMatch:
+            pass
 
 
 @can_add_article
 def cms_new_newsletter(request, context):
     """show menu"""
     if not context.get('edit_mode'):
         if getattr(settings, 'COOP_CMS_NEWSLETTER_TEMPLATES', None):
@@ -435,14 +439,17 @@
 def cms_edit_fragments(request, context):
     """show menu"""
     if request:
         content_type = ContentType.objects.get_for_model(Fragment)
         perm = '{0}.change_{1}'.format(content_type.app_label, content_type.model)
         if request.user.has_perm(perm):
             url = reverse("coop_cms_edit_fragments")
+            variable = context.get('article', None) or context.get('object', None) or context.get('newsletter', None)
+            if variable:
+                url += '?filter={0}'.format(variable.id)
             return make_link(
                 url, _('Edit fragments'), 'shapes',
                 classes=['alert_on_click', 'colorbox-form', 'icon', 'if-fragments']
             )
 
 
 def publication_css_classes(request, context):
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/feeds.py` & `apidev-coop_cms-1.6.0/coop_cms/feeds.py`

 * *Files 16% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 # -*- coding: utf-8 -*-
 """Rss feed"""
 
 from django.contrib.syndication.views import Feed
 
-from coop_cms.settings import get_article_class
-from coop_cms.utils import dehtml
+from .settings import get_article_class
+from .utils import dehtml
 
 
 class ArticleFeed(Feed):
     """Rss feed for article"""
     title = ""
     link = ""
     description = ""
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/forms/articles.py` & `apidev-coop_cms-1.6.0/coop_cms/forms/articles.py`

 * *Files 9% similar despite different names*

```diff
@@ -1,25 +1,26 @@
 # -*- coding: utf-8 -*-
 """forms"""
 
 from django import forms
 from django.conf import settings
 from django.contrib.sites.models import Site
 from django.core.exceptions import ValidationError
-from django.utils.translation import ugettext as _
+from django.urls import reverse
+from django.utils.translation import gettext as _
 
-from coop_cms.forms.base import InlineHtmlEditableModelForm
-from coop_cms.forms.navigation import WithNavigationModelForm
-from coop_cms.models import BaseArticle
-from coop_cms.moves import reverse
-from coop_cms.settings import (
+from ..models import BaseArticle
+from ..settings import (
     get_article_class, get_article_templates, is_localized, can_rewrite_url, is_multi_site
 )
-from coop_cms.utils import dehtml
-from coop_cms.widgets import ImageEdit, ReadOnlyInput
+from ..utils import dehtml
+from ..widgets import ImageEdit, ReadOnlyInput
+
+from .base import InlineHtmlEditableModelForm
+from .navigation import WithNavigationModelForm
 
 
 class ArticleForm(InlineHtmlEditableModelForm):
     """frontend edition of an article"""
 
     def __init__(self, *args, **kwargs):
         super(ArticleForm, self).__init__(*args, **kwargs)  # pylint: disable=E1002
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/forms/base.py` & `apidev-coop_cms-1.6.0/coop_cms/forms/base.py`

 * *Files 18% similar despite different names*

```diff
@@ -1,11 +1,11 @@
 # -*- coding: utf-8 -*-
 """forms"""
 
-import floppyforms.__future__ as floppyforms
+import floppyforms as floppyforms
 
 from coop_html_editor.widgets import get_inline_html_widget
 
 
 class InlineHtmlEditableModelForm(floppyforms.ModelForm):
     """Base class for form with inline-HTML editor fields"""
     is_inline_editable = True  # The cms_edition templatetag checks this for switching to edit mode
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/forms/content.py` & `apidev-coop_cms-1.6.0/coop_cms/forms/content.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,22 +1,23 @@
 # -*- coding: utf-8 -*-
 """forms"""
 
 from django import forms
 from django.conf import settings
 from django.contrib.sites.models import Site
 from django.core.exceptions import ValidationError
-from django.utils.translation import ugettext as _
+from django.utils.translation import gettext as _
 
-import floppyforms.__future__ as floppyforms
+import floppyforms as floppyforms
 
-from coop_cms.forms.fields import HidableMultipleChoiceField
-from coop_cms.forms.navigation import WithNavigationModelForm
-from coop_cms.models import Alias, Link, Document, MediaFilter, ImageSize
-from coop_cms.widgets import ChosenSelectMultiple
+from ..models import Alias, Link, Document, MediaFilter, ImageSize
+from ..widgets import ChosenSelectMultiple
+
+from .fields import HidableMultipleChoiceField
+from .navigation import WithNavigationModelForm
 
 
 class MediaBaseAddMixin(object):
 
     def __init__(self, *args, **kwargs):
         super(MediaBaseAddMixin, self).__init__(*args, **kwargs)  # pylint: disable=E1002
         # Media filters
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/forms/fragments.py` & `apidev-coop_cms-1.6.0/coop_cms/forms/fragments.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,19 +1,19 @@
 # -*- coding: utf-8 -*-
 """forms"""
 
 from six import string_types
 
 from django import forms
 from django.core.exceptions import ValidationError
-from django.utils.translation import ugettext as _
+from django.utils.translation import gettext as _
 
-import floppyforms.__future__ as floppyforms
+import floppyforms as floppyforms
 
-from coop_cms.models import Fragment, FragmentType
+from ..models import Fragment, FragmentType
 
 
 class BaseFragmentForm(floppyforms.ModelForm):
     """Base class for AddFragmentForm and EditFragmentForm"""
 
     class Media:
         css = {
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/forms/navigation.py` & `apidev-coop_cms-1.6.0/coop_cms/forms/navigation.py`

 * *Files 7% similar despite different names*

```diff
@@ -1,17 +1,17 @@
 # -*- coding: utf-8 -*-
 """forms"""
 
 from django import forms
 from django.core.exceptions import ValidationError
-from django.utils.translation import ugettext as _
+from django.utils.translation import gettext as _
 
-from coop_cms.models import NavType, NavNode, get_navigable_type_choices
-from coop_cms.settings import get_navigable_content_types, get_article_class, get_navtree_class
-from coop_cms.widgets import GenericFieldRawIdWidget
+from ..models import NavType, NavNode, get_navigable_type_choices
+from ..settings import get_navigable_content_types, get_article_class, get_navtree_class
+from ..widgets import GenericFieldRawIdWidget
 
 
 class NavTypeForm(forms.ModelForm):
     """Navigation Type Form"""
 
     def __init__(self, *args, **kwargs):
         super(NavTypeForm, self).__init__(*args, **kwargs)  # pylint: disable=E1002
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/forms/newsletters.py` & `apidev-coop_cms-1.6.0/coop_cms/forms/newsletters.py`

 * *Files 4% similar despite different names*

```diff
@@ -3,23 +3,24 @@
 
 from django import forms
 from django.conf import settings
 from django.contrib.contenttypes.models import ContentType
 from django.contrib.sites.models import Site
 from django.core.exceptions import ValidationError
 from django.utils.timezone import now as dt_now
-from django.utils.translation import ugettext as _, ugettext_lazy
+from django.utils.translation import gettext as _, gettext_lazy
 
-import floppyforms.__future__ as floppyforms
+import floppyforms as floppyforms
 
-from coop_cms.forms.base import InlineHtmlEditableModelForm
-from coop_cms.bs_forms import Form as BsForm
-from coop_cms.models import Newsletter, NewsletterSending, NewsletterItem
-from coop_cms.settings import get_article_class, get_newsletter_templates
-from coop_cms.widgets import ChosenSelectMultiple
+from ..bs_forms import Form as BsForm
+from ..models import Newsletter, NewsletterSending, NewsletterItem
+from ..settings import get_article_class, get_newsletter_templates
+from ..widgets import ChosenSelectMultiple
+
+from .base import InlineHtmlEditableModelForm
 
 
 class NewsletterItemAdminForm(forms.ModelForm):
     """admin form for NewsletterItem"""
 
     def __init__(self, *args, **kwargs):
         super(NewsletterItemAdminForm, self).__init__(*args, **kwargs)  # pylint: disable=E1002
@@ -37,15 +38,15 @@
 
 
 class NewsletterSettingsForm(forms.ModelForm):
     """Newsletter creation form"""
 
     class Meta:
         model = Newsletter
-        fields = ('subject', 'template', 'newsletter_date', 'items', )
+        fields = ('subject', 'template', 'newsletter_date', 'items', 'site')
 
     class Media:
         css = {
             'all': ('chosen/chosen.css', ),
         }
         js = (
             'chosen/chosen.jquery.js',
@@ -150,33 +151,33 @@
             self.fields["template"] = forms.ChoiceField(choices=choices)
         else:
             self.fields["template"] = forms.CharField()
         self.fields["items"].widget.attrs["class"] = "chosen-select"
 
     class Meta:
         model = Newsletter
-        fields = ('subject', 'content', 'template', 'source_url', 'items', 'newsletter_date', )
+        fields = ('subject', 'content', 'template', 'source_url', 'items', 'newsletter_date', 'site')
         widgets = {}
 
     class Media:
         css = {
             'all': ('css/admin-tricks.css', 'chosen/chosen.css', ),
         }
         js = (
             'chosen/chosen.jquery.js',
         )
 
         
 class NewsletterHandleRecipients(BsForm):
-    email_help_text = ugettext_lazy("Enter another address to send to someone who is not in the list")
-    email_label = ugettext_lazy("Email")
+    email_help_text = gettext_lazy("Enter another address to send to someone who is not in the list")
+    email_label = gettext_lazy("Email")
 
     emails = forms.MultipleChoiceField(
         widget=forms.CheckboxSelectMultiple(), required=False,
-        label=_(ugettext_lazy('Emails')), help_text=ugettext_lazy('Check the address if you want to send it the test'),
+        label=_(gettext_lazy('Emails')), help_text=gettext_lazy('Check the address if you want to send it the test'),
         choices=[]
     )
     additional_email1 = forms.EmailField(required=False, label=email_label, help_text=email_help_text)
     additional_email2 = forms.EmailField(required=False, label=email_label, help_text=email_help_text)
 
     def __init__(self, *args, **kwargs):
         super().__init__(*args, **kwargs)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/generic_views.py` & `apidev-coop_cms-1.6.0/coop_cms/generic_views.py`

 * *Files 2% similar despite different names*

```diff
@@ -5,25 +5,26 @@
 from django.contrib.contenttypes.models import ContentType
 from django.contrib.messages.api import success as success_message, error as error_message
 from django.core.cache import cache
 from django.core.exceptions import PermissionDenied
 from django.forms.models import modelformset_factory
 from django.http import Http404, HttpResponse, HttpResponseRedirect
 from django.shortcuts import render, get_object_or_404
-from django.utils.translation import ugettext as _, get_language
+from django.urls import reverse
+from django.utils.translation import gettext as _, get_language
 from django.views.generic import TemplateView
 from django.views.generic.base import View
 from django.views.generic.list import ListView as DjangoListView
 
 from coop_html_editor import utils as html_editor_utils
 
-from coop_cms.exceptions import ArticleNotAllowed
-from coop_cms.logger import logger
-from coop_cms.moves import reverse, is_authenticated
-from coop_cms.settings import is_cache_enabled
+from .exceptions import ArticleNotAllowed
+from .logger import logger
+from .moves import is_authenticated
+from .settings import is_cache_enabled
 
 
 class ListView(DjangoListView):
     """generic list view"""
     ordering = ''
     
     def get_context_data(self, **kwargs):
@@ -153,15 +154,15 @@
             else:
                 raise
 
         if not self.can_access_object():
             raise Http404
         
         if not self.can_view_object():
-            logger.warning("PermissionDenied")
+            # logger.warning("PermissionDenied")
             raise PermissionDenied
 
         if self.can_cache():
             response_content = cache.get(self.get_cache_key(self.object))
             if response_content:
                 return HttpResponse(response_content)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/locale/en/LC_MESSAGES/django.po` & `apidev-coop_cms-1.6.0/coop_cms/locale/en/LC_MESSAGES/django.po`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/locale/fr/LC_MESSAGES/django.mo` & `apidev-coop_cms-1.6.0/coop_cms/locale/fr/LC_MESSAGES/django.mo`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/locale/fr/LC_MESSAGES/django.po` & `apidev-coop_cms-1.6.0/coop_cms/locale/fr/LC_MESSAGES/django.po`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/management/commands/create_newsletter_items.py` & `apidev-coop_cms-1.6.0/coop_cms/management/commands/create_newsletter_items.py`

 * *Files 3% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 # -*- coding: utf-8 -*-
 """create newsletter item"""
 
 from django.core.management.base import BaseCommand
 
-from coop_cms.models import create_newsletter_item
-from coop_cms.settings import get_newsletter_item_classes
+from ...models import create_newsletter_item
+from ...settings import get_newsletter_item_classes
 
 
 class Command(BaseCommand):
     """force the creation of every newsletter items"""
     help = u"force the creation of every newsletter items"
     use_argparse = False
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/management/commands/migrate.py` & `apidev-coop_cms-1.6.0/coop_cms/management/commands/migrate.py`

 * *Files 3% similar despite different names*

```diff
@@ -1,16 +1,17 @@
 # -*- coding: utf-8 -*-
 """force sync_translation after migrate for unit tests"""
 
 import sys
 
+from io import StringIO
+
 from django.conf import settings
 from django.core.management import call_command
 from django.core.management.commands import migrate
-from django.utils.six import StringIO
 
 
 class Command(migrate.Command):
     """migrate"""
     help = u"patched migrate: call sync_translation_fields after migrations when unit testing"
 
     def handle(self, *args, **options):
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/management/commands/migrate_coop_cms_dump.py` & `apidev-coop_cms-1.6.0/coop_cms/management/commands/migrate_coop_cms_dump.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/management/commands/patch_alias_translation.py` & `apidev-coop_cms-1.6.0/coop_cms/management/commands/patch_alias_translation.py`

 * *Files 3% similar despite different names*

```diff
@@ -1,16 +1,16 @@
 # -*- coding: utf-8 -*-
 """"""
 
 from django.conf import settings
 from django.core.management.base import BaseCommand
 from django.db import connection
 
-from coop_cms.models import Alias
-from coop_cms.settings import is_localized
+from ...models import Alias
+from ...settings import is_localized
 
 
 class Command(BaseCommand):
     """patch alias redirect"""
     help = "patch alias redirect"
     use_argparse = False
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/management/commands/send_newsletter.py` & `apidev-coop_cms-1.6.0/coop_cms/management/commands/send_newsletter.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,16 +1,16 @@
 # -*- coding: utf-8 -*-
 """send newsletter"""
 
 from datetime import datetime
 
 from django.core.management.base import BaseCommand
 
-from coop_cms.utils import send_newsletter
-from coop_cms.models import NewsletterSending
+from ...utils import send_newsletter
+from ...models import NewsletterSending
 
 
 class Command(BaseCommand):
     """send newsletter"""
     help = "send newsletter"
 
     def add_arguments(self, parser):
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/middleware.py` & `apidev-coop_cms-1.6.0/coop_cms/middleware.py`

 * *Files 18% similar despite different names*

```diff
@@ -1,16 +1,16 @@
 # -*- coding: utf-8 -*-
 """"""
 
 from django.core.exceptions import PermissionDenied
 from django.contrib.auth.views import redirect_to_login
 from django.urls import NoReverseMatch
 
-from coop_cms.moves import MiddlewareMixin, is_authenticated
-from coop_cms.utils import get_login_url
+from .moves import MiddlewareMixin, is_authenticated
+from .utils import get_login_url
 
 
 class PermissionsMiddleware(MiddlewareMixin):
     """Handle permission"""
 
     def process_exception(self, request, exception):
         """manage exception"""
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/migrations/0001_initial.py` & `apidev-coop_cms-1.6.0/coop_cms/migrations/0001_initial.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/migrations/0002_auto_20160108_1628.py` & `apidev-coop_cms-1.6.0/coop_cms/migrations/0002_auto_20160108_1628.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/migrations/0003_auto_20160204_1540.py` & `apidev-coop_cms-1.6.0/coop_cms/migrations/0003_auto_20160204_1540.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/migrations/0004_auto_20160620_1310.py` & `apidev-coop_cms-1.6.0/coop_cms/migrations/0004_auto_20160620_1310.py`

 * *Files 11% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 # -*- coding: utf-8 -*-
 
 from django.db import migrations, models
 
-from coop_cms.moves import reverse
+from django.urls import reverse
 
 
 def set_homepage(apps, schema_editor):
     # Move from homepage_for_site to SiteSettings
     site_class = apps.get_model("sites", "Site")
     for site in site_class.objects.all():
         try:
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/migrations/0009_auto_20170301_1621.py` & `apidev-coop_cms-1.6.0/coop_cms/migrations/0009_auto_20170301_1621.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/migrations/0010_auto_20170320_1349.py` & `apidev-coop_cms-1.6.0/coop_cms/migrations/0010_auto_20170320_1349.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/migrations/0012_auto_20170502_1125.py` & `apidev-coop_cms-1.6.0/coop_cms/migrations/0012_auto_20170502_1125.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/migrations/0015_auto_20170608_1600.py` & `apidev-coop_cms-1.6.0/coop_cms/migrations/0015_auto_20170608_1600.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/migrations/0016_auto_20190509_2158.py` & `apidev-coop_cms-1.6.0/coop_cms/migrations/0016_auto_20190509_2158.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/migrations/0017_auto_20200124_1341.py` & `apidev-coop_cms-1.6.0/coop_cms/migrations/0017_auto_20200124_1341.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/migrations/0018_auto_20201209_0944.py` & `apidev-coop_cms-1.6.0/coop_cms/migrations/0018_auto_20201209_0944.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/models.py` & `apidev-coop_cms-1.6.0/coop_cms/models.py`

 * *Files 2% similar despite different names*

```diff
@@ -16,52 +16,67 @@
 from django.core.exceptions import ValidationError
 from django.core.files import File
 from django.db import models
 from django.db.models import Q
 from django.db.models.aggregates import Max
 from django.db.models.signals import pre_delete, post_save
 from django.template.loader import get_template
+from django.urls import reverse, NoReverseMatch
 from django.utils.html import escape
-from django.utils.translation import get_language, ugettext, ugettext_lazy as _
+from django.utils.translation import get_language, gettext, gettext_lazy as _
 from django.utils.safestring import mark_safe
 
 from django_extensions.db.models import TimeStampedModel, AutoSlugField
 from sorl.thumbnail import default as sorl_thumbnail, delete as sorl_delete
 from sorl.thumbnail.parsers import ThumbnailParseError
 
-from coop_cms.moves import make_context, reverse, NoReverseMatch, is_authenticated
-from coop_cms.optionals import build_localized_fieldname
-from coop_cms.settings import (
+from .moves import make_context, is_authenticated
+from .optionals import build_localized_fieldname
+from .settings import (
     get_article_class, get_article_logo_size, get_article_logo_crop, get_article_templates, get_default_logo,
     get_headline_image_size, get_headline_image_crop, get_img_folder, get_newsletter_item_classes,
     get_navtree_class, get_max_image_width, is_localized, is_requestprovider_installed, COOP_CMS_NAVTREE_CLASS,
     cms_no_homepage, homepage_no_redirection, has_localized_urls
 )
-from coop_cms.utils import dehtml, RequestManager, RequestNotFound, get_model_label, make_locale_path, slugify
+from .utils import dehtml, RequestManager, RequestNotFound, get_model_label, make_locale_path, slugify
+
 
 ADMIN_THUMBS_SIZE = '60x60'
 
 
 class InvalidArticleError(Exception):
     """The exception can be raised when article is not valid"""
     pass
 
 
+class FileUrlWrapper:
+
+    def __init__(self, file):
+        self.filename = file.name
+
+    @property
+    def url(self):
+        relative_name = self.filename.replace(settings.MEDIA_ROOT, settings.MEDIA_URL)
+        if relative_name.find(settings.MEDIA_URL) < 0:
+            relative_name = settings.MEDIA_URL + '/' + relative_name
+        return relative_name
+
+
 def validate_slug(value):
     """check a slug only contains letters, numbers or hyphens (undercores are allowed)"""
     if not re.match(r"^[-\w]+$", value):
         raise ValidationError(_('The slug must only contains letters, numbers or hyphens'), code='invalid')
 
 
 def get_object_label(content_type, obj):
     """
     returns the label used in navigation according to the configured rule
     """
     if not obj:
-        return ugettext("Node")
+        return gettext("Node")
     try:
         nav_type = NavType.objects.get(content_type=content_type)
         if nav_type.label_rule == NavType.LABEL_USE_SEARCH_FIELD:
             label = getattr(obj, nav_type.search_field)
         elif nav_type.label_rule == NavType.LABEL_USE_GET_LABEL:
             label = obj.get_label()
         else:
@@ -608,15 +623,15 @@
         Site, verbose_name=_('Homepage for site'), blank=True, null=True, default=None,
         related_name="homepage_article",  on_delete=models.CASCADE
     )
     headline = models.BooleanField(
         _("Headline"), default=False,
         help_text=_('Make this article appear on the home page')
     )
-    publication_date = models.DateTimeField(_("Publication date"), default=datetime.now)
+    publication_date = models.DateTimeField(_("Publication date"), default=datetime.now, blank=True)
     sites = models.ManyToManyField(Site, verbose_name=_('site'), default=[])
     login_required = models.BooleanField(
         default=False,
         verbose_name=_('login required'),
         help_text=_('If true, only user with login/password will able to access the article')
     )
     
@@ -687,20 +702,20 @@
             try:
                 logo_file = logo.file
             except IOError:
                 pass
         if not logo_file:
             logo_file = self._get_default_logo()
         crop = logo_crop or get_article_logo_crop(self)
+
         try:
             return sorl_thumbnail.backend.get_thumbnail(logo_file, size, crop=crop)
         except IOError:
             # TODO : In case of error (Pillow 4.2.1 cause "cannot write mode RGBA as JPEG")
-            # TODO : Fix "AttributeError: 'File' object has no attribute 'url'"
-            return logo_file
+            return FileUrlWrapper(logo_file.file)
         
     def get_headline_image(self):
         """headline image"""
         img_size = get_headline_image_size(self)
         crop = get_headline_image_crop(self)
         return self.logo_thumbnail(logo_size=img_size, logo_crop=crop).url
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/optionals.py` & `apidev-coop_cms-1.6.0/coop_cms/optionals.py`

 * *Ordering differences only*

 * *Files 0% similar despite different names*

```diff
@@ -16,8 +16,8 @@
 
 if 'wkhtmltopdf' in settings.INSTALLED_APPS:
     from wkhtmltopdf.utils import convert_to_pdf, make_absolute_paths
     from wkhtmltopdf.views import PDFResponse
 else:
     convert_to_pdf = not_implemented
     make_absolute_paths = not_implemented
-    PDFResponse = not_implemented
+    PDFResponse = not_implemented
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/perms_backends.py` & `apidev-coop_cms-1.6.0/coop_cms/perms_backends.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,11 @@
 # -*- coding: utf-8 -*-
 """permission backend"""
 
+
 class ArticlePermissionBackend(object):
     """Permission backend : check if a user is allowed to view/edit an editable object"""
     supports_object_permissions = True
     supports_anonymous_user = True
     supports_inactive_user = True
 
     def authenticate(self, *args, **kwargs):
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/secrets.py` & `apidev-coop_cms-1.6.0/coop_cms/secrets.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/settings.py` & `apidev-coop_cms-1.6.0/coop_cms/settings.py`

 * *Files 2% similar despite different names*

```diff
@@ -8,18 +8,18 @@
 import sys
 from six import string_types
 
 from django.conf import settings as django_settings
 from django.conf.urls.i18n import i18n_patterns
 from django.contrib.contenttypes.models import ContentType
 from django.contrib.sites.models import Site
-from django.utils.translation import ugettext as _
+from django.utils.translation import gettext as _
 from importlib import import_module
 
-from coop_cms.logger import logger
+from .logger import logger
 
 
 DEFAULT_NAVTREE_CLASS = COOP_CMS_NAVTREE_CLASS = 'coop_cms.NavTree'
 DEPRECATED_COOP_CMS_NAVTREE_CLASS = getattr(django_settings, 'COOP_CMS_NAVTREE_CLASS', 'basic_cms.NavTree')
 DEFAULT_MEDIA_ROOT = ''
 
 
@@ -420,36 +420,41 @@
 
 
 def is_cache_enabled():
     """True if cache editable content"""
     return getattr(django_settings, 'COOP_CMS_CACHE', False)
 
 
-def change_site_id():
-    """Change SITE ID"""
+def change_site_domain():
     if (
         django_settings.DEBUG and not getattr(django_settings, 'DISABLE_CHANGE_SITE', False) and
         (len(sys.argv) > 1) and sys.argv[1] == "runserver"
     ):
-        local_dev_address = "127.0.0.1:8000"
+        local_dev_addresses = ('localhost', '127.0.0.1', )
         current_site = Site.objects.get_current()
-        if current_site.domain != local_dev_address:
+        plain_domain = current_site.domain.split(':')[0]
+        if plain_domain not in local_dev_addresses:
             print(_("The current site is NOT localhost (127.0.0.1:8000)"))
+            local_dev_address = local_dev_addresses[0]
             if Site.objects.filter(domain=local_dev_address).exclude(id=current_site.id).exists():
                 print(_("Another site is already set as localhost"))
             else:
                 print(_("Do you want to turn it into localhost?"))
 
                 choice = input(_("0: No\n1: Yes\n"))
 
                 if choice == "0":
                     print(_("You can disable this by adding in your settings DISABLE_CHANGE_SITE=True"))
 
                 elif choice == "1":
-                    current_site.domain = "127.0.0.1:8000"
+                    current_site.domain = f"{local_dev_address}:8000"
                     current_site.name = "localhost"
                     current_site.save()
                     print(_("Your domain site is now: "), current_site.domain)
 
 
 def is_xsendfile_disabled():
-    return getattr(django_settings, 'COOP_CMS_DISABLE_XSENDFILE', False)
+    return getattr(django_settings, 'COOP_CMS_DISABLE_XSENDFILE', False)
+
+
+def xsendfile_no_file_size():
+    return getattr(django_settings, 'COOP_CMS_XSENDFILE_NO_FILESIZE', True)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/shortcuts.py` & `apidev-coop_cms-1.6.0/coop_cms/shortcuts.py`

 * *Files 1% similar despite different names*

```diff
@@ -3,17 +3,17 @@
 
 from django.conf import settings
 from django.contrib.sites.models import Site
 from django.http import Http404, HttpResponsePermanentRedirect, HttpResponseRedirect
 from django.shortcuts import get_object_or_404
 from django.urls import reverse
 
-from coop_cms.models import BaseArticle, Alias
-from coop_cms.settings import get_article_class, is_localized
-from coop_cms.utils import strip_locale_path
+from .models import BaseArticle, Alias
+from .settings import get_article_class, is_localized
+from .utils import strip_locale_path
 
 
 def get_article_slug(*args, **kwargs):
     """slugify"""
     slug = reverse(*args, **kwargs)
     lang, slug = strip_locale_path(slug)
     return slug.strip('/')
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/sitemap.py` & `apidev-coop_cms-1.6.0/coop_cms/sitemap.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,20 +1,19 @@
 # -*- coding:utf-8 -*-
 """sitemaps"""
 
 from django.conf import settings
-from django.conf.urls import url
 from django.contrib.sitemaps import Sitemap
 from django.contrib.sitemaps.views import sitemap as django_sitemap
 from django.contrib.sites.models import Site
+from django.urls import reverse, re_path
 from django.utils.translation import activate
 
-from coop_cms.models import BaseArticle, SiteSettings
-from coop_cms.moves import reverse
-from coop_cms.settings import get_article_class, has_localized_urls
+from .models import BaseArticle, SiteSettings
+from .settings import get_article_class, has_localized_urls
 
 
 class LocaleSitemap(Sitemap):
     _current_site = None
 
     def __init__(self, language=''):
         super(LocaleSitemap, self).__init__()
@@ -109,14 +108,14 @@
             sitemaps[site_key] = ArticleSitemap(code)
     else:
         sitemaps['coop_cms_articles'] = ArticleSitemap(None)
     return sitemaps
 
 
 urlpatterns = [
-    url(
+    re_path(
         r'^sitemap\.xml$',
         django_sitemap,
         {'sitemaps': get_sitemaps()},
         name="coop_cms_sitemap"
     ),
 ]
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/chosen/chosen-bootstrap.css` & `apidev-coop_cms-1.6.0/coop_cms/static/chosen/chosen-bootstrap.css`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/chosen/chosen-sprite.png` & `apidev-coop_cms-1.6.0/coop_cms/static/chosen/chosen-sprite.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/chosen/chosen-sprite@2x.png` & `apidev-coop_cms-1.6.0/coop_cms/static/chosen/chosen-sprite@2x.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/chosen/chosen.css` & `apidev-coop_cms-1.6.0/coop_cms/static/chosen/chosen.css`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/chosen/chosen.jquery.js` & `apidev-coop_cms-1.6.0/coop_cms/static/chosen/chosen.jquery.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/chosen/chosen.jquery.min.js` & `apidev-coop_cms-1.6.0/coop_cms/static/chosen/chosen.jquery.min.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/chosen/chosen.min.css` & `apidev-coop_cms-1.6.0/coop_cms/static/chosen/chosen.min.css`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/chosen/chosen.proto.js` & `apidev-coop_cms-1.6.0/coop_cms/static/chosen/chosen.proto.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/chosen/chosen.proto.min.js` & `apidev-coop_cms-1.6.0/coop_cms/static/chosen/chosen.proto.min.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/css/images/controls.png` & `apidev-coop_cms-1.6.0/coop_cms/static/css/images/controls.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/css/images/loading.gif` & `apidev-coop_cms-1.6.0/coop_cms/static/css/images/loading.gif`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/css/mediatheque.css` & `apidev-coop_cms-1.6.0/coop_cms/static/css/mediatheque.css`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/ui-icons_222222_256x240.png` & `apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/ui-icons_222222_256x240.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/ui-icons_2e83ff_256x240.png` & `apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/ui-icons_2e83ff_256x240.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/ui-icons_454545_256x240.png` & `apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/ui-icons_454545_256x240.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/ui-icons_888888_256x240.png` & `apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/ui-icons_888888_256x240.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/images/ui-icons_cd0a0a_256x240.png` & `apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/images/ui-icons_cd0a0a_256x240.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/css/smoothness/jquery-ui-1.8.14.custom.css` & `apidev-coop_cms-1.6.0/coop_cms/static/css/smoothness/jquery-ui-1.8.14.custom.css`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/css/tree.css` & `apidev-coop_cms-1.6.0/coop_cms/static/css/tree.css`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/default-logo.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/default-logo.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/avi.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/avi.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/default.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/default.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/doc.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/doc.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/docx.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/docx.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/gif.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/gif.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/html.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/html.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/jpg.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/jpg.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/mov.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/mov.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/mp3.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/mp3.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/mp4.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/mp4.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/ogg.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/ogg.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/pdf.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/pdf.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/png.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/png.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/pps.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/pps.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/ppt.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/ppt.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/rtf.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/rtf.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/xls.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/xls.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/xlsx.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/xlsx.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/bloc/zip.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/bloc/zip.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/avi.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/avi.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/default.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/default.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/doc.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/doc.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/docx.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/docx.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/gif.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/gif.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/html.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/html.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/jpg.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/jpg.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/mov.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/mov.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/mp3.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/mp3.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/mp4.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/mp4.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/ogg.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/ogg.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/pdf.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/pdf.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/png.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/png.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/pps.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/pps.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/ppt.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/ppt.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/rtf.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/rtf.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/txt.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/txt.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/xls.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/xls.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/xlsx.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/xlsx.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/filetypes/icon/zip.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/filetypes/icon/zip.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/gplus.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/gplus.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/in_nav.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/in_nav.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/out_nav.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/out_nav.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/img/twitter.png` & `apidev-coop_cms-1.6.0/coop_cms/static/img/twitter.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/_lib/jquery.cookie.js` & `apidev-coop_cms-1.6.0/coop_cms/static/js/_lib/jquery.cookie.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/_lib/jquery.hotkeys.js` & `apidev-coop_cms-1.6.0/coop_cms/static/js/_lib/jquery.hotkeys.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/_lib/jquery.js` & `apidev-coop_cms-1.6.0/coop_cms/static/js/_lib/jquery.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-1.11.3.js` & `apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-1.11.3.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-1.11.3.min.js` & `apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-1.11.3.min.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-1.7.1.min.js` & `apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-1.7.1.min.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-1.8.3.js` & `apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-1.8.3.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-1.8.3.min.js` & `apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-1.8.3.min.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-3.4.1.js` & `apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-3.4.1.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-ajax-csrf.js` & `apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-ajax-csrf.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-migrate-1.2.1.js` & `apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-migrate-1.2.1.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-migrate-1.2.1.min.js` & `apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-migrate-1.2.1.min.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/jquery-ui-1.8.14.custom.min.js` & `apidev-coop_cms-1.6.0/coop_cms/static/js/jquery-ui-1.8.14.custom.min.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/jquery.jstree.js` & `apidev-coop_cms-1.6.0/coop_cms/static/js/jquery.jstree.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/jquery.pageslide.js` & `apidev-coop_cms-1.6.0/coop_cms/static/js/jquery.pageslide.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/themes/apple/d.png` & `apidev-coop_cms-1.6.0/coop_cms/static/js/themes/apple/d.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/themes/apple/style.css` & `apidev-coop_cms-1.6.0/coop_cms/static/js/themes/apple/style.css`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/themes/apple/throbber.gif` & `apidev-coop_cms-1.6.0/coop_cms/static/js/themes/apple/throbber.gif`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/themes/classic/d.gif` & `apidev-coop_cms-1.6.0/coop_cms/static/js/themes/classic/d.gif`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/themes/classic/d.png` & `apidev-coop_cms-1.6.0/coop_cms/static/js/themes/classic/d.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/themes/classic/style.css` & `apidev-coop_cms-1.6.0/coop_cms/static/js/themes/classic/style.css`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/themes/classic/throbber.gif` & `apidev-coop_cms-1.6.0/coop_cms/static/js/themes/classic/throbber.gif`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default/d.gif` & `apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default/d.gif`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default/d.png` & `apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default/d.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default/style.css` & `apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default/style.css`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default/throbber.gif` & `apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default/throbber.gif`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default-rtl/d.gif` & `apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default-rtl/d.gif`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default-rtl/d.png` & `apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default-rtl/d.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default-rtl/style.css` & `apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default-rtl/style.css`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/themes/default-rtl/throbber.gif` & `apidev-coop_cms-1.6.0/coop_cms/static/js/themes/default-rtl/throbber.gif`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/js/utils.coop.js` & `apidev-coop_cms-1.6.0/coop_cms/static/js/utils.coop.js`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/slickmap/images/L3-li-top.png` & `apidev-coop_cms-1.6.0/coop_cms/static/slickmap/images/L3-li-top.png`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/static/slickmap/slickmap.css` & `apidev-coop_cms-1.6.0/coop_cms/static/slickmap/slickmap.css`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/admin/coop_cms/navnode/change_form.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/admin/coop_cms/navnode/change_form.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/admin/coop_cms/navtree/change_form.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/admin/coop_cms/navtree/change_form.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/bs/form_fields.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/bs/form_fields.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/bs/horizontal_form_fields.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/bs/horizontal_form_fields.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_accept_cookies_message.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_accept_cookies_message.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_article_publication.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_article_publication.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_coop_bar_js.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_coop_bar_js.html`

 * *Files 7% similar despite different names*

```diff
@@ -46,20 +46,15 @@
 			})
 		}
 		{% if draft %}
 		$(".publish").hide();
 		{% endif %}
 	};
 	$(".show-dirty").hide();
-  {% if html_editor == 'aloha' %}
-  Aloha.bind('aloha-editable-deactivated', function(event, eventProperties){
-        toggle_save();
-	});
-  {% endif %}
-	$(".inline-editable").keypress(function() {
+  	$(".inline-editable").keypress(function() {
 		toggle_save();
 	});
 
   $('a.update-logo').colorbox({
       title: function(data){
           return document.title;
       },
@@ -109,23 +104,10 @@
       $(elt).remove();
     });
 
     //force the focus in order to make sure that the editable is activated
     //this will cause the deactivated event to be triggered, and the content to be saved
     the_obj.focus();
   };
-
-	{% if html_editor == 'aloha' %}
-  //resize image when dropped in the editor
-  //GENTICS.Aloha.EventRegistry.subscribe(GENTICS.Aloha, 'editableCreated', function(event, editable) {
-  Aloha.bind('aloha-editable-created', function(event, editable){
-      var the_obj = editable.obj;
-      jQuery(editable.obj).bind('drop', function(event){
-        setTimeout(function() {
-          resize_thumbnail(the_obj);
-        }, 100);
-      });
-  });
-  {% endif %}
 {% endif %}
 });
 </script>
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_csrf_failure_message.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_csrf_failure_message.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_facebook_like.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_facebook_like.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_js_includes.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_js_includes.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_messages.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_messages.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_newsletter_categories.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_newsletter_categories.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_pagination.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_pagination.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_pagination_js.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_pagination_js.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/_social_share.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/_social_share.html`

 * *Files 8% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-{% load static from staticfiles %}{% load i18n %}
+{% load static %}{% load i18n %}
 	<script>
 		$(function() {
 			var title = escape($(this).attr('title'));
 			var loc = window.location.href;
  		
 			$("a.fb-share-me").click(function() {
 				try{
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/categories/only-for-unit-testing.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/categories/only-for-unit-testing.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/medialib/slide_base.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/medialib/slide_base.html`

 * *Files 10% similar despite different names*

```diff
@@ -1,13 +1,33 @@
 {% if not is_ajax %}<html>{% load i18n static %}
   <head>
     <link rel="stylesheet" type="text/css" href="{% static 'css/mediatheque.css' %}">
     <script>
     {% include "coop_cms/_pagination_js.html" %}
     $(function() {
+
+     $(document).on('change', "li.paginate-form input", function() {
+        try {
+          var media_url = $("#media_url").text();
+          var href = media_url + '?page=' + $(this).val()
+
+          $.ajax({
+            url: href,
+            success: function(data) {
+              $("#media_slide_content").html(data["html"]);
+              $("#media_url").text(data["media_url"]);
+            }
+          });
+        } catch(err) {
+          if (!console) console = {log:function(){}}; //no error but no log in IE
+          console.log(err)
+        }
+        return false;
+      });
+
       $(document).on('click', '.pagination a', function(e) {
         try {
           var media_url = $("#media_url").text();
           e.preventDefault();
 
           var href = media_url;
           var hrefArgs = getUrlVars($(this).attr('href'));
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/medialib/slide_images_content.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/medialib/slide_images_content.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/medialib/slide_photologue_content.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/medialib/slide_photologue_content.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/navigation_node.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/navigation_node.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/navtree_content/default.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/navtree_content/default.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/newsletter.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/newsletter.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/newsletter_base.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/newsletter_base.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_add_fragment.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_add_fragment.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_edit_fragments.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_edit_fragments.html`

 * *Files 3% similar despite different names*

```diff
@@ -19,26 +19,27 @@
                 var extra_id = extra_ids[type_id];
                 $("tr.field-row").hide();
                 $("tr td.ft-id").each(function (idx, elt) {
                     var ff_id = $(elt).closest("tr").find("td.ff-id input").val();
                     if (extra_id && extra_id != '0') {
                         if ($(elt).find("input").val() == type_id && (extra_id == ff_id)) {
                             $(elt).closest("tr").show();
+                            console.log('>', ff_id, extra_id)
                         }
                     } else {
                         if ($(elt).find("input").val() == type_id) {
                             $(elt).closest("tr").show();
                         }
                     }
                 });
                 parent.$.colorbox.resize();
             });
             $("select#fragment-types").change();
 
-            $("select").chosen();
+            $("select[multiple]").chosen();
             $(".chosen-container").css({width: '140px'});
             //$(".chosen-container input").css({width: '140px'});
         });
     });
     </script>
 {% endblock %}
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/popup_publish_article.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/popup_publish_article.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/coop_cms/view_all_articles.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/coop_cms/view_all_articles.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/test/article_with_fragments_extra_id.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/test/article_with_fragments_extra_id.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/test/article_with_fragments_template.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/test/article_with_fragments_template.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/test/base.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/test/base.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/test/carousel.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/test/carousel.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/test/navigation_li_node.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/test/navigation_li_node.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templates/test/navigation_node.html` & `apidev-coop_cms-1.6.0/coop_cms/templates/test/navigation_node.html`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templatetags/article_tags.py` & `apidev-coop_cms-1.6.0/coop_cms/templatetags/article_tags.py`

 * *Files 8% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 # -*- coding:utf-8 -*-
 """article tags"""
 
 from django import template
 
 register = template.Library()
 
-from coop_cms.settings import get_article_class
+from ..settings import get_article_class
 
 
 @register.tag
 def last_articles(parser, token):
     """get last articles"""
     try:
         args = token.split_contents()
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templatetags/coop_edition.py` & `apidev-coop_cms-1.6.0/coop_cms/templatetags/coop_edition.py`

 * *Files 1% similar despite different names*

```diff
@@ -9,23 +9,24 @@
 from django import template
 from django.forms.formsets import BaseFormSet
 from django.template import Context
 from django.template.base import TextNode, VariableNode, FilterExpression
 from django.template.context_processors import csrf
 from django.template.loader import get_template, TemplateDoesNotExist
 from django.template.loader_tags import IncludeNode
-from django.utils.translation import ugettext_lazy as _
+from django.utils.translation import gettext_lazy as _
 from django.utils.safestring import mark_safe
 
 from coop_html_editor.templatetags.html_editor_utils import InlineHtmlEditNode, InlineHtmlMultipleEditNode
 
-from coop_cms.models import PieceOfHtml, BaseArticle, Fragment, FragmentType, FragmentFilter
-from coop_cms.moves import make_context
-from coop_cms.settings import get_article_class
-from coop_cms.utils import get_text_from_template, slugify
+from ..models import PieceOfHtml, BaseArticle, Fragment, FragmentType, FragmentFilter
+from ..moves import make_context
+from ..settings import get_article_class
+from ..utils import get_text_from_template, slugify
+
 
 register = template.Library()
 
 
 class DummyEngine(object):
     """Used for monkey patching Context"""
     debug = False
@@ -220,16 +221,15 @@
     def render(self, context):
         form = context.get('form', None)
         formset = context.get('formset', None)
 
         if form or formset:
             template_ = template.Template("{{form.media}}")
             html = template_.render(template.Context({'form': form or formset}))
-            # django 1.5 fix : " are escaped as &quot; and cause script tag
-            # for aloha to be broken
+            # django 1.5 fix : " are escaped as &quot; and cause script tag for aloha to be broken
             return html.replace("&quot;", '"') 
         else:
             return ""
 
 
 @register.tag
 def cms_form_media(parser, token):
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templatetags/coop_navigation.py` & `apidev-coop_cms-1.6.0/coop_cms/templatetags/coop_navigation.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,18 +1,19 @@
 # -*- coding: utf-8 -*-
 """navigation tags"""
 
 from django import template
 from django.contrib.contenttypes.models import ContentType
-from django.template import VariableDoesNotExist
+from django.template.base import VariableDoesNotExist
 from django.template.loader import get_template
-from django.utils.translation import ugettext as _
+from django.utils.translation import gettext as _
+
+from ..models import NavNode
+from ..settings import get_navtree_class
 
-from coop_cms.models import NavNode
-from coop_cms.settings import get_navtree_class
 
 register = template.Library()
 
 
 def extract_kwargs(args):
     """args from templatetag args"""
     kwargs = {}
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/templatetags/coop_utils.py` & `apidev-coop_cms-1.6.0/coop_cms/templatetags/coop_utils.py`

 * *Files 2% similar despite different names*

```diff
@@ -11,22 +11,23 @@
 
 from django import template
 from django.conf import settings
 from django.template.base import TemplateSyntaxError
 from django.template.loader import get_template
 from django.utils.safestring import mark_safe
 
-import floppyforms.__future__ as floppyforms
+import floppyforms as floppyforms
+
+from ..models import ArticleCategory, Image, Document
+from ..moves import make_context
+from ..settings import get_article_class, logger
+from ..shortcuts import get_article
+from ..utils import dehtml as do_dehtml, slugify
+from ..templatetags.coop_edition import _extract_if_node_args
 
-from coop_cms.models import ArticleCategory, Image, Document
-from coop_cms.moves import make_context
-from coop_cms.settings import get_article_class, logger
-from coop_cms.shortcuts import get_article
-from coop_cms.utils import dehtml as do_dehtml, slugify
-from coop_cms.templatetags.coop_edition import _extract_if_node_args
 
 register = template.Library()
 
 
 class ArticleLinkNode(template.Node):
     """create an article and returns a link into template"""
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/__init__.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/__init__.py`

 * *Files 2% similar despite different names*

```diff
@@ -10,37 +10,41 @@
 from django.contrib.auth.models import User, Permission
 from django.contrib.contenttypes.models import ContentType
 from django.test import TestCase
 from django.test.utils import override_settings
 from django.urls import reverse
 from django.utils import timezone
 
-from coop_cms.settings import get_article_class, get_unit_test_media_root, DEFAULT_MEDIA_ROOT
+from ..settings import get_article_class, get_unit_test_media_root, DEFAULT_MEDIA_ROOT
 
 
 def make_dt(dt):
     if settings.USE_TZ:
         return timezone.make_aware(dt, timezone.get_default_timezone())
     else:
         return dt
 
 
-#Used by a test below
+# Used by a test below
 def dummy_image_width(img):
     return 20
 
 
 class BeautifulSoup(BaseBeautifulSoup):
 
     def __init__(self, content, parser='html.parser'):
         super(BeautifulSoup, self).__init__(content, parser)
 
 
-@override_settings(MEDIA_ROOT=get_unit_test_media_root())
+@override_settings(
+    MEDIA_ROOT=get_unit_test_media_root(),
+    USER_SIGNAL_DISABLED=True
+)
 class BaseTestCase(TestCase):
+
     def _clean_files(self):
         if DEFAULT_MEDIA_ROOT != settings.MEDIA_ROOT:
             try:
                 shutil.rmtree(settings.MEDIA_ROOT)
             except OSError:
                 pass
         else:
@@ -98,23 +102,25 @@
         self.editor = None
         self.viewer = None
 
     def can_edit_newsletter_permission(self):
         return Permission.objects.get(content_type__app_label='coop_cms', codename='change_newsletter')
 
     def _log_as_editor(self, can_add=False):
-        if not self.editor:
+        if True:  # not self.editor:
             self.editor = User.objects.create_user('toto', 'toto@toto.fr', 'toto')
             self.editor.is_staff = True
             self.editor.is_active = True
+            self.editor.save()
 
             self.editor.user_permissions.add(self.can_edit_newsletter_permission())
 
             ct = ContentType.objects.get_for_model(get_article_class())
             codename = 'change_{0}'.format(ct.model)
+            print('#', ct, codename)
             can_edit_article = Permission.objects.get(content_type__app_label=ct.app_label, codename=codename)
             self.editor.user_permissions.add(can_edit_article)
 
             if can_add:
                 codename = 'add_{0}'.format(ct.model)
                 can_add_article = Permission.objects.get(content_type__app_label=ct.app_label, codename=codename)
                 self.editor.user_permissions.add(can_add_article)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_admin.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_admin.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,22 +1,19 @@
 # -*- coding: utf-8 -*-
 
 from django.conf import settings
 
-try:
-    from django.urls import reverse
-except:
-    from django.core.urlresolvers import reverse
+from django.urls import reverse
 
 from model_mommy import mommy
 
-from coop_cms.models import BaseArticle
-from coop_cms.settings import is_localized, get_article_class
-from coop_cms.tests import BaseArticleTest, BeautifulSoup
-from coop_cms.utils import get_model_app, get_model_name
+from ..models import BaseArticle
+from ..settings import is_localized, get_article_class
+from ..utils import get_model_app, get_model_name
+from . import BaseArticleTest, BeautifulSoup
 
 
 class ArticleAdminTest(BaseArticleTest):
     
     def setUp(self):
         self.COOP_CMS_CAN_EDIT_ARTICLE_SLUG = getattr(settings, 'COOP_CMS_CAN_EDIT_ARTICLE_SLUG', None)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_alias.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_alias.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,17 +1,17 @@
 # -*- coding: utf-8 -*-
 
 from django.contrib.sites.models import Site
 from django.urls import reverse
 
 from model_mommy import mommy
 
-from coop_cms.models import Alias
-from coop_cms.settings import get_article_class
-from coop_cms.tests import BaseTestCase
+from ..models import Alias
+from ..settings import get_article_class
+from . import BaseTestCase
 
 
 class AliasTest(BaseTestCase):
     
     def test_redirect(self):
         article_class = get_article_class()
         article = article_class.objects.create(slug="test", title="TestAlias", content="TestAlias")
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_articles.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_articles.py`

 * *Files 4% similar despite different names*

```diff
@@ -6,19 +6,23 @@
 from django.contrib.contenttypes.models import ContentType
 from django.contrib.sites.models import Site
 from django.test import override_settings
 from django.urls import reverse
 
 from model_mommy import mommy
 
-from coop_cms.models import NavNode, BaseArticle, ArticleCategory
-from coop_cms.settings import has_localized_urls, get_article_class, get_article_templates, get_navtree_class
-from coop_cms.tests import BaseArticleTest, BeautifulSoup, make_dt
+from ..models import NavNode, BaseArticle, ArticleCategory
+from ..settings import has_localized_urls, get_article_class, get_article_templates, get_navtree_class
+from . import BaseArticleTest, BeautifulSoup, make_dt
 
 
+@override_settings(
+    COOP_CMS_ARTICLE_SETTINGS_FORM='',
+    COOP_CMS_NEW_ARTICLE_FORM=''
+)
 class ArticleTest(BaseArticleTest):
     
     def setUp(self):
         super(ArticleTest, self).setUp()
         self._default_article_templates = settings.COOP_CMS_ARTICLE_TEMPLATES
         settings.COOP_CMS_ARTICLE_TEMPLATES = (
             ('test/newsletter_red.html', 'Red'),
@@ -139,63 +143,14 @@
         data = {"title": 'salut', 'content': '<h2>Hello</h2><p>Hello</p>'}
 
         self._log_as_editor()
         response = self.client.post(article.get_edit_url(), data=data, follow=True)
         self.assertEqual(response.status_code, 200)
         self._check_article(response, data)
 
-    @override_settings(COOP_HTML_EDITOR='aloha')
-    def test_edit_article_html_with_br(self):
-        """It should save article correctly"""
-        article = get_article_class().objects.create(
-            title="test", publication=BaseArticle.PUBLISHED, template="test/standard.html"
-        )
-
-        data = {"title": 'salut', 'content': '<h2>Hello</h2><p>Hello<br>Cool<br /></p>'}
-
-        self._log_as_editor()
-        response = self.client.post(article.get_edit_url(), data=data, follow=True)
-
-        self.assertEqual(response.status_code, 200)
-        expected_content = '<h2>Hello</h2><p>Hello<br />Cool<br /></p>'
-        data['content'] = expected_content
-        self._check_article(response, data)
-
-    @override_settings(COOP_HTML_EDITOR='aloha')
-    def test_edit_article_html_with_img_wrapper(self):
-        """It should save article correctly"""
-        article = get_article_class().objects.create(
-            title="test", publication=BaseArticle.PUBLISHED, template="test/standard.html"
-        )
-
-        content = """
-            <p><div
-            contenteditable="false"
-            style="overflow: hidden; position: relative; display: inline-block; float: none;"
-            class="ui-wrapper aloha-image-box-active Aloha_Image_Resize aloha"
-            >
-                <img src="moby-dick.jpg" style="height: 207px; width: 269px;" class="ui-resizable" />
-                <div class="ui-resizable-handle ui-resizable-ne" style="z-index: 1000;"></div>
-                <div class="ui-resizable-handle ui-resizable-se ui-icon" style="z-index: 1000;"></div>
-                <div class="ui-resizable-handle ui-resizable-sw" style="z-index: 1000;"></div>
-                <div class="ui-resizable-handle ui-resizable-nw" style="z-index: 1000;"></div>
-            </div></p>
-        """
-
-        data = {"title": 'salut', 'content': content}
-
-        self._log_as_editor()
-        response = self.client.post(article.get_edit_url(), data=data, follow=True)
-
-        self.assertEqual(response.status_code, 200)
-
-        expected_content = '<p><img class="" src="moby-dick.jpg" style="height: 207px; width: 269px;"/></p>'
-        data['content'] = expected_content
-        self._check_article(response, data)
-
     def test_edit_article_draft(self):
         article = get_article_class().objects.create(
             title="test", publication=BaseArticle.DRAFT, template="test/standard.html"
         )
         
         data = {"title": 'salut', 'content': 'bonjour!'}
         
@@ -249,15 +204,14 @@
         article = get_article_class().objects.get(id=article.id)
         self.assertEquals(article.title, initial_data['title'])
         self.assertEquals(article.content, initial_data['content'])
         
     def check_inline_html_editor(self, response, is_loaded):
         self.assertEqual(200, response.status_code)
         inline_editor_init_url = reverse('html_editor_init')
-
         if is_loaded:
             self.assertContains(response, inline_editor_init_url)
         else:
             self.assertNotContains(response, inline_editor_init_url)
         
     def test_edit_permission(self):
         initial_data = {'title': "ceci est un test", 'content': "this is my article content"}
@@ -309,15 +263,14 @@
         self.assertEqual(200, response.status_code)
         
     def test_accept_regular_html(self):
         article = get_article_class().objects.create(title="test", publication=BaseArticle.PUBLISHED)
         html = '<h1>paul</h1><a href="/" target="_blank">georges</a><p><b>ringo</b></p>'
         html += '<h6>john</h6><img src="/img.jpg"><br><table><tr><th>A</th><td>B</td></tr>'
         data = {'content': html, 'title': 'ok'}
-        
         self._log_as_editor()
         response = self.client.post(article.get_edit_url(), data=data, follow=False)
         self.assertEqual(response.status_code, 302)
         
         response = self.client.get(article.get_absolute_url())
         self.assertEqual(response.status_code, 200)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_cache.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_cache.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,17 +1,17 @@
 # -*- coding: utf-8 -*-
 
 from django.conf import settings
 from django.test.utils import override_settings
 
 from django.contrib.contenttypes.models import ContentType
 
-from coop_cms.models import BaseArticle
-from coop_cms.settings import get_article_class
-from coop_cms.tests import BaseArticleTest
+from ..models import BaseArticle
+from ..settings import get_article_class
+from . import BaseArticleTest
 
 
 @override_settings(
     COOP_CMS_CACHE=True, CACHES={'default': {'BACKEND': 'django.core.cache.backends.locmem.LocMemCache'}}
 )
 class ArticleTest(BaseArticleTest):
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_categories.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_categories.py`

 * *Files 2% similar despite different names*

```diff
@@ -4,17 +4,17 @@
 
 from django.template import Template, Context
 from django.urls import reverse
 from django.test.utils import override_settings
 
 from model_mommy import mommy
 
-from coop_cms.models import BaseArticle, ArticleCategory
-from coop_cms.settings import get_article_class
-from coop_cms.tests import BaseTestCase
+from ..models import BaseArticle, ArticleCategory
+from ..settings import get_article_class
+from . import BaseTestCase
 
 
 @override_settings(COOP_CMS_ARTICLES_CATEGORY_PAGINATION=10)
 class ArticlesByCategoryTest(BaseTestCase):
     """Articles category page"""
 
     def test_view_articles(self):
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_edition.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_edition.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,17 +1,17 @@
 # -*- coding: utf-8 -*-
 
 from django.template import Template, Context
 from django.test.utils import override_settings
 
 from model_mommy import mommy
 
-from coop_cms.models import PieceOfHtml
-from coop_cms.settings import get_article_class
-from coop_cms.tests import BaseTestCase, BeautifulSoup, BaseArticleTest
+from ..models import PieceOfHtml
+from ..settings import get_article_class
+from . import BaseTestCase, BeautifulSoup, BaseArticleTest
 
 
 class PieceOfHtmlTagsTest(BaseTestCase):
     
     def test_create_poc(self):
         tpl = Template('{% load coop_edition %}{% coop_piece_of_html "test" %}')
         html = tpl.render(Context({}))
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_fragments.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_fragments.py`

 * *Files 1% similar despite different names*

```diff
@@ -7,18 +7,18 @@
 from django.contrib.contenttypes.models import ContentType
 from django.template import Template, Context
 from django.urls import reverse
 
 from model_mommy import mommy
 from colorbox.utils import assert_popup_refresh
 
-from coop_cms.forms import ArticleForm
-from coop_cms.models import BaseArticle, Fragment, FragmentType, FragmentFilter
-from coop_cms.settings import get_article_class
-from coop_cms.tests import BaseTestCase, BeautifulSoup
+from ..forms import ArticleForm
+from ..models import BaseArticle, Fragment, FragmentType, FragmentFilter
+from ..settings import get_article_class
+from . import BaseTestCase, BeautifulSoup
 
 
 class BaseFragmentTest(BaseTestCase):
     """base class for fragments test"""
 
     def __init__(self, *args, **kwargs):
         super(BaseFragmentTest, self).__init__(*args, **kwargs)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_generic_views.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_generic_views.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,17 +1,17 @@
 # -*- coding: utf-8 -*-
 
 from django.conf import settings
 
-from coop_cms.moves import SkipTest
+from unittest import SkipTest
 
 if 'coop_cms.apps.test_app' in settings.INSTALLED_APPS:
-    from coop_cms.apps.test_app.tests import GenericViewTestCase as BaseGenericViewTestCase
+    from ..apps.test_app.tests import GenericViewTestCase as BaseGenericViewTestCase
 else:
-    from coop_cms.tests import BaseTestCase as BaseGenericViewTestCase
+    from . import BaseTestCase as BaseGenericViewTestCase
 
 
 class GenericViewTestCase(BaseGenericViewTestCase):
     warning = """
     Add this to your settings.py to enable this test:
     if len(sys.argv)>1 and 'test' == sys.argv[1]:
         INSTALLED_APPS = INSTALLED_APPS + ('coop_cms.apps.test_app',)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_homepage.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_homepage.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,28 +1,24 @@
 # -*- coding: utf-8 -*-
 
 from django.conf import settings
-
 from django.contrib.sites.models import Site
-try:
-    from django.urls import reverse
-except:
-    from django.core.urlresolvers import reverse
+from django.urls import reverse
 from django.test import RequestFactory
 from django.test.utils import override_settings
 
 from model_mommy import mommy
 
 from colorbox.utils import assert_popup_redirects
 
-from coop_cms.context_processors import homepage_url
-from coop_cms.models import BaseArticle, SiteSettings
-from coop_cms.settings import get_article_class
-from coop_cms.shortcuts import get_headlines
-from coop_cms.tests import BaseTestCase, UserBaseTestCase, BeautifulSoup
+from ..context_processors import homepage_url
+from ..models import BaseArticle, SiteSettings
+from ..settings import get_article_class
+from ..shortcuts import get_headlines
+from . import BaseTestCase, UserBaseTestCase, BeautifulSoup
 
 
 @override_settings(COOP_CMS_NO_HOMEPAGE=False)
 class NoHomepageTest(UserBaseTestCase):
     
     @override_settings(COOP_CMS_NO_HOMEPAGE=True)
     def test_view_article_set_homepage_no_homepage(self):
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_link.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_link.py`

 * *Files 6% similar despite different names*

```diff
@@ -1,26 +1,22 @@
 # -*- coding: utf-8 -*-
 
 from django.conf import settings
 from django.contrib.auth.models import User, Permission
 from django.contrib.contenttypes.models import ContentType
 from django.contrib.sites.models import Site
-try:
-    from django.urls import reverse
-except:
-    from django.core.urlresolvers import reverse
-from django.utils.http import urlencode
+from django.urls import reverse
 
 from model_mommy import mommy
 
 from colorbox.utils import assert_popup_redirects
 
-from coop_cms.models import Link
-from coop_cms.tests import BaseArticleTest, BeautifulSoup
-from coop_cms.utils import get_login_url
+from ..models import Link
+from ..utils import get_login_url
+from . import BaseArticleTest, BeautifulSoup
 
 
 class AddLinkTest(BaseArticleTest):
 
     def _log_as_editor(self):
         self.user = user = User.objects.create_user('toto', 'toto@toto.fr', 'toto')
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_localization.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_localization.py`

 * *Files 2% similar despite different names*

```diff
@@ -3,25 +3,22 @@
 
 from unittest import skipIf
 
 from django.conf import settings
 from django.contrib.auth.models import User, Permission
 from django.contrib.contenttypes.models import ContentType
 from django.core.exceptions import ImproperlyConfigured
-try:
-    from django.urls import reverse
-except:
-    from django.core.urlresolvers import reverse
+from django.urls import reverse
 from django.utils.translation import activate, get_language
 from django.test.utils import override_settings
 
-from coop_cms.models import BaseArticle, InvalidArticleError
-from coop_cms.settings import has_localized_urls, is_localized, is_multilang, multilang_mode, get_article_class
-from coop_cms.tests import BaseTestCase, BeautifulSoup
-from coop_cms.utils import redirect_to_language, strip_locale_path, get_url_in_language, make_locale_path
+from ..models import BaseArticle, InvalidArticleError
+from ..settings import has_localized_urls, is_localized, is_multilang, multilang_mode, get_article_class
+from ..utils import redirect_to_language, strip_locale_path, get_url_in_language, make_locale_path
+from . import BaseTestCase, BeautifulSoup
 
 
 def language_fallbacks():
     """return fallback"""
     return tuple([lang_code for (lang_code, lang_name) in settings.LANGUAGES])
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_media.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_media.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,34 +1,34 @@
 # -*- coding: utf-8 -*-
 """media library unit testing"""
 
-from django.conf import settings
-
 from datetime import datetime
 from unittest import skipIf
-
+from io import BytesIO
 from PIL import Image as PilImage
 
+from django.conf import settings
 from django.core.files import File
-try:
-    from django.urls import reverse
-except:
-    from django.core.urlresolvers import reverse
+from django.urls import reverse
 from django.template import Template, Context
 from django.template.base import TemplateSyntaxError
 from django.test.utils import override_settings
 
 from model_mommy import mommy
-if 'photologue' in settings.INSTALLED_APPS:
-    from photologue.models import Photo, Gallery
 
-from coop_cms.models import ArticleCategory, Document, Image, ImageSize, MediaFilter
-from coop_cms.moves import BytesIO, get_response_json
-from coop_cms.settings import get_article_class
-from coop_cms.tests import BaseArticleTest, BaseTestCase, BeautifulSoup, MediaBaseTestCase
+if 'photologue' in settings.INSTALLED_APPS:
+    try:
+        from photologue.models import Photo, Gallery
+    except ImportError:
+        pass
+
+from ..models import ArticleCategory, Document, Image, ImageSize, MediaFilter
+from ..moves import get_response_json
+from ..settings import get_article_class
+from . import BaseArticleTest, BaseTestCase, BeautifulSoup, MediaBaseTestCase
 
 
 class ImageUploadTest(MediaBaseTestCase):
     """Image upload tests"""
     
     def test_view_form_no_filters(self):
         """view upload image when no filters"""
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_middleware.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_middleware.py`

 * *Files 10% similar despite different names*

```diff
@@ -1,11 +1,11 @@
 # -*- coding: utf-8 -*-
 
-from coop_cms.utils import RequestManager, RequestMiddleware, RequestNotFound
-from coop_cms.tests import BaseTestCase
+from ..utils import RequestManager, RequestMiddleware, RequestNotFound
+from . import BaseTestCase
 
 
 class RequestManagerTest(BaseTestCase):
     """Test request manager"""
     
     def test_get_request(self):
         """retrieve request"""
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_multisites.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_multisites.py`

 * *Files 0% similar despite different names*

```diff
@@ -4,17 +4,17 @@
 
 from django.contrib.sites.models import Site
 from django.conf import settings
 from django.urls import reverse
 
 from model_mommy import mommy
 
-from coop_cms.models import BaseArticle, ArticleCategory
-from coop_cms.settings import get_article_class
-from coop_cms.tests import BaseArticleTest, BaseTestCase, BeautifulSoup
+from ..models import BaseArticle, ArticleCategory
+from ..settings import get_article_class
+from . import BaseArticleTest, BaseTestCase, BeautifulSoup
 
         
 class MultiSiteTest(BaseTestCase):
     
     def tearDown(self):
         super(MultiSiteTest, self).tearDown()
         site1 = Site.objects.all()[0]
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_navigation.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_navigation.py`

 * *Files 1% similar despite different names*

```diff
@@ -6,19 +6,20 @@
 from django.contrib.sites.models import Site
 from django.template import Template, Context
 from django.test import override_settings
 from django.urls import reverse
 
 from model_mommy import mommy
 
-from coop_cms.models import Link, NavNode, NavType, BaseArticle
-from coop_cms.moves import get_response_json
-from coop_cms.settings import get_article_class, get_navtree_class
-from coop_cms.tests import BaseTestCase, BeautifulSoup
-from coop_cms.utils import get_model_app, get_model_name
+from ..models import Link, NavNode, NavType, BaseArticle
+from ..moves import get_response_json
+from ..settings import get_article_class, get_navtree_class
+from ..utils import get_model_app, get_model_name
+
+from . import BaseTestCase, BeautifulSoup
 
 
 def _create_link(url, title=""):
     """create a link"""
     link = Link.objects.create(url=url, title=title)
     link.sites.add(Site.objects.get_current())
     link.save()
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_newsletter.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_newsletter.py`

 * *Files 4% similar despite different names*

```diff
@@ -27,4008 +27,4297 @@
 000001a0: 2064 6a61 6e67 6f2e 7574 696c 7320 696d   django.utils im
 000001b0: 706f 7274 2074 696d 657a 6f6e 650a 6672  port timezone.fr
 000001c0: 6f6d 2064 6a61 6e67 6f2e 7574 696c 732e  om django.utils.
 000001d0: 7472 616e 736c 6174 696f 6e20 696d 706f  translation impo
 000001e0: 7274 2067 6574 5f6c 616e 6775 6167 650a  rt get_language.
 000001f0: 0a66 726f 6d20 6d6f 6465 6c5f 6d6f 6d6d  .from model_momm
 00000200: 7920 696d 706f 7274 206d 6f6d 6d79 0a0a  y import mommy..
-00000210: 6672 6f6d 2063 6f6f 705f 636d 732e 6d6f  from coop_cms.mo
-00000220: 6465 6c73 2069 6d70 6f72 7420 4e65 7773  dels import News
-00000230: 6c65 7474 6572 2c20 4e65 7773 6c65 7474  letter, Newslett
-00000240: 6572 4974 656d 2c20 5069 6563 654f 6648  erItem, PieceOfH
-00000250: 746d 6c2c 204e 6577 736c 6574 7465 7253  tml, NewsletterS
-00000260: 656e 6469 6e67 0a66 726f 6d20 636f 6f70  ending.from coop
-00000270: 5f63 6d73 2e73 6574 7469 6e67 7320 696d  _cms.settings im
-00000280: 706f 7274 2068 6173 5f6c 6f63 616c 697a  port has_localiz
-00000290: 6564 5f75 726c 732c 2067 6574 5f61 7274  ed_urls, get_art
-000002a0: 6963 6c65 5f63 6c61 7373 0a66 726f 6d20  icle_class.from 
-000002b0: 636f 6f70 5f63 6d73 2e74 6573 7473 2069  coop_cms.tests i
-000002c0: 6d70 6f72 7420 4261 7365 5465 7374 4361  mport BaseTestCa
-000002d0: 7365 2c20 5573 6572 4261 7365 5465 7374  se, UserBaseTest
-000002e0: 4361 7365 2c20 4265 6175 7469 6675 6c53  Case, BeautifulS
-000002f0: 6f75 700a 6672 6f6d 2063 6f6f 705f 636d  oup.from coop_cm
-00000300: 732e 7574 696c 7320 696d 706f 7274 206d  s.utils import m
-00000310: 616b 655f 6c69 6e6b 735f 6162 736f 6c75  ake_links_absolu
-00000320: 7465 2c20 7374 7269 705f 615f 7461 6773  te, strip_a_tags
-00000330: 2c20 6176 6f69 645f 6c69 6e65 5f74 6f6f  , avoid_line_too
-00000340: 5f6c 6f6e 672c 2073 656e 645f 656d 6169  _long, send_emai
-00000350: 6c0a 0a0a 406f 7665 7272 6964 655f 7365  l...@override_se
-00000360: 7474 696e 6773 2843 4f4f 505f 434d 535f  ttings(COOP_CMS_
-00000370: 4e45 5753 4c45 5454 4552 5f53 4554 5449  NEWSLETTER_SETTI
-00000380: 4e47 535f 464f 524d 3d27 2729 0a63 6c61  NGS_FORM='').cla
-00000390: 7373 204e 6577 736c 6574 7465 7253 6574  ss NewsletterSet
-000003a0: 7469 6e67 7354 6573 7428 5573 6572 4261  tingsTest(UserBa
-000003b0: 7365 5465 7374 4361 7365 293a 0a0a 2020  seTestCase):..  
-000003c0: 2020 6465 6620 7365 7455 7028 7365 6c66    def setUp(self
-000003d0: 293a 0a20 2020 2020 2020 2073 7570 6572  ):.        super
-000003e0: 284e 6577 736c 6574 7465 7253 6574 7469  (NewsletterSetti
-000003f0: 6e67 7354 6573 742c 2073 656c 6629 2e73  ngsTest, self).s
-00000400: 6574 5570 2829 0a20 2020 2020 2020 2073  etUp().        s
-00000410: 656c 662e 5f43 4f4f 505f 434d 535f 4e45  elf._COOP_CMS_NE
-00000420: 5753 4c45 5454 4552 5f54 454d 504c 4154  WSLETTER_TEMPLAT
-00000430: 4553 203d 2067 6574 6174 7472 2873 6574  ES = getattr(set
-00000440: 7469 6e67 732c 2027 434f 4f50 5f43 4d53  tings, 'COOP_CMS
-00000450: 5f4e 4557 534c 4554 5445 525f 5445 4d50  _NEWSLETTER_TEMP
-00000460: 4c41 5445 5327 2c20 4e6f 6e65 290a 2020  LATES', None).  
-00000470: 2020 2020 2020 7365 7474 696e 6773 2e43        settings.C
-00000480: 4f4f 505f 434d 535f 4e45 5753 4c45 5454  OOP_CMS_NEWSLETT
-00000490: 4552 5f54 454d 504c 4154 4553 203d 2028  ER_TEMPLATES = (
-000004a0: 0a20 2020 2020 2020 2020 2020 2028 2774  .            ('t
-000004b0: 6573 742f 6e65 7773 6c65 7474 6572 5f62  est/newsletter_b
-000004c0: 6c75 652e 6874 6d6c 272c 2027 426c 7565  lue.html', 'Blue
-000004d0: 2729 2c0a 2020 2020 2020 2020 2020 2020  '),.            
-000004e0: 2827 7465 7374 2f6e 6577 736c 6574 7465  ('test/newslette
-000004f0: 725f 7265 642e 6874 6d6c 272c 2027 426c  r_red.html', 'Bl
-00000500: 7565 2729 2c0a 2020 2020 2020 2020 290a  ue'),.        ).
-00000510: 0a20 2020 2064 6566 2074 6561 7244 6f77  .    def tearDow
-00000520: 6e28 7365 6c66 293a 0a20 2020 2020 2020  n(self):.       
-00000530: 2073 7570 6572 284e 6577 736c 6574 7465   super(Newslette
-00000540: 7253 6574 7469 6e67 7354 6573 742c 2073  rSettingsTest, s
-00000550: 656c 6629 2e74 6561 7244 6f77 6e28 290a  elf).tearDown().
-00000560: 2020 2020 2020 2020 7365 7474 696e 6773          settings
-00000570: 2e43 4f4f 505f 434d 535f 4e45 5753 4c45  .COOP_CMS_NEWSLE
-00000580: 5454 4552 5f54 454d 504c 4154 4553 203d  TTER_TEMPLATES =
-00000590: 2073 656c 662e 5f43 4f4f 505f 434d 535f   self._COOP_CMS_
-000005a0: 4e45 5753 4c45 5454 4552 5f54 454d 504c  NEWSLETTER_TEMPL
-000005b0: 4154 4553 0a0a 2020 2020 6465 6620 7465  ATES..    def te
-000005c0: 7374 5f76 6965 775f 6372 6561 7465 5f6e  st_view_create_n
-000005d0: 6577 736c 6574 7465 7228 7365 6c66 293a  ewsletter(self):
-000005e0: 0a20 2020 2020 2020 2073 656c 662e 5f6c  .        self._l
-000005f0: 6f67 5f61 735f 6564 6974 6f72 2829 0a20  og_as_editor(). 
-00000600: 2020 2020 2020 2075 726c 203d 2072 6576         url = rev
-00000610: 6572 7365 2822 636f 6f70 5f63 6d73 5f6e  erse("coop_cms_n
-00000620: 6577 5f6e 6577 736c 6574 7465 7222 290a  ew_newsletter").
-00000630: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-00000640: 6520 3d20 7365 6c66 2e63 6c69 656e 742e  e = self.client.
-00000650: 6765 7428 7572 6c29 0a20 2020 2020 2020  get(url).       
-00000660: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00000670: 6c28 7265 7370 6f6e 7365 2e73 7461 7475  l(response.statu
-00000680: 735f 636f 6465 2c20 3230 3029 0a0a 2020  s_code, 200)..  
-00000690: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-000006a0: 7445 7175 616c 284e 6577 736c 6574 7465  tEqual(Newslette
-000006b0: 722e 6f62 6a65 6374 732e 636f 756e 7428  r.objects.count(
-000006c0: 292c 2030 290a 0a20 2020 2064 6566 2074  ), 0)..    def t
-000006d0: 6573 745f 6372 6561 7465 5f6e 6577 736c  est_create_newsl
-000006e0: 6574 7465 7228 7365 6c66 293a 0a20 2020  etter(self):.   
-000006f0: 2020 2020 2073 656c 662e 5f6c 6f67 5f61       self._log_a
-00000700: 735f 6564 6974 6f72 2829 0a20 2020 2020  s_editor().     
-00000710: 2020 2075 726c 203d 2072 6576 6572 7365     url = reverse
-00000720: 2822 636f 6f70 5f63 6d73 5f6e 6577 5f6e  ("coop_cms_new_n
-00000730: 6577 736c 6574 7465 7222 290a 0a20 2020  ewsletter")..   
-00000740: 2020 2020 2064 6174 6120 3d20 7b0a 2020       data = {.  
-00000750: 2020 2020 2020 2020 2020 2273 7562 6a65            "subje
-00000760: 6374 223a 2022 7465 7374 222c 0a20 2020  ct": "test",.   
-00000770: 2020 2020 2020 2020 2022 7465 6d70 6c61           "templa
-00000780: 7465 223a 2022 7465 7374 2f6e 6577 736c  te": "test/newsl
-00000790: 6574 7465 725f 626c 7565 2e68 746d 6c22  etter_blue.html"
-000007a0: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
-000007b0: 7465 6d73 273a 205b 5d0a 2020 2020 2020  tems': [].      
-000007c0: 2020 7d0a 0a20 2020 2020 2020 2072 6573    }..        res
-000007d0: 706f 6e73 6520 3d20 7365 6c66 2e63 6c69  ponse = self.cli
-000007e0: 656e 742e 706f 7374 2875 726c 2c20 6461  ent.post(url, da
-000007f0: 7461 3d64 6174 6129 0a20 2020 2020 2020  ta=data).       
-00000800: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00000810: 6c28 7265 7370 6f6e 7365 2e73 7461 7475  l(response.statu
-00000820: 735f 636f 6465 2c20 3230 3029 0a0a 2020  s_code, 200)..  
-00000830: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00000840: 7445 7175 616c 284e 6577 736c 6574 7465  tEqual(Newslette
-00000850: 722e 6f62 6a65 6374 732e 636f 756e 7428  r.objects.count(
-00000860: 292c 2031 290a 2020 2020 2020 2020 6e65  ), 1).        ne
-00000870: 7773 6c65 7474 6572 203d 204e 6577 736c  wsletter = Newsl
-00000880: 6574 7465 722e 6f62 6a65 6374 732e 616c  etter.objects.al
-00000890: 6c28 295b 305d 0a0a 2020 2020 2020 2020  l()[0]..        
-000008a0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-000008b0: 286e 6577 736c 6574 7465 722e 7375 626a  (newsletter.subj
-000008c0: 6563 742c 2064 6174 615b 2273 7562 6a65  ect, data["subje
-000008d0: 6374 225d 290a 2020 2020 2020 2020 7365  ct"]).        se
-000008e0: 6c66 2e61 7373 6572 7445 7175 616c 286e  lf.assertEqual(n
-000008f0: 6577 736c 6574 7465 722e 7465 6d70 6c61  ewsletter.templa
-00000900: 7465 2c20 6461 7461 5b22 7465 6d70 6c61  te, data["templa
-00000910: 7465 225d 290a 0a20 2020 2064 6566 2074  te"])..    def t
-00000920: 6573 745f 7669 6577 5f65 6469 745f 6e65  est_view_edit_ne
-00000930: 7773 6c65 7474 6572 2873 656c 6629 3a0a  wsletter(self):.
-00000940: 2020 2020 2020 2020 7365 6c66 2e5f 6c6f          self._lo
-00000950: 675f 6173 5f65 6469 746f 7228 290a 2020  g_as_editor().  
-00000960: 2020 2020 2020 6e65 7773 6c65 7474 6572        newsletter
-00000970: 203d 206d 6f6d 6d79 2e6d 616b 6528 0a20   = mommy.make(. 
-00000980: 2020 2020 2020 2020 2020 204e 6577 736c             Newsl
-00000990: 6574 7465 722c 0a20 2020 2020 2020 2020  etter,.         
-000009a0: 2020 2073 7562 6a65 6374 3d22 6120 6c69     subject="a li
-000009b0: 7474 6c65 2069 6e74 726f 2066 6f72 2074  ttle intro for t
-000009c0: 6869 7320 6e65 7773 6c65 7474 6572 222c  his newsletter",
-000009d0: 0a20 2020 2020 2020 2020 2020 2074 656d  .            tem
-000009e0: 706c 6174 653d 2274 6573 742f 6e65 7773  plate="test/news
-000009f0: 6c65 7474 6572 5f62 6c75 652e 6874 6d6c  letter_blue.html
-00000a00: 222c 0a20 2020 2020 2020 2029 0a0a 2020  ",.        )..  
-00000a10: 2020 2020 2020 7572 6c20 3d20 7265 7665        url = reve
-00000a20: 7273 6528 2263 6f6f 705f 636d 735f 6e65  rse("coop_cms_ne
-00000a30: 7773 6c65 7474 6572 5f73 6574 7469 6e67  wsletter_setting
-00000a40: 7322 2c20 6172 6773 3d5b 6e65 7773 6c65  s", args=[newsle
-00000a50: 7474 6572 2e69 645d 290a 0a20 2020 2020  tter.id])..     
-00000a60: 2020 2072 6573 706f 6e73 6520 3d20 7365     response = se
-00000a70: 6c66 2e63 6c69 656e 742e 6765 7428 7572  lf.client.get(ur
-00000a80: 6c29 0a20 2020 2020 2020 2073 656c 662e  l).        self.
-00000a90: 6173 7365 7274 4571 7561 6c28 7265 7370  assertEqual(resp
-00000aa0: 6f6e 7365 2e73 7461 7475 735f 636f 6465  onse.status_code
-00000ab0: 2c20 3230 3029 0a0a 2020 2020 6465 6620  , 200)..    def 
-00000ac0: 7465 7374 5f65 6469 745f 6e65 7773 6c65  test_edit_newsle
-00000ad0: 7474 6572 2873 656c 6629 3a0a 2020 2020  tter(self):.    
-00000ae0: 2020 2020 7365 6c66 2e5f 6c6f 675f 6173      self._log_as
-00000af0: 5f65 6469 746f 7228 290a 2020 2020 2020  _editor().      
-00000b00: 2020 6e65 7773 6c65 7474 6572 203d 206d    newsletter = m
-00000b10: 6f6d 6d79 2e6d 616b 6528 0a20 2020 2020  ommy.make(.     
-00000b20: 2020 2020 2020 204e 6577 736c 6574 7465         Newslette
-00000b30: 722c 0a20 2020 2020 2020 2020 2020 2073  r,.            s
-00000b40: 7562 6a65 6374 3d22 6120 6c69 7474 6c65  ubject="a little
-00000b50: 2069 6e74 726f 2066 6f72 2074 6869 7320   intro for this 
-00000b60: 6e65 7773 6c65 7474 6572 222c 0a20 2020  newsletter",.   
-00000b70: 2020 2020 2020 2020 2074 656d 706c 6174           templat
-00000b80: 653d 2274 6573 742f 6e65 7773 6c65 7474  e="test/newslett
-00000b90: 6572 5f72 6564 2e68 746d 6c22 2c0a 2020  er_red.html",.  
-00000ba0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00000bb0: 7572 6c20 3d20 7265 7665 7273 6528 2263  url = reverse("c
-00000bc0: 6f6f 705f 636d 735f 6e65 7773 6c65 7474  oop_cms_newslett
-00000bd0: 6572 5f73 6574 7469 6e67 7322 2c20 6172  er_settings", ar
-00000be0: 6773 3d5b 6e65 7773 6c65 7474 6572 2e69  gs=[newsletter.i
-00000bf0: 645d 290a 0a20 2020 2020 2020 2064 6174  d])..        dat
-00000c00: 6120 3d20 7b0a 2020 2020 2020 2020 2020  a = {.          
-00000c10: 2020 2273 7562 6a65 6374 223a 2022 7465    "subject": "te
-00000c20: 7374 222c 0a20 2020 2020 2020 2020 2020  st",.           
-00000c30: 2022 7465 6d70 6c61 7465 223a 2022 7465   "template": "te
-00000c40: 7374 2f6e 6577 736c 6574 7465 725f 626c  st/newsletter_bl
-00000c50: 7565 2e68 746d 6c22 2c0a 2020 2020 2020  ue.html",.      
-00000c60: 2020 2020 2020 2769 7465 6d73 273a 205b        'items': [
-00000c70: 5d0a 2020 2020 2020 2020 7d0a 0a20 2020  ].        }..   
-00000c80: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-00000c90: 7365 6c66 2e63 6c69 656e 742e 706f 7374  self.client.post
-00000ca0: 2875 726c 2c20 6461 7461 3d64 6174 6129  (url, data=data)
-00000cb0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00000cc0: 7365 7274 4571 7561 6c28 7265 7370 6f6e  sertEqual(respon
-00000cd0: 7365 2e73 7461 7475 735f 636f 6465 2c20  se.status_code, 
-00000ce0: 3230 3029 0a0a 2020 2020 2020 2020 7365  200)..        se
-00000cf0: 6c66 2e61 7373 6572 7445 7175 616c 284e  lf.assertEqual(N
-00000d00: 6577 736c 6574 7465 722e 6f62 6a65 6374  ewsletter.object
-00000d10: 732e 636f 756e 7428 292c 2031 290a 2020  s.count(), 1).  
-00000d20: 2020 2020 2020 6e65 7773 6c65 7474 6572        newsletter
-00000d30: 203d 204e 6577 736c 6574 7465 722e 6f62   = Newsletter.ob
-00000d40: 6a65 6374 732e 616c 6c28 295b 305d 0a0a  jects.all()[0]..
-00000d50: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00000d60: 6572 7445 7175 616c 286e 6577 736c 6574  ertEqual(newslet
-00000d70: 7465 722e 7375 626a 6563 742c 2064 6174  ter.subject, dat
-00000d80: 615b 2273 7562 6a65 6374 225d 290a 2020  a["subject"]).  
-00000d90: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00000da0: 7445 7175 616c 286e 6577 736c 6574 7465  tEqual(newslette
-00000db0: 722e 7465 6d70 6c61 7465 2c20 6461 7461  r.template, data
-00000dc0: 5b22 7465 6d70 6c61 7465 225d 290a 0a20  ["template"]).. 
-00000dd0: 2020 2064 6566 2074 6573 745f 7669 6577     def test_view
-00000de0: 5f6e 6577 736c 6574 7465 725f 6974 656d  _newsletter_item
-00000df0: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
-00000e00: 2073 656c 662e 5f6c 6f67 5f61 735f 6564   self._log_as_ed
-00000e10: 6974 6f72 2829 0a20 2020 2020 2020 2061  itor().        a
-00000e20: 7274 6963 6c65 5f63 6c61 7373 203d 2067  rticle_class = g
-00000e30: 6574 5f61 7274 6963 6c65 5f63 6c61 7373  et_article_class
-00000e40: 2829 0a0a 2020 2020 2020 2020 7369 7465  ()..        site
-00000e50: 203d 2053 6974 652e 6f62 6a65 6374 732e   = Site.objects.
-00000e60: 6765 745f 6375 7272 656e 7428 290a 2020  get_current().  
-00000e70: 2020 2020 2020 6f74 6865 725f 7369 7465        other_site
-00000e80: 203d 206d 6f6d 6d79 2e6d 616b 6528 5369   = mommy.make(Si
-00000e90: 7465 290a 0a20 2020 2020 2020 2061 7274  te)..        art
-00000ea0: 6963 6c65 5f31 203d 206d 6f6d 6d79 2e6d  icle_1 = mommy.m
-00000eb0: 616b 6528 6172 7469 636c 655f 636c 6173  ake(article_clas
-00000ec0: 732c 2073 6c75 673d 2274 6573 7431 222c  s, slug="test1",
-00000ed0: 2069 6e5f 6e65 7773 6c65 7474 6572 3d54   in_newsletter=T
-00000ee0: 7275 6529 0a20 2020 2020 2020 2061 7274  rue).        art
-00000ef0: 6963 6c65 5f32 203d 206d 6f6d 6d79 2e6d  icle_2 = mommy.m
-00000f00: 616b 6528 6172 7469 636c 655f 636c 6173  ake(article_clas
-00000f10: 732c 2073 6c75 673d 2274 6573 7432 222c  s, slug="test2",
-00000f20: 2069 6e5f 6e65 7773 6c65 7474 6572 3d54   in_newsletter=T
-00000f30: 7275 652c 2073 6974 6573 3d5b 6f74 6865  rue, sites=[othe
-00000f40: 725f 7369 7465 5d29 0a20 2020 2020 2020  r_site]).       
-00000f50: 2061 7274 6963 6c65 5f33 203d 206d 6f6d   article_3 = mom
-00000f60: 6d79 2e6d 616b 6528 6172 7469 636c 655f  my.make(article_
-00000f70: 636c 6173 732c 2073 6c75 673d 2274 6573  class, slug="tes
-00000f80: 7433 222c 2069 6e5f 6e65 7773 6c65 7474  t3", in_newslett
-00000f90: 6572 3d54 7275 6529 0a20 2020 2020 2020  er=True).       
-00000fa0: 2061 7274 6963 6c65 5f34 203d 206d 6f6d   article_4 = mom
-00000fb0: 6d79 2e6d 616b 6528 6172 7469 636c 655f  my.make(article_
-00000fc0: 636c 6173 732c 2073 6c75 673d 2274 6573  class, slug="tes
-00000fd0: 7434 222c 2069 6e5f 6e65 7773 6c65 7474  t4", in_newslett
-00000fe0: 6572 3d46 616c 7365 290a 0a20 2020 2020  er=False)..     
-00000ff0: 2020 2061 7274 6963 6c65 5f32 2e73 6974     article_2.sit
-00001000: 6573 2e63 6c65 6172 2829 0a20 2020 2020  es.clear().     
-00001010: 2020 2061 7274 6963 6c65 5f32 2e73 6974     article_2.sit
-00001020: 6573 2e61 6464 286f 7468 6572 5f73 6974  es.add(other_sit
-00001030: 6529 0a20 2020 2020 2020 2061 7274 6963  e).        artic
-00001040: 6c65 5f32 2e73 6176 6528 290a 0a20 2020  le_2.save()..   
-00001050: 2020 2020 2063 7420 3d20 436f 6e74 656e       ct = Conten
-00001060: 7454 7970 652e 6f62 6a65 6374 732e 6765  tType.objects.ge
-00001070: 745f 666f 725f 6d6f 6465 6c28 6172 7469  t_for_model(arti
-00001080: 636c 655f 636c 6173 7329 0a20 2020 2020  cle_class).     
-00001090: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-000010a0: 7561 6c28 332c 204e 6577 736c 6574 7465  ual(3, Newslette
-000010b0: 7249 7465 6d2e 6f62 6a65 6374 732e 636f  rItem.objects.co
-000010c0: 756e 7428 2929 0a20 2020 2020 2020 2069  unt()).        i
-000010d0: 7465 6d5f 3120 3d20 4e65 7773 6c65 7474  tem_1 = Newslett
-000010e0: 6572 4974 656d 2e6f 626a 6563 7473 2e67  erItem.objects.g
-000010f0: 6574 2863 6f6e 7465 6e74 5f74 7970 653d  et(content_type=
-00001100: 6374 2c20 6f62 6a65 6374 5f69 643d 6172  ct, object_id=ar
-00001110: 7469 636c 655f 312e 6964 290a 2020 2020  ticle_1.id).    
-00001120: 2020 2020 6974 656d 5f32 203d 204e 6577      item_2 = New
-00001130: 736c 6574 7465 7249 7465 6d2e 6f62 6a65  sletterItem.obje
-00001140: 6374 732e 6765 7428 636f 6e74 656e 745f  cts.get(content_
-00001150: 7479 7065 3d63 742c 206f 626a 6563 745f  type=ct, object_
-00001160: 6964 3d61 7274 6963 6c65 5f32 2e69 6429  id=article_2.id)
-00001170: 0a20 2020 2020 2020 2069 7465 6d5f 3320  .        item_3 
-00001180: 3d20 4e65 7773 6c65 7474 6572 4974 656d  = NewsletterItem
-00001190: 2e6f 626a 6563 7473 2e67 6574 2863 6f6e  .objects.get(con
-000011a0: 7465 6e74 5f74 7970 653d 6374 2c20 6f62  tent_type=ct, ob
-000011b0: 6a65 6374 5f69 643d 6172 7469 636c 655f  ject_id=article_
-000011c0: 332e 6964 290a 0a20 2020 2020 2020 206e  3.id)..        n
-000011d0: 6577 736c 6574 7465 7220 3d20 6d6f 6d6d  ewsletter = momm
-000011e0: 792e 6d61 6b65 280a 2020 2020 2020 2020  y.make(.        
-000011f0: 2020 2020 4e65 7773 6c65 7474 6572 2c0a      Newsletter,.
-00001200: 2020 2020 2020 2020 2020 2020 7375 626a              subj
-00001210: 6563 743d 2261 206c 6974 746c 6520 696e  ect="a little in
-00001220: 7472 6f20 666f 7220 7468 6973 206e 6577  tro for this new
-00001230: 736c 6574 7465 7222 2c0a 2020 2020 2020  sletter",.      
-00001240: 2020 2020 2020 7465 6d70 6c61 7465 3d22        template="
-00001250: 7465 7374 2f6e 6577 736c 6574 7465 725f  test/newsletter_
-00001260: 7265 642e 6874 6d6c 222c 0a20 2020 2020  red.html",.     
-00001270: 2020 2020 2020 2069 7465 6d73 3d5b 6974         items=[it
-00001280: 656d 5f31 5d0a 2020 2020 2020 2020 290a  em_1].        ).
-00001290: 0a20 2020 2020 2020 2075 726c 203d 2072  .        url = r
-000012a0: 6576 6572 7365 2822 636f 6f70 5f63 6d73  everse("coop_cms
-000012b0: 5f6e 6577 736c 6574 7465 725f 7365 7474  _newsletter_sett
-000012c0: 696e 6773 222c 2061 7267 733d 5b6e 6577  ings", args=[new
-000012d0: 736c 6574 7465 722e 6964 5d29 0a0a 2020  sletter.id])..  
-000012e0: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-000012f0: 2073 656c 662e 636c 6965 6e74 2e67 6574   self.client.get
-00001300: 2875 726c 290a 2020 2020 2020 2020 7365  (url).        se
-00001310: 6c66 2e61 7373 6572 7445 7175 616c 2872  lf.assertEqual(r
-00001320: 6573 706f 6e73 652e 7374 6174 7573 5f63  esponse.status_c
-00001330: 6f64 652c 2032 3030 290a 0a20 2020 2020  ode, 200)..     
-00001340: 2020 2073 6f75 7020 3d20 4265 6175 7469     soup = Beauti
-00001350: 6675 6c53 6f75 7028 7265 7370 6f6e 7365  fulSoup(response
-00001360: 2e63 6f6e 7465 6e74 290a 0a20 2020 2020  .content)..     
-00001370: 2020 206f 7074 696f 6e73 203d 2073 6f75     options = sou
-00001380: 702e 7365 6c65 6374 2822 2369 645f 6974  p.select("#id_it
-00001390: 656d 7320 6f70 7469 6f6e 2229 0a20 2020  ems option").   
-000013a0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000013b0: 4571 7561 6c28 322c 206c 656e 286f 7074  Equal(2, len(opt
-000013c0: 696f 6e73 2929 0a20 2020 2020 2020 2073  ions)).        s
-000013d0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-000013e0: 0a20 2020 2020 2020 2020 2020 2073 6f72  .            sor
-000013f0: 7465 6428 5b69 6e74 2869 645f 5b22 7661  ted([int(id_["va
-00001400: 6c75 6522 5d29 2066 6f72 2069 645f 2069  lue"]) for id_ i
-00001410: 6e20 6f70 7469 6f6e 735d 292c 0a20 2020  n options]),.   
-00001420: 2020 2020 2020 2020 2073 6f72 7465 6428           sorted(
-00001430: 5b69 7465 6d2e 6964 2066 6f72 2069 7465  [item.id for ite
-00001440: 6d20 696e 205b 6974 656d 5f31 2c20 6974  m in [item_1, it
-00001450: 656d 5f33 5d5d 290a 2020 2020 2020 2020  em_3]]).        
-00001460: 290a 0a20 2020 2020 2020 206f 7074 696f  )..        optio
-00001470: 6e73 203d 2073 6f75 702e 7365 6c65 6374  ns = soup.select
-00001480: 2822 2369 645f 6974 656d 7320 6f70 7469  ("#id_items opti
-00001490: 6f6e 5b73 656c 6563 7465 643d 7365 6c65  on[selected=sele
-000014a0: 6374 6564 5d22 290a 2020 2020 2020 2020  cted]").        
-000014b0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-000014c0: 2831 2c20 6c65 6e28 6f70 7469 6f6e 7329  (1, len(options)
-000014d0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-000014e0: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
-000014f0: 2020 2020 2020 2020 736f 7274 6564 285b          sorted([
-00001500: 696e 7428 6964 5f5b 2276 616c 7565 225d  int(id_["value"]
-00001510: 2920 666f 7220 6964 5f20 696e 206f 7074  ) for id_ in opt
-00001520: 696f 6e73 5d29 2c0a 2020 2020 2020 2020  ions]),.        
-00001530: 2020 2020 736f 7274 6564 285b 6974 656d      sorted([item
-00001540: 2e69 6420 666f 7220 6974 656d 2069 6e20  .id for item in 
-00001550: 5b69 7465 6d5f 315d 5d29 0a20 2020 2020  [item_1]]).     
-00001560: 2020 2029 0a0a 2020 2020 6465 6620 7465     )..    def te
-00001570: 7374 5f73 6176 655f 6e65 7773 6c65 7474  st_save_newslett
-00001580: 6572 5f69 7465 6d73 2873 656c 6629 3a0a  er_items(self):.
-00001590: 2020 2020 2020 2020 7365 6c66 2e5f 6c6f          self._lo
-000015a0: 675f 6173 5f65 6469 746f 7228 290a 2020  g_as_editor().  
-000015b0: 2020 2020 2020 6172 7469 636c 655f 636c        article_cl
-000015c0: 6173 7320 3d20 6765 745f 6172 7469 636c  ass = get_articl
-000015d0: 655f 636c 6173 7328 290a 0a20 2020 2020  e_class()..     
-000015e0: 2020 2073 6974 6520 3d20 5369 7465 2e6f     site = Site.o
-000015f0: 626a 6563 7473 2e67 6574 5f63 7572 7265  bjects.get_curre
-00001600: 6e74 2829 0a20 2020 2020 2020 206f 7468  nt().        oth
-00001610: 6572 5f73 6974 6520 3d20 6d6f 6d6d 792e  er_site = mommy.
-00001620: 6d61 6b65 2853 6974 6529 0a0a 2020 2020  make(Site)..    
-00001630: 2020 2020 6172 7469 636c 655f 3120 3d20      article_1 = 
-00001640: 6d6f 6d6d 792e 6d61 6b65 2861 7274 6963  mommy.make(artic
-00001650: 6c65 5f63 6c61 7373 2c20 736c 7567 3d22  le_class, slug="
-00001660: 7465 7374 3122 2c20 696e 5f6e 6577 736c  test1", in_newsl
-00001670: 6574 7465 723d 5472 7565 290a 2020 2020  etter=True).    
-00001680: 2020 2020 6172 7469 636c 655f 3220 3d20      article_2 = 
-00001690: 6d6f 6d6d 792e 6d61 6b65 2861 7274 6963  mommy.make(artic
-000016a0: 6c65 5f63 6c61 7373 2c20 736c 7567 3d22  le_class, slug="
-000016b0: 7465 7374 3222 2c20 696e 5f6e 6577 736c  test2", in_newsl
-000016c0: 6574 7465 723d 5472 7565 290a 2020 2020  etter=True).    
-000016d0: 2020 2020 6172 7469 636c 655f 3320 3d20      article_3 = 
-000016e0: 6d6f 6d6d 792e 6d61 6b65 2861 7274 6963  mommy.make(artic
-000016f0: 6c65 5f63 6c61 7373 2c20 736c 7567 3d22  le_class, slug="
-00001700: 7465 7374 3322 2c20 696e 5f6e 6577 736c  test3", in_newsl
-00001710: 6574 7465 723d 5472 7565 290a 0a20 2020  etter=True)..   
-00001720: 2020 2020 2063 7420 3d20 436f 6e74 656e       ct = Conten
-00001730: 7454 7970 652e 6f62 6a65 6374 732e 6765  tType.objects.ge
-00001740: 745f 666f 725f 6d6f 6465 6c28 6172 7469  t_for_model(arti
-00001750: 636c 655f 636c 6173 7329 0a20 2020 2020  cle_class).     
-00001760: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00001770: 7561 6c28 332c 204e 6577 736c 6574 7465  ual(3, Newslette
-00001780: 7249 7465 6d2e 6f62 6a65 6374 732e 636f  rItem.objects.co
-00001790: 756e 7428 2929 0a20 2020 2020 2020 2069  unt()).        i
-000017a0: 7465 6d5f 3120 3d20 4e65 7773 6c65 7474  tem_1 = Newslett
-000017b0: 6572 4974 656d 2e6f 626a 6563 7473 2e67  erItem.objects.g
-000017c0: 6574 2863 6f6e 7465 6e74 5f74 7970 653d  et(content_type=
-000017d0: 6374 2c20 6f62 6a65 6374 5f69 643d 6172  ct, object_id=ar
-000017e0: 7469 636c 655f 312e 6964 290a 2020 2020  ticle_1.id).    
-000017f0: 2020 2020 6974 656d 5f32 203d 204e 6577      item_2 = New
-00001800: 736c 6574 7465 7249 7465 6d2e 6f62 6a65  sletterItem.obje
-00001810: 6374 732e 6765 7428 636f 6e74 656e 745f  cts.get(content_
-00001820: 7479 7065 3d63 742c 206f 626a 6563 745f  type=ct, object_
-00001830: 6964 3d61 7274 6963 6c65 5f32 2e69 6429  id=article_2.id)
-00001840: 0a20 2020 2020 2020 2069 7465 6d5f 3320  .        item_3 
-00001850: 3d20 4e65 7773 6c65 7474 6572 4974 656d  = NewsletterItem
-00001860: 2e6f 626a 6563 7473 2e67 6574 2863 6f6e  .objects.get(con
-00001870: 7465 6e74 5f74 7970 653d 6374 2c20 6f62  tent_type=ct, ob
-00001880: 6a65 6374 5f69 643d 6172 7469 636c 655f  ject_id=article_
-00001890: 332e 6964 290a 0a20 2020 2020 2020 206e  3.id)..        n
-000018a0: 6577 736c 6574 7465 7220 3d20 6d6f 6d6d  ewsletter = momm
-000018b0: 792e 6d61 6b65 280a 2020 2020 2020 2020  y.make(.        
-000018c0: 2020 2020 4e65 7773 6c65 7474 6572 2c0a      Newsletter,.
-000018d0: 2020 2020 2020 2020 2020 2020 7375 626a              subj
-000018e0: 6563 743d 2261 206c 6974 746c 6520 696e  ect="a little in
-000018f0: 7472 6f20 666f 7220 7468 6973 206e 6577  tro for this new
-00001900: 736c 6574 7465 7222 2c0a 2020 2020 2020  sletter",.      
-00001910: 2020 2020 2020 7465 6d70 6c61 7465 3d22        template="
-00001920: 7465 7374 2f6e 6577 736c 6574 7465 725f  test/newsletter_
-00001930: 7265 642e 6874 6d6c 222c 0a20 2020 2020  red.html",.     
-00001940: 2020 2020 2020 2069 7465 6d73 3d5b 6974         items=[it
-00001950: 656d 5f31 5d0a 2020 2020 2020 2020 290a  em_1].        ).
-00001960: 0a20 2020 2020 2020 2064 6174 6120 3d20  .        data = 
-00001970: 7b0a 2020 2020 2020 2020 2020 2020 2273  {.            "s
-00001980: 7562 6a65 6374 223a 2022 7465 7374 222c  ubject": "test",
-00001990: 0a20 2020 2020 2020 2020 2020 2022 7465  .            "te
-000019a0: 6d70 6c61 7465 223a 2022 7465 7374 2f6e  mplate": "test/n
-000019b0: 6577 736c 6574 7465 725f 626c 7565 2e68  ewsletter_blue.h
-000019c0: 746d 6c22 2c0a 2020 2020 2020 2020 2020  tml",.          
-000019d0: 2020 2769 7465 6d73 273a 205b 6974 656d    'items': [item
-000019e0: 5f32 2e69 642c 2069 7465 6d5f 332e 6964  _2.id, item_3.id
-000019f0: 5d0a 2020 2020 2020 2020 7d0a 0a20 2020  ].        }..   
-00001a00: 2020 2020 2075 726c 203d 2072 6576 6572       url = rever
-00001a10: 7365 2822 636f 6f70 5f63 6d73 5f6e 6577  se("coop_cms_new
-00001a20: 736c 6574 7465 725f 7365 7474 696e 6773  sletter_settings
-00001a30: 222c 2061 7267 733d 5b6e 6577 736c 6574  ", args=[newslet
-00001a40: 7465 722e 6964 5d29 0a0a 2020 2020 2020  ter.id])..      
-00001a50: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
-00001a60: 662e 636c 6965 6e74 2e70 6f73 7428 7572  f.client.post(ur
-00001a70: 6c2c 2064 6174 613d 6461 7461 290a 2020  l, data=data).  
-00001a80: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00001a90: 7445 7175 616c 2872 6573 706f 6e73 652e  tEqual(response.
-00001aa0: 7374 6174 7573 5f63 6f64 652c 2032 3030  status_code, 200
-00001ab0: 290a 0a20 2020 2020 2020 206e 6577 736c  )..        newsl
-00001ac0: 6574 7465 7220 3d20 4e65 7773 6c65 7474  etter = Newslett
-00001ad0: 6572 2e6f 626a 6563 7473 2e67 6574 2869  er.objects.get(i
-00001ae0: 643d 6e65 7773 6c65 7474 6572 2e69 6429  d=newsletter.id)
-00001af0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00001b00: 7365 7274 4571 7561 6c28 6e65 7773 6c65  sertEqual(newsle
-00001b10: 7474 6572 2e73 7562 6a65 6374 2c20 6461  tter.subject, da
-00001b20: 7461 5b22 7375 626a 6563 7422 5d29 0a20  ta["subject"]). 
-00001b30: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00001b40: 7274 4571 7561 6c28 6e65 7773 6c65 7474  rtEqual(newslett
-00001b50: 6572 2e74 656d 706c 6174 652c 2064 6174  er.template, dat
-00001b60: 615b 2274 656d 706c 6174 6522 5d29 0a20  a["template"]). 
-00001b70: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00001b80: 7274 4571 7561 6c28 0a20 2020 2020 2020  rtEqual(.       
-00001b90: 2020 2020 206c 6973 7428 736f 7274 6564       list(sorted
-00001ba0: 286e 2e69 6420 666f 7220 6e20 696e 206e  (n.id for n in n
-00001bb0: 6577 736c 6574 7465 722e 6974 656d 732e  ewsletter.items.
-00001bc0: 616c 6c28 2929 292c 0a20 2020 2020 2020  all())),.       
-00001bd0: 2020 2020 206c 6973 7428 736f 7274 6564       list(sorted
-00001be0: 2864 6174 615b 2269 7465 6d73 225d 2929  (data["items"]))
-00001bf0: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-00001c00: 6465 6620 7465 7374 5f73 6176 655f 6e65  def test_save_ne
-00001c10: 7773 6c65 7474 6572 5f69 7465 6d73 5f6f  wsletter_items_o
-00001c20: 7468 6572 5f73 6974 6528 7365 6c66 293a  ther_site(self):
-00001c30: 0a20 2020 2020 2020 2073 656c 662e 5f6c  .        self._l
-00001c40: 6f67 5f61 735f 6564 6974 6f72 2829 0a20  og_as_editor(). 
-00001c50: 2020 2020 2020 2061 7274 6963 6c65 5f63         article_c
-00001c60: 6c61 7373 203d 2067 6574 5f61 7274 6963  lass = get_artic
-00001c70: 6c65 5f63 6c61 7373 2829 0a0a 2020 2020  le_class()..    
-00001c80: 2020 2020 7369 7465 203d 2053 6974 652e      site = Site.
-00001c90: 6f62 6a65 6374 732e 6765 745f 6375 7272  objects.get_curr
-00001ca0: 656e 7428 290a 2020 2020 2020 2020 6f74  ent().        ot
-00001cb0: 6865 725f 7369 7465 203d 206d 6f6d 6d79  her_site = mommy
-00001cc0: 2e6d 616b 6528 5369 7465 290a 0a20 2020  .make(Site)..   
-00001cd0: 2020 2020 2061 7274 6963 6c65 5f31 203d       article_1 =
-00001ce0: 206d 6f6d 6d79 2e6d 616b 6528 6172 7469   mommy.make(arti
-00001cf0: 636c 655f 636c 6173 732c 2073 6c75 673d  cle_class, slug=
-00001d00: 2274 6573 7431 222c 2069 6e5f 6e65 7773  "test1", in_news
-00001d10: 6c65 7474 6572 3d54 7275 6529 0a20 2020  letter=True).   
-00001d20: 2020 2020 2061 7274 6963 6c65 5f32 203d       article_2 =
-00001d30: 206d 6f6d 6d79 2e6d 616b 6528 6172 7469   mommy.make(arti
-00001d40: 636c 655f 636c 6173 732c 2073 6c75 673d  cle_class, slug=
-00001d50: 2274 6573 7432 222c 2069 6e5f 6e65 7773  "test2", in_news
-00001d60: 6c65 7474 6572 3d54 7275 6529 0a20 2020  letter=True).   
-00001d70: 2020 2020 2061 7274 6963 6c65 5f33 203d       article_3 =
-00001d80: 206d 6f6d 6d79 2e6d 616b 6528 6172 7469   mommy.make(arti
-00001d90: 636c 655f 636c 6173 732c 2073 6c75 673d  cle_class, slug=
-00001da0: 2274 6573 7433 222c 2069 6e5f 6e65 7773  "test3", in_news
-00001db0: 6c65 7474 6572 3d54 7275 6529 0a0a 2020  letter=True)..  
-00001dc0: 2020 2020 2020 6172 7469 636c 655f 322e        article_2.
-00001dd0: 7369 7465 732e 636c 6561 7228 290a 2020  sites.clear().  
-00001de0: 2020 2020 2020 6172 7469 636c 655f 322e        article_2.
-00001df0: 7369 7465 732e 6164 6428 6f74 6865 725f  sites.add(other_
-00001e00: 7369 7465 290a 2020 2020 2020 2020 6172  site).        ar
-00001e10: 7469 636c 655f 322e 7361 7665 2829 0a0a  ticle_2.save()..
-00001e20: 2020 2020 2020 2020 636f 6e74 656e 745f          content_
-00001e30: 7479 7065 203d 2043 6f6e 7465 6e74 5479  type = ContentTy
-00001e40: 7065 2e6f 626a 6563 7473 2e67 6574 5f66  pe.objects.get_f
-00001e50: 6f72 5f6d 6f64 656c 2861 7274 6963 6c65  or_model(article
-00001e60: 5f63 6c61 7373 290a 2020 2020 2020 2020  _class).        
-00001e70: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00001e80: 2833 2c20 4e65 7773 6c65 7474 6572 4974  (3, NewsletterIt
-00001e90: 656d 2e6f 626a 6563 7473 2e63 6f75 6e74  em.objects.count
-00001ea0: 2829 290a 2020 2020 2020 2020 6974 656d  ()).        item
-00001eb0: 5f31 203d 204e 6577 736c 6574 7465 7249  _1 = NewsletterI
-00001ec0: 7465 6d2e 6f62 6a65 6374 732e 6765 7428  tem.objects.get(
-00001ed0: 636f 6e74 656e 745f 7479 7065 3d63 6f6e  content_type=con
-00001ee0: 7465 6e74 5f74 7970 652c 206f 626a 6563  tent_type, objec
-00001ef0: 745f 6964 3d61 7274 6963 6c65 5f31 2e69  t_id=article_1.i
-00001f00: 6429 0a20 2020 2020 2020 2069 7465 6d5f  d).        item_
-00001f10: 3220 3d20 4e65 7773 6c65 7474 6572 4974  2 = NewsletterIt
-00001f20: 656d 2e6f 626a 6563 7473 2e67 6574 2863  em.objects.get(c
-00001f30: 6f6e 7465 6e74 5f74 7970 653d 636f 6e74  ontent_type=cont
-00001f40: 656e 745f 7479 7065 2c20 6f62 6a65 6374  ent_type, object
-00001f50: 5f69 643d 6172 7469 636c 655f 322e 6964  _id=article_2.id
-00001f60: 290a 2020 2020 2020 2020 6974 656d 5f33  ).        item_3
-00001f70: 203d 204e 6577 736c 6574 7465 7249 7465   = NewsletterIte
-00001f80: 6d2e 6f62 6a65 6374 732e 6765 7428 636f  m.objects.get(co
-00001f90: 6e74 656e 745f 7479 7065 3d63 6f6e 7465  ntent_type=conte
-00001fa0: 6e74 5f74 7970 652c 206f 626a 6563 745f  nt_type, object_
-00001fb0: 6964 3d61 7274 6963 6c65 5f33 2e69 6429  id=article_3.id)
-00001fc0: 0a0a 2020 2020 2020 2020 6e65 7773 6c65  ..        newsle
-00001fd0: 7474 6572 203d 206d 6f6d 6d79 2e6d 616b  tter = mommy.mak
-00001fe0: 6528 0a20 2020 2020 2020 2020 2020 204e  e(.            N
-00001ff0: 6577 736c 6574 7465 722c 0a20 2020 2020  ewsletter,.     
-00002000: 2020 2020 2020 2073 7562 6a65 6374 3d22         subject="
-00002010: 6120 6c69 7474 6c65 2069 6e74 726f 2066  a little intro f
-00002020: 6f72 2074 6869 7320 6e65 7773 6c65 7474  or this newslett
-00002030: 6572 222c 0a20 2020 2020 2020 2020 2020  er",.           
-00002040: 2074 656d 706c 6174 653d 2274 6573 742f   template="test/
-00002050: 6e65 7773 6c65 7474 6572 5f72 6564 2e68  newsletter_red.h
-00002060: 746d 6c22 2c0a 2020 2020 2020 2020 2020  tml",.          
-00002070: 2020 6974 656d 733d 5b69 7465 6d5f 315d    items=[item_1]
-00002080: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-00002090: 2020 2020 6461 7461 203d 207b 0a20 2020      data = {.   
-000020a0: 2020 2020 2020 2020 2022 7375 626a 6563           "subjec
-000020b0: 7422 3a20 2274 6573 7422 2c0a 2020 2020  t": "test",.    
-000020c0: 2020 2020 2020 2020 2274 656d 706c 6174          "templat
-000020d0: 6522 3a20 2274 6573 742f 6e65 7773 6c65  e": "test/newsle
-000020e0: 7474 6572 5f62 6c75 652e 6874 6d6c 222c  tter_blue.html",
-000020f0: 0a20 2020 2020 2020 2020 2020 2027 6974  .            'it
-00002100: 656d 7327 3a20 5b69 7465 6d5f 322e 6964  ems': [item_2.id
-00002110: 2c20 6974 656d 5f33 2e69 645d 0a20 2020  , item_3.id].   
-00002120: 2020 2020 207d 0a0a 2020 2020 2020 2020       }..        
-00002130: 7572 6c20 3d20 7265 7665 7273 6528 2263  url = reverse("c
-00002140: 6f6f 705f 636d 735f 6e65 7773 6c65 7474  oop_cms_newslett
-00002150: 6572 5f73 6574 7469 6e67 7322 2c20 6172  er_settings", ar
-00002160: 6773 3d5b 6e65 7773 6c65 7474 6572 2e69  gs=[newsletter.i
-00002170: 645d 290a 0a20 2020 2020 2020 2072 6573  d])..        res
-00002180: 706f 6e73 6520 3d20 7365 6c66 2e63 6c69  ponse = self.cli
-00002190: 656e 742e 706f 7374 2875 726c 2c20 6461  ent.post(url, da
-000021a0: 7461 3d64 6174 6129 0a20 2020 2020 2020  ta=data).       
-000021b0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-000021c0: 6c28 7265 7370 6f6e 7365 2e73 7461 7475  l(response.statu
-000021d0: 735f 636f 6465 2c20 3230 3029 0a20 2020  s_code, 200).   
-000021e0: 2020 2020 2073 6f75 7020 3d20 4265 6175       soup = Beau
-000021f0: 7469 6675 6c53 6f75 7028 7265 7370 6f6e  tifulSoup(respon
-00002200: 7365 2e63 6f6e 7465 6e74 290a 0a20 2020  se.content)..   
-00002210: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00002220: 4571 7561 6c28 6c65 6e28 736f 7570 2e73  Equal(len(soup.s
-00002230: 656c 6563 7428 222e 6572 726f 726c 6973  elect(".errorlis
-00002240: 7422 2929 2c20 3129 0a20 2020 2020 2020  t")), 1).       
-00002250: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00002260: 6c28 6c65 6e28 736f 7570 2e73 656c 6563  l(len(soup.selec
-00002270: 7428 2223 6964 5f69 7465 6d73 2229 5b30  t("#id_items")[0
-00002280: 5d2e 7061 7265 6e74 2e73 656c 6563 7428  ].parent.select(
-00002290: 222e 6572 726f 726c 6973 7422 2929 2c20  ".errorlist")), 
-000022a0: 3129 0a0a 2020 2020 2020 2020 6e65 7773  1)..        news
-000022b0: 6c65 7474 6572 203d 204e 6577 736c 6574  letter = Newslet
-000022c0: 7465 722e 6f62 6a65 6374 732e 6765 7428  ter.objects.get(
-000022d0: 6964 3d6e 6577 736c 6574 7465 722e 6964  id=newsletter.id
-000022e0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-000022f0: 7373 6572 744e 6f74 4571 7561 6c28 6e65  ssertNotEqual(ne
-00002300: 7773 6c65 7474 6572 2e73 7562 6a65 6374  wsletter.subject
-00002310: 2c20 6461 7461 5b22 7375 626a 6563 7422  , data["subject"
-00002320: 5d29 0a20 2020 2020 2020 2073 656c 662e  ]).        self.
-00002330: 6173 7365 7274 4e6f 7445 7175 616c 286e  assertNotEqual(n
-00002340: 6577 736c 6574 7465 722e 7465 6d70 6c61  ewsletter.templa
-00002350: 7465 2c20 6461 7461 5b22 7465 6d70 6c61  te, data["templa
-00002360: 7465 225d 290a 2020 2020 2020 2020 7365  te"]).        se
-00002370: 6c66 2e61 7373 6572 7445 7175 616c 285b  lf.assertEqual([
-00002380: 6974 656d 5f31 2e69 645d 2c20 5b78 2e69  item_1.id], [x.i
-00002390: 6420 666f 7220 7820 696e 206e 6577 736c  d for x in newsl
-000023a0: 6574 7465 722e 6974 656d 732e 616c 6c28  etter.items.all(
-000023b0: 295d 290a 0a20 2020 2064 6566 2074 6573  )])..    def tes
-000023c0: 745f 7361 7665 5f6e 6577 736c 6574 7465  t_save_newslette
-000023d0: 725f 6974 656d 735f 6e6f 5f6e 6577 736c  r_items_no_newsl
-000023e0: 6574 7465 7228 7365 6c66 293a 0a20 2020  etter(self):.   
-000023f0: 2020 2020 2073 656c 662e 5f6c 6f67 5f61       self._log_a
-00002400: 735f 6564 6974 6f72 2829 0a20 2020 2020  s_editor().     
-00002410: 2020 2061 7274 6963 6c65 5f63 6c61 7373     article_class
-00002420: 203d 2067 6574 5f61 7274 6963 6c65 5f63   = get_article_c
-00002430: 6c61 7373 2829 0a0a 2020 2020 2020 2020  lass()..        
-00002440: 7369 7465 203d 2053 6974 652e 6f62 6a65  site = Site.obje
-00002450: 6374 732e 6765 745f 6375 7272 656e 7428  cts.get_current(
-00002460: 290a 2020 2020 2020 2020 6f74 6865 725f  ).        other_
-00002470: 7369 7465 203d 206d 6f6d 6d79 2e6d 616b  site = mommy.mak
-00002480: 6528 5369 7465 290a 0a20 2020 2020 2020  e(Site)..       
-00002490: 2061 7274 6963 6c65 5f31 203d 206d 6f6d   article_1 = mom
-000024a0: 6d79 2e6d 616b 6528 6172 7469 636c 655f  my.make(article_
-000024b0: 636c 6173 732c 2073 6c75 673d 2274 6573  class, slug="tes
-000024c0: 7431 222c 2069 6e5f 6e65 7773 6c65 7474  t1", in_newslett
-000024d0: 6572 3d54 7275 6529 0a20 2020 2020 2020  er=True).       
-000024e0: 2061 7274 6963 6c65 5f32 203d 206d 6f6d   article_2 = mom
-000024f0: 6d79 2e6d 616b 6528 6172 7469 636c 655f  my.make(article_
-00002500: 636c 6173 732c 2073 6c75 673d 2274 6573  class, slug="tes
-00002510: 7432 222c 2069 6e5f 6e65 7773 6c65 7474  t2", in_newslett
-00002520: 6572 3d54 7275 6529 0a20 2020 2020 2020  er=True).       
-00002530: 2061 7274 6963 6c65 5f33 203d 206d 6f6d   article_3 = mom
-00002540: 6d79 2e6d 616b 6528 6172 7469 636c 655f  my.make(article_
-00002550: 636c 6173 732c 2073 6c75 673d 2274 6573  class, slug="tes
-00002560: 7433 222c 2069 6e5f 6e65 7773 6c65 7474  t3", in_newslett
-00002570: 6572 3d54 7275 6529 0a0a 2020 2020 2020  er=True)..      
-00002580: 2020 636f 6e74 656e 745f 7479 7065 203d    content_type =
-00002590: 2043 6f6e 7465 6e74 5479 7065 2e6f 626a   ContentType.obj
-000025a0: 6563 7473 2e67 6574 5f66 6f72 5f6d 6f64  ects.get_for_mod
-000025b0: 656c 2861 7274 6963 6c65 5f63 6c61 7373  el(article_class
-000025c0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-000025d0: 7373 6572 7445 7175 616c 2833 2c20 4e65  ssertEqual(3, Ne
-000025e0: 7773 6c65 7474 6572 4974 656d 2e6f 626a  wsletterItem.obj
-000025f0: 6563 7473 2e63 6f75 6e74 2829 290a 2020  ects.count()).  
-00002600: 2020 2020 2020 6974 656d 5f31 203d 204e        item_1 = N
-00002610: 6577 736c 6574 7465 7249 7465 6d2e 6f62  ewsletterItem.ob
-00002620: 6a65 6374 732e 6765 7428 636f 6e74 656e  jects.get(conten
-00002630: 745f 7479 7065 3d63 6f6e 7465 6e74 5f74  t_type=content_t
-00002640: 7970 652c 206f 626a 6563 745f 6964 3d61  ype, object_id=a
-00002650: 7274 6963 6c65 5f31 2e69 6429 0a20 2020  rticle_1.id).   
-00002660: 2020 2020 2069 7465 6d5f 3220 3d20 4e65       item_2 = Ne
-00002670: 7773 6c65 7474 6572 4974 656d 2e6f 626a  wsletterItem.obj
-00002680: 6563 7473 2e67 6574 2863 6f6e 7465 6e74  ects.get(content
-00002690: 5f74 7970 653d 636f 6e74 656e 745f 7479  _type=content_ty
-000026a0: 7065 2c20 6f62 6a65 6374 5f69 643d 6172  pe, object_id=ar
-000026b0: 7469 636c 655f 322e 6964 290a 2020 2020  ticle_2.id).    
-000026c0: 2020 2020 6974 656d 5f33 203d 204e 6577      item_3 = New
-000026d0: 736c 6574 7465 7249 7465 6d2e 6f62 6a65  sletterItem.obje
-000026e0: 6374 732e 6765 7428 636f 6e74 656e 745f  cts.get(content_
-000026f0: 7479 7065 3d63 6f6e 7465 6e74 5f74 7970  type=content_typ
-00002700: 652c 206f 626a 6563 745f 6964 3d61 7274  e, object_id=art
-00002710: 6963 6c65 5f33 2e69 6429 0a0a 2020 2020  icle_3.id)..    
-00002720: 2020 2020 6172 7469 636c 655f 322e 696e      article_2.in
-00002730: 5f6e 6577 736c 6574 7465 7220 3d20 4661  _newsletter = Fa
-00002740: 6c73 650a 2020 2020 2020 2020 6172 7469  lse.        arti
-00002750: 636c 655f 322e 7361 7665 2829 0a0a 2020  cle_2.save()..  
-00002760: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00002770: 7445 7175 616c 2832 2c20 4e65 7773 6c65  tEqual(2, Newsle
-00002780: 7474 6572 4974 656d 2e6f 626a 6563 7473  tterItem.objects
-00002790: 2e63 6f75 6e74 2829 290a 0a20 2020 2020  .count())..     
-000027a0: 2020 206e 6577 736c 6574 7465 7220 3d20     newsletter = 
-000027b0: 6d6f 6d6d 792e 6d61 6b65 280a 2020 2020  mommy.make(.    
-000027c0: 2020 2020 2020 2020 4e65 7773 6c65 7474          Newslett
-000027d0: 6572 2c0a 2020 2020 2020 2020 2020 2020  er,.            
-000027e0: 7375 626a 6563 743d 2261 206c 6974 746c  subject="a littl
-000027f0: 6520 696e 7472 6f20 666f 7220 7468 6973  e intro for this
-00002800: 206e 6577 736c 6574 7465 7222 2c0a 2020   newsletter",.  
-00002810: 2020 2020 2020 2020 2020 7465 6d70 6c61            templa
-00002820: 7465 3d22 7465 7374 2f6e 6577 736c 6574  te="test/newslet
-00002830: 7465 725f 7265 642e 6874 6d6c 222c 0a20  ter_red.html",. 
-00002840: 2020 2020 2020 2020 2020 2069 7465 6d73             items
-00002850: 3d5b 6974 656d 5f31 5d0a 2020 2020 2020  =[item_1].      
-00002860: 2020 290a 0a20 2020 2020 2020 2064 6174    )..        dat
-00002870: 6120 3d20 7b0a 2020 2020 2020 2020 2020  a = {.          
-00002880: 2020 2273 7562 6a65 6374 223a 2022 7465    "subject": "te
-00002890: 7374 222c 0a20 2020 2020 2020 2020 2020  st",.           
-000028a0: 2022 7465 6d70 6c61 7465 223a 2022 7465   "template": "te
-000028b0: 7374 2f6e 6577 736c 6574 7465 725f 626c  st/newsletter_bl
-000028c0: 7565 2e68 746d 6c22 2c0a 2020 2020 2020  ue.html",.      
-000028d0: 2020 2020 2020 2769 7465 6d73 273a 205b        'items': [
-000028e0: 6974 656d 5f32 2e69 642c 2069 7465 6d5f  item_2.id, item_
-000028f0: 332e 6964 5d0a 2020 2020 2020 2020 7d0a  3.id].        }.
-00002900: 0a20 2020 2020 2020 2075 726c 203d 2072  .        url = r
-00002910: 6576 6572 7365 2822 636f 6f70 5f63 6d73  everse("coop_cms
-00002920: 5f6e 6577 736c 6574 7465 725f 7365 7474  _newsletter_sett
-00002930: 696e 6773 222c 2061 7267 733d 5b6e 6577  ings", args=[new
-00002940: 736c 6574 7465 722e 6964 5d29 0a0a 2020  sletter.id])..  
-00002950: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-00002960: 2073 656c 662e 636c 6965 6e74 2e70 6f73   self.client.pos
-00002970: 7428 7572 6c2c 2064 6174 613d 6461 7461  t(url, data=data
-00002980: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00002990: 7373 6572 7445 7175 616c 2872 6573 706f  ssertEqual(respo
-000029a0: 6e73 652e 7374 6174 7573 5f63 6f64 652c  nse.status_code,
-000029b0: 2032 3030 290a 2020 2020 2020 2020 736f   200).        so
-000029c0: 7570 203d 2042 6561 7574 6966 756c 536f  up = BeautifulSo
-000029d0: 7570 2872 6573 706f 6e73 652e 636f 6e74  up(response.cont
-000029e0: 656e 7429 0a0a 2020 2020 2020 2020 7365  ent)..        se
-000029f0: 6c66 2e61 7373 6572 7445 7175 616c 286c  lf.assertEqual(l
-00002a00: 656e 2873 6f75 702e 7365 6c65 6374 2822  en(soup.select("
-00002a10: 2e65 7272 6f72 6c69 7374 2229 292c 2031  .errorlist")), 1
-00002a20: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00002a30: 7373 6572 7445 7175 616c 286c 656e 2873  ssertEqual(len(s
-00002a40: 6f75 702e 7365 6c65 6374 2822 2369 645f  oup.select("#id_
-00002a50: 6974 656d 7322 295b 305d 2e70 6172 656e  items")[0].paren
-00002a60: 742e 7365 6c65 6374 2822 2e65 7272 6f72  t.select(".error
-00002a70: 6c69 7374 2229 292c 2031 290a 0a20 2020  list")), 1)..   
-00002a80: 2020 2020 206e 6577 736c 6574 7465 7220       newsletter 
-00002a90: 3d20 4e65 7773 6c65 7474 6572 2e6f 626a  = Newsletter.obj
-00002aa0: 6563 7473 2e67 6574 2869 643d 6e65 7773  ects.get(id=news
-00002ab0: 6c65 7474 6572 2e69 6429 0a20 2020 2020  letter.id).     
-00002ac0: 2020 2073 656c 662e 6173 7365 7274 4e6f     self.assertNo
-00002ad0: 7445 7175 616c 286e 6577 736c 6574 7465  tEqual(newslette
-00002ae0: 722e 7375 626a 6563 742c 2064 6174 615b  r.subject, data[
-00002af0: 2273 7562 6a65 6374 225d 290a 2020 2020  "subject"]).    
-00002b00: 2020 2020 7365 6c66 2e61 7373 6572 744e      self.assertN
-00002b10: 6f74 4571 7561 6c28 6e65 7773 6c65 7474  otEqual(newslett
-00002b20: 6572 2e74 656d 706c 6174 652c 2064 6174  er.template, dat
-00002b30: 615b 2274 656d 706c 6174 6522 5d29 0a20  a["template"]). 
-00002b40: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00002b50: 7274 4571 7561 6c28 5b69 7465 6d5f 312e  rtEqual([item_1.
-00002b60: 6964 5d2c 205b 782e 6964 2066 6f72 2078  id], [x.id for x
-00002b70: 2069 6e20 6e65 7773 6c65 7474 6572 2e69   in newsletter.i
-00002b80: 7465 6d73 2e61 6c6c 2829 5d29 0a0a 2020  tems.all()])..  
-00002b90: 2020 6465 6620 7465 7374 5f76 6965 775f    def test_view_
-00002ba0: 6372 6561 7465 5f6e 6577 736c 6574 7465  create_newslette
-00002bb0: 725f 6e6f 745f 6c6f 6767 6564 2873 656c  r_not_logged(sel
-00002bc0: 6629 3a0a 2020 2020 2020 2020 7572 6c20  f):.        url 
-00002bd0: 3d20 7265 7665 7273 6528 2263 6f6f 705f  = reverse("coop_
-00002be0: 636d 735f 6e65 775f 6e65 7773 6c65 7474  cms_new_newslett
-00002bf0: 6572 2229 0a0a 2020 2020 2020 2020 7265  er")..        re
-00002c00: 7370 6f6e 7365 203d 2073 656c 662e 636c  sponse = self.cl
-00002c10: 6965 6e74 2e67 6574 2875 726c 290a 2020  ient.get(url).  
-00002c20: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00002c30: 7445 7175 616c 2872 6573 706f 6e73 652e  tEqual(response.
-00002c40: 7374 6174 7573 5f63 6f64 652c 2033 3032  status_code, 302
-00002c50: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
-00002c60: 6372 6561 7465 5f6e 6577 736c 6574 7465  create_newslette
-00002c70: 725f 6e6f 745f 6c6f 6767 6564 2873 656c  r_not_logged(sel
-00002c80: 6629 3a0a 2020 2020 2020 2020 7572 6c20  f):.        url 
-00002c90: 3d20 7265 7665 7273 6528 2263 6f6f 705f  = reverse("coop_
-00002ca0: 636d 735f 6e65 775f 6e65 7773 6c65 7474  cms_new_newslett
-00002cb0: 6572 2229 0a0a 2020 2020 2020 2020 6461  er")..        da
-00002cc0: 7461 203d 207b 0a20 2020 2020 2020 2020  ta = {.         
-00002cd0: 2020 2022 7375 626a 6563 7422 3a20 2274     "subject": "t
-00002ce0: 6573 7422 2c0a 2020 2020 2020 2020 2020  est",.          
-00002cf0: 2020 2274 656d 706c 6174 6522 3a20 2274    "template": "t
-00002d00: 6573 742f 6e65 7773 6c65 7474 6572 5f62  est/newsletter_b
-00002d10: 6c75 652e 6874 6d6c 222c 0a20 2020 2020  lue.html",.     
-00002d20: 2020 2020 2020 2027 6974 656d 7327 3a20         'items': 
-00002d30: 5b5d 0a20 2020 2020 2020 207d 0a0a 2020  [].        }..  
-00002d40: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-00002d50: 2073 656c 662e 636c 6965 6e74 2e70 6f73   self.client.pos
-00002d60: 7428 7572 6c2c 2064 6174 613d 6461 7461  t(url, data=data
-00002d70: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00002d80: 7373 6572 7445 7175 616c 2872 6573 706f  ssertEqual(respo
-00002d90: 6e73 652e 7374 6174 7573 5f63 6f64 652c  nse.status_code,
-00002da0: 2033 3032 290a 0a20 2020 2020 2020 2073   302)..        s
-00002db0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00002dc0: 4e65 7773 6c65 7474 6572 2e6f 626a 6563  Newsletter.objec
-00002dd0: 7473 2e63 6f75 6e74 2829 2c20 3029 0a0a  ts.count(), 0)..
-00002de0: 2020 2020 6465 6620 7465 7374 5f76 6965      def test_vie
-00002df0: 775f 6564 6974 5f6e 6577 736c 6574 7465  w_edit_newslette
-00002e00: 725f 6e6f 745f 6c6f 6767 6564 2873 656c  r_not_logged(sel
-00002e10: 6629 3a0a 2020 2020 2020 2020 6e65 7773  f):.        news
-00002e20: 6c65 7474 6572 203d 206d 6f6d 6d79 2e6d  letter = mommy.m
-00002e30: 616b 6528 0a20 2020 2020 2020 2020 2020  ake(.           
-00002e40: 204e 6577 736c 6574 7465 722c 0a20 2020   Newsletter,.   
-00002e50: 2020 2020 2020 2020 2073 7562 6a65 6374           subject
-00002e60: 3d22 6120 6c69 7474 6c65 2069 6e74 726f  ="a little intro
-00002e70: 2066 6f72 2074 6869 7320 6e65 7773 6c65   for this newsle
-00002e80: 7474 6572 222c 0a20 2020 2020 2020 2020  tter",.         
-00002e90: 2020 2074 656d 706c 6174 653d 2274 6573     template="tes
-00002ea0: 742f 6e65 7773 6c65 7474 6572 5f62 6c75  t/newsletter_blu
-00002eb0: 652e 6874 6d6c 222c 0a20 2020 2020 2020  e.html",.       
-00002ec0: 2029 0a0a 2020 2020 2020 2020 7572 6c20   )..        url 
-00002ed0: 3d20 7265 7665 7273 6528 2263 6f6f 705f  = reverse("coop_
-00002ee0: 636d 735f 6e65 7773 6c65 7474 6572 5f73  cms_newsletter_s
-00002ef0: 6574 7469 6e67 7322 2c20 6172 6773 3d5b  ettings", args=[
-00002f00: 6e65 7773 6c65 7474 6572 2e69 645d 290a  newsletter.id]).
-00002f10: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-00002f20: 6520 3d20 7365 6c66 2e63 6c69 656e 742e  e = self.client.
-00002f30: 6765 7428 7572 6c29 0a20 2020 2020 2020  get(url).       
-00002f40: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00002f50: 6c28 7265 7370 6f6e 7365 2e73 7461 7475  l(response.statu
-00002f60: 735f 636f 6465 2c20 3330 3229 0a0a 2020  s_code, 302)..  
-00002f70: 2020 6465 6620 7465 7374 5f65 6469 745f    def test_edit_
-00002f80: 6e65 7773 6c65 7474 6572 5f6e 6f74 5f6c  newsletter_not_l
-00002f90: 6f67 6765 6428 7365 6c66 293a 0a20 2020  ogged(self):.   
-00002fa0: 2020 2020 2073 7562 6a65 6374 203d 2022       subject = "
-00002fb0: 6120 6c69 7474 6c65 2069 6e74 726f 2066  a little intro f
-00002fc0: 6f72 2074 6869 7320 6e65 7773 6c65 7474  or this newslett
-00002fd0: 6572 220a 2020 2020 2020 2020 6e65 7773  er".        news
-00002fe0: 6c65 7474 6572 203d 206d 6f6d 6d79 2e6d  letter = mommy.m
-00002ff0: 616b 6528 0a20 2020 2020 2020 2020 2020  ake(.           
-00003000: 204e 6577 736c 6574 7465 722c 0a20 2020   Newsletter,.   
-00003010: 2020 2020 2020 2020 2073 7562 6a65 6374           subject
-00003020: 3d73 7562 6a65 6374 2c0a 2020 2020 2020  =subject,.      
-00003030: 2020 2020 2020 7465 6d70 6c61 7465 3d22        template="
-00003040: 7465 7374 2f6e 6577 736c 6574 7465 725f  test/newsletter_
-00003050: 7265 642e 6874 6d6c 222c 0a20 2020 2020  red.html",.     
-00003060: 2020 2029 0a20 2020 2020 2020 2075 726c     ).        url
-00003070: 203d 2072 6576 6572 7365 2822 636f 6f70   = reverse("coop
-00003080: 5f63 6d73 5f6e 6577 736c 6574 7465 725f  _cms_newsletter_
-00003090: 7365 7474 696e 6773 222c 2061 7267 733d  settings", args=
-000030a0: 5b6e 6577 736c 6574 7465 722e 6964 5d29  [newsletter.id])
-000030b0: 0a0a 2020 2020 2020 2020 6461 7461 203d  ..        data =
-000030c0: 207b 0a20 2020 2020 2020 2020 2020 2022   {.            "
-000030d0: 7375 626a 6563 7422 3a20 2274 6573 7422  subject": "test"
-000030e0: 2c0a 2020 2020 2020 2020 2020 2020 2274  ,.            "t
-000030f0: 656d 706c 6174 6522 3a20 2274 6573 742f  emplate": "test/
-00003100: 6e65 7773 6c65 7474 6572 5f62 6c75 652e  newsletter_blue.
-00003110: 6874 6d6c 222c 0a20 2020 2020 2020 2020  html",.         
-00003120: 2020 2027 6974 656d 7327 3a20 5b5d 0a20     'items': []. 
-00003130: 2020 2020 2020 207d 0a0a 2020 2020 2020         }..      
-00003140: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
-00003150: 662e 636c 6965 6e74 2e70 6f73 7428 7572  f.client.post(ur
-00003160: 6c2c 2064 6174 613d 6461 7461 290a 2020  l, data=data).  
-00003170: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00003180: 7445 7175 616c 2872 6573 706f 6e73 652e  tEqual(response.
-00003190: 7374 6174 7573 5f63 6f64 652c 2033 3032  status_code, 302
-000031a0: 290a 0a20 2020 2020 2020 2073 656c 662e  )..        self.
-000031b0: 6173 7365 7274 4571 7561 6c28 4e65 7773  assertEqual(News
-000031c0: 6c65 7474 6572 2e6f 626a 6563 7473 2e63  letter.objects.c
-000031d0: 6f75 6e74 2829 2c20 3129 0a20 2020 2020  ount(), 1).     
-000031e0: 2020 206e 6577 736c 6574 7465 7220 3d20     newsletter = 
-000031f0: 4e65 7773 6c65 7474 6572 2e6f 626a 6563  Newsletter.objec
-00003200: 7473 2e61 6c6c 2829 5b30 5d0a 0a20 2020  ts.all()[0]..   
-00003210: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00003220: 4571 7561 6c28 6e65 7773 6c65 7474 6572  Equal(newsletter
-00003230: 2e73 7562 6a65 6374 2c20 7375 626a 6563  .subject, subjec
-00003240: 7429 0a0a 0a63 6c61 7373 204e 6577 736c  t)...class Newsl
-00003250: 6574 7465 7254 6573 7428 5573 6572 4261  etterTest(UserBa
-00003260: 7365 5465 7374 4361 7365 293a 0a0a 2020  seTestCase):..  
-00003270: 2020 6465 6620 7465 7374 5f63 7265 6174    def test_creat
-00003280: 655f 6172 7469 636c 655f 666f 725f 6e65  e_article_for_ne
-00003290: 7773 6c65 7474 6572 2873 656c 6629 3a0a  wsletter(self):.
-000032a0: 2020 2020 2020 2020 6172 7469 636c 655f          article_
-000032b0: 636c 6173 7320 3d20 6765 745f 6172 7469  class = get_arti
-000032c0: 636c 655f 636c 6173 7328 290a 2020 2020  cle_class().    
-000032d0: 2020 2020 636f 6e74 656e 745f 7479 7065      content_type
-000032e0: 203d 2043 6f6e 7465 6e74 5479 7065 2e6f   = ContentType.o
-000032f0: 626a 6563 7473 2e67 6574 5f66 6f72 5f6d  bjects.get_for_m
-00003300: 6f64 656c 2861 7274 6963 6c65 5f63 6c61  odel(article_cla
-00003310: 7373 290a 2020 2020 2020 2020 0a20 2020  ss).        .   
-00003320: 2020 2020 2061 7274 203d 206d 6f6d 6d79       art = mommy
-00003330: 2e6d 616b 6528 6172 7469 636c 655f 636c  .make(article_cl
-00003340: 6173 732c 2073 6c75 673d 2274 6573 7422  ass, slug="test"
-00003350: 2c20 696e 5f6e 6577 736c 6574 7465 723d  , in_newsletter=
-00003360: 5472 7565 290a 2020 2020 2020 2020 0a20  True).        . 
-00003370: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00003380: 7274 4571 7561 6c28 312c 204e 6577 736c  rtEqual(1, Newsl
-00003390: 6574 7465 7249 7465 6d2e 6f62 6a65 6374  etterItem.object
-000033a0: 732e 636f 756e 7428 2929 0a20 2020 2020  s.count()).     
-000033b0: 2020 2069 7465 6d20 3d20 4e65 7773 6c65     item = Newsle
-000033c0: 7474 6572 4974 656d 2e6f 626a 6563 7473  tterItem.objects
-000033d0: 2e67 6574 2863 6f6e 7465 6e74 5f74 7970  .get(content_typ
-000033e0: 653d 636f 6e74 656e 745f 7479 7065 2c20  e=content_type, 
-000033f0: 6f62 6a65 6374 5f69 643d 6172 742e 6964  object_id=art.id
-00003400: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00003410: 7373 6572 7445 7175 616c 2869 7465 6d2e  ssertEqual(item.
-00003420: 636f 6e74 656e 745f 6f62 6a65 6374 2c20  content_object, 
-00003430: 6172 7429 0a20 2020 2020 2020 200a 2020  art).        .  
-00003440: 2020 2020 2020 6172 742e 6465 6c65 7465        art.delete
-00003450: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
-00003460: 6173 7365 7274 4571 7561 6c28 302c 204e  assertEqual(0, N
-00003470: 6577 736c 6574 7465 7249 7465 6d2e 6f62  ewsletterItem.ob
-00003480: 6a65 6374 732e 636f 756e 7428 2929 0a0a  jects.count())..
-00003490: 2020 2020 6465 6620 7465 7374 5f63 7265      def test_cre
-000034a0: 6174 655f 6172 7469 636c 655f 6e6f 745f  ate_article_not_
-000034b0: 666f 725f 6e65 7773 6c65 7474 6572 2873  for_newsletter(s
-000034c0: 656c 6629 3a0a 2020 2020 2020 2020 6172  elf):.        ar
-000034d0: 7469 636c 655f 636c 6173 7320 3d20 6765  ticle_class = ge
-000034e0: 745f 6172 7469 636c 655f 636c 6173 7328  t_article_class(
-000034f0: 290a 2020 2020 2020 2020 436f 6e74 656e  ).        Conten
-00003500: 7454 7970 652e 6f62 6a65 6374 732e 6765  tType.objects.ge
-00003510: 745f 666f 725f 6d6f 6465 6c28 6172 7469  t_for_model(arti
-00003520: 636c 655f 636c 6173 7329 0a20 2020 2020  cle_class).     
-00003530: 2020 200a 2020 2020 2020 2020 6172 7420     .        art 
-00003540: 3d20 6d6f 6d6d 792e 6d61 6b65 2861 7274  = mommy.make(art
-00003550: 6963 6c65 5f63 6c61 7373 2c20 736c 7567  icle_class, slug
-00003560: 3d22 7465 7374 222c 2069 6e5f 6e65 7773  ="test", in_news
-00003570: 6c65 7474 6572 3d46 616c 7365 290a 2020  letter=False).  
-00003580: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00003590: 7445 7175 616c 2830 2c20 4e65 7773 6c65  tEqual(0, Newsle
-000035a0: 7474 6572 4974 656d 2e6f 626a 6563 7473  tterItem.objects
-000035b0: 2e63 6f75 6e74 2829 290a 2020 2020 2020  .count()).      
-000035c0: 2020 0a20 2020 2020 2020 2061 7274 2e64    .        art.d
-000035d0: 656c 6574 6528 290a 2020 2020 2020 2020  elete().        
-000035e0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-000035f0: 2830 2c20 4e65 7773 6c65 7474 6572 4974  (0, NewsletterIt
-00003600: 656d 2e6f 626a 6563 7473 2e63 6f75 6e74  em.objects.count
-00003610: 2829 290a 0a20 2020 2064 6566 2074 6573  ())..    def tes
-00003620: 745f 6372 6561 7465 5f61 7274 6963 6c65  t_create_article
-00003630: 5f63 6f6d 6d61 6e64 7328 7365 6c66 293a  _commands(self):
-00003640: 0a20 2020 2020 2020 2061 7274 6963 6c65  .        article
-00003650: 5f63 6c61 7373 203d 2067 6574 5f61 7274  _class = get_art
-00003660: 6963 6c65 5f63 6c61 7373 2829 0a20 2020  icle_class().   
-00003670: 2020 2020 2063 6f6e 7465 6e74 5f74 7970       content_typ
-00003680: 6520 3d20 436f 6e74 656e 7454 7970 652e  e = ContentType.
-00003690: 6f62 6a65 6374 732e 6765 745f 666f 725f  objects.get_for_
-000036a0: 6d6f 6465 6c28 6172 7469 636c 655f 636c  model(article_cl
-000036b0: 6173 7329 0a20 2020 2020 2020 2061 7274  ass).        art
-000036c0: 3120 3d20 6d6f 6d6d 792e 6d61 6b65 2861  1 = mommy.make(a
-000036d0: 7274 6963 6c65 5f63 6c61 7373 2c20 736c  rticle_class, sl
-000036e0: 7567 3d22 7465 7374 3122 2c20 696e 5f6e  ug="test1", in_n
-000036f0: 6577 736c 6574 7465 723d 5472 7565 290a  ewsletter=True).
-00003700: 2020 2020 2020 2020 6172 7432 203d 206d          art2 = m
-00003710: 6f6d 6d79 2e6d 616b 6528 6172 7469 636c  ommy.make(articl
-00003720: 655f 636c 6173 732c 2073 6c75 673d 2274  e_class, slug="t
-00003730: 6573 7432 222c 2069 6e5f 6e65 7773 6c65  est2", in_newsle
-00003740: 7474 6572 3d54 7275 6529 0a20 2020 2020  tter=True).     
-00003750: 2020 2061 7274 3320 3d20 6d6f 6d6d 792e     art3 = mommy.
-00003760: 6d61 6b65 2861 7274 6963 6c65 5f63 6c61  make(article_cla
-00003770: 7373 2c20 736c 7567 3d22 7465 7374 3322  ss, slug="test3"
-00003780: 2c20 696e 5f6e 6577 736c 6574 7465 723d  , in_newsletter=
-00003790: 4661 6c73 6529 0a20 2020 2020 2020 2073  False).        s
-000037a0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-000037b0: 322c 204e 6577 736c 6574 7465 7249 7465  2, NewsletterIte
-000037c0: 6d2e 6f62 6a65 6374 732e 636f 756e 7428  m.objects.count(
-000037d0: 2929 0a20 2020 2020 2020 204e 6577 736c  )).        Newsl
-000037e0: 6574 7465 7249 7465 6d2e 6f62 6a65 6374  etterItem.object
-000037f0: 732e 616c 6c28 292e 6465 6c65 7465 2829  s.all().delete()
-00003800: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-00003810: 7365 7274 4571 7561 6c28 302c 204e 6577  sertEqual(0, New
-00003820: 736c 6574 7465 7249 7465 6d2e 6f62 6a65  sletterItem.obje
-00003830: 6374 732e 636f 756e 7428 2929 0a20 2020  cts.count()).   
-00003840: 2020 2020 206d 616e 6167 656d 656e 742e       management.
-00003850: 6361 6c6c 5f63 6f6d 6d61 6e64 2827 6372  call_command('cr
-00003860: 6561 7465 5f6e 6577 736c 6574 7465 725f  eate_newsletter_
-00003870: 6974 656d 7327 2c20 7665 7262 6f73 6974  items', verbosit
-00003880: 793d 3029 2020 2320 2c20 696e 7465 7261  y=0)  # , intera
-00003890: 6374 6976 653d 4661 6c73 6529 0a20 2020  ctive=False).   
-000038a0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000038b0: 4571 7561 6c28 322c 204e 6577 736c 6574  Equal(2, Newslet
-000038c0: 7465 7249 7465 6d2e 6f62 6a65 6374 732e  terItem.objects.
-000038d0: 636f 756e 7428 2929 0a20 2020 2020 2020  count()).       
-000038e0: 2069 7465 6d31 203d 204e 6577 736c 6574   item1 = Newslet
-000038f0: 7465 7249 7465 6d2e 6f62 6a65 6374 732e  terItem.objects.
-00003900: 6765 7428 636f 6e74 656e 745f 7479 7065  get(content_type
-00003910: 3d63 6f6e 7465 6e74 5f74 7970 652c 206f  =content_type, o
-00003920: 626a 6563 745f 6964 3d61 7274 312e 6964  bject_id=art1.id
-00003930: 290a 2020 2020 2020 2020 6974 656d 3220  ).        item2 
-00003940: 3d20 4e65 7773 6c65 7474 6572 4974 656d  = NewsletterItem
-00003950: 2e6f 626a 6563 7473 2e67 6574 2863 6f6e  .objects.get(con
-00003960: 7465 6e74 5f74 7970 653d 636f 6e74 656e  tent_type=conten
-00003970: 745f 7479 7065 2c20 6f62 6a65 6374 5f69  t_type, object_i
-00003980: 643d 6172 7432 2e69 6429 0a0a 2020 2020  d=art2.id)..    
-00003990: 6465 6620 7465 7374 5f76 6965 775f 6e65  def test_view_ne
-000039a0: 7773 6c65 7474 6572 2873 656c 6629 3a0a  wsletter(self):.
-000039b0: 2020 2020 2020 2020 6172 7469 636c 655f          article_
-000039c0: 636c 6173 7320 3d20 6765 745f 6172 7469  class = get_arti
-000039d0: 636c 655f 636c 6173 7328 290a 2020 2020  cle_class().    
-000039e0: 2020 2020 636f 6e74 656e 745f 7479 7065      content_type
-000039f0: 203d 2043 6f6e 7465 6e74 5479 7065 2e6f   = ContentType.o
-00003a00: 626a 6563 7473 2e67 6574 5f66 6f72 5f6d  bjects.get_for_m
-00003a10: 6f64 656c 2861 7274 6963 6c65 5f63 6c61  odel(article_cla
-00003a20: 7373 290a 2020 2020 2020 2020 0a20 2020  ss).        .   
-00003a30: 2020 2020 2061 7274 3120 3d20 6d6f 6d6d       art1 = momm
-00003a40: 792e 6d61 6b65 2861 7274 6963 6c65 5f63  y.make(article_c
-00003a50: 6c61 7373 2c20 7469 746c 653d 2241 7274  lass, title="Art
-00003a60: 2031 222c 2069 6e5f 6e65 7773 6c65 7474   1", in_newslett
-00003a70: 6572 3d54 7275 6529 0a20 2020 2020 2020  er=True).       
-00003a80: 2061 7274 3220 3d20 6d6f 6d6d 792e 6d61   art2 = mommy.ma
-00003a90: 6b65 2861 7274 6963 6c65 5f63 6c61 7373  ke(article_class
-00003aa0: 2c20 7469 746c 653d 2241 7274 2032 222c  , title="Art 2",
-00003ab0: 2069 6e5f 6e65 7773 6c65 7474 6572 3d54   in_newsletter=T
-00003ac0: 7275 6529 0a20 2020 2020 2020 2061 7274  rue).        art
-00003ad0: 3320 3d20 6d6f 6d6d 792e 6d61 6b65 2861  3 = mommy.make(a
-00003ae0: 7274 6963 6c65 5f63 6c61 7373 2c20 7469  rticle_class, ti
-00003af0: 746c 653d 2241 7274 2033 222c 2069 6e5f  tle="Art 3", in_
-00003b00: 6e65 7773 6c65 7474 6572 3d54 7275 6529  newsletter=True)
-00003b10: 0a20 2020 2020 2020 200a 2020 2020 2020  .        .      
-00003b20: 2020 6e65 7773 6c65 7474 6572 203d 206d    newsletter = m
-00003b30: 6f6d 6d79 2e6d 616b 6528 0a20 2020 2020  ommy.make(.     
-00003b40: 2020 2020 2020 204e 6577 736c 6574 7465         Newslette
-00003b50: 722c 0a20 2020 2020 2020 2020 2020 2063  r,.            c
-00003b60: 6f6e 7465 6e74 3d22 6120 6c69 7474 6c65  ontent="a little
-00003b70: 2069 6e74 726f 2066 6f72 2074 6869 7320   intro for this 
-00003b80: 6e65 7773 6c65 7474 6572 222c 0a20 2020  newsletter",.   
-00003b90: 2020 2020 2020 2020 2074 656d 706c 6174           templat
-00003ba0: 653d 2274 6573 742f 6e65 7773 6c65 7474  e="test/newslett
-00003bb0: 6572 5f62 6c75 652e 6874 6d6c 222c 0a20  er_blue.html",. 
-00003bc0: 2020 2020 2020 2020 2020 2069 735f 7075             is_pu
-00003bd0: 626c 6963 3d54 7275 650a 2020 2020 2020  blic=True.      
-00003be0: 2020 290a 2020 2020 2020 2020 6e65 7773    ).        news
-00003bf0: 6c65 7474 6572 2e69 7465 6d73 2e61 6464  letter.items.add
-00003c00: 284e 6577 736c 6574 7465 7249 7465 6d2e  (NewsletterItem.
-00003c10: 6f62 6a65 6374 732e 6765 7428 636f 6e74  objects.get(cont
-00003c20: 656e 745f 7479 7065 3d63 6f6e 7465 6e74  ent_type=content
-00003c30: 5f74 7970 652c 206f 626a 6563 745f 6964  _type, object_id
-00003c40: 3d61 7274 312e 6964 2929 0a20 2020 2020  =art1.id)).     
-00003c50: 2020 206e 6577 736c 6574 7465 722e 6974     newsletter.it
-00003c60: 656d 732e 6164 6428 4e65 7773 6c65 7474  ems.add(Newslett
-00003c70: 6572 4974 656d 2e6f 626a 6563 7473 2e67  erItem.objects.g
-00003c80: 6574 2863 6f6e 7465 6e74 5f74 7970 653d  et(content_type=
-00003c90: 636f 6e74 656e 745f 7479 7065 2c20 6f62  content_type, ob
-00003ca0: 6a65 6374 5f69 643d 6172 7432 2e69 6429  ject_id=art2.id)
-00003cb0: 290a 2020 2020 2020 2020 6e65 7773 6c65  ).        newsle
-00003cc0: 7474 6572 2e73 6176 6528 290a 2020 2020  tter.save().    
-00003cd0: 2020 2020 0a20 2020 2020 2020 2075 726c      .        url
-00003ce0: 203d 2072 6576 6572 7365 2827 636f 6f70   = reverse('coop
-00003cf0: 5f63 6d73 5f76 6965 775f 6e65 7773 6c65  _cms_view_newsle
-00003d00: 7474 6572 272c 2061 7267 733d 5b6e 6577  tter', args=[new
-00003d10: 736c 6574 7465 722e 6964 5d29 0a20 2020  sletter.id]).   
-00003d20: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-00003d30: 7365 6c66 2e63 6c69 656e 742e 6765 7428  self.client.get(
-00003d40: 7572 6c29 0a20 2020 2020 2020 200a 2020  url).        .  
-00003d50: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00003d60: 7445 7175 616c 2832 3030 2c20 7265 7370  tEqual(200, resp
-00003d70: 6f6e 7365 2e73 7461 7475 735f 636f 6465  onse.status_code
-00003d80: 290a 2020 2020 2020 2020 0a20 2020 2020  ).        .     
-00003d90: 2020 2073 656c 662e 6173 7365 7274 436f     self.assertCo
-00003da0: 6e74 6169 6e73 2872 6573 706f 6e73 652c  ntains(response,
-00003db0: 206e 6577 736c 6574 7465 722e 636f 6e74   newsletter.cont
-00003dc0: 656e 7429 0a20 2020 2020 2020 2073 656c  ent).        sel
-00003dd0: 662e 6173 7365 7274 436f 6e74 6169 6e73  f.assertContains
-00003de0: 2872 6573 706f 6e73 652c 2061 7274 312e  (response, art1.
-00003df0: 7469 746c 6529 0a20 2020 2020 2020 2073  title).        s
-00003e00: 656c 662e 6173 7365 7274 436f 6e74 6169  elf.assertContai
-00003e10: 6e73 2872 6573 706f 6e73 652c 2061 7274  ns(response, art
-00003e20: 322e 7469 746c 6529 0a20 2020 2020 2020  2.title).       
-00003e30: 2073 656c 662e 6173 7365 7274 4e6f 7443   self.assertNotC
-00003e40: 6f6e 7461 696e 7328 7265 7370 6f6e 7365  ontains(response
-00003e50: 2c20 6172 7433 2e74 6974 6c65 290a 0a20  , art3.title).. 
-00003e60: 2020 2064 6566 2074 6573 745f 7669 6577     def test_view
-00003e70: 5f6e 6577 736c 6574 7465 725f 6e6f 745f  _newsletter_not_
-00003e80: 7075 626c 6963 2873 656c 6629 3a0a 0a20  public(self):.. 
-00003e90: 2020 2020 2020 206e 6577 736c 6574 7465         newslette
-00003ea0: 7220 3d20 6d6f 6d6d 792e 6d61 6b65 280a  r = mommy.make(.
-00003eb0: 2020 2020 2020 2020 2020 2020 4e65 7773              News
-00003ec0: 6c65 7474 6572 2c0a 2020 2020 2020 2020  letter,.        
-00003ed0: 2020 2020 636f 6e74 656e 743d 2261 206c      content="a l
-00003ee0: 6974 746c 6520 696e 7472 6f20 666f 7220  ittle intro for 
-00003ef0: 7468 6973 206e 6577 736c 6574 7465 7222  this newsletter"
-00003f00: 2c0a 2020 2020 2020 2020 2020 2020 7465  ,.            te
-00003f10: 6d70 6c61 7465 3d22 7465 7374 2f6e 6577  mplate="test/new
-00003f20: 736c 6574 7465 725f 626c 7565 2e68 746d  sletter_blue.htm
-00003f30: 6c22 2c0a 2020 2020 2020 2020 290a 2020  l",.        ).  
-00003f40: 2020 2020 2020 7572 6c20 3d20 7265 7665        url = reve
-00003f50: 7273 6528 2763 6f6f 705f 636d 735f 7669  rse('coop_cms_vi
-00003f60: 6577 5f6e 6577 736c 6574 7465 7227 2c20  ew_newsletter', 
-00003f70: 6172 6773 3d5b 6e65 7773 6c65 7474 6572  args=[newsletter
-00003f80: 2e69 645d 290a 2020 2020 2020 2020 7265  .id]).        re
-00003f90: 7370 6f6e 7365 203d 2073 656c 662e 636c  sponse = self.cl
-00003fa0: 6965 6e74 2e67 6574 2875 726c 290a 2020  ient.get(url).  
-00003fb0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00003fc0: 744e 6f74 416c 6c6f 7765 6428 7265 7370  tNotAllowed(resp
-00003fd0: 6f6e 7365 290a 2020 2020 2020 2020 0a20  onse).        . 
-00003fe0: 2020 2064 6566 2074 6573 745f 6564 6974     def test_edit
-00003ff0: 5f6e 6577 736c 6574 7465 725f 6973 5f70  _newsletter_is_p
-00004000: 7562 6c69 6328 7365 6c66 293a 0a20 2020  ublic(self):.   
-00004010: 2020 2020 206e 6577 736c 6574 7465 7220       newsletter 
-00004020: 3d20 6d6f 6d6d 792e 6d61 6b65 280a 2020  = mommy.make(.  
-00004030: 2020 2020 2020 2020 2020 4e65 7773 6c65            Newsle
-00004040: 7474 6572 2c0a 2020 2020 2020 2020 2020  tter,.          
-00004050: 2020 636f 6e74 656e 743d 2261 206c 6974    content="a lit
-00004060: 746c 6520 696e 7472 6f20 666f 7220 7468  tle intro for th
-00004070: 6973 206e 6577 736c 6574 7465 7222 2c0a  is newsletter",.
-00004080: 2020 2020 2020 2020 2020 2020 7465 6d70              temp
-00004090: 6c61 7465 3d22 7465 7374 2f6e 6577 736c  late="test/newsl
-000040a0: 6574 7465 725f 626c 7565 2e68 746d 6c22  etter_blue.html"
-000040b0: 2c0a 2020 2020 2020 2020 2020 2020 6973  ,.            is
-000040c0: 5f70 7562 6c69 633d 5472 7565 0a20 2020  _public=True.   
-000040d0: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-000040e0: 7365 6c66 2e5f 6c6f 675f 6173 5f65 6469  self._log_as_edi
-000040f0: 746f 7228 290a 2020 2020 2020 2020 7572  tor().        ur
-00004100: 6c20 3d20 7265 7665 7273 6528 2763 6f6f  l = reverse('coo
-00004110: 705f 636d 735f 6564 6974 5f6e 6577 736c  p_cms_edit_newsl
-00004120: 6574 7465 7227 2c20 6172 6773 3d5b 6e65  etter', args=[ne
-00004130: 7773 6c65 7474 6572 2e69 645d 290a 2020  wsletter.id]).  
-00004140: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-00004150: 2073 656c 662e 636c 6965 6e74 2e67 6574   self.client.get
-00004160: 2875 726c 290a 2020 2020 2020 2020 0a20  (url).        . 
-00004170: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00004180: 7274 4571 7561 6c28 3230 302c 2072 6573  rtEqual(200, res
-00004190: 706f 6e73 652e 7374 6174 7573 5f63 6f64  ponse.status_cod
-000041a0: 6529 0a20 2020 2020 2020 200a 2020 2020  e).        .    
-000041b0: 2020 2020 6461 7461 203d 207b 2763 6f6e      data = {'con
-000041c0: 7465 6e74 273a 2027 4120 6265 7474 6572  tent': 'A better
-000041d0: 2069 6e74 726f 277d 0a20 2020 2020 2020   intro'}.       
-000041e0: 2072 6573 706f 6e73 6520 3d20 7365 6c66   response = self
-000041f0: 2e63 6c69 656e 742e 706f 7374 2875 726c  .client.post(url
-00004200: 2c20 6461 7461 3d64 6174 612c 2066 6f6c  , data=data, fol
-00004210: 6c6f 773d 5472 7565 290a 2020 2020 2020  low=True).      
-00004220: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00004230: 616c 2832 3030 2c20 7265 7370 6f6e 7365  al(200, response
-00004240: 2e73 7461 7475 735f 636f 6465 290a 2020  .status_code).  
-00004250: 2020 2020 2020 0a20 2020 2020 2020 2073        .        s
-00004260: 656c 662e 6173 7365 7274 4e6f 7443 6f6e  elf.assertNotCon
-00004270: 7461 696e 7328 7265 7370 6f6e 7365 2c20  tains(response, 
-00004280: 6e65 7773 6c65 7474 6572 2e63 6f6e 7465  newsletter.conte
-00004290: 6e74 290a 2020 2020 2020 2020 7365 6c66  nt).        self
-000042a0: 2e61 7373 6572 7443 6f6e 7461 696e 7328  .assertContains(
-000042b0: 7265 7370 6f6e 7365 2c20 6461 7461 5b27  response, data['
-000042c0: 636f 6e74 656e 7427 5d29 0a0a 2020 2020  content'])..    
-000042d0: 6465 6620 7465 7374 5f65 6469 745f 6e65  def test_edit_ne
-000042e0: 7773 6c65 7474 6572 5f6e 6f74 5f70 7562  wsletter_not_pub
-000042f0: 6c69 6328 7365 6c66 293a 0a20 2020 2020  lic(self):.     
-00004300: 2020 206e 6577 736c 6574 7465 7220 3d20     newsletter = 
-00004310: 6d6f 6d6d 792e 6d61 6b65 280a 2020 2020  mommy.make(.    
-00004320: 2020 2020 2020 2020 4e65 7773 6c65 7474          Newslett
-00004330: 6572 2c0a 2020 2020 2020 2020 2020 2020  er,.            
-00004340: 636f 6e74 656e 743d 2261 206c 6974 746c  content="a littl
-00004350: 6520 696e 7472 6f20 666f 7220 7468 6973  e intro for this
-00004360: 206e 6577 736c 6574 7465 7222 2c0a 2020   newsletter",.  
-00004370: 2020 2020 2020 2020 2020 7465 6d70 6c61            templa
-00004380: 7465 3d22 7465 7374 2f6e 6577 736c 6574  te="test/newslet
-00004390: 7465 725f 626c 7565 2e68 746d 6c22 2c0a  ter_blue.html",.
-000043a0: 2020 2020 2020 2020 2020 2020 6973 5f70              is_p
-000043b0: 7562 6c69 633d 4661 6c73 650a 2020 2020  ublic=False.    
-000043c0: 2020 2020 290a 0a20 2020 2020 2020 2073      )..        s
-000043d0: 656c 662e 5f6c 6f67 5f61 735f 6564 6974  elf._log_as_edit
-000043e0: 6f72 2829 0a20 2020 2020 2020 2075 726c  or().        url
-000043f0: 203d 2072 6576 6572 7365 2827 636f 6f70   = reverse('coop
-00004400: 5f63 6d73 5f65 6469 745f 6e65 7773 6c65  _cms_edit_newsle
-00004410: 7474 6572 272c 2061 7267 733d 5b6e 6577  tter', args=[new
-00004420: 736c 6574 7465 722e 6964 5d29 0a20 2020  sletter.id]).   
-00004430: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-00004440: 7365 6c66 2e63 6c69 656e 742e 6765 7428  self.client.get(
-00004450: 7572 6c29 0a0a 2020 2020 2020 2020 7365  url)..        se
-00004460: 6c66 2e61 7373 6572 7445 7175 616c 2832  lf.assertEqual(2
-00004470: 3030 2c20 7265 7370 6f6e 7365 2e73 7461  00, response.sta
-00004480: 7475 735f 636f 6465 290a 0a20 2020 2020  tus_code)..     
-00004490: 2020 2064 6174 6120 3d20 7b27 636f 6e74     data = {'cont
-000044a0: 656e 7427 3a20 2741 2062 6574 7465 7220  ent': 'A better 
-000044b0: 696e 7472 6f27 7d0a 2020 2020 2020 2020  intro'}.        
-000044c0: 7265 7370 6f6e 7365 203d 2073 656c 662e  response = self.
-000044d0: 636c 6965 6e74 2e70 6f73 7428 7572 6c2c  client.post(url,
-000044e0: 2064 6174 613d 6461 7461 2c20 666f 6c6c   data=data, foll
-000044f0: 6f77 3d54 7275 6529 0a20 2020 2020 2020  ow=True).       
-00004500: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00004510: 6c28 3230 302c 2072 6573 706f 6e73 652e  l(200, response.
-00004520: 7374 6174 7573 5f63 6f64 6529 0a0a 2020  status_code)..  
-00004530: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00004540: 744e 6f74 436f 6e74 6169 6e73 2872 6573  tNotContains(res
-00004550: 706f 6e73 652c 206e 6577 736c 6574 7465  ponse, newslette
-00004560: 722e 636f 6e74 656e 7429 0a20 2020 2020  r.content).     
-00004570: 2020 2073 656c 662e 6173 7365 7274 436f     self.assertCo
-00004580: 6e74 6169 6e73 2872 6573 706f 6e73 652c  ntains(response,
-00004590: 2064 6174 615b 2763 6f6e 7465 6e74 275d   data['content']
-000045a0: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
-000045b0: 6564 6974 5f6e 6577 736c 6574 7465 725f  edit_newsletter_
-000045c0: 616e 6f6e 796d 6f75 7328 7365 6c66 293a  anonymous(self):
-000045d0: 0a20 2020 2020 2020 206f 7269 6769 6e61  .        origina
-000045e0: 6c5f 6461 7461 203d 207b 0a20 2020 2020  l_data = {.     
-000045f0: 2020 2020 2020 2027 636f 6e74 656e 7427         'content'
-00004600: 3a20 2261 206c 6974 746c 6520 696e 7472  : "a little intr
-00004610: 6f20 666f 7220 7468 6973 206e 6577 736c  o for this newsl
-00004620: 6574 7465 7222 2c0a 2020 2020 2020 2020  etter",.        
-00004630: 2020 2020 2774 656d 706c 6174 6527 3a20      'template': 
-00004640: 2274 6573 742f 6e65 7773 6c65 7474 6572  "test/newsletter
-00004650: 5f62 6c75 652e 6874 6d6c 220a 2020 2020  _blue.html".    
-00004660: 2020 2020 7d0a 2020 2020 2020 2020 6e65      }.        ne
-00004670: 7773 6c65 7474 6572 203d 206d 6f6d 6d79  wsletter = mommy
-00004680: 2e6d 616b 6528 4e65 7773 6c65 7474 6572  .make(Newsletter
-00004690: 2c20 2a2a 6f72 6967 696e 616c 5f64 6174  , **original_dat
-000046a0: 6129 0a20 2020 2020 2020 200a 2020 2020  a).        .    
-000046b0: 2020 2020 7572 6c20 3d20 7265 7665 7273      url = revers
-000046c0: 6528 2763 6f6f 705f 636d 735f 6564 6974  e('coop_cms_edit
-000046d0: 5f6e 6577 736c 6574 7465 7227 2c20 6172  _newsletter', ar
-000046e0: 6773 3d5b 6e65 7773 6c65 7474 6572 2e69  gs=[newsletter.i
-000046f0: 645d 290a 2020 2020 2020 2020 7265 7370  d]).        resp
-00004700: 6f6e 7365 203d 2073 656c 662e 636c 6965  onse = self.clie
-00004710: 6e74 2e67 6574 2875 726c 290a 2020 2020  nt.get(url).    
-00004720: 2020 2020 7365 6c66 2e61 7373 6572 744e      self.assertN
-00004730: 6f74 416c 6c6f 7765 6428 7265 7370 6f6e  otAllowed(respon
-00004740: 7365 290a 2020 2020 2020 2020 0a20 2020  se).        .   
-00004750: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-00004760: 7365 6c66 2e63 6c69 656e 742e 706f 7374  self.client.post
-00004770: 2875 726c 2c20 6461 7461 3d7b 2763 6f6e  (url, data={'con
-00004780: 7465 6e74 273a 2027 3a4f 5027 7d29 0a20  tent': ':OP'}). 
-00004790: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-000047a0: 7274 4e6f 7441 6c6c 6f77 6564 2872 6573  rtNotAllowed(res
-000047b0: 706f 6e73 6529 0a20 2020 2020 2020 200a  ponse).        .
-000047c0: 2020 2020 2020 2020 6e65 7773 6c65 7474          newslett
-000047d0: 6572 203d 204e 6577 736c 6574 7465 722e  er = Newsletter.
-000047e0: 6f62 6a65 6374 732e 6765 7428 6964 3d6e  objects.get(id=n
-000047f0: 6577 736c 6574 7465 722e 6964 290a 2020  ewsletter.id).  
-00004800: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00004810: 7445 7175 616c 286e 6577 736c 6574 7465  tEqual(newslette
-00004820: 722e 636f 6e74 656e 742c 206f 7269 6769  r.content, origi
-00004830: 6e61 6c5f 6461 7461 5b27 636f 6e74 656e  nal_data['conten
-00004840: 7427 5d29 0a20 2020 2020 2020 200a 2020  t']).        .  
-00004850: 2020 6465 6620 7465 7374 5f65 6469 745f    def test_edit_
-00004860: 6e65 7773 6c65 7474 6572 5f6e 6f5f 6172  newsletter_no_ar
-00004870: 7469 636c 6573 2873 656c 6629 3a0a 2020  ticles(self):.  
-00004880: 2020 2020 2020 7365 6c66 2e5f 6c6f 675f        self._log_
-00004890: 6173 5f65 6469 746f 7228 290a 2020 2020  as_editor().    
-000048a0: 2020 2020 6f72 6967 696e 616c 5f64 6174      original_dat
-000048b0: 6120 3d20 7b0a 2020 2020 2020 2020 2020  a = {.          
-000048c0: 2020 2763 6f6e 7465 6e74 273a 2022 6120    'content': "a 
-000048d0: 6c69 7474 6c65 2069 6e74 726f 2066 6f72  little intro for
-000048e0: 2074 6869 7320 6e65 7773 6c65 7474 6572   this newsletter
-000048f0: 222c 0a20 2020 2020 2020 2020 2020 2027  ",.            '
-00004900: 7465 6d70 6c61 7465 273a 2022 7465 7374  template': "test
-00004910: 2f6e 6577 736c 6574 7465 725f 626c 7565  /newsletter_blue
-00004920: 2e68 746d 6c22 0a20 2020 2020 2020 207d  .html".        }
-00004930: 0a20 2020 2020 2020 206e 6577 736c 6574  .        newslet
-00004940: 7465 7220 3d20 6d6f 6d6d 792e 6d61 6b65  ter = mommy.make
-00004950: 284e 6577 736c 6574 7465 722c 202a 2a6f  (Newsletter, **o
-00004960: 7269 6769 6e61 6c5f 6461 7461 290a 2020  riginal_data).  
-00004970: 2020 2020 2020 0a20 2020 2020 2020 2075        .        u
-00004980: 726c 203d 2072 6576 6572 7365 2827 636f  rl = reverse('co
-00004990: 6f70 5f63 6d73 5f65 6469 745f 6e65 7773  op_cms_edit_news
-000049a0: 6c65 7474 6572 272c 2061 7267 733d 5b6e  letter', args=[n
-000049b0: 6577 736c 6574 7465 722e 6964 5d29 0a20  ewsletter.id]). 
-000049c0: 2020 2020 2020 200a 2020 2020 2020 2020         .        
-000049d0: 6461 7461 203d 207b 2763 6f6e 7465 6e74  data = {'content
-000049e0: 273a 2027 3a4f 5027 7d0a 2020 2020 2020  ': ':OP'}.      
-000049f0: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
-00004a00: 662e 636c 6965 6e74 2e70 6f73 7428 7572  f.client.post(ur
-00004a10: 6c2c 2064 6174 613d 6461 7461 2c20 666f  l, data=data, fo
-00004a20: 6c6c 6f77 3d54 7275 6529 0a20 2020 2020  llow=True).     
-00004a30: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00004a40: 7561 6c28 3230 302c 2072 6573 706f 6e73  ual(200, respons
-00004a50: 652e 7374 6174 7573 5f63 6f64 6529 0a20  e.status_code). 
-00004a60: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00004a70: 7274 436f 6e74 6169 6e73 2872 6573 706f  rtContains(respo
-00004a80: 6e73 652c 2064 6174 615b 2763 6f6e 7465  nse, data['conte
-00004a90: 6e74 275d 290a 2020 2020 2020 2020 0a20  nt']).        . 
-00004aa0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-00004ab0: 3d20 7365 6c66 2e63 6c69 656e 742e 6765  = self.client.ge
-00004ac0: 7428 7572 6c29 0a20 2020 2020 2020 2073  t(url).        s
-00004ad0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00004ae0: 3230 302c 2072 6573 706f 6e73 652e 7374  200, response.st
-00004af0: 6174 7573 5f63 6f64 6529 0a20 2020 2020  atus_code).     
-00004b00: 2020 2073 656c 662e 6173 7365 7274 436f     self.assertCo
-00004b10: 6e74 6169 6e73 2872 6573 706f 6e73 652c  ntains(response,
-00004b20: 2064 6174 615b 2763 6f6e 7465 6e74 275d   data['content']
-00004b30: 290a 2020 2020 2020 2020 0a20 2020 2064  ).        .    d
-00004b40: 6566 2074 6573 745f 6e65 7773 6c65 7474  ef test_newslett
-00004b50: 6572 5f74 656d 706c 6174 6573 2873 656c  er_templates(sel
-00004b60: 6629 3a0a 2020 2020 2020 2020 2222 2269  f):.        """i
-00004b70: 7420 7368 6f75 6c64 2073 656e 6420 656d  t should send em
-00004b80: 6169 6c20 7769 7468 2072 6967 6874 2063  ail with right c
-00004b90: 6f6e 7465 6e74 2222 220a 2020 2020 2020  ontent""".      
-00004ba0: 2020 6172 7469 636c 655f 636c 6173 7320    article_class 
-00004bb0: 3d20 6765 745f 6172 7469 636c 655f 636c  = get_article_cl
-00004bc0: 6173 7328 290a 2020 2020 2020 2020 636f  ass().        co
-00004bd0: 6e74 656e 745f 7479 7065 203d 2043 6f6e  ntent_type = Con
-00004be0: 7465 6e74 5479 7065 2e6f 626a 6563 7473  tentType.objects
-00004bf0: 2e67 6574 5f66 6f72 5f6d 6f64 656c 2861  .get_for_model(a
-00004c00: 7274 6963 6c65 5f63 6c61 7373 290a 2020  rticle_class).  
-00004c10: 2020 2020 2020 0a20 2020 2020 2020 2061        .        a
-00004c20: 7274 3120 3d20 6d6f 6d6d 792e 6d61 6b65  rt1 = mommy.make
-00004c30: 2861 7274 6963 6c65 5f63 6c61 7373 2c20  (article_class, 
-00004c40: 7469 746c 653d 2241 7274 2031 222c 2069  title="Art 1", i
-00004c50: 6e5f 6e65 7773 6c65 7474 6572 3d54 7275  n_newsletter=Tru
-00004c60: 6529 0a20 2020 2020 2020 2070 6f68 203d  e).        poh =
-00004c70: 206d 6f6d 6d79 2e6d 616b 6528 5069 6563   mommy.make(Piec
-00004c80: 654f 6648 746d 6c2c 2064 6976 5f69 643d  eOfHtml, div_id=
-00004c90: 226e 6577 736c 6574 7465 725f 6865 6164  "newsletter_head
-00004ca0: 6572 222c 2063 6f6e 7465 6e74 3d22 4845  er", content="HE
-00004cb0: 4c4c 4f21 2121 2229 0a20 2020 2020 2020  LLO!!!").       
-00004cc0: 200a 2020 2020 2020 2020 6e65 7773 6c65   .        newsle
-00004cd0: 7474 6572 203d 206d 6f6d 6d79 2e6d 616b  tter = mommy.mak
-00004ce0: 6528 0a20 2020 2020 2020 2020 2020 204e  e(.            N
-00004cf0: 6577 736c 6574 7465 722c 0a20 2020 2020  ewsletter,.     
-00004d00: 2020 2020 2020 2063 6f6e 7465 6e74 3d22         content="
-00004d10: 6120 6c69 7474 6c65 2069 6e74 726f 2066  a little intro f
-00004d20: 6f72 2074 6869 7320 6e65 7773 6c65 7474  or this newslett
-00004d30: 6572 222c 0a20 2020 2020 2020 2020 2020  er",.           
-00004d40: 2074 656d 706c 6174 653d 2274 6573 742f   template="test/
-00004d50: 6e65 7773 6c65 7474 6572 5f62 6c75 652e  newsletter_blue.
-00004d60: 6874 6d6c 220a 2020 2020 2020 2020 290a  html".        ).
-00004d70: 2020 2020 2020 2020 6e65 7773 6c65 7474          newslett
-00004d80: 6572 2e69 7465 6d73 2e61 6464 284e 6577  er.items.add(New
-00004d90: 736c 6574 7465 7249 7465 6d2e 6f62 6a65  sletterItem.obje
-00004da0: 6374 732e 6765 7428 636f 6e74 656e 745f  cts.get(content_
-00004db0: 7479 7065 3d63 6f6e 7465 6e74 5f74 7970  type=content_typ
-00004dc0: 652c 206f 626a 6563 745f 6964 3d61 7274  e, object_id=art
-00004dd0: 312e 6964 2929 0a20 2020 2020 2020 206e  1.id)).        n
-00004de0: 6577 736c 6574 7465 722e 7361 7665 2829  ewsletter.save()
-00004df0: 0a20 2020 2020 2020 200a 2020 2020 2020  .        .      
-00004e00: 2020 7365 6c66 2e5f 6c6f 675f 6173 5f65    self._log_as_e
-00004e10: 6469 746f 7228 290a 2020 2020 2020 2020  ditor().        
-00004e20: 0a20 2020 2020 2020 2076 6965 775f 6e61  .        view_na
-00004e30: 6d65 7320 3d20 5b27 636f 6f70 5f63 6d73  mes = ['coop_cms
-00004e40: 5f76 6965 775f 6e65 7773 6c65 7474 6572  _view_newsletter
-00004e50: 272c 2027 636f 6f70 5f63 6d73 5f65 6469  ', 'coop_cms_edi
-00004e60: 745f 6e65 7773 6c65 7474 6572 275d 0a20  t_newsletter']. 
-00004e70: 2020 2020 2020 2066 6f72 2076 6965 775f         for view_
-00004e80: 6e61 6d65 2069 6e20 7669 6577 5f6e 616d  name in view_nam
-00004e90: 6573 3a0a 0a20 2020 2020 2020 2020 2020  es:..           
-00004ea0: 2075 726c 203d 2072 6576 6572 7365 2876   url = reverse(v
-00004eb0: 6965 775f 6e61 6d65 2c20 6172 6773 3d5b  iew_name, args=[
-00004ec0: 6e65 7773 6c65 7474 6572 2e69 645d 290a  newsletter.id]).
-00004ed0: 2020 2020 2020 2020 2020 2020 7265 7370              resp
-00004ee0: 6f6e 7365 203d 2073 656c 662e 636c 6965  onse = self.clie
-00004ef0: 6e74 2e67 6574 2875 726c 290a 2020 2020  nt.get(url).    
-00004f00: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00004f10: 6572 7445 7175 616c 2832 3030 2c20 7265  ertEqual(200, re
-00004f20: 7370 6f6e 7365 2e73 7461 7475 735f 636f  sponse.status_co
-00004f30: 6465 290a 0a20 2020 2020 2020 2020 2020  de)..           
-00004f40: 2073 656c 662e 6173 7365 7274 436f 6e74   self.assertCont
-00004f50: 6169 6e73 2872 6573 706f 6e73 652c 206e  ains(response, n
-00004f60: 6577 736c 6574 7465 722e 636f 6e74 656e  ewsletter.conten
-00004f70: 7429 0a20 2020 2020 2020 2020 2020 2073  t).            s
-00004f80: 656c 662e 6173 7365 7274 436f 6e74 6169  elf.assertContai
-00004f90: 6e73 2872 6573 706f 6e73 652c 2061 7274  ns(response, art
-00004fa0: 312e 7469 746c 6529 0a20 2020 2020 2020  1.title).       
-00004fb0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00004fc0: 436f 6e74 6169 6e73 2872 6573 706f 6e73  Contains(respons
-00004fd0: 652c 2022 6261 636b 6772 6f75 6e64 3a20  e, "background: 
-00004fe0: 626c 7565 3b22 290a 2020 2020 2020 2020  blue;").        
-00004ff0: 2020 2020 7365 6c66 2e61 7373 6572 744e      self.assertN
-00005000: 6f74 436f 6e74 6169 6e73 2872 6573 706f  otContains(respo
-00005010: 6e73 652c 2070 6f68 2e63 6f6e 7465 6e74  nse, poh.content
-00005020: 290a 2020 2020 2020 2020 0a20 2020 2020  ).        .     
-00005030: 2020 206e 6577 736c 6574 7465 722e 7465     newsletter.te
-00005040: 6d70 6c61 7465 203d 2022 7465 7374 2f6e  mplate = "test/n
-00005050: 6577 736c 6574 7465 725f 7265 642e 6874  ewsletter_red.ht
-00005060: 6d6c 220a 2020 2020 2020 2020 6e65 7773  ml".        news
-00005070: 6c65 7474 6572 2e73 6176 6528 290a 2020  letter.save().  
-00005080: 2020 2020 2020 0a20 2020 2020 2020 2066        .        f
-00005090: 6f72 2076 6965 775f 6e61 6d65 2069 6e20  or view_name in 
-000050a0: 7669 6577 5f6e 616d 6573 3a0a 2020 2020  view_names:.    
-000050b0: 2020 2020 2020 2020 7572 6c20 3d20 7265          url = re
-000050c0: 7665 7273 6528 7669 6577 5f6e 616d 652c  verse(view_name,
-000050d0: 2061 7267 733d 5b6e 6577 736c 6574 7465   args=[newslette
-000050e0: 722e 6964 5d29 0a20 2020 2020 2020 2020  r.id]).         
-000050f0: 2020 2072 6573 706f 6e73 6520 3d20 7365     response = se
-00005100: 6c66 2e63 6c69 656e 742e 6765 7428 7572  lf.client.get(ur
-00005110: 6c29 0a20 2020 2020 2020 2020 2020 200a  l).            .
-00005120: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00005130: 2e61 7373 6572 7445 7175 616c 2832 3030  .assertEqual(200
-00005140: 2c20 7265 7370 6f6e 7365 2e73 7461 7475  , response.statu
-00005150: 735f 636f 6465 290a 2020 2020 2020 2020  s_code).        
-00005160: 2020 2020 0a20 2020 2020 2020 2020 2020      .           
-00005170: 2073 656c 662e 6173 7365 7274 436f 6e74   self.assertCont
-00005180: 6169 6e73 2872 6573 706f 6e73 652c 206e  ains(response, n
-00005190: 6577 736c 6574 7465 722e 636f 6e74 656e  ewsletter.conten
-000051a0: 7429 0a20 2020 2020 2020 2020 2020 2073  t).            s
-000051b0: 656c 662e 6173 7365 7274 436f 6e74 6169  elf.assertContai
-000051c0: 6e73 2872 6573 706f 6e73 652c 2061 7274  ns(response, art
-000051d0: 312e 7469 746c 6529 0a20 2020 2020 2020  1.title).       
-000051e0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000051f0: 436f 6e74 6169 6e73 2872 6573 706f 6e73  Contains(respons
-00005200: 652c 2022 6261 636b 6772 6f75 6e64 3a20  e, "background: 
-00005210: 7265 643b 2229 0a20 2020 2020 2020 2020  red;").         
-00005220: 2020 2073 656c 662e 6173 7365 7274 436f     self.assertCo
-00005230: 6e74 6169 6e73 2872 6573 706f 6e73 652c  ntains(response,
-00005240: 2070 6f68 2e63 6f6e 7465 6e74 290a 2020   poh.content).  
-00005250: 2020 2020 2020 2020 2020 0a20 2020 2064            .    d
-00005260: 6566 2074 6573 745f 6368 616e 6765 5f6e  ef test_change_n
-00005270: 6577 736c 6574 7465 725f 7465 6d70 6c61  ewsletter_templa
-00005280: 7465 7328 7365 6c66 293a 0a20 2020 2020  tes(self):.     
-00005290: 2020 2073 6574 7469 6e67 732e 434f 4f50     settings.COOP
-000052a0: 5f43 4d53 5f4e 4557 534c 4554 5445 525f  _CMS_NEWSLETTER_
-000052b0: 5445 4d50 4c41 5445 5320 3d20 280a 2020  TEMPLATES = (.  
-000052c0: 2020 2020 2020 2020 2020 2827 7465 7374            ('test
-000052d0: 2f6e 6577 736c 6574 7465 725f 7265 642e  /newsletter_red.
-000052e0: 6874 6d6c 272c 2027 5265 6427 292c 0a20  html', 'Red'),. 
-000052f0: 2020 2020 2020 2020 2020 2028 2774 6573             ('tes
-00005300: 742f 6e65 7773 6c65 7474 6572 5f62 6c75  t/newsletter_blu
-00005310: 652e 6874 6d6c 272c 2027 426c 7565 2729  e.html', 'Blue')
-00005320: 2c0a 2020 2020 2020 2020 290a 2020 2020  ,.        ).    
-00005330: 2020 2020 7365 6c66 2e5f 6c6f 675f 6173      self._log_as
-00005340: 5f65 6469 746f 7228 290a 2020 2020 2020  _editor().      
-00005350: 2020 0a20 2020 2020 2020 206e 6577 736c    .        newsl
-00005360: 6574 7465 7220 3d20 6d6f 6d6d 792e 6d61  etter = mommy.ma
-00005370: 6b65 284e 6577 736c 6574 7465 722c 2074  ke(Newsletter, t
-00005380: 656d 706c 6174 653d 2774 6573 742f 6e65  emplate='test/ne
-00005390: 7773 6c65 7474 6572 5f62 6c75 652e 6874  wsletter_blue.ht
-000053a0: 6d6c 2729 0a20 2020 2020 2020 200a 2020  ml').        .  
-000053b0: 2020 2020 2020 7572 6c20 3d20 7265 7665        url = reve
-000053c0: 7273 6528 2763 6f6f 705f 636d 735f 6368  rse('coop_cms_ch
-000053d0: 616e 6765 5f6e 6577 736c 6574 7465 725f  ange_newsletter_
-000053e0: 7465 6d70 6c61 7465 272c 2061 7267 733d  template', args=
-000053f0: 5b6e 6577 736c 6574 7465 722e 6964 5d29  [newsletter.id])
-00005400: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-00005410: 6520 3d20 7365 6c66 2e63 6c69 656e 742e  e = self.client.
-00005420: 6765 7428 7572 6c29 0a20 2020 2020 2020  get(url).       
-00005430: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-00005440: 6c28 3230 302c 2072 6573 706f 6e73 652e  l(200, response.
-00005450: 7374 6174 7573 5f63 6f64 6529 0a20 2020  status_code).   
-00005460: 2020 2020 200a 2020 2020 2020 2020 666f       .        fo
-00005470: 7220 7470 6c2c 206e 616d 6520 696e 2073  r tpl, name in s
-00005480: 6574 7469 6e67 732e 434f 4f50 5f43 4d53  ettings.COOP_CMS
-00005490: 5f4e 4557 534c 4554 5445 525f 5445 4d50  _NEWSLETTER_TEMP
-000054a0: 4c41 5445 533a 0a20 2020 2020 2020 2020  LATES:.         
-000054b0: 2020 2073 656c 662e 6173 7365 7274 436f     self.assertCo
-000054c0: 6e74 6169 6e73 2872 6573 706f 6e73 652c  ntains(response,
-000054d0: 2074 706c 290a 2020 2020 2020 2020 2020   tpl).          
-000054e0: 2020 7365 6c66 2e61 7373 6572 7443 6f6e    self.assertCon
-000054f0: 7461 696e 7328 7265 7370 6f6e 7365 2c20  tains(response, 
-00005500: 6e61 6d65 290a 2020 2020 2020 2020 2020  name).          
-00005510: 2020 0a20 2020 2020 2020 2064 6174 613d    .        data=
-00005520: 7b27 7465 6d70 6c61 7465 273a 2027 7465  {'template': 'te
-00005530: 7374 2f6e 6577 736c 6574 7465 725f 7265  st/newsletter_re
-00005540: 642e 6874 6d6c 277d 0a20 2020 2020 2020  d.html'}.       
-00005550: 2072 6573 706f 6e73 6520 3d20 7365 6c66   response = self
-00005560: 2e63 6c69 656e 742e 706f 7374 2875 726c  .client.post(url
-00005570: 2c20 6461 7461 3d64 6174 612c 2066 6f6c  , data=data, fol
-00005580: 6c6f 773d 5472 7565 290a 2020 2020 2020  low=True).      
-00005590: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-000055a0: 616c 2832 3030 2c20 7265 7370 6f6e 7365  al(200, response
-000055b0: 2e73 7461 7475 735f 636f 6465 290a 2020  .status_code).  
-000055c0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-000055d0: 7443 6f6e 7461 696e 7328 7265 7370 6f6e  tContains(respon
-000055e0: 7365 2c20 7265 7665 7273 6528 2763 6f6f  se, reverse('coo
-000055f0: 705f 636d 735f 6564 6974 5f6e 6577 736c  p_cms_edit_newsl
-00005600: 6574 7465 7227 2c20 6172 6773 3d5b 6e65  etter', args=[ne
-00005610: 7773 6c65 7474 6572 2e69 645d 2929 0a20  wsletter.id])). 
-00005620: 2020 2020 2020 200a 2020 2020 2020 2020         .        
-00005630: 6e65 7773 6c65 7474 6572 203d 204e 6577  newsletter = New
-00005640: 736c 6574 7465 722e 6f62 6a65 6374 732e  sletter.objects.
-00005650: 6765 7428 6964 3d6e 6577 736c 6574 7465  get(id=newslette
-00005660: 722e 6964 290a 2020 2020 2020 2020 7365  r.id).        se
-00005670: 6c66 2e61 7373 6572 7445 7175 616c 286e  lf.assertEqual(n
-00005680: 6577 736c 6574 7465 722e 7465 6d70 6c61  ewsletter.templa
-00005690: 7465 2c20 6461 7461 5b27 7465 6d70 6c61  te, data['templa
-000056a0: 7465 275d 290a 2020 2020 2020 2020 0a20  te']).        . 
-000056b0: 2020 2064 6566 2074 6573 745f 6368 616e     def test_chan
-000056c0: 6765 5f6e 6577 736c 6574 7465 725f 7465  ge_newsletter_te
-000056d0: 6d70 6c61 7465 735f 616e 6f6e 796d 6f75  mplates_anonymou
-000056e0: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
-000056f0: 2073 6574 7469 6e67 732e 434f 4f50 5f43   settings.COOP_C
-00005700: 4d53 5f4e 4557 534c 4554 5445 525f 5445  MS_NEWSLETTER_TE
-00005710: 4d50 4c41 5445 5320 3d20 280a 2020 2020  MPLATES = (.    
-00005720: 2020 2020 2020 2020 2827 7465 7374 2f6e          ('test/n
-00005730: 6577 736c 6574 7465 725f 7265 642e 6874  ewsletter_red.ht
-00005740: 6d6c 272c 2027 5265 6427 292c 0a20 2020  ml', 'Red'),.   
-00005750: 2020 2020 2020 2020 2028 2774 6573 742f           ('test/
-00005760: 6e65 7773 6c65 7474 6572 5f62 6c75 652e  newsletter_blue.
-00005770: 6874 6d6c 272c 2027 426c 7565 2729 2c0a  html', 'Blue'),.
-00005780: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00005790: 2020 6f72 6967 696e 616c 5f64 6174 613d    original_data=
-000057a0: 7b27 7465 6d70 6c61 7465 273a 2027 7465  {'template': 'te
-000057b0: 7374 2f6e 6577 736c 6574 7465 725f 626c  st/newsletter_bl
-000057c0: 7565 2e68 746d 6c27 7d0a 2020 2020 2020  ue.html'}.      
-000057d0: 2020 6e65 7773 6c65 7474 6572 203d 206d    newsletter = m
-000057e0: 6f6d 6d79 2e6d 616b 6528 4e65 7773 6c65  ommy.make(Newsle
-000057f0: 7474 6572 2c20 2a2a 6f72 6967 696e 616c  tter, **original
-00005800: 5f64 6174 6129 0a20 2020 2020 2020 200a  _data).        .
-00005810: 2020 2020 2020 2020 7572 6c20 3d20 7265          url = re
-00005820: 7665 7273 6528 2763 6f6f 705f 636d 735f  verse('coop_cms_
-00005830: 6368 616e 6765 5f6e 6577 736c 6574 7465  change_newslette
-00005840: 725f 7465 6d70 6c61 7465 272c 2061 7267  r_template', arg
-00005850: 733d 5b6e 6577 736c 6574 7465 722e 6964  s=[newsletter.id
-00005860: 5d29 0a20 2020 2020 2020 2072 6573 706f  ]).        respo
-00005870: 6e73 6520 3d20 7365 6c66 2e63 6c69 656e  nse = self.clien
-00005880: 742e 6765 7428 7572 6c29 0a20 2020 2020  t.get(url).     
-00005890: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-000058a0: 7561 6c28 3330 322c 2072 6573 706f 6e73  ual(302, respons
-000058b0: 652e 7374 6174 7573 5f63 6f64 6529 0a20  e.status_code). 
-000058c0: 2020 2020 2020 200a 2020 2020 2020 2020         .        
-000058d0: 6461 7461 3d7b 2774 656d 706c 6174 6527  data={'template'
-000058e0: 3a20 2774 6573 742f 6e65 7773 6c65 7474  : 'test/newslett
-000058f0: 6572 5f72 6564 2e68 746d 6c27 7d0a 2020  er_red.html'}.  
-00005900: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-00005910: 2073 656c 662e 636c 6965 6e74 2e70 6f73   self.client.pos
-00005920: 7428 7572 6c2c 2064 6174 613d 6461 7461  t(url, data=data
-00005930: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00005940: 7373 6572 7445 7175 616c 2833 3032 2c20  ssertEqual(302, 
-00005950: 7265 7370 6f6e 7365 2e73 7461 7475 735f  response.status_
-00005960: 636f 6465 290a 2020 2020 2020 2020 0a20  code).        . 
-00005970: 2020 2020 2020 206e 6577 736c 6574 7465         newslette
-00005980: 7220 3d20 4e65 7773 6c65 7474 6572 2e6f  r = Newsletter.o
-00005990: 626a 6563 7473 2e67 6574 2869 643d 6e65  bjects.get(id=ne
-000059a0: 7773 6c65 7474 6572 2e69 6429 0a20 2020  wsletter.id).   
-000059b0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-000059c0: 4571 7561 6c28 6e65 7773 6c65 7474 6572  Equal(newsletter
-000059d0: 2e74 656d 706c 6174 652c 206f 7269 6769  .template, origi
-000059e0: 6e61 6c5f 6461 7461 5b27 7465 6d70 6c61  nal_data['templa
-000059f0: 7465 275d 290a 2020 2020 2020 2020 0a20  te']).        . 
-00005a00: 2020 2064 6566 2074 6573 745f 6368 616e     def test_chan
-00005a10: 6765 5f6e 6577 736c 6574 7465 725f 756e  ge_newsletter_un
-00005a20: 6b6e 6f77 5f74 656d 706c 6174 6528 7365  know_template(se
-00005a30: 6c66 293a 0a20 2020 2020 2020 2073 6574  lf):.        set
-00005a40: 7469 6e67 732e 434f 4f50 5f43 4d53 5f4e  tings.COOP_CMS_N
-00005a50: 4557 534c 4554 5445 525f 5445 4d50 4c41  EWSLETTER_TEMPLA
-00005a60: 5445 5320 3d20 280a 2020 2020 2020 2020  TES = (.        
-00005a70: 2020 2020 2827 7465 7374 2f6e 6577 736c      ('test/newsl
-00005a80: 6574 7465 725f 7265 642e 6874 6d6c 272c  etter_red.html',
-00005a90: 2027 5265 6427 292c 0a20 2020 2020 2020   'Red'),.       
-00005aa0: 2020 2020 2028 2774 6573 742f 6e65 7773       ('test/news
-00005ab0: 6c65 7474 6572 5f62 6c75 652e 6874 6d6c  letter_blue.html
-00005ac0: 272c 2027 426c 7565 2729 2c0a 2020 2020  ', 'Blue'),.    
-00005ad0: 2020 2020 290a 2020 2020 2020 2020 6f72      ).        or
-00005ae0: 6967 696e 616c 5f64 6174 613d 7b27 7465  iginal_data={'te
-00005af0: 6d70 6c61 7465 273a 2027 7465 7374 2f6e  mplate': 'test/n
-00005b00: 6577 736c 6574 7465 725f 626c 7565 2e68  ewsletter_blue.h
-00005b10: 746d 6c27 7d0a 2020 2020 2020 2020 6e65  tml'}.        ne
-00005b20: 7773 6c65 7474 6572 203d 206d 6f6d 6d79  wsletter = mommy
-00005b30: 2e6d 616b 6528 4e65 7773 6c65 7474 6572  .make(Newsletter
-00005b40: 2c20 2a2a 6f72 6967 696e 616c 5f64 6174  , **original_dat
-00005b50: 6129 0a20 2020 2020 2020 200a 2020 2020  a).        .    
-00005b60: 2020 2020 7365 6c66 2e5f 6c6f 675f 6173      self._log_as
-00005b70: 5f65 6469 746f 7228 290a 2020 2020 2020  _editor().      
-00005b80: 2020 7572 6c20 3d20 7265 7665 7273 6528    url = reverse(
-00005b90: 2763 6f6f 705f 636d 735f 6368 616e 6765  'coop_cms_change
-00005ba0: 5f6e 6577 736c 6574 7465 725f 7465 6d70  _newsletter_temp
-00005bb0: 6c61 7465 272c 2061 7267 733d 5b6e 6577  late', args=[new
-00005bc0: 736c 6574 7465 722e 6964 5d29 0a20 2020  sletter.id]).   
-00005bd0: 2020 2020 2064 6174 613d 7b27 7465 6d70       data={'temp
-00005be0: 6c61 7465 273a 2027 7465 7374 2f6e 6577  late': 'test/new
-00005bf0: 736c 6574 7465 725f 7965 6c6c 6f77 2e68  sletter_yellow.h
-00005c00: 746d 6c27 7d0a 2020 2020 2020 2020 7265  tml'}.        re
-00005c10: 7370 6f6e 7365 203d 2073 656c 662e 636c  sponse = self.cl
-00005c20: 6965 6e74 2e70 6f73 7428 7572 6c2c 2064  ient.post(url, d
-00005c30: 6174 613d 6461 7461 290a 2020 2020 2020  ata=data).      
-00005c40: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00005c50: 616c 2832 3030 2c20 7265 7370 6f6e 7365  al(200, response
-00005c60: 2e73 7461 7475 735f 636f 6465 290a 2020  .status_code).  
-00005c70: 2020 2020 2020 0a20 2020 2020 2020 206e        .        n
-00005c80: 6577 736c 6574 7465 7220 3d20 4e65 7773  ewsletter = News
-00005c90: 6c65 7474 6572 2e6f 626a 6563 7473 2e67  letter.objects.g
-00005ca0: 6574 2869 643d 6e65 7773 6c65 7474 6572  et(id=newsletter
-00005cb0: 2e69 6429 0a20 2020 2020 2020 2073 656c  .id).        sel
-00005cc0: 662e 6173 7365 7274 4571 7561 6c28 6e65  f.assertEqual(ne
-00005cd0: 7773 6c65 7474 6572 2e74 656d 706c 6174  wsletter.templat
-00005ce0: 652c 206f 7269 6769 6e61 6c5f 6461 7461  e, original_data
-00005cf0: 5b27 7465 6d70 6c61 7465 275d 290a 0a20  ['template']).. 
-00005d00: 2020 2040 6f76 6572 7269 6465 5f73 6574     @override_set
-00005d10: 7469 6e67 7328 0a20 2020 2020 2020 2043  tings(.        C
-00005d20: 4f4f 505f 434d 535f 5445 5354 5f45 4d41  OOP_CMS_TEST_EMA
-00005d30: 494c 533d 5b0a 2020 2020 2020 2020 2020  ILS=[.          
-00005d40: 2020 2827 596f 7572 206e 616d 6520 3c63    ('Your name <c
-00005d50: 6f6f 705f 636d 7340 6d61 696c 696e 6174  oop_cms@mailinat
-00005d60: 6f72 2e63 6f6d 3e27 2c20 2759 6f75 7220  or.com>', 'Your 
-00005d70: 6e61 6d65 203c 636f 6f70 5f63 6d73 406d  name <coop_cms@m
-00005d80: 6169 6c69 6e61 746f 722e 636f 6d3e 2729  ailinator.com>')
-00005d90: 2c0a 2020 2020 2020 2020 2020 2020 2827  ,.            ('
-00005da0: 5465 7374 2054 776f 203c 7465 7374 3240  Test Two <test2@
-00005db0: 7465 7374 322e 6672 3e27 2c20 2754 6573  test2.fr>', 'Tes
-00005dc0: 7420 5477 6f20 3c74 6573 7432 4074 6573  t Two <test2@tes
-00005dd0: 7432 3e27 292c 0a20 2020 2020 2020 205d  t2>'),.        ]
-00005de0: 2c0a 2020 2020 2020 2020 434f 4f50 5f43  ,.        COOP_C
-00005df0: 4d53 5f46 524f 4d5f 454d 4149 4c3d 2763  MS_FROM_EMAIL='c
-00005e00: 6f6e 7461 6374 4074 6f74 6f2e 6672 270a  ontact@toto.fr'.
-00005e10: 2020 2020 290a 2020 2020 6465 6620 7465      ).    def te
-00005e20: 7374 5f73 656e 645f 7465 7374 5f6e 6577  st_send_test_new
-00005e30: 736c 6574 7465 725f 6e6f 5f74 6578 7428  sletter_no_text(
-00005e40: 7365 6c66 2c20 7465 6d70 6c61 7465 3d27  self, template='
-00005e50: 7465 7374 2f6e 6577 736c 6574 7465 725f  test/newsletter_
-00005e60: 626c 7565 2e68 746d 6c27 293a 0a20 2020  blue.html'):.   
-00005e70: 2020 2020 2073 6574 7469 6e67 732e 5349       settings.SI
-00005e80: 5445 5f49 4420 3d20 310a 2020 2020 2020  TE_ID = 1.      
-00005e90: 2020 7369 7465 203d 2053 6974 652e 6f62    site = Site.ob
-00005ea0: 6a65 6374 732e 6765 7428 6964 3d73 6574  jects.get(id=set
-00005eb0: 7469 6e67 732e 5349 5445 5f49 4429 0a20  tings.SITE_ID). 
-00005ec0: 2020 2020 2020 2073 6974 652e 646f 6d61         site.doma
-00005ed0: 696e 203d 2027 746f 746f 2e66 7227 0a20  in = 'toto.fr'. 
-00005ee0: 2020 2020 2020 2073 6974 652e 7361 7665         site.save
-00005ef0: 2829 0a0a 2020 2020 2020 2020 7265 6c5f  ()..        rel_
-00005f00: 636f 6e74 656e 7420 3d20 2727 270a 2020  content = '''.  
-00005f10: 2020 2020 2020 2020 2020 2020 2020 3c68                <h
-00005f20: 313e 5469 746c 653c 2f68 313e 3c61 2068  1>Title</h1><a h
-00005f30: 7265 663d 227b 307d 2f74 6f74 6f2f 223e  ref="{0}/toto/">
-00005f40: 3c69 6d67 2073 7263 3d22 7b30 7d2f 746f  <img src="{0}/to
-00005f50: 746f 2e6a 7067 223e 3c2f 613e 3c62 7220  to.jpg"></a><br 
-00005f60: 2f3e 3c69 6d67 2073 7263 3d22 7b30 7d2f  /><img src="{0}/
-00005f70: 746f 746f 2e6a 7067 223e 0a20 2020 2020  toto.jpg">.     
-00005f80: 2020 2020 2020 2020 2020 203c 6469 763e             <div>
-00005f90: 3c61 2068 7265 663d 2268 7474 703a 2f2f  <a href="http://
-00005fa0: 7777 772e 676f 6f67 6c65 2e66 7222 3e47  www.google.fr">G
-00005fb0: 6f6f 676c 653c 2f61 3e3c 2f64 6976 3e0a  oogle</a></div>.
-00005fc0: 2020 2020 2020 2020 2020 2020 2727 270a              '''.
-00005fd0: 2020 2020 2020 2020 6f72 6967 696e 616c          original
-00005fe0: 5f64 6174 6120 3d20 7b0a 2020 2020 2020  _data = {.      
-00005ff0: 2020 2020 2020 2774 656d 706c 6174 6527        'template'
-00006000: 3a20 7465 6d70 6c61 7465 2c0a 2020 2020  : template,.    
-00006010: 2020 2020 2020 2020 2773 7562 6a65 6374          'subject
-00006020: 273a 2027 7465 7374 2065 6d61 696c 272c  ': 'test email',
-00006030: 0a20 2020 2020 2020 2020 2020 2027 636f  .            'co
-00006040: 6e74 656e 7427 3a20 7265 6c5f 636f 6e74  ntent': rel_cont
-00006050: 656e 742e 666f 726d 6174 2822 2229 0a20  ent.format(""). 
-00006060: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00006070: 206e 6577 736c 6574 7465 7220 3d20 6d6f   newsletter = mo
-00006080: 6d6d 792e 6d61 6b65 284e 6577 736c 6574  mmy.make(Newslet
-00006090: 7465 722c 2073 6974 653d 7369 7465 2c20  ter, site=site, 
-000060a0: 2a2a 6f72 6967 696e 616c 5f64 6174 6129  **original_data)
-000060b0: 0a0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
-000060c0: 6c6f 675f 6173 5f65 6469 746f 7228 290a  log_as_editor().
-000060d0: 2020 2020 2020 2020 6461 7461 203d 207b          data = {
-000060e0: 0a20 2020 2020 2020 2020 2020 2022 656d  .            "em
-000060f0: 6169 6c73 223a 205b 5d2c 0a20 2020 2020  ails": [],.     
-00006100: 2020 2020 2020 2022 656d 6169 6c22 3a20         "email": 
-00006110: 2222 2c0a 2020 2020 2020 2020 2020 2020  "",.            
-00006120: 2265 6d61 696c 3222 3a20 2222 0a20 2020  "email2": "".   
-00006130: 2020 2020 207d 0a0a 2020 2020 2020 2020       }..        
-00006140: 7572 6c20 3d20 7265 7665 7273 6528 2763  url = reverse('c
-00006150: 6f6f 705f 636d 735f 7465 7374 5f6e 6577  oop_cms_test_new
-00006160: 736c 6574 7465 7227 2c20 6172 6773 3d5b  sletter', args=[
-00006170: 6e65 7773 6c65 7474 6572 2e69 645d 290a  newsletter.id]).
-00006180: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-00006190: 203d 2073 656c 662e 636c 6965 6e74 2e70   = self.client.p
-000061a0: 6f73 7428 7572 6c2c 2064 6174 6129 0a20  ost(url, data). 
-000061b0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-000061c0: 7274 4571 7561 6c28 3230 302c 2072 6573  rtEqual(200, res
-000061d0: 706f 6e73 652e 7374 6174 7573 5f63 6f64  ponse.status_cod
-000061e0: 6529 0a20 2020 2020 2020 2073 656c 662e  e).        self.
-000061f0: 6173 7365 7274 436f 6e74 6169 6e73 2872  assertContains(r
-00006200: 6573 706f 6e73 652c 2027 3c66 6f72 6d27  esponse, '<form'
-00006210: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00006220: 7373 6572 7445 7175 616c 286c 656e 286d  ssertEqual(len(m
-00006230: 6169 6c2e 6f75 7462 6f78 292c 2030 290a  ail.outbox), 0).
-00006240: 0a20 2020 2040 6f76 6572 7269 6465 5f73  .    @override_s
-00006250: 6574 7469 6e67 7328 0a20 2020 2020 2020  ettings(.       
-00006260: 2043 4f4f 505f 434d 535f 5445 5354 5f45   COOP_CMS_TEST_E
-00006270: 4d41 494c 533d 5b0a 2020 2020 2020 2020  MAILS=[.        
-00006280: 2020 2020 2827 596f 7572 206e 616d 6520      ('Your name 
-00006290: 3c63 6f6f 705f 636d 7340 6d61 696c 696e  <coop_cms@mailin
-000062a0: 6174 6f72 2e63 6f6d 3e27 2c20 2759 6f75  ator.com>', 'You
-000062b0: 7220 6e61 6d65 203c 636f 6f70 5f63 6d73  r name <coop_cms
-000062c0: 406d 6169 6c69 6e61 746f 722e 636f 6d3e  @mailinator.com>
-000062d0: 2729 2c0a 2020 2020 2020 2020 2020 2020  '),.            
-000062e0: 2827 5465 7374 2054 776f 203c 7465 7374  ('Test Two <test
-000062f0: 3240 7465 7374 322e 6672 3e27 2c20 2754  2@test2.fr>', 'T
-00006300: 6573 7420 5477 6f20 3c74 6573 7432 4074  est Two <test2@t
-00006310: 6573 7432 3e27 292c 0a20 2020 2020 2020  est2>'),.       
-00006320: 205d 2c0a 2020 2020 2020 2020 434f 4f50   ],.        COOP
-00006330: 5f43 4d53 5f46 524f 4d5f 454d 4149 4c3d  _CMS_FROM_EMAIL=
-00006340: 2763 6f6e 7461 6374 4074 6f74 6f2e 6672  'contact@toto.fr
-00006350: 270a 2020 2020 290a 2020 2020 6465 6620  '.    ).    def 
-00006360: 7465 7374 5f73 656e 645f 7465 7374 5f6e  test_send_test_n
-00006370: 6577 736c 6574 7465 7228 7365 6c66 2c20  ewsletter(self, 
-00006380: 7465 6d70 6c61 7465 3d27 7465 7374 2f6e  template='test/n
-00006390: 6577 736c 6574 7465 725f 626c 7565 2e68  ewsletter_blue.h
-000063a0: 746d 6c27 2c20 6578 7472 615f 6368 6563  tml', extra_chec
-000063b0: 6b65 723d 4e6f 6e65 293a 0a20 2020 2020  ker=None):.     
-000063c0: 2020 2073 6574 7469 6e67 732e 5349 5445     settings.SITE
-000063d0: 5f49 4420 3d20 310a 2020 2020 2020 2020  _ID = 1.        
-000063e0: 7369 7465 203d 2053 6974 652e 6f62 6a65  site = Site.obje
-000063f0: 6374 732e 6765 7428 6964 3d73 6574 7469  cts.get(id=setti
-00006400: 6e67 732e 5349 5445 5f49 4429 0a20 2020  ngs.SITE_ID).   
-00006410: 2020 2020 2073 6974 652e 646f 6d61 696e       site.domain
-00006420: 203d 2027 746f 746f 2e66 7227 0a20 2020   = 'toto.fr'.   
-00006430: 2020 2020 2073 6974 652e 7361 7665 2829       site.save()
-00006440: 0a20 2020 2020 2020 200a 2020 2020 2020  .        .      
-00006450: 2020 7265 6c5f 636f 6e74 656e 7420 3d20    rel_content = 
-00006460: 2727 270a 2020 2020 2020 2020 2020 2020  '''.            
-00006470: 3c68 313e 5469 746c 653c 2f68 313e 3c61  <h1>Title</h1><a
-00006480: 2068 7265 663d 227b 307d 2f74 6f74 6f2f   href="{0}/toto/
-00006490: 223e 3c69 6d67 2073 7263 3d22 7b30 7d2f  "><img src="{0}/
-000064a0: 746f 746f 2e6a 7067 223e 3c2f 613e 3c62  toto.jpg"></a><b
-000064b0: 7220 2f3e 3c69 6d67 2073 7263 3d22 7b30  r /><img src="{0
-000064c0: 7d2f 746f 746f 2e6a 7067 223e 0a20 2020  }/toto.jpg">.   
-000064d0: 2020 2020 2020 2020 203c 6469 763e 3c61           <div><a
-000064e0: 2068 7265 663d 2268 7474 703a 2f2f 7777   href="http://ww
-000064f0: 772e 676f 6f67 6c65 2e66 7222 3e47 6f6f  w.google.fr">Goo
-00006500: 676c 653c 2f61 3e3c 2f64 6976 3e0a 2020  gle</a></div>.  
-00006510: 2020 2020 2020 2727 270a 2020 2020 2020        '''.      
-00006520: 2020 6f72 6967 696e 616c 5f64 6174 6120    original_data 
-00006530: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00006540: 2774 656d 706c 6174 6527 3a20 7465 6d70  'template': temp
-00006550: 6c61 7465 2c0a 2020 2020 2020 2020 2020  late,.          
-00006560: 2020 2773 7562 6a65 6374 273a 2027 7465    'subject': 'te
-00006570: 7374 2065 6d61 696c 272c 0a20 2020 2020  st email',.     
-00006580: 2020 2020 2020 2027 636f 6e74 656e 7427         'content'
-00006590: 3a20 7265 6c5f 636f 6e74 656e 742e 666f  : rel_content.fo
-000065a0: 726d 6174 2822 2229 0a20 2020 2020 2020  rmat("").       
-000065b0: 207d 0a20 2020 2020 2020 206e 6577 736c   }.        newsl
-000065c0: 6574 7465 7220 3d20 6d6f 6d6d 792e 6d61  etter = mommy.ma
-000065d0: 6b65 284e 6577 736c 6574 7465 722c 2073  ke(Newsletter, s
-000065e0: 6974 653d 7369 7465 2c20 2a2a 6f72 6967  ite=site, **orig
-000065f0: 696e 616c 5f64 6174 6129 0a0a 2020 2020  inal_data)..    
-00006600: 2020 2020 7365 6c66 2e5f 6c6f 675f 6173      self._log_as
-00006610: 5f65 6469 746f 7228 290a 2020 2020 2020  _editor().      
-00006620: 2020 6461 7461 203d 207b 0a20 2020 2020    data = {.     
-00006630: 2020 2020 2020 2022 656d 6169 6c73 223a         "emails":
-00006640: 205b 656d 6169 6c5b 305d 2066 6f72 2065   [email[0] for e
-00006650: 6d61 696c 2069 6e20 7365 7474 696e 6773  mail in settings
-00006660: 2e43 4f4f 505f 434d 535f 5445 5354 5f45  .COOP_CMS_TEST_E
-00006670: 4d41 494c 535d 2c0a 2020 2020 2020 2020  MAILS],.        
-00006680: 2020 2020 2265 6d61 696c 223a 2022 222c      "email": "",
-00006690: 0a20 2020 2020 2020 2020 2020 2022 656d  .            "em
-000066a0: 6169 6c32 223a 2022 220a 2020 2020 2020  ail2": "".      
-000066b0: 2020 7d0a 2020 2020 2020 2020 0a20 2020    }.        .   
-000066c0: 2020 2020 2075 726c 203d 2072 6576 6572       url = rever
-000066d0: 7365 2827 636f 6f70 5f63 6d73 5f74 6573  se('coop_cms_tes
-000066e0: 745f 6e65 7773 6c65 7474 6572 272c 2061  t_newsletter', a
-000066f0: 7267 733d 5b6e 6577 736c 6574 7465 722e  rgs=[newsletter.
-00006700: 6964 5d29 0a20 2020 2020 2020 2072 6573  id]).        res
-00006710: 706f 6e73 6520 3d20 7365 6c66 2e63 6c69  ponse = self.cli
-00006720: 656e 742e 706f 7374 2875 726c 2c20 6461  ent.post(url, da
-00006730: 7461 290a 2020 2020 2020 2020 7365 6c66  ta).        self
-00006740: 2e61 7373 6572 7445 7175 616c 2832 3030  .assertEqual(200
-00006750: 2c20 7265 7370 6f6e 7365 2e73 7461 7475  , response.statu
-00006760: 735f 636f 6465 290a 2020 2020 2020 2020  s_code).        
-00006770: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00006780: 280a 2020 2020 2020 2020 2020 2020 5b74  (.            [t
-00006790: 6573 745f 6164 6472 6573 735b 305d 2066  est_address[0] f
-000067a0: 6f72 2074 6573 745f 6164 6472 6573 7320  or test_address 
-000067b0: 696e 2073 6574 7469 6e67 732e 434f 4f50  in settings.COOP
-000067c0: 5f43 4d53 5f54 4553 545f 454d 4149 4c53  _CMS_TEST_EMAILS
-000067d0: 5d2c 0a20 2020 2020 2020 2020 2020 205b  ],.            [
-000067e0: 7265 6365 6976 6564 5f65 6d61 696c 2e74  received_email.t
-000067f0: 6f5b 305d 2066 6f72 2072 6563 6569 7665  o[0] for receive
-00006800: 645f 656d 6169 6c20 696e 206d 6169 6c2e  d_email in mail.
-00006810: 6f75 7462 6f78 5d0a 2020 2020 2020 2020  outbox].        
-00006820: 290a 2020 2020 2020 2020 666f 7220 7265  ).        for re
-00006830: 6365 6976 6564 5f65 6d61 696c 2069 6e20  ceived_email in 
-00006840: 6d61 696c 2e6f 7574 626f 783a 0a20 2020  mail.outbox:.   
-00006850: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
-00006860: 7365 7274 4571 7561 6c28 7265 6365 6976  sertEqual(receiv
-00006870: 6564 5f65 6d61 696c 2e66 726f 6d5f 656d  ed_email.from_em
-00006880: 6169 6c2c 2073 6574 7469 6e67 732e 434f  ail, settings.CO
-00006890: 4f50 5f43 4d53 5f46 524f 4d5f 454d 4149  OP_CMS_FROM_EMAI
-000068a0: 4c29 0a20 2020 2020 2020 2020 2020 2073  L).            s
-000068b0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-000068c0: 7265 6365 6976 6564 5f65 6d61 696c 2e73  received_email.s
-000068d0: 7562 6a65 6374 2c20 6e65 7773 6c65 7474  ubject, newslett
-000068e0: 6572 2e73 7562 6a65 6374 290a 2020 2020  er.subject).    
-000068f0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00006900: 6572 7454 7275 6528 7265 6365 6976 6564  ertTrue(received
-00006910: 5f65 6d61 696c 2e62 6f64 792e 6669 6e64  _email.body.find
-00006920: 2827 5469 746c 6527 2920 3e3d 2030 290a  ('Title') >= 0).
-00006930: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00006940: 2e61 7373 6572 7454 7275 6528 7265 6365  .assertTrue(rece
-00006950: 6976 6564 5f65 6d61 696c 2e62 6f64 792e  ived_email.body.
-00006960: 6669 6e64 2827 476f 6f67 6c65 2729 203e  find('Google') >
-00006970: 3d20 3029 0a20 2020 2020 2020 2020 2020  = 0).           
-00006980: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-00006990: 2872 6563 6569 7665 645f 656d 6169 6c2e  (received_email.
-000069a0: 616c 7465 726e 6174 6976 6573 5b30 5d5b  alternatives[0][
-000069b0: 315d 2c20 2274 6578 742f 6874 6d6c 2229  1], "text/html")
-000069c0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-000069d0: 662e 6173 7365 7274 5472 7565 2872 6563  f.assertTrue(rec
-000069e0: 6569 7665 645f 656d 6169 6c2e 616c 7465  eived_email.alte
-000069f0: 726e 6174 6976 6573 5b30 5d5b 305d 2e66  rnatives[0][0].f
-00006a00: 696e 6428 2754 6974 6c65 2729 203e 3d20  ind('Title') >= 
-00006a10: 3029 0a20 2020 2020 2020 2020 2020 2073  0).            s
-00006a20: 656c 662e 6173 7365 7274 5472 7565 2872  elf.assertTrue(r
-00006a30: 6563 6569 7665 645f 656d 6169 6c2e 616c  eceived_email.al
-00006a40: 7465 726e 6174 6976 6573 5b30 5d5b 305d  ternatives[0][0]
-00006a50: 2e66 696e 6428 2747 6f6f 676c 6527 2920  .find('Google') 
-00006a60: 3e3d 2030 290a 2020 2020 2020 2020 2020  >= 0).          
-00006a70: 2020 7369 7465 5f70 7265 6669 7820 3d20    site_prefix = 
-00006a80: 2268 7474 703a 2f2f 2220 2b20 7369 7465  "http://" + site
-00006a90: 2e64 6f6d 6169 6e0a 2020 2020 2020 2020  .domain.        
-00006aa0: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-00006ab0: 7275 6528 7265 6365 6976 6564 5f65 6d61  rue(received_ema
-00006ac0: 696c 2e61 6c74 6572 6e61 7469 7665 735b  il.alternatives[
-00006ad0: 305d 5b30 5d2e 6669 6e64 2873 6974 655f  0][0].find(site_
-00006ae0: 7072 6566 6978 2920 3e3d 2030 290a 2020  prefix) >= 0).  
-00006af0: 2020 2020 2020 2020 2020 6966 2065 7874            if ext
-00006b00: 7261 5f63 6865 636b 6572 3a0a 2020 2020  ra_checker:.    
-00006b10: 2020 2020 2020 2020 2020 2020 6578 7472              extr
-00006b20: 615f 6368 6563 6b65 7228 7265 6365 6976  a_checker(receiv
-00006b30: 6564 5f65 6d61 696c 290a 0a20 2020 2040  ed_email)..    @
-00006b40: 6f76 6572 7269 6465 5f73 6574 7469 6e67  override_setting
-00006b50: 7328 0a20 2020 2020 2020 2043 4f4f 505f  s(.        COOP_
-00006b60: 434d 535f 5445 5354 5f45 4d41 494c 533d  CMS_TEST_EMAILS=
-00006b70: 5b0a 2020 2020 2020 2020 2020 2020 2827  [.            ('
-00006b80: 596f 7572 206e 616d 6520 3c63 6f6f 705f  Your name <coop_
-00006b90: 636d 7340 6d61 696c 696e 6174 6f72 2e63  cms@mailinator.c
-00006ba0: 6f6d 3e27 2c20 2759 6f75 7220 6e61 6d65  om>', 'Your name
-00006bb0: 203c 636f 6f70 5f63 6d73 406d 6169 6c69   <coop_cms@maili
-00006bc0: 6e61 746f 722e 636f 6d3e 2729 2c0a 2020  nator.com>'),.  
-00006bd0: 2020 2020 2020 2020 2020 2827 5465 7374            ('Test
-00006be0: 2054 776f 203c 7465 7374 3240 6578 616d   Two <test2@exam
-00006bf0: 706c 652e 636f 6d3e 272c 2027 5465 7374  ple.com>', 'Test
-00006c00: 2054 776f 203c 7465 7374 3240 6578 616d   Two <test2@exam
-00006c10: 706c 652e 636f 6d3e 2729 2c0a 2020 2020  ple.com>'),.    
-00006c20: 2020 2020 5d2c 0a20 2020 2020 2020 2043      ],.        C
-00006c30: 4f4f 505f 434d 535f 4652 4f4d 5f45 4d41  OOP_CMS_FROM_EMA
-00006c40: 494c 3d27 636f 6e74 6163 7440 746f 746f  IL='contact@toto
-00006c50: 2e66 7227 0a20 2020 2029 0a20 2020 2064  .fr'.    ).    d
-00006c60: 6566 2074 6573 745f 7365 6e64 5f74 6573  ef test_send_tes
-00006c70: 745f 6e65 7773 6c65 7474 6572 5f61 6464  t_newsletter_add
-00006c80: 5f65 6d61 696c 2873 656c 662c 2074 656d  _email(self, tem
-00006c90: 706c 6174 653d 2774 6573 742f 6e65 7773  plate='test/news
-00006ca0: 6c65 7474 6572 5f62 6c75 652e 6874 6d6c  letter_blue.html
-00006cb0: 272c 2065 7874 7261 5f63 6865 636b 6572  ', extra_checker
-00006cc0: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
-00006cd0: 7365 7474 696e 6773 2e53 4954 455f 4944  settings.SITE_ID
-00006ce0: 203d 2031 0a20 2020 2020 2020 2073 6974   = 1.        sit
-00006cf0: 6520 3d20 5369 7465 2e6f 626a 6563 7473  e = Site.objects
-00006d00: 2e67 6574 2869 643d 7365 7474 696e 6773  .get(id=settings
-00006d10: 2e53 4954 455f 4944 290a 2020 2020 2020  .SITE_ID).      
-00006d20: 2020 7369 7465 2e64 6f6d 6169 6e20 3d20    site.domain = 
-00006d30: 2774 6f74 6f2e 6672 270a 2020 2020 2020  'toto.fr'.      
-00006d40: 2020 7369 7465 2e73 6176 6528 290a 2020    site.save().  
-00006d50: 2020 0a20 2020 2020 2020 2072 656c 5f63    .        rel_c
-00006d60: 6f6e 7465 6e74 203d 2027 2727 0a20 2020  ontent = '''.   
-00006d70: 2020 2020 2020 2020 2020 2020 203c 6831               <h1
-00006d80: 3e54 6974 6c65 3c2f 6831 3e3c 6120 6872  >Title</h1><a hr
-00006d90: 6566 3d22 7b30 7d2f 746f 746f 2f22 3e3c  ef="{0}/toto/"><
-00006da0: 696d 6720 7372 633d 227b 307d 2f74 6f74  img src="{0}/tot
-00006db0: 6f2e 6a70 6722 3e3c 2f61 3e3c 6272 202f  o.jpg"></a><br /
-00006dc0: 3e3c 696d 6720 7372 633d 227b 307d 2f74  ><img src="{0}/t
-00006dd0: 6f74 6f2e 6a70 6722 3e0a 2020 2020 2020  oto.jpg">.      
-00006de0: 2020 2020 2020 2020 2020 3c64 6976 3e3c            <div><
-00006df0: 6120 6872 6566 3d22 6874 7470 3a2f 2f77  a href="http://w
-00006e00: 7777 2e67 6f6f 676c 652e 6672 223e 476f  ww.google.fr">Go
-00006e10: 6f67 6c65 3c2f 613e 3c2f 6469 763e 0a20  ogle</a></div>. 
-00006e20: 2020 2020 2020 2020 2020 2027 2727 0a20             '''. 
-00006e30: 2020 2020 2020 206f 7269 6769 6e61 6c5f         original_
-00006e40: 6461 7461 203d 207b 0a20 2020 2020 2020  data = {.       
-00006e50: 2020 2020 2027 7465 6d70 6c61 7465 273a       'template':
-00006e60: 2074 656d 706c 6174 652c 0a20 2020 2020   template,.     
-00006e70: 2020 2020 2020 2027 7375 626a 6563 7427         'subject'
-00006e80: 3a20 2774 6573 7420 656d 6169 6c27 2c0a  : 'test email',.
-00006e90: 2020 2020 2020 2020 2020 2020 2763 6f6e              'con
-00006ea0: 7465 6e74 273a 2072 656c 5f63 6f6e 7465  tent': rel_conte
-00006eb0: 6e74 2e66 6f72 6d61 7428 2222 290a 2020  nt.format("").  
-00006ec0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-00006ed0: 6e65 7773 6c65 7474 6572 203d 206d 6f6d  newsletter = mom
-00006ee0: 6d79 2e6d 616b 6528 4e65 7773 6c65 7474  my.make(Newslett
-00006ef0: 6572 2c20 7369 7465 3d73 6974 652c 202a  er, site=site, *
-00006f00: 2a6f 7269 6769 6e61 6c5f 6461 7461 290a  *original_data).
-00006f10: 2020 2020 0a20 2020 2020 2020 2073 656c      .        sel
-00006f20: 662e 5f6c 6f67 5f61 735f 6564 6974 6f72  f._log_as_editor
-00006f30: 2829 0a20 2020 2020 2020 2064 6174 6120  ().        data 
-00006f40: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00006f50: 2265 6d61 696c 7322 3a20 5b65 6d61 696c  "emails": [email
-00006f60: 5b30 5d20 666f 7220 656d 6169 6c20 696e  [0] for email in
-00006f70: 2073 6574 7469 6e67 732e 434f 4f50 5f43   settings.COOP_C
-00006f80: 4d53 5f54 4553 545f 454d 4149 4c53 5d2c  MS_TEST_EMAILS],
-00006f90: 0a20 2020 2020 2020 2020 2020 2022 6164  .            "ad
-00006fa0: 6469 7469 6f6e 616c 5f65 6d61 696c 3122  ditional_email1"
-00006fb0: 3a20 2774 6573 7440 7465 7374 2e74 6573  : 'test@test.tes
-00006fc0: 7427 2c0a 2020 2020 2020 2020 7d0a 2020  t',.        }.  
-00006fd0: 2020 0a20 2020 2020 2020 2075 726c 203d    .        url =
-00006fe0: 2072 6576 6572 7365 2827 636f 6f70 5f63   reverse('coop_c
-00006ff0: 6d73 5f74 6573 745f 6e65 7773 6c65 7474  ms_test_newslett
-00007000: 6572 272c 2061 7267 733d 5b6e 6577 736c  er', args=[newsl
-00007010: 6574 7465 722e 6964 5d29 0a20 2020 2020  etter.id]).     
-00007020: 2020 2072 6573 706f 6e73 6520 3d20 7365     response = se
-00007030: 6c66 2e63 6c69 656e 742e 706f 7374 2875  lf.client.post(u
-00007040: 726c 2c20 6461 7461 290a 2020 2020 2020  rl, data).      
-00007050: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00007060: 616c 2832 3030 2c20 7265 7370 6f6e 7365  al(200, response
-00007070: 2e73 7461 7475 735f 636f 6465 290a 2020  .status_code).  
-00007080: 2020 2020 2020 7465 7374 5f61 6464 7265        test_addre
-00007090: 7373 203d 205b 7465 7374 5f61 6464 7265  ss = [test_addre
-000070a0: 7373 5b30 5d20 666f 7220 7465 7374 5f61  ss[0] for test_a
-000070b0: 6464 7265 7373 2069 6e20 7365 7474 696e  ddress in settin
-000070c0: 6773 2e43 4f4f 505f 434d 535f 5445 5354  gs.COOP_CMS_TEST
-000070d0: 5f45 4d41 494c 535d 0a20 2020 2020 2020  _EMAILS].       
-000070e0: 2074 6573 745f 6164 6472 6573 732e 6170   test_address.ap
-000070f0: 7065 6e64 2822 7465 7374 4074 6573 742e  pend("test@test.
-00007100: 7465 7374 2229 0a20 2020 2020 2020 2073  test").        s
-00007110: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00007120: 0a20 2020 2020 2020 2020 2020 2074 6573  .            tes
-00007130: 745f 6164 6472 6573 732c 0a20 2020 2020  t_address,.     
-00007140: 2020 2020 2020 205b 7265 6365 6976 6564         [received
-00007150: 5f65 6d61 696c 2e74 6f5b 305d 2066 6f72  _email.to[0] for
-00007160: 2072 6563 6569 7665 645f 656d 6169 6c20   received_email 
-00007170: 696e 206d 6169 6c2e 6f75 7462 6f78 5d0a  in mail.outbox].
-00007180: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00007190: 2020 666f 7220 7265 6365 6976 6564 5f65    for received_e
-000071a0: 6d61 696c 2069 6e20 6d61 696c 2e6f 7574  mail in mail.out
-000071b0: 626f 783a 0a20 2020 2020 2020 2020 2020  box:.           
-000071c0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-000071d0: 6c28 7265 6365 6976 6564 5f65 6d61 696c  l(received_email
-000071e0: 2e66 726f 6d5f 656d 6169 6c2c 2073 6574  .from_email, set
-000071f0: 7469 6e67 732e 434f 4f50 5f43 4d53 5f46  tings.COOP_CMS_F
-00007200: 524f 4d5f 454d 4149 4c29 0a20 2020 2020  ROM_EMAIL).     
-00007210: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00007220: 7274 4571 7561 6c28 7265 6365 6976 6564  rtEqual(received
-00007230: 5f65 6d61 696c 2e73 7562 6a65 6374 2c20  _email.subject, 
-00007240: 6e65 7773 6c65 7474 6572 2e73 7562 6a65  newsletter.subje
-00007250: 6374 290a 2020 2020 2020 2020 2020 2020  ct).            
-00007260: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-00007270: 7265 6365 6976 6564 5f65 6d61 696c 2e62  received_email.b
-00007280: 6f64 792e 6669 6e64 2827 5469 746c 6527  ody.find('Title'
-00007290: 2920 3e3d 2030 290a 2020 2020 2020 2020  ) >= 0).        
-000072a0: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-000072b0: 7275 6528 7265 6365 6976 6564 5f65 6d61  rue(received_ema
-000072c0: 696c 2e62 6f64 792e 6669 6e64 2827 476f  il.body.find('Go
-000072d0: 6f67 6c65 2729 203e 3d20 3029 0a20 2020  ogle') >= 0).   
-000072e0: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
-000072f0: 7365 7274 5472 7565 2872 6563 6569 7665  sertTrue(receive
-00007300: 645f 656d 6169 6c2e 616c 7465 726e 6174  d_email.alternat
-00007310: 6976 6573 5b30 5d5b 315d 2c20 2274 6578  ives[0][1], "tex
-00007320: 742f 6874 6d6c 2229 0a20 2020 2020 2020  t/html").       
-00007330: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00007340: 5472 7565 2872 6563 6569 7665 645f 656d  True(received_em
-00007350: 6169 6c2e 616c 7465 726e 6174 6976 6573  ail.alternatives
-00007360: 5b30 5d5b 305d 2e66 696e 6428 2754 6974  [0][0].find('Tit
-00007370: 6c65 2729 203e 3d20 3029 0a20 2020 2020  le') >= 0).     
-00007380: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00007390: 7274 5472 7565 2872 6563 6569 7665 645f  rtTrue(received_
-000073a0: 656d 6169 6c2e 616c 7465 726e 6174 6976  email.alternativ
-000073b0: 6573 5b30 5d5b 305d 2e66 696e 6428 2747  es[0][0].find('G
-000073c0: 6f6f 676c 6527 2920 3e3d 2030 290a 2020  oogle') >= 0).  
-000073d0: 2020 2020 2020 2020 2020 7369 7465 5f70            site_p
-000073e0: 7265 6669 7820 3d20 2268 7474 703a 2f2f  refix = "http://
-000073f0: 2220 2b20 7369 7465 2e64 6f6d 6169 6e0a  " + site.domain.
-00007400: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00007410: 2e61 7373 6572 7454 7275 6528 7265 6365  .assertTrue(rece
-00007420: 6976 6564 5f65 6d61 696c 2e61 6c74 6572  ived_email.alter
-00007430: 6e61 7469 7665 735b 305d 5b30 5d2e 6669  natives[0][0].fi
-00007440: 6e64 2873 6974 655f 7072 6566 6978 2920  nd(site_prefix) 
-00007450: 3e3d 2030 290a 2020 2020 2020 2020 2020  >= 0).          
-00007460: 2020 6966 2065 7874 7261 5f63 6865 636b    if extra_check
-00007470: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
-00007480: 2020 2020 6578 7472 615f 6368 6563 6b65      extra_checke
-00007490: 7228 7265 6365 6976 6564 5f65 6d61 696c  r(received_email
-000074a0: 290a 0a20 2020 2040 6f76 6572 7269 6465  )..    @override
-000074b0: 5f73 6574 7469 6e67 7328 0a20 2020 2020  _settings(.     
-000074c0: 2020 2043 4f4f 505f 434d 535f 5445 5354     COOP_CMS_TEST
-000074d0: 5f45 4d41 494c 533d 5b0a 2020 2020 2020  _EMAILS=[.      
-000074e0: 2020 2020 2020 2827 596f 7572 206e 616d        ('Your nam
-000074f0: 6520 3c63 6f6f 705f 636d 7340 6d61 696c  e <coop_cms@mail
-00007500: 696e 6174 6f72 2e63 6f6d 3e27 2c20 2759  inator.com>', 'Y
-00007510: 6f75 7220 6e61 6d65 203c 636f 6f70 5f63  our name <coop_c
-00007520: 6d73 406d 6169 6c69 6e61 746f 722e 636f  ms@mailinator.co
-00007530: 6d3e 2729 2c0a 2020 2020 2020 2020 2020  m>'),.          
-00007540: 2020 2827 5465 7374 2054 776f 203c 7465    ('Test Two <te
-00007550: 7374 3240 6578 616d 706c 652e 636f 6d3e  st2@example.com>
-00007560: 272c 2027 5465 7374 2054 776f 203c 7465  ', 'Test Two <te
-00007570: 7374 3240 6578 616d 706c 652e 636f 6d3e  st2@example.com>
-00007580: 2729 2c0a 2020 2020 2020 2020 5d2c 0a20  '),.        ],. 
-00007590: 2020 2020 2020 2043 4f4f 505f 434d 535f         COOP_CMS_
-000075a0: 4652 4f4d 5f45 4d41 494c 3d27 636f 6e74  FROM_EMAIL='cont
-000075b0: 6163 7440 746f 746f 2e66 7227 0a20 2020  act@toto.fr'.   
-000075c0: 2029 0a20 2020 2064 6566 2074 6573 745f   ).    def test_
-000075d0: 7365 6e64 5f74 6573 745f 6e65 7773 6c65  send_test_newsle
-000075e0: 7474 6572 5f61 6464 5f74 776f 5f65 6d61  tter_add_two_ema
-000075f0: 696c 7328 7365 6c66 2c20 7465 6d70 6c61  ils(self, templa
-00007600: 7465 3d27 7465 7374 2f6e 6577 736c 6574  te='test/newslet
-00007610: 7465 725f 626c 7565 2e68 746d 6c27 2c20  ter_blue.html', 
-00007620: 6578 7472 615f 6368 6563 6b65 723d 4e6f  extra_checker=No
-00007630: 6e65 293a 0a20 2020 2020 2020 2073 6574  ne):.        set
-00007640: 7469 6e67 732e 5349 5445 5f49 4420 3d20  tings.SITE_ID = 
-00007650: 310a 2020 2020 2020 2020 7369 7465 203d  1.        site =
-00007660: 2053 6974 652e 6f62 6a65 6374 732e 6765   Site.objects.ge
-00007670: 7428 6964 3d73 6574 7469 6e67 732e 5349  t(id=settings.SI
-00007680: 5445 5f49 4429 0a20 2020 2020 2020 2073  TE_ID).        s
-00007690: 6974 652e 646f 6d61 696e 203d 2027 746f  ite.domain = 'to
-000076a0: 746f 2e66 7227 0a20 2020 2020 2020 2073  to.fr'.        s
-000076b0: 6974 652e 7361 7665 2829 0a20 2020 200a  ite.save().    .
-000076c0: 2020 2020 2020 2020 7265 6c5f 636f 6e74          rel_cont
-000076d0: 656e 7420 3d20 2727 270a 2020 2020 2020  ent = '''.      
-000076e0: 2020 2020 2020 2020 2020 2020 2020 3c68                <h
-000076f0: 313e 5469 746c 653c 2f68 313e 3c61 2068  1>Title</h1><a h
-00007700: 7265 663d 227b 307d 2f74 6f74 6f2f 223e  ref="{0}/toto/">
-00007710: 3c69 6d67 2073 7263 3d22 7b30 7d2f 746f  <img src="{0}/to
-00007720: 746f 2e6a 7067 223e 3c2f 613e 3c62 7220  to.jpg"></a><br 
-00007730: 2f3e 3c69 6d67 2073 7263 3d22 7b30 7d2f  /><img src="{0}/
-00007740: 746f 746f 2e6a 7067 223e 0a20 2020 2020  toto.jpg">.     
-00007750: 2020 2020 2020 2020 2020 2020 2020 203c                 <
-00007760: 6469 763e 3c61 2068 7265 663d 2268 7474  div><a href="htt
-00007770: 703a 2f2f 7777 772e 676f 6f67 6c65 2e66  p://www.google.f
-00007780: 7222 3e47 6f6f 676c 653c 2f61 3e3c 2f64  r">Google</a></d
-00007790: 6976 3e0a 2020 2020 2020 2020 2020 2020  iv>.            
-000077a0: 2020 2020 2727 270a 2020 2020 2020 2020      '''.        
-000077b0: 6f72 6967 696e 616c 5f64 6174 6120 3d20  original_data = 
-000077c0: 7b0a 2020 2020 2020 2020 2020 2020 2774  {.            't
-000077d0: 656d 706c 6174 6527 3a20 7465 6d70 6c61  emplate': templa
-000077e0: 7465 2c0a 2020 2020 2020 2020 2020 2020  te,.            
-000077f0: 2773 7562 6a65 6374 273a 2027 7465 7374  'subject': 'test
-00007800: 2065 6d61 696c 272c 0a20 2020 2020 2020   email',.       
-00007810: 2020 2020 2027 636f 6e74 656e 7427 3a20       'content': 
-00007820: 7265 6c5f 636f 6e74 656e 742e 666f 726d  rel_content.form
-00007830: 6174 2822 2229 0a20 2020 2020 2020 207d  at("").        }
-00007840: 0a20 2020 2020 2020 206e 6577 736c 6574  .        newslet
-00007850: 7465 7220 3d20 6d6f 6d6d 792e 6d61 6b65  ter = mommy.make
-00007860: 284e 6577 736c 6574 7465 722c 2073 6974  (Newsletter, sit
-00007870: 653d 7369 7465 2c20 2a2a 6f72 6967 696e  e=site, **origin
-00007880: 616c 5f64 6174 6129 0a20 2020 200a 2020  al_data).    .  
-00007890: 2020 2020 2020 7365 6c66 2e5f 6c6f 675f        self._log_
-000078a0: 6173 5f65 6469 746f 7228 290a 2020 2020  as_editor().    
-000078b0: 2020 2020 6461 7461 203d 207b 0a20 2020      data = {.   
-000078c0: 2020 2020 2020 2020 2022 656d 6169 6c73           "emails
-000078d0: 223a 205b 656d 6169 6c5b 305d 2066 6f72  ": [email[0] for
-000078e0: 2065 6d61 696c 2069 6e20 7365 7474 696e   email in settin
-000078f0: 6773 2e43 4f4f 505f 434d 535f 5445 5354  gs.COOP_CMS_TEST
-00007900: 5f45 4d41 494c 535d 2c0a 2020 2020 2020  _EMAILS],.      
-00007910: 2020 2020 2020 2261 6464 6974 696f 6e61        "additiona
-00007920: 6c5f 656d 6169 6c31 223a 2027 7465 7374  l_email1": 'test
-00007930: 4074 6573 742e 7465 7374 272c 0a20 2020  @test.test',.   
-00007940: 2020 2020 2020 2020 2022 6164 6469 7469           "additi
-00007950: 6f6e 616c 5f65 6d61 696c 3222 3a20 2774  onal_email2": 't
-00007960: 6573 7432 4074 6573 7432 2e74 6573 7432  est2@test2.test2
-00007970: 270a 2020 2020 2020 2020 7d0a 2020 2020  '.        }.    
-00007980: 0a20 2020 2020 2020 2075 726c 203d 2072  .        url = r
-00007990: 6576 6572 7365 2827 636f 6f70 5f63 6d73  everse('coop_cms
-000079a0: 5f74 6573 745f 6e65 7773 6c65 7474 6572  _test_newsletter
-000079b0: 272c 2061 7267 733d 5b6e 6577 736c 6574  ', args=[newslet
-000079c0: 7465 722e 6964 5d29 0a20 2020 2020 2020  ter.id]).       
-000079d0: 2072 6573 706f 6e73 6520 3d20 7365 6c66   response = self
-000079e0: 2e63 6c69 656e 742e 706f 7374 2875 726c  .client.post(url
-000079f0: 2c20 6461 7461 290a 2020 2020 2020 2020  , data).        
-00007a00: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00007a10: 2832 3030 2c20 7265 7370 6f6e 7365 2e73  (200, response.s
-00007a20: 7461 7475 735f 636f 6465 290a 2020 2020  tatus_code).    
-00007a30: 2020 2020 7465 7374 5f61 6464 7265 7373      test_address
-00007a40: 203d 205b 7465 7374 5f61 6464 7265 7373   = [test_address
-00007a50: 5b30 5d20 666f 7220 7465 7374 5f61 6464  [0] for test_add
-00007a60: 7265 7373 2069 6e20 7365 7474 696e 6773  ress in settings
-00007a70: 2e43 4f4f 505f 434d 535f 5445 5354 5f45  .COOP_CMS_TEST_E
-00007a80: 4d41 494c 535d 0a20 2020 2020 2020 2074  MAILS].        t
-00007a90: 6573 745f 6164 6472 6573 732e 6170 7065  est_address.appe
-00007aa0: 6e64 2822 7465 7374 4074 6573 742e 7465  nd("test@test.te
-00007ab0: 7374 2229 0a20 2020 2020 2020 2074 6573  st").        tes
-00007ac0: 745f 6164 6472 6573 732e 6170 7065 6e64  t_address.append
-00007ad0: 2822 7465 7374 3240 7465 7374 322e 7465  ("test2@test2.te
-00007ae0: 7374 3222 290a 2020 2020 2020 2020 7365  st2").        se
-00007af0: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
-00007b00: 2020 2020 2020 2020 2020 2020 7465 7374              test
-00007b10: 5f61 6464 7265 7373 2c0a 2020 2020 2020  _address,.      
-00007b20: 2020 2020 2020 5b72 6563 6569 7665 645f        [received_
-00007b30: 656d 6169 6c2e 746f 5b30 5d20 666f 7220  email.to[0] for 
-00007b40: 7265 6365 6976 6564 5f65 6d61 696c 2069  received_email i
-00007b50: 6e20 6d61 696c 2e6f 7574 626f 785d 0a20  n mail.outbox]. 
-00007b60: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00007b70: 2066 6f72 2072 6563 6569 7665 645f 656d   for received_em
-00007b80: 6169 6c20 696e 206d 6169 6c2e 6f75 7462  ail in mail.outb
-00007b90: 6f78 3a0a 2020 2020 2020 2020 2020 2020  ox:.            
-00007ba0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-00007bb0: 2872 6563 6569 7665 645f 656d 6169 6c2e  (received_email.
-00007bc0: 6672 6f6d 5f65 6d61 696c 2c20 7365 7474  from_email, sett
-00007bd0: 696e 6773 2e43 4f4f 505f 434d 535f 4652  ings.COOP_CMS_FR
-00007be0: 4f4d 5f45 4d41 494c 290a 2020 2020 2020  OM_EMAIL).      
-00007bf0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00007c00: 7445 7175 616c 2872 6563 6569 7665 645f  tEqual(received_
-00007c10: 656d 6169 6c2e 7375 626a 6563 742c 206e  email.subject, n
-00007c20: 6577 736c 6574 7465 722e 7375 626a 6563  ewsletter.subjec
-00007c30: 7429 0a20 2020 2020 2020 2020 2020 2073  t).            s
-00007c40: 656c 662e 6173 7365 7274 5472 7565 2872  elf.assertTrue(r
-00007c50: 6563 6569 7665 645f 656d 6169 6c2e 626f  eceived_email.bo
-00007c60: 6479 2e66 696e 6428 2754 6974 6c65 2729  dy.find('Title')
-00007c70: 203e 3d20 3029 0a20 2020 2020 2020 2020   >= 0).         
-00007c80: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-00007c90: 7565 2872 6563 6569 7665 645f 656d 6169  ue(received_emai
-00007ca0: 6c2e 626f 6479 2e66 696e 6428 2747 6f6f  l.body.find('Goo
-00007cb0: 676c 6527 2920 3e3d 2030 290a 2020 2020  gle') >= 0).    
-00007cc0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00007cd0: 6572 7454 7275 6528 7265 6365 6976 6564  ertTrue(received
-00007ce0: 5f65 6d61 696c 2e61 6c74 6572 6e61 7469  _email.alternati
-00007cf0: 7665 735b 305d 5b31 5d2c 2022 7465 7874  ves[0][1], "text
-00007d00: 2f68 746d 6c22 290a 2020 2020 2020 2020  /html").        
-00007d10: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-00007d20: 7275 6528 7265 6365 6976 6564 5f65 6d61  rue(received_ema
-00007d30: 696c 2e61 6c74 6572 6e61 7469 7665 735b  il.alternatives[
-00007d40: 305d 5b30 5d2e 6669 6e64 2827 5469 746c  0][0].find('Titl
-00007d50: 6527 2920 3e3d 2030 290a 2020 2020 2020  e') >= 0).      
-00007d60: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00007d70: 7454 7275 6528 7265 6365 6976 6564 5f65  tTrue(received_e
-00007d80: 6d61 696c 2e61 6c74 6572 6e61 7469 7665  mail.alternative
-00007d90: 735b 305d 5b30 5d2e 6669 6e64 2827 476f  s[0][0].find('Go
-00007da0: 6f67 6c65 2729 203e 3d20 3029 0a20 2020  ogle') >= 0).   
-00007db0: 2020 2020 2020 2020 2073 6974 655f 7072           site_pr
-00007dc0: 6566 6978 203d 2022 6874 7470 3a2f 2f22  efix = "http://"
-00007dd0: 202b 2073 6974 652e 646f 6d61 696e 0a20   + site.domain. 
-00007de0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00007df0: 6173 7365 7274 5472 7565 2872 6563 6569  assertTrue(recei
-00007e00: 7665 645f 656d 6169 6c2e 616c 7465 726e  ved_email.altern
-00007e10: 6174 6976 6573 5b30 5d5b 305d 2e66 696e  atives[0][0].fin
-00007e20: 6428 7369 7465 5f70 7265 6669 7829 203e  d(site_prefix) >
-00007e30: 3d20 3029 0a20 2020 2020 2020 2020 2020  = 0).           
-00007e40: 2069 6620 6578 7472 615f 6368 6563 6b65   if extra_checke
-00007e50: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
-00007e60: 2020 2065 7874 7261 5f63 6865 636b 6572     extra_checker
-00007e70: 2872 6563 6569 7665 645f 656d 6169 6c29  (received_email)
-00007e80: 0a0a 2020 2020 406f 7665 7272 6964 655f  ..    @override_
-00007e90: 7365 7474 696e 6773 280a 2020 2020 2020  settings(.      
-00007ea0: 2020 434f 4f50 5f43 4d53 5f54 4553 545f    COOP_CMS_TEST_
-00007eb0: 454d 4149 4c53 3d5b 0a20 2020 2020 2020  EMAILS=[.       
-00007ec0: 2020 2020 2028 2759 6f75 7220 6e61 6d65       ('Your name
-00007ed0: 203c 636f 6f70 5f63 6d73 406d 6169 6c69   <coop_cms@maili
-00007ee0: 6e61 746f 722e 636f 6d3e 272c 2027 596f  nator.com>', 'Yo
-00007ef0: 7572 206e 616d 6520 3c63 6f6f 705f 636d  ur name <coop_cm
-00007f00: 7340 6d61 696c 696e 6174 6f72 2e63 6f6d  s@mailinator.com
-00007f10: 3e27 292c 0a20 2020 2020 2020 2020 2020  >'),.           
-00007f20: 2028 2754 6573 7420 5477 6f20 3c74 6573   ('Test Two <tes
-00007f30: 7432 4065 7861 6d70 6c65 2e63 6f6d 3e27  t2@example.com>'
-00007f40: 2c20 2754 6573 7420 5477 6f20 3c74 6573  , 'Test Two <tes
-00007f50: 7432 4065 7861 6d70 6c65 2e63 6f6d 3e27  t2@example.com>'
-00007f60: 292c 0a20 2020 2020 2020 205d 2c0a 2020  ),.        ],.  
-00007f70: 2020 2020 2020 434f 4f50 5f43 4d53 5f46        COOP_CMS_F
-00007f80: 524f 4d5f 454d 4149 4c3d 2763 6f6e 7461  ROM_EMAIL='conta
-00007f90: 6374 4074 6f74 6f2e 6672 270a 2020 2020  ct@toto.fr'.    
-00007fa0: 290a 2020 2020 6465 6620 7465 7374 5f73  ).    def test_s
-00007fb0: 656e 645f 7465 7374 5f6e 6577 736c 6574  end_test_newslet
-00007fc0: 7465 725f 6164 645f 7361 6d65 5f65 6d61  ter_add_same_ema
-00007fd0: 696c 7328 7365 6c66 2c20 7465 6d70 6c61  ils(self, templa
-00007fe0: 7465 3d27 7465 7374 2f6e 6577 736c 6574  te='test/newslet
-00007ff0: 7465 725f 626c 7565 2e68 746d 6c27 2c20  ter_blue.html', 
-00008000: 6578 7472 615f 6368 6563 6b65 723d 4e6f  extra_checker=No
-00008010: 6e65 293a 0a20 2020 2020 2020 2073 6574  ne):.        set
-00008020: 7469 6e67 732e 5349 5445 5f49 4420 3d20  tings.SITE_ID = 
-00008030: 310a 2020 2020 2020 2020 7369 7465 203d  1.        site =
-00008040: 2053 6974 652e 6f62 6a65 6374 732e 6765   Site.objects.ge
-00008050: 7428 6964 3d73 6574 7469 6e67 732e 5349  t(id=settings.SI
-00008060: 5445 5f49 4429 0a20 2020 2020 2020 2073  TE_ID).        s
-00008070: 6974 652e 646f 6d61 696e 203d 2027 746f  ite.domain = 'to
-00008080: 746f 2e66 7227 0a20 2020 2020 2020 2073  to.fr'.        s
-00008090: 6974 652e 7361 7665 2829 0a20 2020 200a  ite.save().    .
-000080a0: 2020 2020 2020 2020 7265 6c5f 636f 6e74          rel_cont
-000080b0: 656e 7420 3d20 2727 270a 2020 2020 2020  ent = '''.      
-000080c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000080d0: 2020 3c68 313e 5469 746c 653c 2f68 313e    <h1>Title</h1>
-000080e0: 3c61 2068 7265 663d 227b 307d 2f74 6f74  <a href="{0}/tot
-000080f0: 6f2f 223e 3c69 6d67 2073 7263 3d22 7b30  o/"><img src="{0
-00008100: 7d2f 746f 746f 2e6a 7067 223e 3c2f 613e  }/toto.jpg"></a>
-00008110: 3c62 7220 2f3e 3c69 6d67 2073 7263 3d22  <br /><img src="
-00008120: 7b30 7d2f 746f 746f 2e6a 7067 223e 0a20  {0}/toto.jpg">. 
-00008130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008140: 2020 2020 2020 203c 6469 763e 3c61 2068         <div><a h
-00008150: 7265 663d 2268 7474 703a 2f2f 7777 772e  ref="http://www.
-00008160: 676f 6f67 6c65 2e66 7222 3e47 6f6f 676c  google.fr">Googl
-00008170: 653c 2f61 3e3c 2f64 6976 3e0a 2020 2020  e</a></div>.    
-00008180: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008190: 2727 270a 2020 2020 2020 2020 6f72 6967  '''.        orig
-000081a0: 696e 616c 5f64 6174 6120 3d20 7b0a 2020  inal_data = {.  
-000081b0: 2020 2020 2020 2020 2020 2774 656d 706c            'templ
-000081c0: 6174 6527 3a20 7465 6d70 6c61 7465 2c0a  ate': template,.
-000081d0: 2020 2020 2020 2020 2020 2020 2773 7562              'sub
-000081e0: 6a65 6374 273a 2027 7465 7374 2065 6d61  ject': 'test ema
-000081f0: 696c 272c 0a20 2020 2020 2020 2020 2020  il',.           
-00008200: 2027 636f 6e74 656e 7427 3a20 7265 6c5f   'content': rel_
-00008210: 636f 6e74 656e 742e 666f 726d 6174 2822  content.format("
-00008220: 2229 0a20 2020 2020 2020 207d 0a20 2020  ").        }.   
-00008230: 2020 2020 206e 6577 736c 6574 7465 7220       newsletter 
-00008240: 3d20 6d6f 6d6d 792e 6d61 6b65 284e 6577  = mommy.make(New
-00008250: 736c 6574 7465 722c 2073 6974 653d 7369  sletter, site=si
-00008260: 7465 2c20 2a2a 6f72 6967 696e 616c 5f64  te, **original_d
-00008270: 6174 6129 0a20 2020 200a 2020 2020 2020  ata).    .      
-00008280: 2020 7365 6c66 2e5f 6c6f 675f 6173 5f65    self._log_as_e
-00008290: 6469 746f 7228 290a 2020 2020 2020 2020  ditor().        
-000082a0: 6461 7461 203d 207b 0a20 2020 2020 2020  data = {.       
-000082b0: 2020 2020 2022 656d 6169 6c73 223a 205b       "emails": [
-000082c0: 656d 6169 6c5b 305d 2066 6f72 2065 6d61  email[0] for ema
-000082d0: 696c 2069 6e20 7365 7474 696e 6773 2e43  il in settings.C
-000082e0: 4f4f 505f 434d 535f 5445 5354 5f45 4d41  OOP_CMS_TEST_EMA
-000082f0: 494c 535d 2c0a 2020 2020 2020 2020 2020  ILS],.          
-00008300: 2020 2261 6464 6974 696f 6e61 6c5f 656d    "additional_em
-00008310: 6169 6c31 223a 2027 7465 7374 4074 6573  ail1": 'test@tes
-00008320: 742e 7465 7374 272c 0a20 2020 2020 2020  t.test',.       
-00008330: 2020 2020 2022 6164 6469 7469 6f6e 616c       "additional
-00008340: 5f65 6d61 696c 3222 3a20 2774 6573 7440  _email2": 'test@
-00008350: 7465 7374 2e74 6573 7427 0a20 2020 2020  test.test'.     
-00008360: 2020 207d 0a20 2020 200a 2020 2020 2020     }.    .      
-00008370: 2020 7572 6c20 3d20 7265 7665 7273 6528    url = reverse(
-00008380: 2763 6f6f 705f 636d 735f 7465 7374 5f6e  'coop_cms_test_n
-00008390: 6577 736c 6574 7465 7227 2c20 6172 6773  ewsletter', args
-000083a0: 3d5b 6e65 7773 6c65 7474 6572 2e69 645d  =[newsletter.id]
-000083b0: 290a 2020 2020 2020 2020 7265 7370 6f6e  ).        respon
-000083c0: 7365 203d 2073 656c 662e 636c 6965 6e74  se = self.client
-000083d0: 2e70 6f73 7428 7572 6c2c 2064 6174 6129  .post(url, data)
-000083e0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-000083f0: 7365 7274 4571 7561 6c28 3230 302c 2072  sertEqual(200, r
-00008400: 6573 706f 6e73 652e 7374 6174 7573 5f63  esponse.status_c
-00008410: 6f64 6529 0a20 2020 2020 2020 2074 6573  ode).        tes
-00008420: 745f 6164 6472 6573 7320 3d20 5b74 6573  t_address = [tes
-00008430: 745f 6164 6472 6573 735b 305d 2066 6f72  t_address[0] for
-00008440: 2074 6573 745f 6164 6472 6573 7320 696e   test_address in
-00008450: 2073 6574 7469 6e67 732e 434f 4f50 5f43   settings.COOP_C
-00008460: 4d53 5f54 4553 545f 454d 4149 4c53 5d0a  MS_TEST_EMAILS].
-00008470: 2020 2020 2020 2020 7465 7374 5f61 6464          test_add
-00008480: 7265 7373 2e61 7070 656e 6428 2274 6573  ress.append("tes
-00008490: 7440 7465 7374 2e74 6573 7422 290a 2020  t@test.test").  
-000084a0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-000084b0: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
-000084c0: 2020 2020 7465 7374 5f61 6464 7265 7373      test_address
-000084d0: 2c0a 2020 2020 2020 2020 2020 2020 5b72  ,.            [r
-000084e0: 6563 6569 7665 645f 656d 6169 6c2e 746f  eceived_email.to
-000084f0: 5b30 5d20 666f 7220 7265 6365 6976 6564  [0] for received
-00008500: 5f65 6d61 696c 2069 6e20 6d61 696c 2e6f  _email in mail.o
-00008510: 7574 626f 785d 0a20 2020 2020 2020 2029  utbox].        )
-00008520: 0a20 2020 2020 2020 2066 6f72 2072 6563  .        for rec
-00008530: 6569 7665 645f 656d 6169 6c20 696e 206d  eived_email in m
-00008540: 6169 6c2e 6f75 7462 6f78 3a0a 2020 2020  ail.outbox:.    
-00008550: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-00008560: 6572 7445 7175 616c 2872 6563 6569 7665  ertEqual(receive
-00008570: 645f 656d 6169 6c2e 6672 6f6d 5f65 6d61  d_email.from_ema
-00008580: 696c 2c20 7365 7474 696e 6773 2e43 4f4f  il, settings.COO
-00008590: 505f 434d 535f 4652 4f4d 5f45 4d41 494c  P_CMS_FROM_EMAIL
-000085a0: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
-000085b0: 6c66 2e61 7373 6572 7445 7175 616c 2872  lf.assertEqual(r
-000085c0: 6563 6569 7665 645f 656d 6169 6c2e 7375  eceived_email.su
-000085d0: 626a 6563 742c 206e 6577 736c 6574 7465  bject, newslette
-000085e0: 722e 7375 626a 6563 7429 0a20 2020 2020  r.subject).     
-000085f0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-00008600: 7274 5472 7565 2872 6563 6569 7665 645f  rtTrue(received_
-00008610: 656d 6169 6c2e 626f 6479 2e66 696e 6428  email.body.find(
-00008620: 2754 6974 6c65 2729 203e 3d20 3029 0a20  'Title') >= 0). 
-00008630: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00008640: 6173 7365 7274 5472 7565 2872 6563 6569  assertTrue(recei
-00008650: 7665 645f 656d 6169 6c2e 626f 6479 2e66  ved_email.body.f
-00008660: 696e 6428 2747 6f6f 676c 6527 2920 3e3d  ind('Google') >=
-00008670: 2030 290a 2020 2020 2020 2020 2020 2020   0).            
-00008680: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-00008690: 7265 6365 6976 6564 5f65 6d61 696c 2e61  received_email.a
-000086a0: 6c74 6572 6e61 7469 7665 735b 305d 5b31  lternatives[0][1
-000086b0: 5d2c 2022 7465 7874 2f68 746d 6c22 290a  ], "text/html").
-000086c0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-000086d0: 2e61 7373 6572 7454 7275 6528 7265 6365  .assertTrue(rece
-000086e0: 6976 6564 5f65 6d61 696c 2e61 6c74 6572  ived_email.alter
-000086f0: 6e61 7469 7665 735b 305d 5b30 5d2e 6669  natives[0][0].fi
-00008700: 6e64 2827 5469 746c 6527 2920 3e3d 2030  nd('Title') >= 0
-00008710: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
-00008720: 6c66 2e61 7373 6572 7454 7275 6528 7265  lf.assertTrue(re
-00008730: 6365 6976 6564 5f65 6d61 696c 2e61 6c74  ceived_email.alt
-00008740: 6572 6e61 7469 7665 735b 305d 5b30 5d2e  ernatives[0][0].
-00008750: 6669 6e64 2827 476f 6f67 6c65 2729 203e  find('Google') >
-00008760: 3d20 3029 0a20 2020 2020 2020 2020 2020  = 0).           
-00008770: 2073 6974 655f 7072 6566 6978 203d 2022   site_prefix = "
-00008780: 6874 7470 3a2f 2f22 202b 2073 6974 652e  http://" + site.
-00008790: 646f 6d61 696e 0a20 2020 2020 2020 2020  domain.         
-000087a0: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-000087b0: 7565 2872 6563 6569 7665 645f 656d 6169  ue(received_emai
-000087c0: 6c2e 616c 7465 726e 6174 6976 6573 5b30  l.alternatives[0
-000087d0: 5d5b 305d 2e66 696e 6428 7369 7465 5f70  ][0].find(site_p
-000087e0: 7265 6669 7829 203e 3d20 3029 0a20 2020  refix) >= 0).   
-000087f0: 2020 2020 2020 2020 2069 6620 6578 7472           if extr
-00008800: 615f 6368 6563 6b65 723a 0a20 2020 2020  a_checker:.     
-00008810: 2020 2020 2020 2020 2020 2065 7874 7261             extra
-00008820: 5f63 6865 636b 6572 2872 6563 6569 7665  _checker(receive
-00008830: 645f 656d 6169 6c29 0a0a 2020 2020 406f  d_email)..    @o
-00008840: 7665 7272 6964 655f 7365 7474 696e 6773  verride_settings
-00008850: 280a 2020 2020 2020 2020 434f 4f50 5f43  (.        COOP_C
-00008860: 4d53 5f54 4553 545f 454d 4149 4c53 3d5b  MS_TEST_EMAILS=[
-00008870: 0a20 2020 2020 2020 2020 2020 2028 2759  .            ('Y
-00008880: 6f75 7220 6e61 6d65 203c 636f 6f70 5f63  our name <coop_c
-00008890: 6d73 406d 6169 6c69 6e61 746f 722e 636f  ms@mailinator.co
-000088a0: 6d3e 272c 2027 596f 7572 206e 616d 6527  m>', 'Your name'
-000088b0: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-000088c0: 7465 7374 3240 6578 616d 706c 652e 636f  test2@example.co
-000088d0: 6d27 2c0a 2020 2020 2020 2020 5d2c 0a20  m',.        ],. 
-000088e0: 2020 2020 2020 2043 4f4f 505f 434d 535f         COOP_CMS_
-000088f0: 4652 4f4d 5f45 4d41 494c 3d27 636f 6e74  FROM_EMAIL='cont
-00008900: 6163 7440 746f 746f 2e66 7227 0a20 2020  act@toto.fr'.   
-00008910: 2029 0a20 2020 2064 6566 2074 6573 745f   ).    def test_
-00008920: 7365 6e64 5f74 6573 745f 6e65 7773 6c65  send_test_newsle
-00008930: 7474 6572 5f6f 6e6c 795f 6368 6f69 6365  tter_only_choice
-00008940: 7328 7365 6c66 2c20 7465 6d70 6c61 7465  s(self, template
-00008950: 3d27 7465 7374 2f6e 6577 736c 6574 7465  ='test/newslette
-00008960: 725f 626c 7565 2e68 746d 6c27 2c20 6578  r_blue.html', ex
-00008970: 7472 615f 6368 6563 6b65 723d 4e6f 6e65  tra_checker=None
-00008980: 293a 0a20 2020 2020 2020 2073 6574 7469  ):.        setti
-00008990: 6e67 732e 5349 5445 5f49 4420 3d20 310a  ngs.SITE_ID = 1.
-000089a0: 2020 2020 2020 2020 7369 7465 203d 2053          site = S
-000089b0: 6974 652e 6f62 6a65 6374 732e 6765 7428  ite.objects.get(
-000089c0: 6964 3d73 6574 7469 6e67 732e 5349 5445  id=settings.SITE
-000089d0: 5f49 4429 0a20 2020 2020 2020 2073 6974  _ID).        sit
-000089e0: 652e 646f 6d61 696e 203d 2027 746f 746f  e.domain = 'toto
-000089f0: 2e66 7227 0a20 2020 2020 2020 2073 6974  .fr'.        sit
-00008a00: 652e 7361 7665 2829 0a0a 2020 2020 2020  e.save()..      
-00008a10: 2020 7265 6c5f 636f 6e74 656e 7420 3d20    rel_content = 
-00008a20: 2727 270a 2020 2020 2020 2020 2020 2020  '''.            
-00008a30: 3c68 313e 5469 746c 653c 2f68 313e 3c61  <h1>Title</h1><a
-00008a40: 2068 7265 663d 227b 307d 2f74 6f74 6f2f   href="{0}/toto/
-00008a50: 223e 3c69 6d67 2073 7263 3d22 7b30 7d2f  "><img src="{0}/
-00008a60: 746f 746f 2e6a 7067 223e 3c2f 613e 3c62  toto.jpg"></a><b
-00008a70: 7220 2f3e 3c69 6d67 2073 7263 3d22 7b30  r /><img src="{0
-00008a80: 7d2f 746f 746f 2e6a 7067 223e 0a20 2020  }/toto.jpg">.   
-00008a90: 2020 2020 2020 2020 203c 6469 763e 3c61           <div><a
-00008aa0: 2068 7265 663d 2268 7474 703a 2f2f 7777   href="http://ww
-00008ab0: 772e 676f 6f67 6c65 2e66 7222 3e47 6f6f  w.google.fr">Goo
-00008ac0: 676c 653c 2f61 3e3c 2f64 6976 3e0a 2020  gle</a></div>.  
-00008ad0: 2020 2020 2020 2727 270a 2020 2020 2020        '''.      
-00008ae0: 2020 6f72 6967 696e 616c 5f64 6174 6120    original_data 
-00008af0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00008b00: 2774 656d 706c 6174 6527 3a20 7465 6d70  'template': temp
-00008b10: 6c61 7465 2c0a 2020 2020 2020 2020 2020  late,.          
-00008b20: 2020 2773 7562 6a65 6374 273a 2027 7465    'subject': 'te
-00008b30: 7374 2065 6d61 696c 272c 0a20 2020 2020  st email',.     
-00008b40: 2020 2020 2020 2027 636f 6e74 656e 7427         'content'
-00008b50: 3a20 7265 6c5f 636f 6e74 656e 742e 666f  : rel_content.fo
-00008b60: 726d 6174 2822 2229 0a20 2020 2020 2020  rmat("").       
-00008b70: 207d 0a20 2020 2020 2020 206e 6577 736c   }.        newsl
-00008b80: 6574 7465 7220 3d20 6d6f 6d6d 792e 6d61  etter = mommy.ma
-00008b90: 6b65 284e 6577 736c 6574 7465 722c 2073  ke(Newsletter, s
-00008ba0: 6974 653d 7369 7465 2c20 2a2a 6f72 6967  ite=site, **orig
-00008bb0: 696e 616c 5f64 6174 6129 0a0a 2020 2020  inal_data)..    
-00008bc0: 2020 2020 7365 6c66 2e5f 6c6f 675f 6173      self._log_as
-00008bd0: 5f65 6469 746f 7228 290a 2020 2020 2020  _editor().      
-00008be0: 2020 656d 6169 6c73 203d 205b 2759 6f75    emails = ['You
-00008bf0: 7220 6e61 6d65 203c 636f 6f70 5f63 6d73  r name <coop_cms
-00008c00: 406d 6169 6c69 6e61 746f 722e 636f 6d3e  @mailinator.com>
-00008c10: 272c 2027 7465 7374 3240 6578 616d 706c  ', 'test2@exampl
-00008c20: 652e 636f 6d27 5d0a 2020 2020 2020 2020  e.com'].        
-00008c30: 6461 7461 203d 207b 0a20 2020 2020 2020  data = {.       
-00008c40: 2020 2020 2022 656d 6169 6c73 223a 2065       "emails": e
-00008c50: 6d61 696c 732c 0a20 2020 2020 2020 2020  mails,.         
-00008c60: 2020 2022 6164 6469 7469 6f6e 616c 5f65     "additional_e
-00008c70: 6d61 696c 3122 3a20 2727 2c0a 2020 2020  mail1": '',.    
-00008c80: 2020 2020 2020 2020 2261 6464 6974 696f          "additio
-00008c90: 6e61 6c5f 656d 6169 6c32 223a 2027 270a  nal_email2": ''.
-00008ca0: 2020 2020 2020 2020 7d0a 0a20 2020 2020          }..     
-00008cb0: 2020 2075 726c 203d 2072 6576 6572 7365     url = reverse
-00008cc0: 2827 636f 6f70 5f63 6d73 5f74 6573 745f  ('coop_cms_test_
-00008cd0: 6e65 7773 6c65 7474 6572 272c 2061 7267  newsletter', arg
-00008ce0: 733d 5b6e 6577 736c 6574 7465 722e 6964  s=[newsletter.id
-00008cf0: 5d29 0a20 2020 2020 2020 2072 6573 706f  ]).        respo
-00008d00: 6e73 6520 3d20 7365 6c66 2e63 6c69 656e  nse = self.clien
-00008d10: 742e 706f 7374 2875 726c 2c20 6461 7461  t.post(url, data
-00008d20: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-00008d30: 7373 6572 7445 7175 616c 2832 3030 2c20  ssertEqual(200, 
-00008d40: 7265 7370 6f6e 7365 2e73 7461 7475 735f  response.status_
-00008d50: 636f 6465 290a 2020 2020 2020 2020 7465  code).        te
-00008d60: 7374 5f61 6464 7265 7373 203d 2065 6d61  st_address = ema
-00008d70: 696c 730a 2020 2020 2020 2020 7365 6c66  ils.        self
-00008d80: 2e61 7373 6572 7445 7175 616c 280a 2020  .assertEqual(.  
-00008d90: 2020 2020 2020 2020 2020 7465 7374 5f61            test_a
-00008da0: 6464 7265 7373 2c0a 2020 2020 2020 2020  ddress,.        
-00008db0: 2020 2020 5b72 6563 6569 7665 645f 656d      [received_em
-00008dc0: 6169 6c2e 746f 5b30 5d20 666f 7220 7265  ail.to[0] for re
-00008dd0: 6365 6976 6564 5f65 6d61 696c 2069 6e20  ceived_email in 
-00008de0: 6d61 696c 2e6f 7574 626f 785d 0a20 2020  mail.outbox].   
-00008df0: 2020 2020 2029 0a20 2020 2020 2020 2066       ).        f
-00008e00: 6f72 2072 6563 6569 7665 645f 656d 6169  or received_emai
-00008e10: 6c20 696e 206d 6169 6c2e 6f75 7462 6f78  l in mail.outbox
-00008e20: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-00008e30: 6c66 2e61 7373 6572 7445 7175 616c 2872  lf.assertEqual(r
-00008e40: 6563 6569 7665 645f 656d 6169 6c2e 6672  eceived_email.fr
-00008e50: 6f6d 5f65 6d61 696c 2c20 7365 7474 696e  om_email, settin
-00008e60: 6773 2e43 4f4f 505f 434d 535f 4652 4f4d  gs.COOP_CMS_FROM
-00008e70: 5f45 4d41 494c 290a 2020 2020 2020 2020  _EMAIL).        
-00008e80: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-00008e90: 7175 616c 2872 6563 6569 7665 645f 656d  qual(received_em
-00008ea0: 6169 6c2e 7375 626a 6563 742c 206e 6577  ail.subject, new
-00008eb0: 736c 6574 7465 722e 7375 626a 6563 7429  sletter.subject)
-00008ec0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00008ed0: 662e 6173 7365 7274 5472 7565 2872 6563  f.assertTrue(rec
-00008ee0: 6569 7665 645f 656d 6169 6c2e 626f 6479  eived_email.body
-00008ef0: 2e66 696e 6428 2754 6974 6c65 2729 203e  .find('Title') >
-00008f00: 3d20 3029 0a20 2020 2020 2020 2020 2020  = 0).           
-00008f10: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-00008f20: 2872 6563 6569 7665 645f 656d 6169 6c2e  (received_email.
-00008f30: 626f 6479 2e66 696e 6428 2747 6f6f 676c  body.find('Googl
-00008f40: 6527 2920 3e3d 2030 290a 2020 2020 2020  e') >= 0).      
-00008f50: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-00008f60: 7454 7275 6528 7265 6365 6976 6564 5f65  tTrue(received_e
-00008f70: 6d61 696c 2e61 6c74 6572 6e61 7469 7665  mail.alternative
-00008f80: 735b 305d 5b31 5d2c 2022 7465 7874 2f68  s[0][1], "text/h
-00008f90: 746d 6c22 290a 2020 2020 2020 2020 2020  tml").          
-00008fa0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-00008fb0: 6528 7265 6365 6976 6564 5f65 6d61 696c  e(received_email
-00008fc0: 2e61 6c74 6572 6e61 7469 7665 735b 305d  .alternatives[0]
-00008fd0: 5b30 5d2e 6669 6e64 2827 5469 746c 6527  [0].find('Title'
-00008fe0: 2920 3e3d 2030 290a 2020 2020 2020 2020  ) >= 0).        
-00008ff0: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-00009000: 7275 6528 7265 6365 6976 6564 5f65 6d61  rue(received_ema
-00009010: 696c 2e61 6c74 6572 6e61 7469 7665 735b  il.alternatives[
-00009020: 305d 5b30 5d2e 6669 6e64 2827 476f 6f67  0][0].find('Goog
-00009030: 6c65 2729 203e 3d20 3029 0a20 2020 2020  le') >= 0).     
-00009040: 2020 2020 2020 2073 6974 655f 7072 6566         site_pref
-00009050: 6978 203d 2022 6874 7470 3a2f 2f22 202b  ix = "http://" +
-00009060: 2073 6974 652e 646f 6d61 696e 0a20 2020   site.domain.   
-00009070: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
-00009080: 7365 7274 5472 7565 2872 6563 6569 7665  sertTrue(receive
-00009090: 645f 656d 6169 6c2e 616c 7465 726e 6174  d_email.alternat
-000090a0: 6976 6573 5b30 5d5b 305d 2e66 696e 6428  ives[0][0].find(
-000090b0: 7369 7465 5f70 7265 6669 7829 203e 3d20  site_prefix) >= 
-000090c0: 3029 0a20 2020 2020 2020 2020 2020 2069  0).            i
-000090d0: 6620 6578 7472 615f 6368 6563 6b65 723a  f extra_checker:
-000090e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000090f0: 2065 7874 7261 5f63 6865 636b 6572 2872   extra_checker(r
-00009100: 6563 6569 7665 645f 656d 6169 6c29 0a0a  eceived_email)..
-00009110: 2020 2020 406f 7665 7272 6964 655f 7365      @override_se
-00009120: 7474 696e 6773 280a 2020 2020 2020 2020  ttings(.        
-00009130: 434f 4f50 5f43 4d53 5f54 4553 545f 454d  COOP_CMS_TEST_EM
-00009140: 4149 4c53 3d5b 0a20 2020 2020 2020 2020  AILS=[.         
-00009150: 2020 2027 596f 7572 206e 616d 6520 3c63     'Your name <c
-00009160: 6f6f 705f 636d 7340 6d61 696c 696e 6174  oop_cms@mailinat
-00009170: 6f72 2e63 6f6d 3e27 2c0a 2020 2020 2020  or.com>',.      
-00009180: 2020 2020 2020 2827 5465 7374 2054 776f        ('Test Two
-00009190: 203c 7465 7374 3240 6578 616d 706c 652e   <test2@example.
-000091a0: 636f 6d3e 272c 2027 5465 7374 2054 776f  com>', 'Test Two
-000091b0: 203c 7465 7374 3240 6578 616d 706c 652e   <test2@example.
-000091c0: 636f 6d3e 2729 2c0a 2020 2020 2020 2020  com>'),.        
-000091d0: 5d2c 0a20 2020 2020 2020 2043 4f4f 505f  ],.        COOP_
-000091e0: 434d 535f 4652 4f4d 5f45 4d41 494c 3d27  CMS_FROM_EMAIL='
-000091f0: 636f 6e74 6163 7440 746f 746f 2e66 7227  contact@toto.fr'
-00009200: 0a20 2020 2029 0a20 2020 2064 6566 2074  .    ).    def t
-00009210: 6573 745f 7365 6e64 5f74 6573 745f 6e65  est_send_test_ne
-00009220: 7773 6c65 7474 6572 5f61 6464 5f65 6d61  wsletter_add_ema
-00009230: 696c 5f61 6e64 5f6e 6f5f 6368 6f69 6365  il_and_no_choice
-00009240: 2873 656c 662c 2074 656d 706c 6174 653d  (self, template=
-00009250: 2774 6573 742f 6e65 7773 6c65 7474 6572  'test/newsletter
-00009260: 5f62 6c75 652e 6874 6d6c 272c 2065 7874  _blue.html', ext
-00009270: 7261 5f63 6865 636b 6572 3d4e 6f6e 6529  ra_checker=None)
-00009280: 3a0a 2020 2020 2020 2020 7365 7474 696e  :.        settin
-00009290: 6773 2e53 4954 455f 4944 203d 2031 0a20  gs.SITE_ID = 1. 
-000092a0: 2020 2020 2020 2073 6974 6520 3d20 5369         site = Si
-000092b0: 7465 2e6f 626a 6563 7473 2e67 6574 2869  te.objects.get(i
-000092c0: 643d 7365 7474 696e 6773 2e53 4954 455f  d=settings.SITE_
-000092d0: 4944 290a 2020 2020 2020 2020 7369 7465  ID).        site
-000092e0: 2e64 6f6d 6169 6e20 3d20 2774 6f74 6f2e  .domain = 'toto.
-000092f0: 6672 270a 2020 2020 2020 2020 7369 7465  fr'.        site
-00009300: 2e73 6176 6528 290a 2020 2020 0a20 2020  .save().    .   
-00009310: 2020 2020 2072 656c 5f63 6f6e 7465 6e74       rel_content
-00009320: 203d 2027 2727 0a20 2020 2020 2020 2020   = '''.         
-00009330: 2020 203c 6831 3e54 6974 6c65 3c2f 6831     <h1>Title</h1
-00009340: 3e3c 6120 6872 6566 3d22 7b30 7d2f 746f  ><a href="{0}/to
-00009350: 746f 2f22 3e3c 696d 6720 7372 633d 227b  to/"><img src="{
-00009360: 307d 2f74 6f74 6f2e 6a70 6722 3e3c 2f61  0}/toto.jpg"></a
-00009370: 3e3c 6272 202f 3e3c 696d 6720 7372 633d  ><br /><img src=
-00009380: 227b 307d 2f74 6f74 6f2e 6a70 6722 3e0a  "{0}/toto.jpg">.
-00009390: 2020 2020 2020 2020 2020 2020 3c64 6976              <div
-000093a0: 3e3c 6120 6872 6566 3d22 6874 7470 3a2f  ><a href="http:/
-000093b0: 2f77 7777 2e67 6f6f 676c 652e 6672 223e  /www.google.fr">
-000093c0: 476f 6f67 6c65 3c2f 613e 3c2f 6469 763e  Google</a></div>
-000093d0: 0a20 2020 2020 2020 2027 2727 0a20 2020  .        '''.   
-000093e0: 2020 2020 206f 7269 6769 6e61 6c5f 6461       original_da
-000093f0: 7461 203d 207b 0a20 2020 2020 2020 2020  ta = {.         
-00009400: 2020 2027 7465 6d70 6c61 7465 273a 2074     'template': t
-00009410: 656d 706c 6174 652c 0a20 2020 2020 2020  emplate,.       
-00009420: 2020 2020 2027 7375 626a 6563 7427 3a20       'subject': 
-00009430: 2774 6573 7420 656d 6169 6c27 2c0a 2020  'test email',.  
-00009440: 2020 2020 2020 2020 2020 2763 6f6e 7465            'conte
-00009450: 6e74 273a 2072 656c 5f63 6f6e 7465 6e74  nt': rel_content
-00009460: 2e66 6f72 6d61 7428 2222 290a 2020 2020  .format("").    
-00009470: 2020 2020 7d0a 2020 2020 2020 2020 6e65      }.        ne
-00009480: 7773 6c65 7474 6572 203d 206d 6f6d 6d79  wsletter = mommy
-00009490: 2e6d 616b 6528 4e65 7773 6c65 7474 6572  .make(Newsletter
-000094a0: 2c20 7369 7465 3d73 6974 652c 202a 2a6f  , site=site, **o
-000094b0: 7269 6769 6e61 6c5f 6461 7461 290a 2020  riginal_data).  
-000094c0: 2020 0a20 2020 2020 2020 2073 656c 662e    .        self.
-000094d0: 5f6c 6f67 5f61 735f 6564 6974 6f72 2829  _log_as_editor()
-000094e0: 0a20 2020 2020 2020 2064 6174 6120 3d20  .        data = 
-000094f0: 7b0a 2020 2020 2020 2020 2020 2020 2261  {.            "a
-00009500: 6464 6974 696f 6e61 6c5f 656d 6169 6c31  dditional_email1
-00009510: 223a 2027 7465 7374 4074 6573 742e 7465  ": 'test@test.te
-00009520: 7374 272c 0a20 2020 2020 2020 2020 2020  st',.           
-00009530: 2022 6164 6469 7469 6f6e 616c 5f65 6d61   "additional_ema
-00009540: 696c 3222 3a20 2727 0a20 2020 2020 2020  il2": ''.       
-00009550: 207d 0a20 2020 200a 2020 2020 2020 2020   }.    .        
-00009560: 7572 6c20 3d20 7265 7665 7273 6528 2763  url = reverse('c
-00009570: 6f6f 705f 636d 735f 7465 7374 5f6e 6577  oop_cms_test_new
-00009580: 736c 6574 7465 7227 2c20 6172 6773 3d5b  sletter', args=[
-00009590: 6e65 7773 6c65 7474 6572 2e69 645d 290a  newsletter.id]).
-000095a0: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-000095b0: 203d 2073 656c 662e 636c 6965 6e74 2e70   = self.client.p
-000095c0: 6f73 7428 7572 6c2c 2064 6174 6129 0a20  ost(url, data). 
-000095d0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-000095e0: 7274 4571 7561 6c28 3230 302c 2072 6573  rtEqual(200, res
-000095f0: 706f 6e73 652e 7374 6174 7573 5f63 6f64  ponse.status_cod
-00009600: 6529 0a20 2020 2020 2020 2074 6573 745f  e).        test_
-00009610: 6164 6472 6573 7320 3d20 5b5d 0a20 2020  address = [].   
-00009620: 2020 2020 2074 6573 745f 6164 6472 6573       test_addres
-00009630: 732e 6170 7065 6e64 2822 7465 7374 4074  s.append("test@t
-00009640: 6573 742e 7465 7374 2229 0a20 2020 2020  est.test").     
-00009650: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-00009660: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
-00009670: 2074 6573 745f 6164 6472 6573 732c 0a20   test_address,. 
-00009680: 2020 2020 2020 2020 2020 205b 7265 6365             [rece
-00009690: 6976 6564 5f65 6d61 696c 2e74 6f5b 305d  ived_email.to[0]
-000096a0: 2066 6f72 2072 6563 6569 7665 645f 656d   for received_em
-000096b0: 6169 6c20 696e 206d 6169 6c2e 6f75 7462  ail in mail.outb
-000096c0: 6f78 5d0a 2020 2020 2020 2020 290a 2020  ox].        ).  
-000096d0: 2020 2020 2020 666f 7220 7265 6365 6976        for receiv
-000096e0: 6564 5f65 6d61 696c 2069 6e20 6d61 696c  ed_email in mail
-000096f0: 2e6f 7574 626f 783a 0a20 2020 2020 2020  .outbox:.       
-00009700: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-00009710: 4571 7561 6c28 7265 6365 6976 6564 5f65  Equal(received_e
-00009720: 6d61 696c 2e66 726f 6d5f 656d 6169 6c2c  mail.from_email,
-00009730: 2073 6574 7469 6e67 732e 434f 4f50 5f43   settings.COOP_C
-00009740: 4d53 5f46 524f 4d5f 454d 4149 4c29 0a20  MS_FROM_EMAIL). 
-00009750: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-00009760: 6173 7365 7274 4571 7561 6c28 7265 6365  assertEqual(rece
-00009770: 6976 6564 5f65 6d61 696c 2e73 7562 6a65  ived_email.subje
-00009780: 6374 2c20 6e65 7773 6c65 7474 6572 2e73  ct, newsletter.s
-00009790: 7562 6a65 6374 290a 2020 2020 2020 2020  ubject).        
-000097a0: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-000097b0: 7275 6528 7265 6365 6976 6564 5f65 6d61  rue(received_ema
-000097c0: 696c 2e62 6f64 792e 6669 6e64 2827 5469  il.body.find('Ti
-000097d0: 746c 6527 2920 3e3d 2030 290a 2020 2020  tle') >= 0).    
-000097e0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-000097f0: 6572 7454 7275 6528 7265 6365 6976 6564  ertTrue(received
-00009800: 5f65 6d61 696c 2e62 6f64 792e 6669 6e64  _email.body.find
-00009810: 2827 476f 6f67 6c65 2729 203e 3d20 3029  ('Google') >= 0)
-00009820: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00009830: 662e 6173 7365 7274 5472 7565 2872 6563  f.assertTrue(rec
-00009840: 6569 7665 645f 656d 6169 6c2e 616c 7465  eived_email.alte
-00009850: 726e 6174 6976 6573 5b30 5d5b 315d 2c20  rnatives[0][1], 
-00009860: 2274 6578 742f 6874 6d6c 2229 0a20 2020  "text/html").   
-00009870: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
-00009880: 7365 7274 5472 7565 2872 6563 6569 7665  sertTrue(receive
-00009890: 645f 656d 6169 6c2e 616c 7465 726e 6174  d_email.alternat
-000098a0: 6976 6573 5b30 5d5b 305d 2e66 696e 6428  ives[0][0].find(
-000098b0: 2754 6974 6c65 2729 203e 3d20 3029 0a20  'Title') >= 0). 
-000098c0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000098d0: 6173 7365 7274 5472 7565 2872 6563 6569  assertTrue(recei
-000098e0: 7665 645f 656d 6169 6c2e 616c 7465 726e  ved_email.altern
-000098f0: 6174 6976 6573 5b30 5d5b 305d 2e66 696e  atives[0][0].fin
-00009900: 6428 2747 6f6f 676c 6527 2920 3e3d 2030  d('Google') >= 0
-00009910: 290a 2020 2020 2020 2020 2020 2020 7369  ).            si
-00009920: 7465 5f70 7265 6669 7820 3d20 2268 7474  te_prefix = "htt
-00009930: 703a 2f2f 2220 2b20 7369 7465 2e64 6f6d  p://" + site.dom
-00009940: 6169 6e0a 2020 2020 2020 2020 2020 2020  ain.            
-00009950: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-00009960: 7265 6365 6976 6564 5f65 6d61 696c 2e61  received_email.a
-00009970: 6c74 6572 6e61 7469 7665 735b 305d 5b30  lternatives[0][0
-00009980: 5d2e 6669 6e64 2873 6974 655f 7072 6566  ].find(site_pref
-00009990: 6978 2920 3e3d 2030 290a 2020 2020 2020  ix) >= 0).      
-000099a0: 2020 2020 2020 6966 2065 7874 7261 5f63        if extra_c
-000099b0: 6865 636b 6572 3a0a 2020 2020 2020 2020  hecker:.        
-000099c0: 2020 2020 2020 2020 6578 7472 615f 6368          extra_ch
-000099d0: 6563 6b65 7228 7265 6365 6976 6564 5f65  ecker(received_e
-000099e0: 6d61 696c 290a 2020 2020 2020 2020 0a20  mail).        . 
-000099f0: 2020 2064 6566 2074 6573 745f 7363 6865     def test_sche
-00009a00: 6475 6c65 5f6e 6577 736c 6574 7465 725f  dule_newsletter_
-00009a10: 7365 6e64 696e 6728 7365 6c66 293a 0a20  sending(self):. 
-00009a20: 2020 2020 2020 206e 6577 736c 6574 7465         newslette
-00009a30: 7220 3d20 6d6f 6d6d 792e 6d61 6b65 284e  r = mommy.make(N
-00009a40: 6577 736c 6574 7465 7229 0a20 2020 2020  ewsletter).     
-00009a50: 2020 200a 2020 2020 2020 2020 7365 6c66     .        self
-00009a60: 2e5f 6c6f 675f 6173 5f65 6469 746f 7228  ._log_as_editor(
-00009a70: 290a 2020 2020 2020 2020 7572 6c20 3d20  ).        url = 
-00009a80: 7265 7665 7273 6528 2763 6f6f 705f 636d  reverse('coop_cm
-00009a90: 735f 7363 6865 6475 6c65 5f6e 6577 736c  s_schedule_newsl
-00009aa0: 6574 7465 725f 7365 6e64 696e 6727 2c20  etter_sending', 
-00009ab0: 6172 6773 3d5b 6e65 7773 6c65 7474 6572  args=[newsletter
-00009ac0: 2e69 645d 290a 2020 2020 2020 2020 0a20  .id]).        . 
-00009ad0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-00009ae0: 3d20 7365 6c66 2e63 6c69 656e 742e 6765  = self.client.ge
-00009af0: 7428 7572 6c29 0a20 2020 2020 2020 2073  t(url).        s
-00009b00: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00009b10: 3230 302c 2072 6573 706f 6e73 652e 7374  200, response.st
-00009b20: 6174 7573 5f63 6f64 6529 0a20 2020 2020  atus_code).     
-00009b30: 2020 200a 2020 2020 2020 2020 7363 685f     .        sch_
-00009b40: 6474 203d 2022 3230 3330 2d31 322d 3132  dt = "2030-12-12
-00009b50: 2031 323a 3030 3a30 3022 0a20 2020 2020   12:00:00".     
-00009b60: 2020 2072 6573 706f 6e73 6520 3d20 7365     response = se
-00009b70: 6c66 2e63 6c69 656e 742e 706f 7374 2875  lf.client.post(u
-00009b80: 726c 2c20 6461 7461 3d7b 2773 6368 6564  rl, data={'sched
-00009b90: 756c 696e 675f 6474 273a 2073 6368 5f64  uling_dt': sch_d
-00009ba0: 747d 290a 2020 2020 2020 2020 7365 6c66  t}).        self
-00009bb0: 2e61 7373 6572 7445 7175 616c 2832 3030  .assertEqual(200
-00009bc0: 2c20 7265 7370 6f6e 7365 2e73 7461 7475  , response.statu
-00009bd0: 735f 636f 6465 290a 2020 2020 2020 2020  s_code).        
-00009be0: 7365 6c66 2e61 7373 6572 7443 6f6e 7461  self.assertConta
-00009bf0: 696e 7328 7265 7370 6f6e 7365 2c20 2724  ins(response, '$
-00009c00: 2e63 6f6c 6f72 626f 782e 636c 6f73 6528  .colorbox.close(
-00009c10: 2927 290a 2020 2020 2020 2020 7365 6c66  )').        self
-00009c20: 2e61 7373 6572 7445 7175 616c 2831 2c20  .assertEqual(1, 
-00009c30: 4e65 7773 6c65 7474 6572 5365 6e64 696e  NewsletterSendin
-00009c40: 672e 6f62 6a65 6374 732e 636f 756e 7428  g.objects.count(
-00009c50: 2929 0a20 2020 2020 2020 2073 656c 662e  )).        self.
-00009c60: 6173 7365 7274 4571 7561 6c28 6e65 7773  assertEqual(news
-00009c70: 6c65 7474 6572 2c20 4e65 7773 6c65 7474  letter, Newslett
-00009c80: 6572 5365 6e64 696e 672e 6f62 6a65 6374  erSending.object
-00009c90: 732e 616c 6c28 295b 305d 2e6e 6577 736c  s.all()[0].newsl
-00009ca0: 6574 7465 7229 0a20 2020 2020 2020 2073  etter).        s
-00009cb0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00009cc0: 3230 3330 2c20 4e65 7773 6c65 7474 6572  2030, Newsletter
-00009cd0: 5365 6e64 696e 672e 6f62 6a65 6374 732e  Sending.objects.
-00009ce0: 616c 6c28 295b 305d 2e73 6368 6564 756c  all()[0].schedul
-00009cf0: 696e 675f 6474 2e79 6561 7229 0a20 2020  ing_dt.year).   
-00009d00: 2020 2020 200a 2020 2020 6465 6620 7465       .    def te
-00009d10: 7374 5f73 6368 6564 756c 655f 6e65 7773  st_schedule_news
-00009d20: 6c65 7474 6572 5f73 656e 6469 6e67 5f69  letter_sending_i
-00009d30: 6e76 616c 6964 5f76 616c 7565 2873 656c  nvalid_value(sel
-00009d40: 6629 3a0a 2020 2020 2020 2020 6e65 7773  f):.        news
-00009d50: 6c65 7474 6572 203d 206d 6f6d 6d79 2e6d  letter = mommy.m
-00009d60: 616b 6528 4e65 7773 6c65 7474 6572 290a  ake(Newsletter).
-00009d70: 2020 2020 2020 2020 0a20 2020 2020 2020          .       
-00009d80: 2073 656c 662e 5f6c 6f67 5f61 735f 6564   self._log_as_ed
-00009d90: 6974 6f72 2829 0a20 2020 2020 2020 2075  itor().        u
-00009da0: 726c 203d 2072 6576 6572 7365 2827 636f  rl = reverse('co
-00009db0: 6f70 5f63 6d73 5f73 6368 6564 756c 655f  op_cms_schedule_
-00009dc0: 6e65 7773 6c65 7474 6572 5f73 656e 6469  newsletter_sendi
-00009dd0: 6e67 272c 2061 7267 733d 5b6e 6577 736c  ng', args=[newsl
-00009de0: 6574 7465 722e 6964 5d29 0a20 2020 2020  etter.id]).     
-00009df0: 2020 200a 2020 2020 2020 2020 7265 7370     .        resp
-00009e00: 6f6e 7365 203d 2073 656c 662e 636c 6965  onse = self.clie
-00009e10: 6e74 2e67 6574 2875 726c 290a 2020 2020  nt.get(url).    
-00009e20: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-00009e30: 7175 616c 2832 3030 2c20 7265 7370 6f6e  qual(200, respon
-00009e40: 7365 2e73 7461 7475 735f 636f 6465 290a  se.status_code).
-00009e50: 2020 2020 2020 2020 0a20 2020 2020 2020          .       
-00009e60: 2073 6368 5f64 7420 3d20 2727 0a20 2020   sch_dt = ''.   
-00009e70: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-00009e80: 7365 6c66 2e63 6c69 656e 742e 706f 7374  self.client.post
-00009e90: 2875 726c 2c20 6461 7461 3d7b 2773 6368  (url, data={'sch
-00009ea0: 6564 756c 696e 675f 6474 273a 2073 6368  eduling_dt': sch
-00009eb0: 5f64 747d 290a 2020 2020 2020 2020 7365  _dt}).        se
-00009ec0: 6c66 2e61 7373 6572 7445 7175 616c 2832  lf.assertEqual(2
-00009ed0: 3030 2c20 7265 7370 6f6e 7365 2e73 7461  00, response.sta
-00009ee0: 7475 735f 636f 6465 290a 2020 2020 2020  tus_code).      
-00009ef0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-00009f00: 616c 2830 2c20 4e65 7773 6c65 7474 6572  al(0, Newsletter
-00009f10: 5365 6e64 696e 672e 6f62 6a65 6374 732e  Sending.objects.
-00009f20: 636f 756e 7428 2929 0a20 2020 2020 2020  count()).       
-00009f30: 200a 2020 2020 2020 2020 7363 685f 6474   .        sch_dt
-00009f40: 203d 2027 746f 746f 270a 2020 2020 2020   = 'toto'.      
-00009f50: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
-00009f60: 662e 636c 6965 6e74 2e70 6f73 7428 7572  f.client.post(ur
-00009f70: 6c2c 2064 6174 613d 7b27 7363 6865 6475  l, data={'schedu
-00009f80: 6c69 6e67 5f64 7427 3a20 7363 685f 6474  ling_dt': sch_dt
-00009f90: 7d29 0a20 2020 2020 2020 2073 656c 662e  }).        self.
-00009fa0: 6173 7365 7274 4571 7561 6c28 3230 302c  assertEqual(200,
-00009fb0: 2072 6573 706f 6e73 652e 7374 6174 7573   response.status
-00009fc0: 5f63 6f64 6529 0a20 2020 2020 2020 2073  _code).        s
-00009fd0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-00009fe0: 302c 204e 6577 736c 6574 7465 7253 656e  0, NewsletterSen
-00009ff0: 6469 6e67 2e6f 626a 6563 7473 2e63 6f75  ding.objects.cou
-0000a000: 6e74 2829 290a 2020 2020 2020 2020 0a20  nt()).        . 
-0000a010: 2020 2020 2020 2073 6368 5f64 7420 3d20         sch_dt = 
-0000a020: 2232 3030 352d 3132 2d31 3220 3132 3a30  "2005-12-12 12:0
-0000a030: 303a 3030 220a 2020 2020 2020 2020 7265  0:00".        re
-0000a040: 7370 6f6e 7365 203d 2073 656c 662e 636c  sponse = self.cl
-0000a050: 6965 6e74 2e70 6f73 7428 7572 6c2c 2064  ient.post(url, d
-0000a060: 6174 613d 7b27 7363 6865 6475 6c69 6e67  ata={'scheduling
-0000a070: 5f64 7427 3a20 7363 685f 6474 7d29 0a20  _dt': sch_dt}). 
-0000a080: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000a090: 7274 4571 7561 6c28 3230 302c 2072 6573  rtEqual(200, res
-0000a0a0: 706f 6e73 652e 7374 6174 7573 5f63 6f64  ponse.status_cod
-0000a0b0: 6529 0a20 2020 2020 2020 2073 656c 662e  e).        self.
-0000a0c0: 6173 7365 7274 4571 7561 6c28 302c 204e  assertEqual(0, N
-0000a0d0: 6577 736c 6574 7465 7253 656e 6469 6e67  ewsletterSending
-0000a0e0: 2e6f 626a 6563 7473 2e63 6f75 6e74 2829  .objects.count()
-0000a0f0: 290a 2020 2020 0a20 2020 2064 6566 2074  ).    .    def t
-0000a100: 6573 745f 7363 6865 6475 6c65 5f61 6e6f  est_schedule_ano
-0000a110: 6e79 6d6f 7573 2873 656c 6629 3a0a 2020  nymous(self):.  
-0000a120: 2020 2020 2020 6e65 7773 6c65 7474 6572        newsletter
-0000a130: 203d 206d 6f6d 6d79 2e6d 616b 6528 4e65   = mommy.make(Ne
-0000a140: 7773 6c65 7474 6572 290a 2020 2020 2020  wsletter).      
-0000a150: 2020 0a20 2020 2020 2020 206c 6f67 696e    .        login
-0000a160: 5f75 726c 203d 2072 6576 6572 7365 2827  _url = reverse('
-0000a170: 6c6f 6769 6e27 290a 2020 2020 2020 2020  login').        
-0000a180: 7572 6c20 3d20 7265 7665 7273 6528 2763  url = reverse('c
-0000a190: 6f6f 705f 636d 735f 7363 6865 6475 6c65  oop_cms_schedule
-0000a1a0: 5f6e 6577 736c 6574 7465 725f 7365 6e64  _newsletter_send
-0000a1b0: 696e 6727 2c20 6172 6773 3d5b 6e65 7773  ing', args=[news
-0000a1c0: 6c65 7474 6572 2e69 645d 290a 2020 2020  letter.id]).    
-0000a1d0: 2020 2020 0a20 2020 2020 2020 2072 6573      .        res
-0000a1e0: 706f 6e73 6520 3d20 7365 6c66 2e63 6c69  ponse = self.cli
-0000a1f0: 656e 742e 6765 7428 7572 6c2c 2066 6f6c  ent.get(url, fol
-0000a200: 6c6f 773d 4661 6c73 6529 0a20 2020 2020  low=False).     
-0000a210: 2020 2072 6564 6972 6563 745f 7572 6c20     redirect_url 
-0000a220: 3d20 7265 7370 6f6e 7365 5b27 4c6f 6361  = response['Loca
-0000a230: 7469 6f6e 275d 0a20 2020 2020 2020 2069  tion'].        i
-0000a240: 6620 6861 735f 6c6f 6361 6c69 7a65 645f  f has_localized_
-0000a250: 7572 6c73 2829 3a0a 2020 2020 2020 2020  urls():.        
-0000a260: 2020 2020 6c6f 6769 6e5f 7572 6c20 3d20      login_url = 
-0000a270: 6c6f 6769 6e5f 7572 6c5b 3a32 5d0a 2020  login_url[:2].  
-0000a280: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
-0000a290: 7373 6572 7454 7275 6528 7265 6469 7265  ssertTrue(redire
-0000a2a0: 6374 5f75 726c 2e66 696e 6428 6c6f 6769  ct_url.find(logi
-0000a2b0: 6e5f 7572 6c29 203e 3d20 3029 0a20 2020  n_url) >= 0).   
-0000a2c0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0000a2d0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000a2e0: 7274 5472 7565 2872 6564 6972 6563 745f  rtTrue(redirect_
-0000a2f0: 7572 6c2e 6669 6e64 286c 6f67 696e 5f75  url.find(login_u
-0000a300: 726c 2920 3e3d 2030 290a 2020 2020 2020  rl) >= 0).      
-0000a310: 2020 0a20 2020 2020 2020 2073 6368 5f64    .        sch_d
-0000a320: 7420 3d20 7469 6d65 7a6f 6e65 2e6e 6f77  t = timezone.now
-0000a330: 2829 2b74 696d 6564 656c 7461 2831 290a  ()+timedelta(1).
-0000a340: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-0000a350: 203d 2073 656c 662e 636c 6965 6e74 2e70   = self.client.p
-0000a360: 6f73 7428 7572 6c2c 2064 6174 613d 7b27  ost(url, data={'
-0000a370: 7365 6e64 696e 675f 6474 273a 2073 6368  sending_dt': sch
-0000a380: 5f64 747d 290a 2020 2020 2020 2020 7265  _dt}).        re
-0000a390: 6469 7265 6374 5f75 726c 203d 2072 6573  direct_url = res
-0000a3a0: 706f 6e73 655b 274c 6f63 6174 696f 6e27  ponse['Location'
-0000a3b0: 5d0a 2020 2020 2020 2020 7365 6c66 2e61  ].        self.a
-0000a3c0: 7373 6572 7454 7275 6528 7265 6469 7265  ssertTrue(redire
-0000a3d0: 6374 5f75 726c 2e66 696e 6428 6c6f 6769  ct_url.find(logi
-0000a3e0: 6e5f 7572 6c29 203e 3d20 3029 0a20 2020  n_url) >= 0).   
-0000a3f0: 200a 2020 2020 6465 6620 7465 7374 5f73   .    def test_s
-0000a400: 656e 645f 6e65 7773 6c65 7474 6572 2873  end_newsletter(s
-0000a410: 656c 6629 3a0a 2020 2020 2020 2020 0a20  elf):.        . 
-0000a420: 2020 2020 2020 206e 6577 736c 6574 7465         newslette
-0000a430: 725f 6461 7461 203d 207b 0a20 2020 2020  r_data = {.     
-0000a440: 2020 2020 2020 2027 7375 626a 6563 7427         'subject'
-0000a450: 3a20 2754 6869 7320 6973 2074 6865 2073  : 'This is the s
-0000a460: 7562 6a65 6374 272c 0a20 2020 2020 2020  ubject',.       
-0000a470: 2020 2020 2027 636f 6e74 656e 7427 3a20       'content': 
-0000a480: 273c 6832 3e48 656c 6c6f 2067 7579 7321  '<h2>Hello guys!
-0000a490: 3c2f 6832 3e3c 703e 5669 7369 7420 3c61  </h2><p>Visit <a
-0000a4a0: 2068 7265 663d 2268 7474 703a 2f2f 746f   href="http://to
-0000a4b0: 746f 2e66 7222 3e75 733c 2f61 3e3c 2f70  to.fr">us</a></p
-0000a4c0: 3e27 2c0a 2020 2020 2020 2020 2020 2020  >',.            
-0000a4d0: 2774 656d 706c 6174 6527 3a20 2774 6573  'template': 'tes
-0000a4e0: 742f 6e65 7773 6c65 7474 6572 5f62 6c75  t/newsletter_blu
-0000a4f0: 652e 6874 6d6c 272c 0a20 2020 2020 2020  e.html',.       
-0000a500: 207d 0a20 2020 2020 2020 206e 6577 736c   }.        newsl
-0000a510: 6574 7465 7220 3d20 6d6f 6d6d 792e 6d61  etter = mommy.ma
-0000a520: 6b65 284e 6577 736c 6574 7465 722c 202a  ke(Newsletter, *
-0000a530: 2a6e 6577 736c 6574 7465 725f 6461 7461  *newsletter_data
-0000a540: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-0000a550: 7373 6572 7445 7175 616c 286e 6577 736c  ssertEqual(newsl
-0000a560: 6574 7465 722e 6973 5f70 7562 6c69 632c  etter.is_public,
-0000a570: 2046 616c 7365 290a 2020 2020 2020 2020   False).        
-0000a580: 7363 685f 6474 203d 2074 696d 657a 6f6e  sch_dt = timezon
-0000a590: 652e 6e6f 7728 2920 2d20 7469 6d65 6465  e.now() - timede
-0000a5a0: 6c74 6128 3129 0a20 2020 2020 2020 2073  lta(1).        s
-0000a5b0: 656e 6469 6e67 203d 206d 6f6d 6d79 2e6d  ending = mommy.m
-0000a5c0: 616b 6528 4e65 7773 6c65 7474 6572 5365  ake(NewsletterSe
-0000a5d0: 6e64 696e 672c 206e 6577 736c 6574 7465  nding, newslette
-0000a5e0: 723d 6e65 7773 6c65 7474 6572 2c20 7363  r=newsletter, sc
-0000a5f0: 6865 6475 6c69 6e67 5f64 743d 2073 6368  heduling_dt= sch
-0000a600: 5f64 742c 2073 656e 6469 6e67 5f64 743d  _dt, sending_dt=
-0000a610: 204e 6f6e 6529 0a0a 2020 2020 2020 2020   None)..        
-0000a620: 6d61 6e61 6765 6d65 6e74 2e63 616c 6c5f  management.call_
-0000a630: 636f 6d6d 616e 6428 2773 656e 645f 6e65  command('send_ne
-0000a640: 7773 6c65 7474 6572 272c 2027 746f 746f  wsletter', 'toto
-0000a650: 4074 6f74 6f2e 6672 272c 2076 6572 626f  @toto.fr', verbo
-0000a660: 7369 7479 3d30 2920 2023 202c 2069 6e74  sity=0)  # , int
-0000a670: 6572 6163 7469 7665 3d46 616c 7365 290a  eractive=False).
-0000a680: 0a20 2020 2020 2020 2073 656e 6469 6e67  .        sending
-0000a690: 203d 204e 6577 736c 6574 7465 7253 656e   = NewsletterSen
-0000a6a0: 6469 6e67 2e6f 626a 6563 7473 2e67 6574  ding.objects.get
-0000a6b0: 2869 643d 7365 6e64 696e 672e 6964 290a  (id=sending.id).
-0000a6c0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000a6d0: 6572 744e 6f74 4571 7561 6c28 7365 6e64  ertNotEqual(send
-0000a6e0: 696e 672e 7365 6e64 696e 675f 6474 2c20  ing.sending_dt, 
-0000a6f0: 4e6f 6e65 290a 2020 2020 2020 2020 0a20  None).        . 
-0000a700: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000a710: 7274 4571 7561 6c28 6c65 6e28 6d61 696c  rtEqual(len(mail
-0000a720: 2e6f 7574 626f 7829 2c20 3129 0a20 2020  .outbox), 1).   
-0000a730: 2020 2020 2065 6d61 696c 203d 206d 6169       email = mai
-0000a740: 6c2e 6f75 7462 6f78 5b30 5d0a 2020 2020  l.outbox[0].    
-0000a750: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000a760: 7175 616c 2865 6d61 696c 2e74 6f2c 205b  qual(email.to, [
-0000a770: 2774 6f74 6f40 746f 746f 2e66 7227 5d29  'toto@toto.fr'])
-0000a780: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0000a790: 7365 7274 4571 7561 6c28 656d 6169 6c2e  sertEqual(email.
-0000a7a0: 7375 626a 6563 742c 206e 6577 736c 6574  subject, newslet
-0000a7b0: 7465 725f 6461 7461 5b27 7375 626a 6563  ter_data['subjec
-0000a7c0: 7427 5d29 0a20 2020 2020 2020 2073 656c  t']).        sel
-0000a7d0: 662e 6173 7365 7274 5472 7565 2865 6d61  f.assertTrue(ema
-0000a7e0: 696c 2e62 6f64 792e 6669 6e64 2827 4865  il.body.find('He
-0000a7f0: 6c6c 6f20 6775 7973 2729 203e 3d20 3029  llo guys') >= 0)
-0000a800: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0000a810: 7365 7274 5472 7565 2865 6d61 696c 2e61  sertTrue(email.a
-0000a820: 6c74 6572 6e61 7469 7665 735b 305d 5b31  lternatives[0][1
-0000a830: 5d2c 2022 7465 7874 2f68 746d 6c22 290a  ], "text/html").
-0000a840: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000a850: 6572 7454 7275 6528 656d 6169 6c2e 616c  ertTrue(email.al
-0000a860: 7465 726e 6174 6976 6573 5b30 5d5b 305d  ternatives[0][0]
-0000a870: 2e66 696e 6428 2748 656c 6c6f 2067 7579  .find('Hello guy
-0000a880: 7327 2920 3e3d 2030 290a 0a20 2020 2020  s') >= 0)..     
-0000a890: 2020 206e 6577 736c 6574 7465 7220 3d20     newsletter = 
-0000a8a0: 4e65 7773 6c65 7474 6572 2e6f 626a 6563  Newsletter.objec
-0000a8b0: 7473 2e67 6574 2869 643d 6e65 7773 6c65  ts.get(id=newsle
-0000a8c0: 7474 6572 2e69 6429 0a20 2020 2020 2020  tter.id).       
-0000a8d0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000a8e0: 6c28 6e65 7773 6c65 7474 6572 2e69 735f  l(newsletter.is_
-0000a8f0: 7075 626c 6963 2c20 5472 7565 290a 2020  public, True).  
-0000a900: 2020 2020 2020 0a20 2020 2020 2020 2023        .        #
-0000a910: 2063 6865 636b 2077 6865 7420 6861 7070   check whet happ
-0000a920: 656e 7320 6966 2063 6f6d 6d61 6e64 2069  ens if command i
-0000a930: 7320 6361 6c6c 6564 2061 6761 696e 0a20  s called again. 
-0000a940: 2020 2020 2020 206d 6169 6c2e 6f75 7462         mail.outb
-0000a950: 6f78 203d 205b 5d0a 2020 2020 2020 2020  ox = [].        
-0000a960: 6d61 6e61 6765 6d65 6e74 2e63 616c 6c5f  management.call_
-0000a970: 636f 6d6d 616e 6428 2773 656e 645f 6e65  command('send_ne
-0000a980: 7773 6c65 7474 6572 272c 2027 746f 746f  wsletter', 'toto
-0000a990: 4074 6f74 6f2e 6672 272c 2076 6572 626f  @toto.fr', verbo
-0000a9a0: 7369 7479 3d30 2920 2023 202c 2069 6e74  sity=0)  # , int
-0000a9b0: 6572 6163 7469 7665 3d46 616c 7365 290a  eractive=False).
-0000a9c0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000a9d0: 6572 7445 7175 616c 286c 656e 286d 6169  ertEqual(len(mai
-0000a9e0: 6c2e 6f75 7462 6f78 292c 2030 290a 0a20  l.outbox), 0).. 
-0000a9f0: 2020 2064 6566 2074 6573 745f 7365 6e64     def test_send
-0000aa00: 5f6e 6577 736c 6574 7465 725f 7365 7665  _newsletter_seve
-0000aa10: 7261 6c28 7365 6c66 293a 0a20 2020 2020  ral(self):.     
-0000aa20: 2020 2022 2222 6974 2073 686f 756c 6420     """it should 
-0000aa30: 7365 6e64 206e 6577 736c 6574 7465 7220  send newsletter 
-0000aa40: 746f 2073 6576 6572 616c 2061 6464 7265  to several addre
-0000aa50: 7373 6573 2222 220a 0a20 2020 2020 2020  sses"""..       
-0000aa60: 206e 6577 736c 6574 7465 725f 6461 7461   newsletter_data
-0000aa70: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-0000aa80: 2027 7375 626a 6563 7427 3a20 2754 6869   'subject': 'Thi
-0000aa90: 7320 6973 2074 6865 2073 7562 6a65 6374  s is the subject
-0000aaa0: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
-0000aab0: 636f 6e74 656e 7427 3a20 273c 6832 3e48  content': '<h2>H
-0000aac0: 656c 6c6f 2067 7579 7321 3c2f 6832 3e3c  ello guys!</h2><
-0000aad0: 703e 5669 7369 7420 3c61 2068 7265 663d  p>Visit <a href=
-0000aae0: 2268 7474 703a 2f2f 746f 746f 2e66 7222  "http://toto.fr"
-0000aaf0: 3e75 733c 2f61 3e3c 2f70 3e27 2c0a 2020  >us</a></p>',.  
-0000ab00: 2020 2020 2020 2020 2020 2774 656d 706c            'templ
-0000ab10: 6174 6527 3a20 2774 6573 742f 6e65 7773  ate': 'test/news
-0000ab20: 6c65 7474 6572 5f62 6c75 652e 6874 6d6c  letter_blue.html
-0000ab30: 272c 0a20 2020 2020 2020 207d 0a20 2020  ',.        }.   
-0000ab40: 2020 2020 206e 6577 736c 6574 7465 7220       newsletter 
-0000ab50: 3d20 6d6f 6d6d 792e 6d61 6b65 284e 6577  = mommy.make(New
-0000ab60: 736c 6574 7465 722c 202a 2a6e 6577 736c  sletter, **newsl
-0000ab70: 6574 7465 725f 6461 7461 290a 2020 2020  etter_data).    
-0000ab80: 2020 2020 0a20 2020 2020 2020 2073 6368      .        sch
-0000ab90: 5f64 7420 3d20 7469 6d65 7a6f 6e65 2e6e  _dt = timezone.n
-0000aba0: 6f77 2829 202d 2074 696d 6564 656c 7461  ow() - timedelta
-0000abb0: 2831 290a 2020 2020 2020 2020 7365 6e64  (1).        send
-0000abc0: 696e 6720 3d20 6d6f 6d6d 792e 6d61 6b65  ing = mommy.make
-0000abd0: 284e 6577 736c 6574 7465 7253 656e 6469  (NewsletterSendi
-0000abe0: 6e67 2c20 6e65 7773 6c65 7474 6572 3d6e  ng, newsletter=n
-0000abf0: 6577 736c 6574 7465 722c 2073 6368 6564  ewsletter, sched
-0000ac00: 756c 696e 675f 6474 3d20 7363 685f 6474  uling_dt= sch_dt
-0000ac10: 2c20 7365 6e64 696e 675f 6474 3d20 4e6f  , sending_dt= No
-0000ac20: 6e65 290a 2020 2020 2020 2020 0a20 2020  ne).        .   
-0000ac30: 2020 2020 2061 6464 7265 7373 6573 203d       addresses =
-0000ac40: 2027 3b27 2e6a 6f69 6e28 5b27 746f 746f   ';'.join(['toto
-0000ac50: 4074 6f74 6f2e 6672 275d 2a35 290a 2020  @toto.fr']*5).  
-0000ac60: 2020 2020 2020 6d61 6e61 6765 6d65 6e74        management
-0000ac70: 2e63 616c 6c5f 636f 6d6d 616e 6428 2773  .call_command('s
-0000ac80: 656e 645f 6e65 7773 6c65 7474 6572 272c  end_newsletter',
-0000ac90: 2061 6464 7265 7373 6573 2c20 7665 7262   addresses, verb
-0000aca0: 6f73 6974 793d 3029 2020 2320 2c20 696e  osity=0)  # , in
-0000acb0: 7465 7261 6374 6976 653d 4661 6c73 6529  teractive=False)
-0000acc0: 0a20 2020 2020 2020 200a 2020 2020 2020  .        .      
-0000acd0: 2020 7365 6e64 696e 6720 3d20 4e65 7773    sending = News
-0000ace0: 6c65 7474 6572 5365 6e64 696e 672e 6f62  letterSending.ob
-0000acf0: 6a65 6374 732e 6765 7428 6964 3d73 656e  jects.get(id=sen
-0000ad00: 6469 6e67 2e69 6429 0a20 2020 2020 2020  ding.id).       
-0000ad10: 2073 656c 662e 6173 7365 7274 4e6f 7445   self.assertNotE
-0000ad20: 7175 616c 2873 656e 6469 6e67 2e73 656e  qual(sending.sen
-0000ad30: 6469 6e67 5f64 742c 204e 6f6e 6529 0a20  ding_dt, None). 
-0000ad40: 2020 2020 2020 200a 2020 2020 2020 2020         .        
-0000ad50: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0000ad60: 286c 656e 286d 6169 6c2e 6f75 7462 6f78  (len(mail.outbox
-0000ad70: 292c 2035 290a 2020 2020 2020 2020 666f  ), 5).        fo
-0000ad80: 7220 656d 6169 6c20 696e 206d 6169 6c2e  r email in mail.
-0000ad90: 6f75 7462 6f78 3a0a 2020 2020 2020 2020  outbox:.        
-0000ada0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000adb0: 7175 616c 2865 6d61 696c 2e74 6f2c 205b  qual(email.to, [
-0000adc0: 2774 6f74 6f40 746f 746f 2e66 7227 5d29  'toto@toto.fr'])
-0000add0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000ade0: 662e 6173 7365 7274 4571 7561 6c28 656d  f.assertEqual(em
-0000adf0: 6169 6c2e 7375 626a 6563 742c 206e 6577  ail.subject, new
-0000ae00: 736c 6574 7465 725f 6461 7461 5b27 7375  sletter_data['su
-0000ae10: 626a 6563 7427 5d29 0a20 2020 2020 2020  bject']).       
-0000ae20: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000ae30: 5472 7565 2865 6d61 696c 2e62 6f64 792e  True(email.body.
-0000ae40: 6669 6e64 2827 4865 6c6c 6f20 6775 7973  find('Hello guys
-0000ae50: 2729 3e3d 3029 0a20 2020 2020 2020 2020  ')>=0).         
-0000ae60: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-0000ae70: 7565 2865 6d61 696c 2e61 6c74 6572 6e61  ue(email.alterna
-0000ae80: 7469 7665 735b 305d 5b31 5d2c 2022 7465  tives[0][1], "te
-0000ae90: 7874 2f68 746d 6c22 290a 2020 2020 2020  xt/html").      
-0000aea0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000aeb0: 7454 7275 6528 656d 6169 6c2e 616c 7465  tTrue(email.alte
-0000aec0: 726e 6174 6976 6573 5b30 5d5b 305d 2e66  rnatives[0][0].f
-0000aed0: 696e 6428 2748 656c 6c6f 2067 7579 7327  ind('Hello guys'
-0000aee0: 293e 3d30 290a 2020 2020 2020 2020 0a20  )>=0).        . 
-0000aef0: 2020 2020 2020 2023 2063 6865 636b 2077         # check w
-0000af00: 6865 7420 6861 7070 656e 7320 6966 2063  het happens if c
-0000af10: 6f6d 6d61 6e64 2069 7320 6361 6c6c 6564  ommand is called
-0000af20: 2061 6761 696e 0a20 2020 2020 2020 206d   again.        m
-0000af30: 6169 6c2e 6f75 7462 6f78 203d 205b 5d0a  ail.outbox = [].
-0000af40: 2020 2020 2020 2020 6d61 6e61 6765 6d65          manageme
-0000af50: 6e74 2e63 616c 6c5f 636f 6d6d 616e 6428  nt.call_command(
-0000af60: 2773 656e 645f 6e65 7773 6c65 7474 6572  'send_newsletter
-0000af70: 272c 2027 746f 746f 4074 6f74 6f2e 6672  ', 'toto@toto.fr
-0000af80: 272c 2076 6572 626f 7369 7479 3d30 2920  ', verbosity=0) 
-0000af90: 2023 2020 2c20 696e 7465 7261 6374 6976   #  , interactiv
-0000afa0: 653d 4661 6c73 6529 0a20 2020 2020 2020  e=False).       
-0000afb0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000afc0: 6c28 6c65 6e28 6d61 696c 2e6f 7574 626f  l(len(mail.outbo
-0000afd0: 7829 2c20 3029 0a0a 2020 2020 6465 6620  x), 0)..    def 
-0000afe0: 7465 7374 5f73 656e 645f 6e65 7773 6c65  test_send_newsle
-0000aff0: 7474 6572 5f6e 6f74 5f79 6574 2873 656c  tter_not_yet(sel
-0000b000: 6629 3a0a 2020 2020 2020 2020 0a20 2020  f):.        .   
-0000b010: 2020 2020 206e 6577 736c 6574 7465 725f       newsletter_
-0000b020: 6461 7461 203d 207b 0a20 2020 2020 2020  data = {.       
-0000b030: 2020 2020 2027 7375 626a 6563 7427 3a20       'subject': 
-0000b040: 2754 6869 7320 6973 2074 6865 2073 7562  'This is the sub
-0000b050: 6a65 6374 272c 0a20 2020 2020 2020 2020  ject',.         
-0000b060: 2020 2027 636f 6e74 656e 7427 3a20 273c     'content': '<
-0000b070: 6832 3e48 656c 6c6f 2067 7579 7321 3c2f  h2>Hello guys!</
-0000b080: 6832 3e3c 703e 5669 7369 7420 3c61 2068  h2><p>Visit <a h
-0000b090: 7265 663d 2268 7474 703a 2f2f 746f 746f  ref="http://toto
-0000b0a0: 2e66 7222 3e75 733c 2f61 3e3c 2f70 3e27  .fr">us</a></p>'
-0000b0b0: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
-0000b0c0: 656d 706c 6174 6527 3a20 2774 6573 742f  emplate': 'test/
-0000b0d0: 6e65 7773 6c65 7474 6572 5f62 6c75 652e  newsletter_blue.
-0000b0e0: 6874 6d6c 272c 0a20 2020 2020 2020 207d  html',.        }
-0000b0f0: 0a20 2020 2020 2020 206e 6577 736c 6574  .        newslet
-0000b100: 7465 7220 3d20 6d6f 6d6d 792e 6d61 6b65  ter = mommy.make
-0000b110: 284e 6577 736c 6574 7465 722c 202a 2a6e  (Newsletter, **n
-0000b120: 6577 736c 6574 7465 725f 6461 7461 290a  ewsletter_data).
-0000b130: 2020 2020 2020 2020 0a20 2020 2020 2020          .       
-0000b140: 2073 6368 5f64 7420 3d20 7469 6d65 7a6f   sch_dt = timezo
-0000b150: 6e65 2e6e 6f77 2829 202b 2074 696d 6564  ne.now() + timed
-0000b160: 656c 7461 2831 290a 2020 2020 2020 2020  elta(1).        
-0000b170: 7365 6e64 696e 6720 3d20 6d6f 6d6d 792e  sending = mommy.
-0000b180: 6d61 6b65 284e 6577 736c 6574 7465 7253  make(NewsletterS
-0000b190: 656e 6469 6e67 2c20 6e65 7773 6c65 7474  ending, newslett
-0000b1a0: 6572 3d6e 6577 736c 6574 7465 722c 2073  er=newsletter, s
-0000b1b0: 6368 6564 756c 696e 675f 6474 3d20 7363  cheduling_dt= sc
-0000b1c0: 685f 6474 2c20 7365 6e64 696e 675f 6474  h_dt, sending_dt
-0000b1d0: 3d20 4e6f 6e65 290a 2020 2020 2020 2020  = None).        
-0000b1e0: 0a20 2020 2020 2020 206d 616e 6167 656d  .        managem
-0000b1f0: 656e 742e 6361 6c6c 5f63 6f6d 6d61 6e64  ent.call_command
-0000b200: 2827 7365 6e64 5f6e 6577 736c 6574 7465  ('send_newslette
-0000b210: 7227 2c20 2774 6f74 6f40 746f 746f 2e66  r', 'toto@toto.f
-0000b220: 7227 2c20 7665 7262 6f73 6974 793d 3029  r', verbosity=0)
-0000b230: 2020 2320 2c20 696e 7465 7261 6374 6976    # , interactiv
-0000b240: 653d 4661 6c73 6529 0a20 2020 2020 2020  e=False).       
-0000b250: 200a 2020 2020 2020 2020 7365 6e64 696e   .        sendin
-0000b260: 6720 3d20 4e65 7773 6c65 7474 6572 5365  g = NewsletterSe
-0000b270: 6e64 696e 672e 6f62 6a65 6374 732e 6765  nding.objects.ge
-0000b280: 7428 6964 3d73 656e 6469 6e67 2e69 6429  t(id=sending.id)
-0000b290: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0000b2a0: 7365 7274 4571 7561 6c28 7365 6e64 696e  sertEqual(sendin
-0000b2b0: 672e 7365 6e64 696e 675f 6474 2c20 4e6f  g.sending_dt, No
-0000b2c0: 6e65 290a 2020 2020 2020 2020 0a20 2020  ne).        .   
-0000b2d0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000b2e0: 4571 7561 6c28 6c65 6e28 6d61 696c 2e6f  Equal(len(mail.o
-0000b2f0: 7574 626f 7829 2c20 3029 0a0a 0a40 6f76  utbox), 0)...@ov
-0000b300: 6572 7269 6465 5f73 6574 7469 6e67 7328  erride_settings(
-0000b310: 434f 4f50 5f43 4d53 5f46 524f 4d5f 454d  COOP_CMS_FROM_EM
-0000b320: 4149 4c3d 2763 6f6e 7461 6374 4074 6f74  AIL='contact@tot
-0000b330: 6f2e 6672 2729 0a63 6c61 7373 2053 656e  o.fr').class Sen
-0000b340: 6445 6d61 696c 5465 7374 2855 7365 7242  dEmailTest(UserB
-0000b350: 6173 6554 6573 7443 6173 6529 3a0a 2020  aseTestCase):.  
-0000b360: 2020 2222 2274 6573 7420 7574 696c 732e    """test utils.
-0000b370: 7365 6e64 5f65 6d61 696c 2222 220a 0a20  send_email""".. 
-0000b380: 2020 2064 6566 2074 6573 745f 7365 6e64     def test_send
-0000b390: 5f65 6d61 696c 2873 656c 6629 3a0a 2020  _email(self):.  
-0000b3a0: 2020 2020 2020 7365 7474 696e 6773 2e53        settings.S
-0000b3b0: 4954 455f 4944 203d 2031 0a20 2020 2020  ITE_ID = 1.     
-0000b3c0: 2020 2073 6974 6520 3d20 5369 7465 2e6f     site = Site.o
-0000b3d0: 626a 6563 7473 2e67 6574 2869 643d 7365  bjects.get(id=se
-0000b3e0: 7474 696e 6773 2e53 4954 455f 4944 290a  ttings.SITE_ID).
-0000b3f0: 2020 2020 2020 2020 7369 7465 2e64 6f6d          site.dom
-0000b400: 6169 6e20 3d20 2774 6f74 6f2e 6672 270a  ain = 'toto.fr'.
-0000b410: 2020 2020 2020 2020 7369 7465 2e73 6176          site.sav
-0000b420: 6528 290a 0a20 2020 2020 2020 2073 6974  e()..        sit
-0000b430: 6532 203d 206d 6f6d 6d79 2e6d 616b 6528  e2 = mommy.make(
-0000b440: 5369 7465 2c20 646f 6d61 696e 3d22 746f  Site, domain="to
-0000b450: 746f 2e63 6f6d 2229 0a0a 2020 2020 2020  to.com")..      
-0000b460: 2020 2320 7375 626a 6563 742c 2074 656d    # subject, tem
-0000b470: 706c 6174 655f 6e61 6d65 2c20 636f 6e74  plate_name, cont
-0000b480: 6578 742c 2073 6974 655f 646f 6d61 696e  ext, site_domain
-0000b490: 2c20 6465 7374 732c 206c 616e 6720 3d20  , dests, lang = 
-0000b4a0: 4e6f 6e65 2c20 6c69 7374 5f75 6e73 7562  None, list_unsub
-0000b4b0: 7363 7269 6265 203d 204e 6f6e 650a 0a20  scribe = None.. 
-0000b4c0: 2020 2020 2020 2073 7562 6a65 6374 203d         subject =
-0000b4d0: 2022 4865 6c6c 6f22 0a20 2020 2020 2020   "Hello".       
-0000b4e0: 2064 6573 7473 203d 205b 2774 6f74 6f40   dests = ['toto@
-0000b4f0: 746f 746f 2e66 7227 5d0a 0a20 2020 2020  toto.fr']..     
-0000b500: 2020 2073 656e 645f 656d 6169 6c28 7375     send_email(su
-0000b510: 626a 6563 742c 2022 7465 7374 2f74 6573  bject, "test/tes
-0000b520: 745f 7365 6e64 5f65 6d61 696c 2e68 746d  t_send_email.htm
-0000b530: 6c22 2c20 7b27 7661 6c75 6527 3a20 2741  l", {'value': 'A
-0000b540: 4243 4427 7d2c 2022 6874 7470 3a2f 2f22  BCD'}, "http://"
-0000b550: 202b 2073 6974 6532 2e64 6f6d 6169 6e2c   + site2.domain,
-0000b560: 2064 6573 7473 290a 0a20 2020 2020 2020   dests)..       
-0000b570: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000b580: 6c28 0a20 2020 2020 2020 2020 2020 205b  l(.            [
-0000b590: 5b74 6573 745f 6164 6472 6573 735d 2066  [test_address] f
-0000b5a0: 6f72 2074 6573 745f 6164 6472 6573 7320  or test_address 
-0000b5b0: 696e 2064 6573 7473 5d2c 0a20 2020 2020  in dests],.     
-0000b5c0: 2020 2020 2020 205b 7265 6365 6976 6564         [received
-0000b5d0: 5f65 6d61 696c 2e74 6f20 666f 7220 7265  _email.to for re
-0000b5e0: 6365 6976 6564 5f65 6d61 696c 2069 6e20  ceived_email in 
-0000b5f0: 6d61 696c 2e6f 7574 626f 785d 0a20 2020  mail.outbox].   
-0000b600: 2020 2020 2029 0a20 2020 2020 2020 2066       ).        f
-0000b610: 6f72 2072 6563 6569 7665 645f 656d 6169  or received_emai
-0000b620: 6c20 696e 206d 6169 6c2e 6f75 7462 6f78  l in mail.outbox
-0000b630: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-0000b640: 6c66 2e61 7373 6572 7445 7175 616c 2872  lf.assertEqual(r
-0000b650: 6563 6569 7665 645f 656d 6169 6c2e 6672  eceived_email.fr
-0000b660: 6f6d 5f65 6d61 696c 2c20 7365 7474 696e  om_email, settin
-0000b670: 6773 2e43 4f4f 505f 434d 535f 4652 4f4d  gs.COOP_CMS_FROM
-0000b680: 5f45 4d41 494c 290a 2020 2020 2020 2020  _EMAIL).        
-0000b690: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000b6a0: 7175 616c 2872 6563 6569 7665 645f 656d  qual(received_em
-0000b6b0: 6169 6c2e 7375 626a 6563 742c 2073 7562  ail.subject, sub
-0000b6c0: 6a65 6374 290a 2020 2020 2020 2020 2020  ject).          
-0000b6d0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-0000b6e0: 6528 7265 6365 6976 6564 5f65 6d61 696c  e(received_email
-0000b6f0: 2e62 6f64 792e 6669 6e64 2827 4142 4344  .body.find('ABCD
-0000b700: 2729 203e 3d20 3029 0a20 2020 2020 2020  ') >= 0).       
-0000b710: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000b720: 5472 7565 2872 6563 6569 7665 645f 656d  True(received_em
-0000b730: 6169 6c2e 616c 7465 726e 6174 6976 6573  ail.alternatives
-0000b740: 5b30 5d5b 315d 2c20 2274 6578 742f 6874  [0][1], "text/ht
-0000b750: 6d6c 2229 0a20 2020 2020 2020 2020 2020  ml").           
-0000b760: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-0000b770: 2872 6563 6569 7665 645f 656d 6169 6c2e  (received_email.
-0000b780: 616c 7465 726e 6174 6976 6573 5b30 5d5b  alternatives[0][
-0000b790: 305d 2e66 696e 6428 2741 4243 4427 2920  0].find('ABCD') 
-0000b7a0: 3e3d 2030 290a 2020 2020 2020 2020 2020  >= 0).          
-0000b7b0: 2020 7369 7465 5f70 7265 6669 7820 3d20    site_prefix = 
-0000b7c0: 2268 7474 703a 2f2f 2220 2b20 7369 7465  "http://" + site
-0000b7d0: 322e 646f 6d61 696e 0a20 2020 2020 2020  2.domain.       
-0000b7e0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000b7f0: 5472 7565 2872 6563 6569 7665 645f 656d  True(received_em
-0000b800: 6169 6c2e 616c 7465 726e 6174 6976 6573  ail.alternatives
-0000b810: 5b30 5d5b 305d 2e66 696e 6428 7369 7465  [0][0].find(site
-0000b820: 5f70 7265 6669 7829 203e 3d20 3029 0a0a  _prefix) >= 0)..
-0000b830: 2020 2020 4073 6b69 7049 6628 2765 6e27      @skipIf('en'
-0000b840: 206e 6f74 2069 6e20 5b6c 616e 675f 636f   not in [lang_co
-0000b850: 6465 2066 6f72 2028 6c61 6e67 5f63 6f64  de for (lang_cod
-0000b860: 652c 206c 616e 675f 6e61 6d65 2920 696e  e, lang_name) in
-0000b870: 2073 6574 7469 6e67 732e 4c41 4e47 5541   settings.LANGUA
-0000b880: 4745 535d 2c20 2745 6e67 6c69 7368 2072  GES], 'English r
-0000b890: 6571 7569 7265 6420 666f 7220 7468 6973  equired for this
-0000b8a0: 2074 6573 7427 290a 2020 2020 6465 6620   test').    def 
-0000b8b0: 7465 7374 5f73 656e 645f 656d 6169 6c5f  test_send_email_
-0000b8c0: 656e 2873 656c 6629 3a0a 2020 2020 2020  en(self):.      
-0000b8d0: 2020 7365 7474 696e 6773 2e53 4954 455f    settings.SITE_
-0000b8e0: 4944 203d 2031 0a20 2020 2020 2020 2073  ID = 1.        s
-0000b8f0: 6974 6520 3d20 5369 7465 2e6f 626a 6563  ite = Site.objec
-0000b900: 7473 2e67 6574 2869 643d 7365 7474 696e  ts.get(id=settin
-0000b910: 6773 2e53 4954 455f 4944 290a 2020 2020  gs.SITE_ID).    
-0000b920: 2020 2020 7369 7465 2e64 6f6d 6169 6e20      site.domain 
-0000b930: 3d20 2774 6f74 6f2e 6672 270a 2020 2020  = 'toto.fr'.    
-0000b940: 2020 2020 7369 7465 2e73 6176 6528 290a      site.save().
-0000b950: 0a20 2020 2020 2020 2073 6974 6532 203d  .        site2 =
-0000b960: 206d 6f6d 6d79 2e6d 616b 6528 5369 7465   mommy.make(Site
-0000b970: 2c20 646f 6d61 696e 3d22 746f 746f 2e63  , domain="toto.c
-0000b980: 6f6d 2229 0a0a 2020 2020 2020 2020 2320  om")..        # 
-0000b990: 7375 626a 6563 742c 2074 656d 706c 6174  subject, templat
-0000b9a0: 655f 6e61 6d65 2c20 636f 6e74 6578 742c  e_name, context,
-0000b9b0: 2073 6974 655f 646f 6d61 696e 2c20 6465   site_domain, de
-0000b9c0: 7374 732c 206c 616e 6720 3d20 4e6f 6e65  sts, lang = None
-0000b9d0: 2c20 6c69 7374 5f75 6e73 7562 7363 7269  , list_unsubscri
-0000b9e0: 6265 203d 204e 6f6e 650a 0a20 2020 2020  be = None..     
-0000b9f0: 2020 2073 7562 6a65 6374 203d 2022 4865     subject = "He
-0000ba00: 6c6c 6f22 0a20 2020 2020 2020 2064 6573  llo".        des
-0000ba10: 7473 203d 205b 2774 6f74 6f40 746f 746f  ts = ['toto@toto
-0000ba20: 2e66 7227 5d0a 0a20 2020 2020 2020 2073  .fr']..        s
-0000ba30: 656e 645f 656d 6169 6c28 7375 626a 6563  end_email(subjec
-0000ba40: 742c 2022 7465 7374 2f74 6573 745f 7365  t, "test/test_se
-0000ba50: 6e64 5f65 6d61 696c 2e68 746d 6c22 2c20  nd_email.html", 
-0000ba60: 7b27 7661 6c75 6527 3a20 2741 4243 4427  {'value': 'ABCD'
-0000ba70: 7d2c 2022 6874 7470 3a2f 2f22 202b 2073  }, "http://" + s
-0000ba80: 6974 6532 2e64 6f6d 6169 6e2c 2064 6573  ite2.domain, des
-0000ba90: 7473 2c20 2765 6e27 290a 0a20 2020 2020  ts, 'en')..     
-0000baa0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000bab0: 7561 6c28 0a20 2020 2020 2020 2020 2020  ual(.           
-0000bac0: 205b 5b74 6573 745f 6164 6472 6573 735d   [[test_address]
-0000bad0: 2066 6f72 2074 6573 745f 6164 6472 6573   for test_addres
-0000bae0: 7320 696e 2064 6573 7473 5d2c 0a20 2020  s in dests],.   
-0000baf0: 2020 2020 2020 2020 205b 7265 6365 6976           [receiv
-0000bb00: 6564 5f65 6d61 696c 2e74 6f20 666f 7220  ed_email.to for 
-0000bb10: 7265 6365 6976 6564 5f65 6d61 696c 2069  received_email i
-0000bb20: 6e20 6d61 696c 2e6f 7574 626f 785d 0a20  n mail.outbox]. 
-0000bb30: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0000bb40: 2066 6f72 2072 6563 6569 7665 645f 656d   for received_em
-0000bb50: 6169 6c20 696e 206d 6169 6c2e 6f75 7462  ail in mail.outb
-0000bb60: 6f78 3a0a 0a20 2020 2020 2020 2020 2020  ox:..           
-0000bb70: 2074 7261 6e73 6c61 7465 6420 3d20 2254   translated = "T
-0000bb80: 7261 6e73 6c61 7465 2074 6869 7320 7374  ranslate this st
-0000bb90: 7269 6e67 2066 6f72 2074 6573 7422 2020  ring for test"  
-0000bba0: 2320 7567 6574 7465 7874 2822 5472 616e  # ugettext("Tran
-0000bbb0: 736c 6174 6520 7468 6973 2073 7472 696e  slate this strin
-0000bbc0: 6720 666f 7220 7465 7374 2229 0a0a 2020  g for test")..  
-0000bbd0: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
-0000bbe0: 7373 6572 7445 7175 616c 2872 6563 6569  ssertEqual(recei
-0000bbf0: 7665 645f 656d 6169 6c2e 6672 6f6d 5f65  ved_email.from_e
-0000bc00: 6d61 696c 2c20 7365 7474 696e 6773 2e43  mail, settings.C
-0000bc10: 4f4f 505f 434d 535f 4652 4f4d 5f45 4d41  OOP_CMS_FROM_EMA
-0000bc20: 494c 290a 2020 2020 2020 2020 2020 2020  IL).            
-0000bc30: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0000bc40: 2872 6563 6569 7665 645f 656d 6169 6c2e  (received_email.
-0000bc50: 7375 626a 6563 742c 2073 7562 6a65 6374  subject, subject
-0000bc60: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
-0000bc70: 6c66 2e61 7373 6572 7454 7275 6528 7265  lf.assertTrue(re
-0000bc80: 6365 6976 6564 5f65 6d61 696c 2e62 6f64  ceived_email.bod
-0000bc90: 792e 6669 6e64 2827 4142 4344 2729 203e  y.find('ABCD') >
-0000bca0: 3d20 3029 0a20 2020 2020 2020 2020 2020  = 0).           
-0000bcb0: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-0000bcc0: 2872 6563 6569 7665 645f 656d 6169 6c2e  (received_email.
-0000bcd0: 626f 6479 2e66 696e 6428 7472 616e 736c  body.find(transl
-0000bce0: 6174 6564 2920 3e3d 2030 290a 2020 2020  ated) >= 0).    
-0000bcf0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000bd00: 6572 7454 7275 6528 7265 6365 6976 6564  ertTrue(received
-0000bd10: 5f65 6d61 696c 2e61 6c74 6572 6e61 7469  _email.alternati
-0000bd20: 7665 735b 305d 5b31 5d2c 2022 7465 7874  ves[0][1], "text
-0000bd30: 2f68 746d 6c22 290a 2020 2020 2020 2020  /html").        
-0000bd40: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-0000bd50: 7275 6528 7265 6365 6976 6564 5f65 6d61  rue(received_ema
-0000bd60: 696c 2e61 6c74 6572 6e61 7469 7665 735b  il.alternatives[
-0000bd70: 305d 5b30 5d2e 6669 6e64 2827 4142 4344  0][0].find('ABCD
-0000bd80: 2729 203e 3d20 3029 0a20 2020 2020 2020  ') >= 0).       
-0000bd90: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000bda0: 5472 7565 2872 6563 6569 7665 645f 656d  True(received_em
-0000bdb0: 6169 6c2e 616c 7465 726e 6174 6976 6573  ail.alternatives
-0000bdc0: 5b30 5d5b 305d 2e66 696e 6428 7472 616e  [0][0].find(tran
-0000bdd0: 736c 6174 6564 2920 3e3d 2030 290a 2020  slated) >= 0).  
-0000bde0: 2020 2020 2020 2020 2020 7369 7465 5f70            site_p
-0000bdf0: 7265 6669 7820 3d20 2268 7474 703a 2f2f  refix = "http://
-0000be00: 2220 2b20 7369 7465 322e 646f 6d61 696e  " + site2.domain
-0000be10: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-0000be20: 662e 6173 7365 7274 5472 7565 2872 6563  f.assertTrue(rec
-0000be30: 6569 7665 645f 656d 6169 6c2e 616c 7465  eived_email.alte
-0000be40: 726e 6174 6976 6573 5b30 5d5b 305d 2e66  rnatives[0][0].f
-0000be50: 696e 6428 7369 7465 5f70 7265 6669 7829  ind(site_prefix)
-0000be60: 203e 3d20 3029 0a0a 2020 2020 4073 6b69   >= 0)..    @ski
-0000be70: 7049 6628 2766 7227 206e 6f74 2069 6e20  pIf('fr' not in 
-0000be80: 5b6c 616e 675f 636f 6465 2066 6f72 2028  [lang_code for (
-0000be90: 6c61 6e67 5f63 6f64 652c 206c 616e 675f  lang_code, lang_
-0000bea0: 6e61 6d65 2920 696e 2073 6574 7469 6e67  name) in setting
-0000beb0: 732e 4c41 4e47 5541 4745 535d 2c20 2746  s.LANGUAGES], 'F
-0000bec0: 7265 6e63 6820 7265 7175 6972 6564 2066  rench required f
-0000bed0: 6f72 2074 6869 7320 7465 7374 2729 0a20  or this test'). 
-0000bee0: 2020 2064 6566 2074 6573 745f 7365 6e64     def test_send
-0000bef0: 5f65 6d61 696c 5f66 7228 7365 6c66 293a  _email_fr(self):
-0000bf00: 0a20 2020 2020 2020 2073 6574 7469 6e67  .        setting
-0000bf10: 732e 5349 5445 5f49 4420 3d20 310a 2020  s.SITE_ID = 1.  
-0000bf20: 2020 2020 2020 7369 7465 203d 2053 6974        site = Sit
-0000bf30: 652e 6f62 6a65 6374 732e 6765 7428 6964  e.objects.get(id
-0000bf40: 3d73 6574 7469 6e67 732e 5349 5445 5f49  =settings.SITE_I
-0000bf50: 4429 0a20 2020 2020 2020 2073 6974 652e  D).        site.
-0000bf60: 646f 6d61 696e 203d 2027 746f 746f 2e66  domain = 'toto.f
-0000bf70: 7227 0a20 2020 2020 2020 2073 6974 652e  r'.        site.
-0000bf80: 7361 7665 2829 0a0a 2020 2020 2020 2020  save()..        
-0000bf90: 7369 7465 3220 3d20 6d6f 6d6d 792e 6d61  site2 = mommy.ma
-0000bfa0: 6b65 2853 6974 652c 2064 6f6d 6169 6e3d  ke(Site, domain=
-0000bfb0: 2274 6f74 6f2e 636f 6d22 290a 0a20 2020  "toto.com")..   
-0000bfc0: 2020 2020 2023 2073 7562 6a65 6374 2c20       # subject, 
-0000bfd0: 7465 6d70 6c61 7465 5f6e 616d 652c 2063  template_name, c
-0000bfe0: 6f6e 7465 7874 2c20 7369 7465 5f64 6f6d  ontext, site_dom
-0000bff0: 6169 6e2c 2064 6573 7473 2c20 6c61 6e67  ain, dests, lang
-0000c000: 203d 204e 6f6e 652c 206c 6973 745f 756e   = None, list_un
-0000c010: 7375 6273 6372 6962 6520 3d20 4e6f 6e65  subscribe = None
-0000c020: 0a0a 2020 2020 2020 2020 7375 626a 6563  ..        subjec
-0000c030: 7420 3d20 2248 656c 6c6f 220a 2020 2020  t = "Hello".    
-0000c040: 2020 2020 6465 7374 7320 3d20 5b27 746f      dests = ['to
-0000c050: 746f 4074 6f74 6f2e 6672 275d 0a0a 2020  to@toto.fr']..  
-0000c060: 2020 2020 2020 7365 6e64 5f65 6d61 696c        send_email
-0000c070: 2873 7562 6a65 6374 2c20 2274 6573 742f  (subject, "test/
-0000c080: 7465 7374 5f73 656e 645f 656d 6169 6c2e  test_send_email.
-0000c090: 6874 6d6c 222c 207b 2776 616c 7565 273a  html", {'value':
-0000c0a0: 2027 4142 4344 277d 2c20 2268 7474 703a   'ABCD'}, "http:
-0000c0b0: 2f2f 2220 2b20 7369 7465 322e 646f 6d61  //" + site2.doma
-0000c0c0: 696e 2c20 6465 7374 732c 2027 6672 2729  in, dests, 'fr')
-0000c0d0: 0a0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0000c0e0: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
-0000c0f0: 2020 2020 2020 2020 5b5b 7465 7374 5f61          [[test_a
-0000c100: 6464 7265 7373 5d20 666f 7220 7465 7374  ddress] for test
-0000c110: 5f61 6464 7265 7373 2069 6e20 6465 7374  _address in dest
-0000c120: 735d 2c0a 2020 2020 2020 2020 2020 2020  s],.            
-0000c130: 5b72 6563 6569 7665 645f 656d 6169 6c2e  [received_email.
-0000c140: 746f 2066 6f72 2072 6563 6569 7665 645f  to for received_
-0000c150: 656d 6169 6c20 696e 206d 6169 6c2e 6f75  email in mail.ou
-0000c160: 7462 6f78 5d0a 2020 2020 2020 2020 290a  tbox].        ).
-0000c170: 2020 2020 2020 2020 666f 7220 7265 6365          for rece
-0000c180: 6976 6564 5f65 6d61 696c 2069 6e20 6d61  ived_email in ma
-0000c190: 696c 2e6f 7574 626f 783a 0a20 2020 2020  il.outbox:.     
-0000c1a0: 2020 2020 2020 2074 7261 6e73 6c61 7465         translate
-0000c1b0: 6420 3d20 2254 7261 6475 6974 2063 6574  d = "Traduit cet
-0000c1c0: 7465 2063 6861 696e 6520 706f 7572 2074  te chaine pour t
-0000c1d0: 6573 7422 2020 2320 7567 6574 7465 7874  est"  # ugettext
-0000c1e0: 2822 5472 616e 736c 6174 6520 7468 6973  ("Translate this
-0000c1f0: 2073 7472 696e 6720 666f 7220 7465 7374   string for test
-0000c200: 2229 0a0a 2020 2020 2020 2020 2020 2020  ")..            
-0000c210: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0000c220: 2872 6563 6569 7665 645f 656d 6169 6c2e  (received_email.
-0000c230: 6672 6f6d 5f65 6d61 696c 2c20 7365 7474  from_email, sett
-0000c240: 696e 6773 2e43 4f4f 505f 434d 535f 4652  ings.COOP_CMS_FR
-0000c250: 4f4d 5f45 4d41 494c 290a 2020 2020 2020  OM_EMAIL).      
-0000c260: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000c270: 7445 7175 616c 2872 6563 6569 7665 645f  tEqual(received_
-0000c280: 656d 6169 6c2e 7375 626a 6563 742c 2073  email.subject, s
-0000c290: 7562 6a65 6374 290a 2020 2020 2020 2020  ubject).        
-0000c2a0: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-0000c2b0: 7275 6528 7265 6365 6976 6564 5f65 6d61  rue(received_ema
-0000c2c0: 696c 2e62 6f64 792e 6669 6e64 2827 4142  il.body.find('AB
-0000c2d0: 4344 2729 203e 3d20 3029 0a20 2020 2020  CD') >= 0).     
-0000c2e0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000c2f0: 7274 5472 7565 2872 6563 6569 7665 645f  rtTrue(received_
-0000c300: 656d 6169 6c2e 626f 6479 2e66 696e 6428  email.body.find(
-0000c310: 7472 616e 736c 6174 6564 2920 3e3d 2030  translated) >= 0
-0000c320: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
-0000c330: 6c66 2e61 7373 6572 7454 7275 6528 7265  lf.assertTrue(re
-0000c340: 6365 6976 6564 5f65 6d61 696c 2e61 6c74  ceived_email.alt
-0000c350: 6572 6e61 7469 7665 735b 305d 5b31 5d2c  ernatives[0][1],
-0000c360: 2022 7465 7874 2f68 746d 6c22 290a 2020   "text/html").  
-0000c370: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
-0000c380: 7373 6572 7454 7275 6528 7265 6365 6976  ssertTrue(receiv
-0000c390: 6564 5f65 6d61 696c 2e61 6c74 6572 6e61  ed_email.alterna
-0000c3a0: 7469 7665 735b 305d 5b30 5d2e 6669 6e64  tives[0][0].find
-0000c3b0: 2827 4142 4344 2729 203e 3d20 3029 0a20  ('ABCD') >= 0). 
-0000c3c0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000c3d0: 6173 7365 7274 5472 7565 2872 6563 6569  assertTrue(recei
-0000c3e0: 7665 645f 656d 6169 6c2e 616c 7465 726e  ved_email.altern
-0000c3f0: 6174 6976 6573 5b30 5d5b 305d 2e66 696e  atives[0][0].fin
-0000c400: 6428 7472 616e 736c 6174 6564 2920 3e3d  d(translated) >=
-0000c410: 2030 290a 2020 2020 2020 2020 2020 2020   0).            
-0000c420: 7369 7465 5f70 7265 6669 7820 3d20 2268  site_prefix = "h
-0000c430: 7474 703a 2f2f 2220 2b20 7369 7465 322e  ttp://" + site2.
-0000c440: 646f 6d61 696e 0a20 2020 2020 2020 2020  domain.         
-0000c450: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
-0000c460: 7565 2872 6563 6569 7665 645f 656d 6169  ue(received_emai
-0000c470: 6c2e 616c 7465 726e 6174 6976 6573 5b30  l.alternatives[0
-0000c480: 5d5b 305d 2e66 696e 6428 7369 7465 5f70  ][0].find(site_p
-0000c490: 7265 6669 7829 203e 3d20 3029 0a0a 2020  refix) >= 0)..  
-0000c4a0: 2020 4073 6b69 7049 6628 2773 6e27 2069    @skipIf('sn' i
-0000c4b0: 6e20 5b6c 616e 675f 636f 6465 2066 6f72  n [lang_code for
-0000c4c0: 2028 6c61 6e67 5f63 6f64 652c 206c 616e   (lang_code, lan
-0000c4d0: 675f 6e61 6d65 2920 696e 2073 6574 7469  g_name) in setti
-0000c4e0: 6e67 732e 4c41 4e47 5541 4745 535d 2c20  ngs.LANGUAGES], 
-0000c4f0: 274e 6f20 4368 696e 6573 6520 666f 7220  'No Chinese for 
-0000c500: 7468 6973 2074 6573 7427 290a 2020 2020  this test').    
-0000c510: 6465 6620 7465 7374 5f73 656e 645f 656d  def test_send_em
-0000c520: 6169 6c5f 736e 2873 656c 6629 3a0a 2020  ail_sn(self):.  
-0000c530: 2020 2020 2020 7365 7474 696e 6773 2e53        settings.S
-0000c540: 4954 455f 4944 203d 2031 0a20 2020 2020  ITE_ID = 1.     
-0000c550: 2020 2073 6974 6520 3d20 5369 7465 2e6f     site = Site.o
-0000c560: 626a 6563 7473 2e67 6574 2869 643d 7365  bjects.get(id=se
-0000c570: 7474 696e 6773 2e53 4954 455f 4944 290a  ttings.SITE_ID).
-0000c580: 2020 2020 2020 2020 7369 7465 2e64 6f6d          site.dom
-0000c590: 6169 6e20 3d20 2774 6f74 6f2e 6672 270a  ain = 'toto.fr'.
-0000c5a0: 2020 2020 2020 2020 7369 7465 2e73 6176          site.sav
-0000c5b0: 6528 290a 0a20 2020 2020 2020 2073 6974  e()..        sit
-0000c5c0: 6532 203d 206d 6f6d 6d79 2e6d 616b 6528  e2 = mommy.make(
-0000c5d0: 5369 7465 2c20 646f 6d61 696e 3d22 746f  Site, domain="to
-0000c5e0: 746f 2e63 6f6d 2229 0a0a 2020 2020 2020  to.com")..      
-0000c5f0: 2020 2320 7375 626a 6563 742c 2074 656d    # subject, tem
-0000c600: 706c 6174 655f 6e61 6d65 2c20 636f 6e74  plate_name, cont
-0000c610: 6578 742c 2073 6974 655f 646f 6d61 696e  ext, site_domain
-0000c620: 2c20 6465 7374 732c 206c 616e 6720 3d20  , dests, lang = 
-0000c630: 4e6f 6e65 2c20 6c69 7374 5f75 6e73 7562  None, list_unsub
-0000c640: 7363 7269 6265 203d 204e 6f6e 650a 0a20  scribe = None.. 
-0000c650: 2020 2020 2020 2073 7562 6a65 6374 203d         subject =
-0000c660: 2022 4865 6c6c 6f22 0a20 2020 2020 2020   "Hello".       
-0000c670: 2064 6573 7473 203d 205b 2774 6f74 6f40   dests = ['toto@
-0000c680: 746f 746f 2e66 7227 5d0a 0a20 2020 2020  toto.fr']..     
-0000c690: 2020 2073 656e 645f 656d 6169 6c28 7375     send_email(su
-0000c6a0: 626a 6563 742c 2022 7465 7374 2f74 6573  bject, "test/tes
-0000c6b0: 745f 7365 6e64 5f65 6d61 696c 2e68 746d  t_send_email.htm
-0000c6c0: 6c22 2c20 7b27 7661 6c75 6527 3a20 2741  l", {'value': 'A
-0000c6d0: 4243 4427 7d2c 2022 6874 7470 3a2f 2f22  BCD'}, "http://"
-0000c6e0: 202b 2073 6974 6532 2e64 6f6d 6169 6e2c   + site2.domain,
-0000c6f0: 2064 6573 7473 2c20 2773 6e27 290a 0a20   dests, 'sn').. 
-0000c700: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000c710: 7274 4571 7561 6c28 0a20 2020 2020 2020  rtEqual(.       
-0000c720: 2020 2020 205b 5b74 6573 745f 6164 6472       [[test_addr
-0000c730: 6573 735d 2066 6f72 2074 6573 745f 6164  ess] for test_ad
-0000c740: 6472 6573 7320 696e 2064 6573 7473 5d2c  dress in dests],
-0000c750: 0a20 2020 2020 2020 2020 2020 205b 7265  .            [re
-0000c760: 6365 6976 6564 5f65 6d61 696c 2e74 6f20  ceived_email.to 
-0000c770: 666f 7220 7265 6365 6976 6564 5f65 6d61  for received_ema
-0000c780: 696c 2069 6e20 6d61 696c 2e6f 7574 626f  il in mail.outbo
-0000c790: 785d 0a20 2020 2020 2020 2029 0a20 2020  x].        ).   
-0000c7a0: 2020 2020 2066 6f72 2072 6563 6569 7665       for receive
-0000c7b0: 645f 656d 6169 6c20 696e 206d 6169 6c2e  d_email in mail.
-0000c7c0: 6f75 7462 6f78 3a0a 2020 2020 2020 2020  outbox:.        
-0000c7d0: 2020 2020 6c61 6e67 203d 2067 6574 5f6c      lang = get_l
-0000c7e0: 616e 6775 6167 6528 290a 2020 2020 2020  anguage().      
-0000c7f0: 2020 2020 2020 6966 206c 616e 6720 3d3d        if lang ==
-0000c800: 2027 6672 273a 0a20 2020 2020 2020 2020   'fr':.         
-0000c810: 2020 2020 2020 2074 7261 6e73 6c61 7465         translate
-0000c820: 6420 3d20 2254 7261 6475 6974 2063 6574  d = "Traduit cet
-0000c830: 7465 2063 6861 696e 6520 706f 7572 2074  te chaine pour t
-0000c840: 6573 7422 2020 2320 7567 6574 7465 7874  est"  # ugettext
-0000c850: 2822 5472 616e 736c 6174 6520 7468 6973  ("Translate this
-0000c860: 2073 7472 696e 6720 666f 7220 7465 7374   string for test
-0000c870: 2229 0a20 2020 2020 2020 2020 2020 2065  ").            e
-0000c880: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0000c890: 2020 2020 2074 7261 6e73 6c61 7465 6420       translated 
-0000c8a0: 3d20 2254 7261 6e73 6c61 7465 2074 6869  = "Translate thi
-0000c8b0: 7320 7374 7269 6e67 2066 6f72 2074 6573  s string for tes
-0000c8c0: 7422 2020 2320 7567 6574 7465 7874 2822  t"  # ugettext("
-0000c8d0: 5472 616e 736c 6174 6520 7468 6973 2073  Translate this s
-0000c8e0: 7472 696e 6720 666f 7220 7465 7374 2229  tring for test")
-0000c8f0: 0a0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0000c900: 6c66 2e61 7373 6572 7445 7175 616c 2872  lf.assertEqual(r
-0000c910: 6563 6569 7665 645f 656d 6169 6c2e 6672  eceived_email.fr
-0000c920: 6f6d 5f65 6d61 696c 2c20 7365 7474 696e  om_email, settin
-0000c930: 6773 2e43 4f4f 505f 434d 535f 4652 4f4d  gs.COOP_CMS_FROM
-0000c940: 5f45 4d41 494c 290a 2020 2020 2020 2020  _EMAIL).        
-0000c950: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000c960: 7175 616c 2872 6563 6569 7665 645f 656d  qual(received_em
-0000c970: 6169 6c2e 7375 626a 6563 742c 2073 7562  ail.subject, sub
-0000c980: 6a65 6374 290a 2020 2020 2020 2020 2020  ject).          
-0000c990: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-0000c9a0: 6528 7265 6365 6976 6564 5f65 6d61 696c  e(received_email
-0000c9b0: 2e62 6f64 792e 6669 6e64 2827 4142 4344  .body.find('ABCD
-0000c9c0: 2729 203e 3d20 3029 0a20 2020 2020 2020  ') >= 0).       
-0000c9d0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000c9e0: 5472 7565 2872 6563 6569 7665 645f 656d  True(received_em
-0000c9f0: 6169 6c2e 626f 6479 2e66 696e 6428 7472  ail.body.find(tr
-0000ca00: 616e 736c 6174 6564 2920 3e3d 2030 290a  anslated) >= 0).
-0000ca10: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000ca20: 2e61 7373 6572 7454 7275 6528 7265 6365  .assertTrue(rece
-0000ca30: 6976 6564 5f65 6d61 696c 2e61 6c74 6572  ived_email.alter
-0000ca40: 6e61 7469 7665 735b 305d 5b31 5d2c 2022  natives[0][1], "
-0000ca50: 7465 7874 2f68 746d 6c22 290a 2020 2020  text/html").    
-0000ca60: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000ca70: 6572 7454 7275 6528 7265 6365 6976 6564  ertTrue(received
-0000ca80: 5f65 6d61 696c 2e61 6c74 6572 6e61 7469  _email.alternati
-0000ca90: 7665 735b 305d 5b30 5d2e 6669 6e64 2827  ves[0][0].find('
-0000caa0: 4142 4344 2729 203e 3d20 3029 0a20 2020  ABCD') >= 0).   
-0000cab0: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
-0000cac0: 7365 7274 5472 7565 2872 6563 6569 7665  sertTrue(receive
-0000cad0: 645f 656d 6169 6c2e 616c 7465 726e 6174  d_email.alternat
-0000cae0: 6976 6573 5b30 5d5b 305d 2e66 696e 6428  ives[0][0].find(
-0000caf0: 7472 616e 736c 6174 6564 2920 3e3d 2030  translated) >= 0
-0000cb00: 290a 2020 2020 2020 2020 2020 2020 7369  ).            si
-0000cb10: 7465 5f70 7265 6669 7820 3d20 2268 7474  te_prefix = "htt
-0000cb20: 703a 2f2f 2220 2b20 7369 7465 322e 646f  p://" + site2.do
-0000cb30: 6d61 696e 0a20 2020 2020 2020 2020 2020  main.           
-0000cb40: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
-0000cb50: 2872 6563 6569 7665 645f 656d 6169 6c2e  (received_email.
-0000cb60: 616c 7465 726e 6174 6976 6573 5b30 5d5b  alternatives[0][
-0000cb70: 305d 2e66 696e 6428 7369 7465 5f70 7265  0].find(site_pre
-0000cb80: 6669 7829 203e 3d20 3029 0a0a 0a63 6c61  fix) >= 0)...cla
-0000cb90: 7373 2041 6273 5572 6c54 6573 7428 5573  ss AbsUrlTest(Us
-0000cba0: 6572 4261 7365 5465 7374 4361 7365 293a  erBaseTestCase):
-0000cbb0: 0a20 2020 200a 2020 2020 6465 6620 7365  .    .    def se
-0000cbc0: 7455 7028 7365 6c66 293a 0a20 2020 2020  tUp(self):.     
-0000cbd0: 2020 2073 7570 6572 2841 6273 5572 6c54     super(AbsUrlT
-0000cbe0: 6573 742c 2073 656c 6629 2e73 6574 5570  est, self).setUp
-0000cbf0: 2829 0a20 2020 2020 2020 2073 6574 7469  ().        setti
-0000cc00: 6e67 732e 5349 5445 5f49 4420 3d20 310a  ngs.SITE_ID = 1.
-0000cc10: 2020 2020 2020 2020 7365 6c66 2e73 6974          self.sit
-0000cc20: 6520 3d20 5369 7465 2e6f 626a 6563 7473  e = Site.objects
-0000cc30: 2e67 6574 2869 643d 7365 7474 696e 6773  .get(id=settings
-0000cc40: 2e53 4954 455f 4944 290a 2020 2020 2020  .SITE_ID).      
-0000cc50: 2020 7365 6c66 2e73 6974 652e 646f 6d61    self.site.doma
-0000cc60: 696e 203d 2022 746f 746f 2e66 7222 0a20  in = "toto.fr". 
-0000cc70: 2020 2020 2020 2073 656c 662e 7369 7465         self.site
-0000cc80: 2e73 6176 6528 290a 2020 2020 2020 2020  .save().        
-0000cc90: 7365 6c66 2e73 6974 655f 7072 6566 6978  self.site_prefix
-0000cca0: 203d 2022 6874 7470 3a2f 2f22 2b73 656c   = "http://"+sel
-0000ccb0: 662e 7369 7465 2e64 6f6d 6169 6e0a 2020  f.site.domain.  
-0000ccc0: 2020 2020 2020 7365 6c66 2e6e 6577 736c        self.newsl
-0000ccd0: 6574 7465 7220 3d20 6d6f 6d6d 792e 6d61  etter = mommy.ma
-0000cce0: 6b65 284e 6577 736c 6574 7465 722c 2073  ke(Newsletter, s
-0000ccf0: 6974 653d 7365 6c66 2e73 6974 6529 0a20  ite=self.site). 
-0000cd00: 2020 2020 2020 2023 7365 7474 696e 6773         #settings
-0000cd10: 2e43 4f4f 505f 434d 535f 5349 5445 5f50  .COOP_CMS_SITE_P
-0000cd20: 5245 4649 5820 3d20 7365 6c66 2e73 6974  REFIX = self.sit
-0000cd30: 655f 7072 6566 6978 0a0a 2020 2020 6465  e_prefix..    de
-0000cd40: 6620 5f74 6f5f 7465 7874 2873 656c 662c  f _to_text(self,
-0000cd50: 2073 6f75 7029 3a0a 2020 2020 2020 2020   soup):.        
-0000cd60: 7465 7874 203d 2073 6f75 702e 7072 6574  text = soup.pret
-0000cd70: 7469 6679 2829 0a20 2020 2020 2020 2074  tify().        t
-0000cd80: 6578 7420 3d20 7374 7269 705f 615f 7461  ext = strip_a_ta
-0000cd90: 6773 2874 6578 7429 0a20 2020 2020 2020  gs(text).       
-0000cda0: 2072 6574 7572 6e20 7465 7874 0a20 2020   return text.   
-0000cdb0: 200a 2020 2020 6465 6620 7465 7374 5f68   .    def test_h
-0000cdc0: 7265 6628 7365 6c66 293a 0a20 2020 2020  ref(self):.     
-0000cdd0: 2020 2074 6573 745f 6874 6d6c 203d 2027     test_html = '
-0000cde0: 3c61 2068 7265 663d 2225 732f 746f 746f  <a href="%s/toto
-0000cdf0: 223e 5468 6973 2069 7320 6120 6c69 6e6b  ">This is a link
-0000ce00: 3c2f 613e 270a 2020 2020 2020 2020 7265  </a>'.        re
-0000ce10: 6c5f 6874 6d6c 203d 2074 6573 745f 6874  l_html = test_ht
-0000ce20: 6d6c 2025 2022 220a 2020 2020 2020 2020  ml % "".        
-0000ce30: 6162 735f 6874 6d6c 203d 2073 656c 662e  abs_html = self.
-0000ce40: 5f74 6f5f 7465 7874 2842 6561 7574 6966  _to_text(Beautif
-0000ce50: 756c 536f 7570 2874 6573 745f 6874 6d6c  ulSoup(test_html
-0000ce60: 2025 2073 656c 662e 7369 7465 5f70 7265   % self.site_pre
-0000ce70: 6669 7829 290a 2020 2020 2020 2020 7365  fix)).        se
-0000ce80: 6c66 2e61 7373 6572 7445 7175 616c 2861  lf.assertEqual(a
-0000ce90: 6273 5f68 746d 6c2c 2073 7472 6970 5f61  bs_html, strip_a
-0000cea0: 5f74 6167 7328 6d61 6b65 5f6c 696e 6b73  _tags(make_links
-0000ceb0: 5f61 6273 6f6c 7574 6528 7265 6c5f 6874  _absolute(rel_ht
-0000cec0: 6d6c 2c20 7365 6c66 2e6e 6577 736c 6574  ml, self.newslet
-0000ced0: 7465 7229 2929 0a20 2020 2020 2020 200a  ter))).        .
-0000cee0: 2020 2020 6465 6620 7465 7374 5f73 7263      def test_src
-0000cef0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0000cf00: 7465 7374 5f68 746d 6c20 3d20 273c 6831  test_html = '<h1
-0000cf10: 3e4d 7920 696d 6167 653c 2f68 313e 3c69  >My image</h1><i
-0000cf20: 6d67 2073 7263 3d22 2573 2f74 6f74 6f22  mg src="%s/toto"
-0000cf30: 3e27 0a20 2020 2020 2020 2072 656c 5f68  >'.        rel_h
-0000cf40: 746d 6c20 3d20 7465 7374 5f68 746d 6c20  tml = test_html 
-0000cf50: 2520 2222 0a20 2020 2020 2020 2061 6273  % "".        abs
-0000cf60: 5f68 746d 6c20 3d20 7365 6c66 2e5f 746f  _html = self._to
-0000cf70: 5f74 6578 7428 4265 6175 7469 6675 6c53  _text(BeautifulS
-0000cf80: 6f75 7028 7465 7374 5f68 746d 6c20 2520  oup(test_html % 
-0000cf90: 7365 6c66 2e73 6974 655f 7072 6566 6978  self.site_prefix
-0000cfa0: 2929 0a20 2020 2020 2020 2073 656c 662e  )).        self.
-0000cfb0: 6173 7365 7274 4571 7561 6c28 6162 735f  assertEqual(abs_
-0000cfc0: 6874 6d6c 2c20 7374 7269 705f 615f 7461  html, strip_a_ta
-0000cfd0: 6773 286d 616b 655f 6c69 6e6b 735f 6162  gs(make_links_ab
-0000cfe0: 736f 6c75 7465 2872 656c 5f68 746d 6c2c  solute(rel_html,
-0000cff0: 2073 656c 662e 6e65 7773 6c65 7474 6572   self.newsletter
-0000d000: 2929 290a 2020 2020 2020 2020 0a20 2020  ))).        .   
-0000d010: 2064 6566 2074 6573 745f 7265 6c61 7469   def test_relati
-0000d020: 7665 5f70 6174 6828 7365 6c66 293a 0a20  ve_path(self):. 
-0000d030: 2020 2020 2020 2074 6573 745f 6874 6d6c         test_html
-0000d040: 203d 2027 3c68 313e 4d79 2069 6d61 6765   = '<h1>My image
-0000d050: 3c2f 6831 3e3c 696d 6720 7372 633d 2225  </h1><img src="%
-0000d060: 732f 746f 746f 223e 270a 2020 2020 2020  s/toto">'.      
-0000d070: 2020 7265 6c5f 6874 6d6c 203d 2074 6573    rel_html = tes
-0000d080: 745f 6874 6d6c 2025 2022 2e2e 2f2e 2e2f  t_html % "../../
-0000d090: 2e2e 220a 2020 2020 2020 2020 6162 735f  ..".        abs_
-0000d0a0: 6874 6d6c 203d 2073 656c 662e 5f74 6f5f  html = self._to_
-0000d0b0: 7465 7874 2842 6561 7574 6966 756c 536f  text(BeautifulSo
-0000d0c0: 7570 2874 6573 745f 6874 6d6c 2025 2073  up(test_html % s
-0000d0d0: 656c 662e 7369 7465 5f70 7265 6669 7829  elf.site_prefix)
-0000d0e0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-0000d0f0: 7373 6572 7445 7175 616c 2861 6273 5f68  ssertEqual(abs_h
-0000d100: 746d 6c2c 2073 7472 6970 5f61 5f74 6167  tml, strip_a_tag
-0000d110: 7328 6d61 6b65 5f6c 696e 6b73 5f61 6273  s(make_links_abs
-0000d120: 6f6c 7574 6528 7265 6c5f 6874 6d6c 2c20  olute(rel_html, 
-0000d130: 7365 6c66 2e6e 6577 736c 6574 7465 7229  self.newsletter)
-0000d140: 2929 0a20 2020 200a 2020 2020 6465 6620  )).    .    def 
-0000d150: 7465 7374 5f73 7263 5f61 6e64 5f69 6d67  test_src_and_img
-0000d160: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0000d170: 7465 7374 5f68 746d 6c20 3d20 273c 6831  test_html = '<h1
-0000d180: 3e4d 7920 696d 6167 653c 2f68 313e 3c61  >My image</h1><a
-0000d190: 2068 7265 663d 227b 307d 2f61 3122 3e54   href="{0}/a1">T
-0000d1a0: 6869 7320 6973 2061 206c 696e 6b3c 2f61  his is a link</a
-0000d1b0: 3e3c 696d 6720 7372 633d 227b 307d 2f74  ><img src="{0}/t
-0000d1c0: 6f74 6f22 2f3e 3c69 6d67 2073 7263 3d22  oto"/><img src="
-0000d1d0: 7b30 7d2f 7469 7469 222f 3e27 202b 205c  {0}/titi"/>' + \
-0000d1e0: 0a20 2020 2020 2020 2020 2020 2027 3c61  .            '<a
-0000d1f0: 2068 7265 663d 227b 307d 2f61 3222 3e54   href="{0}/a2">T
-0000d200: 6869 7320 6973 2061 6e6f 7468 6572 206c  his is another l
-0000d210: 696e 6b3c 2f61 3e27 0a20 2020 2020 2020  ink</a>'.       
-0000d220: 2072 656c 5f68 746d 6c20 3d20 7465 7374   rel_html = test
-0000d230: 5f68 746d 6c2e 666f 726d 6174 2822 2229  _html.format("")
-0000d240: 0a20 2020 2020 2020 2068 746d 6c20 3d20  .        html = 
-0000d250: 7465 7374 5f68 746d 6c2e 666f 726d 6174  test_html.format
-0000d260: 2873 656c 662e 7369 7465 5f70 7265 6669  (self.site_prefi
-0000d270: 7829 0a20 2020 2020 2020 2061 6273 5f68  x).        abs_h
-0000d280: 746d 6c20 3d20 7365 6c66 2e5f 746f 5f74  tml = self._to_t
-0000d290: 6578 7428 4265 6175 7469 6675 6c53 6f75  ext(BeautifulSou
-0000d2a0: 7028 6874 6d6c 2929 0a20 2020 2020 2020  p(html)).       
-0000d2b0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000d2c0: 6c28 6162 735f 6874 6d6c 2c20 7374 7269  l(abs_html, stri
-0000d2d0: 705f 615f 7461 6773 286d 616b 655f 6c69  p_a_tags(make_li
-0000d2e0: 6e6b 735f 6162 736f 6c75 7465 2872 656c  nks_absolute(rel
-0000d2f0: 5f68 746d 6c2c 2073 656c 662e 6e65 7773  _html, self.news
-0000d300: 6c65 7474 6572 2929 290a 2020 2020 2020  letter))).      
-0000d310: 2020 0a20 2020 2064 6566 2074 6573 745f    .    def test_
-0000d320: 6872 6566 5f72 656c 5f61 6e64 5f61 6273  href_rel_and_abs
-0000d330: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0000d340: 7465 7374 5f68 746d 6c20 3d20 273c 6120  test_html = '<a 
-0000d350: 6872 6566 3d22 2573 2f74 6f74 6f22 3e54  href="%s/toto">T
-0000d360: 6869 7320 6973 2061 206c 696e 6b3c 2f61  his is a link</a
-0000d370: 3e3c 6120 6872 6566 3d22 6874 7470 3a2f  ><a href="http:/
-0000d380: 2f77 7777 2e61 7069 6465 762e 6672 223e  /www.apidev.fr">
-0000d390: 616e 6f74 6865 723c 2f61 3e27 0a20 2020  another</a>'.   
-0000d3a0: 2020 2020 2072 656c 5f68 746d 6c20 3d20       rel_html = 
-0000d3b0: 7465 7374 5f68 746d 6c20 2520 2222 0a20  test_html % "". 
-0000d3c0: 2020 2020 2020 2061 6273 5f68 746d 6c20         abs_html 
-0000d3d0: 3d20 7365 6c66 2e5f 746f 5f74 6578 7428  = self._to_text(
-0000d3e0: 4265 6175 7469 6675 6c53 6f75 7028 7465  BeautifulSoup(te
-0000d3f0: 7374 5f68 746d 6c20 2520 7365 6c66 2e73  st_html % self.s
-0000d400: 6974 655f 7072 6566 6978 2929 0a20 2020  ite_prefix)).   
-0000d410: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000d420: 4571 7561 6c28 6162 735f 6874 6d6c 2c20  Equal(abs_html, 
-0000d430: 7374 7269 705f 615f 7461 6773 286d 616b  strip_a_tags(mak
-0000d440: 655f 6c69 6e6b 735f 6162 736f 6c75 7465  e_links_absolute
-0000d450: 2872 656c 5f68 746d 6c2c 2073 656c 662e  (rel_html, self.
-0000d460: 6e65 7773 6c65 7474 6572 2929 290a 2020  newsletter))).  
-0000d470: 2020 2020 2020 0a20 2020 2064 6566 2074        .    def t
-0000d480: 6573 745f 7374 796c 655f 696e 5f62 6574  est_style_in_bet
-0000d490: 7765 656e 2873 656c 6629 3a0a 2020 2020  ween(self):.    
-0000d4a0: 2020 2020 7465 7374 5f68 746d 6c20 3d20      test_html = 
-0000d4b0: 273c 696d 6720 7374 796c 653d 226d 6172  '<img style="mar
-0000d4c0: 6769 6e3a 2030 3b20 7769 6474 683a 2037  gin: 0; width: 7
-0000d4d0: 3030 7078 3b22 2073 7263 3d22 2573 2f6d  00px;" src="%s/m
-0000d4e0: 6564 6961 2f69 6d67 2f6e 6577 736c 6574  edia/img/newslet
-0000d4f0: 7465 725f 6865 6164 6572 2e70 6e67 2220  ter_header.png" 
-0000d500: 616c 743d 224c 6f67 6f22 3e27 0a20 2020  alt="Logo">'.   
-0000d510: 2020 2020 2072 656c 5f68 746d 6c20 3d20       rel_html = 
-0000d520: 7465 7374 5f68 746d 6c20 2520 2222 0a20  test_html % "". 
-0000d530: 2020 2020 2020 2061 6273 5f68 746d 6c20         abs_html 
-0000d540: 3d20 7365 6c66 2e5f 746f 5f74 6578 7428  = self._to_text(
-0000d550: 4265 6175 7469 6675 6c53 6f75 7028 7465  BeautifulSoup(te
-0000d560: 7374 5f68 746d 6c20 2520 7365 6c66 2e73  st_html % self.s
-0000d570: 6974 655f 7072 6566 6978 2929 0a20 2020  ite_prefix)).   
-0000d580: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000d590: 4571 7561 6c28 6162 735f 6874 6d6c 2c20  Equal(abs_html, 
-0000d5a0: 7374 7269 705f 615f 7461 6773 286d 616b  strip_a_tags(mak
-0000d5b0: 655f 6c69 6e6b 735f 6162 736f 6c75 7465  e_links_absolute
-0000d5c0: 2872 656c 5f68 746d 6c2c 2073 656c 662e  (rel_html, self.
-0000d5d0: 6e65 7773 6c65 7474 6572 2929 290a 2020  newsletter))).  
-0000d5e0: 2020 2020 2020 0a20 2020 2064 6566 2074        .    def t
-0000d5f0: 6573 745f 6d69 7373 696e 675f 6174 7472  est_missing_attr
-0000d600: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0000d610: 7465 7374 5f68 746d 6c20 3d20 273c 696d  test_html = '<im
-0000d620: 6720 616c 743d 224c 6f67 6f22 202f 3e3c  g alt="Logo" /><
-0000d630: 6120 6e61 6d65 3d22 6161 223e 6c69 6e6b  a name="aa">link
-0000d640: 3c2f 613e 270a 2020 2020 2020 2020 6162  </a>'.        ab
-0000d650: 735f 6874 6d6c 203d 2073 656c 662e 5f74  s_html = self._t
-0000d660: 6f5f 7465 7874 2842 6561 7574 6966 756c  o_text(Beautiful
-0000d670: 536f 7570 2874 6573 745f 6874 6d6c 2929  Soup(test_html))
-0000d680: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0000d690: 7365 7274 4571 7561 6c28 6162 735f 6874  sertEqual(abs_ht
-0000d6a0: 6d6c 2c20 7374 7269 705f 615f 7461 6773  ml, strip_a_tags
-0000d6b0: 286d 616b 655f 6c69 6e6b 735f 6162 736f  (make_links_abso
-0000d6c0: 6c75 7465 2874 6573 745f 6874 6d6c 2c20  lute(test_html, 
-0000d6d0: 7365 6c66 2e6e 6577 736c 6574 7465 7229  self.newsletter)
-0000d6e0: 2929 0a0a 0a63 6c61 7373 204e 6577 736c  ))...class Newsl
-0000d6f0: 6574 7465 7246 7269 656e 646c 7954 656d  etterFriendlyTem
-0000d700: 706c 6174 6554 6167 7354 6573 7428 4261  plateTagsTest(Ba
-0000d710: 7365 5465 7374 4361 7365 293a 0a20 2020  seTestCase):.   
-0000d720: 200a 2020 2020 7465 6d70 6c61 7465 5f63   .    template_c
-0000d730: 6f6e 7465 6e74 203d 2022 2222 0a20 2020  ontent = """.   
-0000d740: 2020 2020 207b 7b25 206c 6f61 6420 636f       {{% load co
-0000d750: 6f70 5f75 7469 6c73 2025 7d7d 0a20 2020  op_utils %}}.   
-0000d760: 2020 2020 207b 7b25 206e 6c66 5f63 7373       {{% nlf_css
-0000d770: 207b 307d 2025 7d7d 0a20 2020 2020 2020   {0} %}}.       
-0000d780: 2020 2020 203c 613e 4f6e 653c 2f61 3e0a       <a>One</a>.
-0000d790: 2020 2020 2020 2020 2020 2020 3c61 3e54              <a>T
-0000d7a0: 776f 3c2f 613e 0a20 2020 2020 2020 2020  wo</a>.         
-0000d7b0: 2020 203c 613e 5468 7265 653c 2f61 3e0a     <a>Three</a>.
-0000d7c0: 2020 2020 2020 2020 2020 2020 3c69 6d67              <img
-0000d7d0: 202f 3e0a 2020 2020 2020 2020 2020 2020   />.            
-0000d7e0: 3c74 6162 6c65 3e3c 7472 3e3c 7464 3e3c  <table><tr><td><
-0000d7f0: 2f74 643e 3c74 643e 3c2f 7464 3e3c 2f74  /td><td></td></t
-0000d800: 6162 6c65 3e0a 2020 2020 2020 2020 2020  able>.          
-0000d810: 2020 3c74 6162 6c65 2063 6c61 7373 3d22    <table class="
-0000d820: 7468 6973 2d6f 6e65 223e 3c74 723e 3c74  this-one"><tr><t
-0000d830: 643e 3c2f 7464 3e3c 7464 3e3c 2f74 643e  d></td><td></td>
-0000d840: 3c2f 7461 626c 653e 0a20 2020 2020 2020  </table>.       
-0000d850: 207b 7b25 2065 6e64 5f6e 6c66 5f63 7373   {{% end_nlf_css
-0000d860: 2025 7d7d 0a20 2020 2022 2222 0a20 2020   %}}.    """.   
-0000d870: 200a 2020 2020 6465 6620 7465 7374 5f65   .    def test_e
-0000d880: 6d61 696c 5f6d 6f64 655f 6973 5f69 6e6c  mail_mode_is_inl
-0000d890: 696e 6528 7365 6c66 293a 0a20 2020 2020  ine(self):.     
-0000d8a0: 2020 2074 656d 706c 6174 6520 3d20 7365     template = se
-0000d8b0: 6c66 2e74 656d 706c 6174 655f 636f 6e74  lf.template_cont
-0000d8c0: 656e 742e 666f 726d 6174 2827 613d 2263  ent.format('a="c
-0000d8d0: 6f6c 6f72 3a20 7265 643b 2227 290a 2020  olor: red;"').  
-0000d8e0: 2020 2020 2020 7470 6c20 3d20 5465 6d70        tpl = Temp
-0000d8f0: 6c61 7465 2874 656d 706c 6174 6529 0a20  late(template). 
-0000d900: 2020 2020 2020 2068 746d 6c20 3d20 7470         html = tp
-0000d910: 6c2e 7265 6e64 6572 2843 6f6e 7465 7874  l.render(Context
-0000d920: 287b 2762 795f 656d 6169 6c27 3a20 5472  ({'by_email': Tr
-0000d930: 7565 7d29 290a 2020 2020 2020 2020 7365  ue})).        se
-0000d940: 6c66 2e61 7373 6572 7445 7175 616c 2830  lf.assertEqual(0
-0000d950: 2c20 6874 6d6c 2e63 6f75 6e74 2827 3c73  , html.count('<s
-0000d960: 7479 6c65 3e27 2929 0a20 2020 2020 2020  tyle>')).       
-0000d970: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000d980: 6c28 332c 2068 746d 6c2e 636f 756e 7428  l(3, html.count(
-0000d990: 273c 6120 7374 796c 653d 2263 6f6c 6f72  '<a style="color
-0000d9a0: 3a20 7265 643b 223e 2729 290a 2020 2020  : red;">')).    
-0000d9b0: 2020 2020 0a20 2020 2064 6566 2074 6573      .    def tes
-0000d9c0: 745f 6564 6974 5f6d 6f64 655f 6973 5f69  t_edit_mode_is_i
-0000d9d0: 6e5f 7374 796c 6528 7365 6c66 293a 0a20  n_style(self):. 
-0000d9e0: 2020 2020 2020 2074 656d 706c 6174 6520         template 
-0000d9f0: 3d20 7365 6c66 2e74 656d 706c 6174 655f  = self.template_
-0000da00: 636f 6e74 656e 742e 666f 726d 6174 2827  content.format('
-0000da10: 613d 2263 6f6c 6f72 3a20 7265 643b 2227  a="color: red;"'
-0000da20: 290a 2020 2020 2020 2020 7470 6c20 3d20  ).        tpl = 
-0000da30: 5465 6d70 6c61 7465 2874 656d 706c 6174  Template(templat
-0000da40: 6529 0a20 2020 2020 2020 2068 746d 6c20  e).        html 
-0000da50: 3d20 7470 6c2e 7265 6e64 6572 2843 6f6e  = tpl.render(Con
-0000da60: 7465 7874 287b 2762 795f 656d 6169 6c27  text({'by_email'
-0000da70: 3a20 4661 6c73 657d 2929 0a20 2020 2020  : False})).     
-0000da80: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000da90: 7561 6c28 312c 2068 746d 6c2e 636f 756e  ual(1, html.coun
-0000daa0: 7428 273c 7374 796c 653e 2729 290a 2020  t('<style>')).  
-0000dab0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000dac0: 7445 7175 616c 2831 2c20 6874 6d6c 2e63  tEqual(1, html.c
-0000dad0: 6f75 6e74 2827 6120 7b20 636f 6c6f 723a  ount('a { color:
-0000dae0: 2072 6564 3b20 7d27 2929 0a20 2020 2020   red; }')).     
-0000daf0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000db00: 7561 6c28 302c 2068 746d 6c2e 636f 756e  ual(0, html.coun
-0000db10: 7428 273c 6120 7374 796c 653d 2263 6f6c  t('<a style="col
-0000db20: 6f72 3a20 7265 643b 223e 2729 290a 2020  or: red;">')).  
-0000db30: 2020 2020 2020 0a20 2020 2064 6566 2074        .    def t
-0000db40: 6573 745f 7365 7665 7261 6c5f 6172 6773  est_several_args
-0000db50: 5f65 6d61 696c 5f6d 6f64 655f 6973 5f69  _email_mode_is_i
-0000db60: 6e6c 696e 6528 7365 6c66 293a 0a20 2020  nline(self):.   
-0000db70: 2020 2020 2074 656d 706c 6174 6520 3d20       template = 
-0000db80: 7365 6c66 2e74 656d 706c 6174 655f 636f  self.template_co
-0000db90: 6e74 656e 742e 666f 726d 6174 280a 2020  ntent.format(.  
-0000dba0: 2020 2020 2020 2020 2020 2761 3d22 636f            'a="co
-0000dbb0: 6c6f 723a 2072 6564 3b20 6261 636b 6772  lor: red; backgr
-0000dbc0: 6f75 6e64 3a20 626c 7565 3b22 2074 643d  ound: blue;" td=
-0000dbd0: 2262 6f72 6465 723a 206e 6f6e 653b 2220  "border: none;" 
-0000dbe0: 696d 673d 2277 6964 7468 3a20 3130 3070  img="width: 100p
-0000dbf0: 783b 2227 0a20 2020 2020 2020 2029 0a20  x;"'.        ). 
-0000dc00: 2020 2020 2020 2074 706c 203d 2054 656d         tpl = Tem
-0000dc10: 706c 6174 6528 7465 6d70 6c61 7465 290a  plate(template).
-0000dc20: 2020 2020 2020 2020 6874 6d6c 203d 2074          html = t
-0000dc30: 706c 2e72 656e 6465 7228 436f 6e74 6578  pl.render(Contex
-0000dc40: 7428 7b27 6279 5f65 6d61 696c 273a 2054  t({'by_email': T
-0000dc50: 7275 657d 2929 0a20 2020 2020 2020 2073  rue})).        s
-0000dc60: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000dc70: 302c 2068 746d 6c2e 636f 756e 7428 273c  0, html.count('<
-0000dc80: 7374 796c 653e 2729 290a 2020 2020 2020  style>')).      
-0000dc90: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000dca0: 616c 2833 2c20 6874 6d6c 2e63 6f75 6e74  al(3, html.count
-0000dcb0: 2827 3c61 2073 7479 6c65 3d22 636f 6c6f  ('<a style="colo
-0000dcc0: 723a 2072 6564 3b20 6261 636b 6772 6f75  r: red; backgrou
-0000dcd0: 6e64 3a20 626c 7565 3b22 3e27 2929 0a20  nd: blue;">')). 
-0000dce0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000dcf0: 7274 4571 7561 6c28 312c 2068 746d 6c2e  rtEqual(1, html.
-0000dd00: 636f 756e 7428 273c 696d 6720 7374 796c  count('<img styl
-0000dd10: 653d 2277 6964 7468 3a20 3130 3070 783b  e="width: 100px;
-0000dd20: 222f 3e27 2929 0a20 2020 2020 2020 2073  "/>')).        s
-0000dd30: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000dd40: 342c 2068 746d 6c2e 636f 756e 7428 273c  4, html.count('<
-0000dd50: 7464 2073 7479 6c65 3d22 626f 7264 6572  td style="border
-0000dd60: 3a20 6e6f 6e65 3b22 3e27 2929 0a20 2020  : none;">')).   
-0000dd70: 2020 2020 200a 2020 2020 6465 6620 7465       .    def te
-0000dd80: 7374 5f73 6576 6572 616c 5f61 7267 735f  st_several_args_
-0000dd90: 6564 6974 5f6d 6f64 655f 6973 5f69 6e5f  edit_mode_is_in_
-0000dda0: 7374 796c 6528 7365 6c66 293a 0a20 2020  style(self):.   
-0000ddb0: 2020 2020 2074 656d 706c 6174 6520 3d20       template = 
-0000ddc0: 7365 6c66 2e74 656d 706c 6174 655f 636f  self.template_co
-0000ddd0: 6e74 656e 742e 666f 726d 6174 280a 2020  ntent.format(.  
-0000dde0: 2020 2020 2020 2020 2020 2761 3d22 636f            'a="co
-0000ddf0: 6c6f 723a 2072 6564 3b20 6261 636b 6772  lor: red; backgr
-0000de00: 6f75 6e64 3a20 626c 7565 3b22 2074 643d  ound: blue;" td=
-0000de10: 2262 6f72 6465 723a 206e 6f6e 653b 2220  "border: none;" 
-0000de20: 696d 673d 2277 6964 7468 3a20 3130 3070  img="width: 100p
-0000de30: 783b 2227 0a20 2020 2020 2020 2029 0a20  x;"'.        ). 
-0000de40: 2020 2020 2020 2074 706c 203d 2054 656d         tpl = Tem
-0000de50: 706c 6174 6528 7465 6d70 6c61 7465 290a  plate(template).
-0000de60: 2020 2020 2020 2020 6874 6d6c 203d 2074          html = t
-0000de70: 706c 2e72 656e 6465 7228 436f 6e74 6578  pl.render(Contex
-0000de80: 7428 7b27 6279 5f65 6d61 696c 273a 2046  t({'by_email': F
-0000de90: 616c 7365 7d29 290a 2020 2020 2020 2020  alse})).        
-0000dea0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0000deb0: 2831 2c20 6874 6d6c 2e63 6f75 6e74 2827  (1, html.count('
-0000dec0: 3c73 7479 6c65 3e27 2929 0a20 2020 2020  <style>')).     
-0000ded0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000dee0: 7561 6c28 312c 2068 746d 6c2e 636f 756e  ual(1, html.coun
-0000def0: 7428 2761 207b 2063 6f6c 6f72 3a20 7265  t('a { color: re
-0000df00: 643b 2062 6163 6b67 726f 756e 643a 2062  d; background: b
-0000df10: 6c75 653b 207d 2729 290a 2020 2020 2020  lue; }')).      
-0000df20: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000df30: 616c 2831 2c20 6874 6d6c 2e63 6f75 6e74  al(1, html.count
-0000df40: 2827 696d 6720 7b20 7769 6474 683a 2031  ('img { width: 1
-0000df50: 3030 7078 3b20 7d27 2929 0a20 2020 2020  00px; }')).     
-0000df60: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000df70: 7561 6c28 312c 2068 746d 6c2e 636f 756e  ual(1, html.coun
-0000df80: 7428 2774 6420 7b20 626f 7264 6572 3a20  t('td { border: 
-0000df90: 6e6f 6e65 3b20 7d27 2929 0a20 2020 2020  none; }')).     
-0000dfa0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
-0000dfb0: 7561 6c28 302c 2068 746d 6c2e 636f 756e  ual(0, html.coun
-0000dfc0: 7428 273c 6120 7374 796c 653d 2263 6f6c  t('<a style="col
-0000dfd0: 6f72 3a20 7265 643b 2062 6163 6b67 726f  or: red; backgro
-0000dfe0: 756e 643a 2062 6c75 653b 223e 2729 290a  und: blue;">')).
-0000dff0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000e000: 6572 7445 7175 616c 2830 2c20 6874 6d6c  ertEqual(0, html
-0000e010: 2e63 6f75 6e74 2827 3c69 6d67 2073 7479  .count('<img sty
-0000e020: 6c65 3d22 7769 6474 683a 2031 3030 7078  le="width: 100px
-0000e030: 3b22 3e27 2929 0a20 2020 2020 2020 2073  ;">')).        s
-0000e040: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
-0000e050: 302c 2068 746d 6c2e 636f 756e 7428 273c  0, html.count('<
-0000e060: 7464 2073 7479 6c65 3d22 626f 7264 6572  td style="border
-0000e070: 3a20 6e6f 6e65 3b22 3e27 2929 0a20 2020  : none;">')).   
-0000e080: 2020 2020 200a 2020 2020 6465 6620 7465       .    def te
-0000e090: 7374 5f63 6c61 7373 5f73 656c 6563 746f  st_class_selecto
-0000e0a0: 725f 656d 6169 6c5f 6d6f 6465 5f69 735f  r_email_mode_is_
-0000e0b0: 696e 6c69 6e65 2873 656c 6629 3a0a 2020  inline(self):.  
-0000e0c0: 2020 2020 2020 7465 6d70 6c61 7465 203d        template =
-0000e0d0: 2073 656c 662e 7465 6d70 6c61 7465 5f63   self.template_c
-0000e0e0: 6f6e 7465 6e74 2e66 6f72 6d61 7428 2722  ontent.format('"
-0000e0f0: 7461 626c 652e 7468 6973 2d6f 6e65 2074  table.this-one t
-0000e100: 6422 3d22 626f 7264 6572 3a20 6e6f 6e65  d"="border: none
-0000e110: 3b22 2729 0a20 2020 2020 2020 2074 706c  ;"').        tpl
-0000e120: 203d 2054 656d 706c 6174 6528 7465 6d70   = Template(temp
-0000e130: 6c61 7465 290a 2020 2020 2020 2020 6874  late).        ht
-0000e140: 6d6c 203d 2074 706c 2e72 656e 6465 7228  ml = tpl.render(
-0000e150: 436f 6e74 6578 7428 7b27 6279 5f65 6d61  Context({'by_ema
-0000e160: 696c 273a 2054 7275 657d 2929 0a20 2020  il': True})).   
-0000e170: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000e180: 4571 7561 6c28 302c 2068 746d 6c2e 636f  Equal(0, html.co
-0000e190: 756e 7428 273c 7374 796c 653e 2729 290a  unt('<style>')).
-0000e1a0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
-0000e1b0: 6572 7445 7175 616c 2830 2c20 6874 6d6c  ertEqual(0, html
-0000e1c0: 2e63 6f75 6e74 2827 3c61 2073 7479 6c65  .count('<a style
-0000e1d0: 3d22 636f 6c6f 723a 2072 6564 3b20 6261  ="color: red; ba
-0000e1e0: 636b 6772 6f75 6e64 3a20 626c 7565 3b22  ckground: blue;"
-0000e1f0: 3e27 2929 0a20 2020 2020 2020 2073 656c  >')).        sel
-0000e200: 662e 6173 7365 7274 4571 7561 6c28 302c  f.assertEqual(0,
-0000e210: 2068 746d 6c2e 636f 756e 7428 273c 696d   html.count('<im
-0000e220: 6720 7374 796c 653d 2277 6964 7468 3a20  g style="width: 
-0000e230: 3130 3070 783b 222f 3e27 2929 0a20 2020  100px;"/>')).   
-0000e240: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
-0000e250: 4571 7561 6c28 322c 2068 746d 6c2e 636f  Equal(2, html.co
-0000e260: 756e 7428 273c 7464 2073 7479 6c65 3d22  unt('<td style="
-0000e270: 626f 7264 6572 3a20 6e6f 6e65 3b22 3e27  border: none;">'
-0000e280: 2929 0a0a 2020 2020 6465 6620 7465 7374  ))..    def test
-0000e290: 5f64 6f6e 745f 6f76 6572 7772 6974 655f  _dont_overwrite_
-0000e2a0: 696e 6c69 6e65 2873 656c 6629 3a0a 0a20  inline(self):.. 
-0000e2b0: 2020 2020 2020 2074 656d 706c 6174 655f         template_
-0000e2c0: 636f 6e74 656e 7420 3d20 2222 220a 2020  content = """.  
-0000e2d0: 2020 2020 2020 2020 2020 7b7b 2520 6c6f            {{% lo
-0000e2e0: 6164 2063 6f6f 705f 7574 696c 7320 257d  ad coop_utils %}
-0000e2f0: 7d0a 2020 2020 2020 2020 2020 2020 7b7b  }.            {{
-0000e300: 2520 6e6c 665f 6373 7320 7b30 7d20 257d  % nlf_css {0} %}
-0000e310: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
-0000e320: 2020 3c61 2073 7479 6c65 3d22 636f 6c6f    <a style="colo
-0000e330: 723a 2023 6666 6622 3e4f 6e65 3c2f 613e  r: #fff">One</a>
-0000e340: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000e350: 203c 613e 5477 6f3c 2f61 3e0a 2020 2020   <a>Two</a>.    
-0000e360: 2020 2020 2020 2020 7b7b 2520 656e 645f          {{% end_
-0000e370: 6e6c 665f 6373 7320 257d 7d0a 2020 2020  nlf_css %}}.    
-0000e380: 2020 2020 2222 220a 0a20 2020 2020 2020      """..       
-0000e390: 2074 656d 706c 6174 6520 3d20 7465 6d70   template = temp
-0000e3a0: 6c61 7465 5f63 6f6e 7465 6e74 2e66 6f72  late_content.for
-0000e3b0: 6d61 7428 2761 3d22 636f 6c6f 723a 2072  mat('a="color: r
-0000e3c0: 6564 3b20 6261 636b 6772 6f75 6e64 3a20  ed; background: 
-0000e3d0: 626c 7565 3b22 2729 0a20 2020 2020 2020  blue;"').       
-0000e3e0: 2074 706c 203d 2054 656d 706c 6174 6528   tpl = Template(
-0000e3f0: 7465 6d70 6c61 7465 290a 2020 2020 2020  template).      
-0000e400: 2020 6874 6d6c 203d 2074 706c 2e72 656e    html = tpl.ren
-0000e410: 6465 7228 436f 6e74 6578 7428 7b27 6279  der(Context({'by
-0000e420: 5f65 6d61 696c 273a 2054 7275 657d 2929  _email': True}))
-0000e430: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0000e440: 7365 7274 4571 7561 6c28 312c 2068 746d  sertEqual(1, htm
-0000e450: 6c2e 636f 756e 7428 273c 6120 7374 796c  l.count('<a styl
-0000e460: 653d 2263 6f6c 6f72 3a20 7265 643b 2062  e="color: red; b
-0000e470: 6163 6b67 726f 756e 643a 2062 6c75 653b  ackground: blue;
-0000e480: 223e 2729 290a 2020 2020 2020 2020 7365  ">')).        se
-0000e490: 6c66 2e61 7373 6572 7445 7175 616c 2831  lf.assertEqual(1
-0000e4a0: 2c20 6874 6d6c 2e63 6f75 6e74 2827 3c61  , html.count('<a
-0000e4b0: 2073 7479 6c65 3d22 636f 6c6f 723a 2023   style="color: #
-0000e4c0: 6666 663b 2062 6163 6b67 726f 756e 643a  fff; background:
-0000e4d0: 2062 6c75 653b 223e 2729 290a 0a20 2020   blue;">'))..   
-0000e4e0: 2064 6566 2074 6573 745f 6b65 6570 5f6f   def test_keep_o
-0000e4f0: 7264 6572 5f69 6e6c 696e 6528 7365 6c66  rder_inline(self
-0000e500: 293a 0a0a 2020 2020 2020 2020 7465 6d70  ):..        temp
-0000e510: 6c61 7465 5f63 6f6e 7465 6e74 203d 2022  late_content = "
-0000e520: 2222 0a20 2020 2020 2020 2020 2020 207b  "".            {
-0000e530: 7b25 206c 6f61 6420 636f 6f70 5f75 7469  {% load coop_uti
-0000e540: 6c73 2025 7d7d 0a20 2020 2020 2020 2020  ls %}}.         
-0000e550: 2020 207b 7b25 206e 6c66 5f63 7373 207b     {{% nlf_css {
-0000e560: 307d 2025 7d7d 0a20 2020 2020 2020 2020  0} %}}.         
-0000e570: 2020 2020 2020 203c 6120 7374 796c 653d         <a style=
-0000e580: 2262 6163 6b67 726f 756e 643a 2023 3030  "background: #00
-0000e590: 303b 2063 6f6c 6f72 3a20 2366 6666 3b22  0; color: #fff;"
-0000e5a0: 3e4f 6e65 3c2f 613e 0a20 2020 2020 2020  >One</a>.       
-0000e5b0: 2020 2020 2020 2020 203c 613e 5477 6f3c           <a>Two<
-0000e5c0: 2f61 3e0a 2020 2020 2020 2020 2020 2020  /a>.            
-0000e5d0: 7b7b 2520 656e 645f 6e6c 665f 6373 7320  {{% end_nlf_css 
-0000e5e0: 257d 7d0a 2020 2020 2020 2020 2222 220a  %}}.        """.
-0000e5f0: 0a20 2020 2020 2020 2074 656d 706c 6174  .        templat
-0000e600: 6520 3d20 7465 6d70 6c61 7465 5f63 6f6e  e = template_con
-0000e610: 7465 6e74 2e66 6f72 6d61 7428 2761 3d22  tent.format('a="
-0000e620: 636f 6c6f 723a 2072 6564 3b20 6261 636b  color: red; back
-0000e630: 6772 6f75 6e64 3a20 626c 7565 3b20 7061  ground: blue; pa
-0000e640: 6464 696e 673a 2030 3b22 2729 0a20 2020  dding: 0;"').   
-0000e650: 2020 2020 2074 706c 203d 2054 656d 706c       tpl = Templ
-0000e660: 6174 6528 7465 6d70 6c61 7465 290a 2020  ate(template).  
-0000e670: 2020 2020 2020 6874 6d6c 203d 2074 706c        html = tpl
-0000e680: 2e72 656e 6465 7228 436f 6e74 6578 7428  .render(Context(
-0000e690: 7b27 6279 5f65 6d61 696c 273a 2054 7275  {'by_email': Tru
-0000e6a0: 657d 2929 0a0a 2020 2020 2020 2020 7365  e}))..        se
-0000e6b0: 6c66 2e61 7373 6572 7445 7175 616c 2831  lf.assertEqual(1
-0000e6c0: 2c20 6874 6d6c 2e63 6f75 6e74 2827 3c61  , html.count('<a
-0000e6d0: 2073 7479 6c65 3d22 6261 636b 6772 6f75   style="backgrou
-0000e6e0: 6e64 3a20 2330 3030 3b20 636f 6c6f 723a  nd: #000; color:
-0000e6f0: 2023 6666 663b 2070 6164 6469 6e67 3a20   #fff; padding: 
-0000e700: 303b 223e 2729 290a 2020 2020 2020 2020  0;">')).        
-0000e710: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
-0000e720: 2831 2c20 6874 6d6c 2e63 6f75 6e74 2827  (1, html.count('
-0000e730: 3c61 2073 7479 6c65 3d22 636f 6c6f 723a  <a style="color:
-0000e740: 2072 6564 3b20 6261 636b 6772 6f75 6e64   red; background
-0000e750: 3a20 626c 7565 3b20 7061 6464 696e 673a  : blue; padding:
-0000e760: 2030 3b22 3e27 2929 0a0a 2020 2020 6465   0;">'))..    de
-0000e770: 6620 7465 7374 5f61 6363 6570 745f 7175  f test_accept_qu
-0000e780: 6f74 6528 7365 6c66 293a 0a0a 2020 2020  ote(self):..    
-0000e790: 2020 2020 7465 6d70 6c61 7465 5f63 6f6e      template_con
-0000e7a0: 7465 6e74 203d 2022 2222 0a20 2020 2020  tent = """.     
-0000e7b0: 2020 2020 2020 207b 7b25 206c 6f61 6420         {{% load 
-0000e7c0: 636f 6f70 5f75 7469 6c73 2025 7d7d 0a20  coop_utils %}}. 
-0000e7d0: 2020 2020 2020 2020 2020 207b 7b25 206e             {{% n
-0000e7e0: 6c66 5f63 7373 207b 307d 2025 7d7d 0a20  lf_css {0} %}}. 
-0000e7f0: 2020 2020 2020 2020 2020 2020 2020 203c                 <
-0000e800: 6120 7374 796c 653d 2266 6f6e 742d 6661  a style="font-fa
-0000e810: 6d69 6c79 3a20 2741 7269 616c 273b 223e  mily: 'Arial';">
-0000e820: 4f6e 653c 2f61 3e0a 2020 2020 2020 2020  One</a>.        
-0000e830: 2020 2020 2020 2020 3c61 3e54 776f 3c2f          <a>Two</
-0000e840: 613e 0a20 2020 2020 2020 2020 2020 207b  a>.            {
-0000e850: 7b25 2065 6e64 5f6e 6c66 5f63 7373 2025  {% end_nlf_css %
-0000e860: 7d7d 0a20 2020 2020 2020 2022 2222 0a0a  }}.        """..
-0000e870: 2020 2020 2020 2020 7465 6d70 6c61 7465          template
-0000e880: 203d 2074 656d 706c 6174 655f 636f 6e74   = template_cont
-0000e890: 656e 742e 666f 726d 6174 2827 2727 613d  ent.format('''a=
-0000e8a0: 2266 6f6e 742d 6661 6d69 6c79 3a20 2754  "font-family: 'T
-0000e8b0: 6168 6f6d 6127 3b22 2727 2729 0a20 2020  ahoma';"''').   
-0000e8c0: 2020 2020 2074 706c 203d 2054 656d 706c       tpl = Templ
-0000e8d0: 6174 6528 7465 6d70 6c61 7465 290a 2020  ate(template).  
-0000e8e0: 2020 2020 2020 6874 6d6c 203d 2074 706c        html = tpl
-0000e8f0: 2e72 656e 6465 7228 436f 6e74 6578 7428  .render(Context(
-0000e900: 7b27 6279 5f65 6d61 696c 273a 2054 7275  {'by_email': Tru
-0000e910: 657d 2929 0a20 2020 2020 2020 2073 656c  e})).        sel
-0000e920: 662e 6173 7365 7274 4571 7561 6c28 312c  f.assertEqual(1,
-0000e930: 2068 746d 6c2e 636f 756e 7428 2727 273c   html.count('''<
-0000e940: 6120 7374 796c 653d 2266 6f6e 742d 6661  a style="font-fa
-0000e950: 6d69 6c79 3a20 2741 7269 616c 273b 223e  mily: 'Arial';">
-0000e960: 2727 2729 290a 2020 2020 2020 2020 7365  ''')).        se
-0000e970: 6c66 2e61 7373 6572 7445 7175 616c 2831  lf.assertEqual(1
-0000e980: 2c20 6874 6d6c 2e63 6f75 6e74 2827 2727  , html.count('''
-0000e990: 3c61 2073 7479 6c65 3d22 666f 6e74 2d66  <a style="font-f
-0000e9a0: 616d 696c 793a 2027 5461 686f 6d61 273b  amily: 'Tahoma';
-0000e9b0: 223e 2727 2729 290a 0a20 2020 2064 6566  ">'''))..    def
-0000e9c0: 2074 6573 745f 6373 735f 6f72 6465 7228   test_css_order(
-0000e9d0: 7365 6c66 293a 0a0a 2020 2020 2020 2020  self):..        
-0000e9e0: 7465 6d70 6c61 7465 5f63 6f6e 7465 6e74  template_content
-0000e9f0: 203d 2022 2222 0a20 2020 2020 2020 2020   = """.         
-0000ea00: 2020 207b 7b25 206c 6f61 6420 636f 6f70     {{% load coop
-0000ea10: 5f75 7469 6c73 2025 7d7d 0a20 2020 2020  _utils %}}.     
-0000ea20: 2020 2020 2020 207b 7b25 206e 6c66 5f63         {{% nlf_c
-0000ea30: 7373 207b 307d 2025 7d7d 0a20 2020 2020  ss {0} %}}.     
-0000ea40: 2020 2020 2020 2020 2020 203c 613e 4f6e             <a>On
-0000ea50: 653c 2f61 3e0a 2020 2020 2020 2020 2020  e</a>.          
-0000ea60: 2020 2020 2020 3c64 6976 2063 6c61 7373        <div class
-0000ea70: 3d22 626c 7565 223e 0a20 2020 2020 2020  ="blue">.       
-0000ea80: 2020 2020 2020 2020 203c 613e 5477 6f3c           <a>Two<
-0000ea90: 2f61 3e0a 2020 2020 2020 2020 2020 2020  /a>.            
-0000eaa0: 2020 2020 3c2f 6469 763e 0a20 2020 2020      </div>.     
-0000eab0: 2020 2020 2020 207b 7b25 2065 6e64 5f6e         {{% end_n
-0000eac0: 6c66 5f63 7373 2025 7d7d 0a20 2020 2020  lf_css %}}.     
-0000ead0: 2020 2022 2222 0a0a 2020 2020 2020 2020     """..        
-0000eae0: 7470 6c20 3d20 5465 6d70 6c61 7465 2874  tpl = Template(t
-0000eaf0: 656d 706c 6174 655f 636f 6e74 656e 742e  emplate_content.
-0000eb00: 666f 726d 6174 2827 613d 2263 6f6c 6f72  format('a="color
-0000eb10: 3a20 2330 3030 2220 222e 626c 7565 2061  : #000" ".blue a
-0000eb20: 223d 2263 6f6c 6f72 3a20 2366 6666 2227  "="color: #fff"'
-0000eb30: 2929 0a20 2020 2020 2020 2068 746d 6c20  )).        html 
-0000eb40: 3d20 7470 6c2e 7265 6e64 6572 2843 6f6e  = tpl.render(Con
-0000eb50: 7465 7874 287b 2762 795f 656d 6169 6c27  text({'by_email'
-0000eb60: 3a20 5472 7565 7d29 290a 2020 2020 2020  : True})).      
-0000eb70: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000eb80: 616c 2832 2c20 6874 6d6c 2e63 6f75 6e74  al(2, html.count
-0000eb90: 2827 2727 3c61 2073 7479 6c65 3d22 636f  ('''<a style="co
-0000eba0: 6c6f 723a 2023 3030 303b 223e 2727 2729  lor: #000;">''')
-0000ebb0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
-0000ebc0: 7373 6572 7445 7175 616c 2830 2c20 6874  ssertEqual(0, ht
-0000ebd0: 6d6c 2e63 6f75 6e74 2827 2727 3c61 2073  ml.count('''<a s
-0000ebe0: 7479 6c65 3d22 636f 6c6f 723a 2023 6666  tyle="color: #ff
-0000ebf0: 6627 3b22 3e27 2727 2929 0a0a 2020 2020  f';">'''))..    
-0000ec00: 2020 2020 7470 6c20 3d20 5465 6d70 6c61      tpl = Templa
-0000ec10: 7465 2874 656d 706c 6174 655f 636f 6e74  te(template_cont
-0000ec20: 656e 742e 666f 726d 6174 2827 222e 626c  ent.format('".bl
-0000ec30: 7565 2061 223d 2263 6f6c 6f72 3a20 2366  ue a"="color: #f
-0000ec40: 6666 2220 613d 2263 6f6c 6f72 3a20 2330  ff" a="color: #0
-0000ec50: 3030 2227 2929 0a20 2020 2020 2020 2068  00"')).        h
-0000ec60: 746d 6c20 3d20 7470 6c2e 7265 6e64 6572  tml = tpl.render
-0000ec70: 2843 6f6e 7465 7874 287b 2762 795f 656d  (Context({'by_em
-0000ec80: 6169 6c27 3a20 5472 7565 7d29 290a 2020  ail': True})).  
-0000ec90: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000eca0: 7445 7175 616c 2831 2c20 6874 6d6c 2e63  tEqual(1, html.c
-0000ecb0: 6f75 6e74 2827 2727 3c61 2073 7479 6c65  ount('''<a style
-0000ecc0: 3d22 636f 6c6f 723a 2023 3030 303b 223e  ="color: #000;">
-0000ecd0: 2727 2729 290a 2020 2020 2020 2020 7365  ''')).        se
-0000ece0: 6c66 2e61 7373 6572 7445 7175 616c 2831  lf.assertEqual(1
-0000ecf0: 2c20 6874 6d6c 2e63 6f75 6e74 2827 2727  , html.count('''
-0000ed00: 3c61 2073 7479 6c65 3d22 636f 6c6f 723a  <a style="color:
-0000ed10: 2023 6666 663b 223e 2727 2729 290a 0a20   #fff;">''')).. 
-0000ed20: 2020 2064 6566 2074 6573 745f 6e6f 5f65     def test_no_e
-0000ed30: 6e64 5f74 6167 2873 656c 6629 3a0a 0a20  nd_tag(self):.. 
-0000ed40: 2020 2020 2020 2074 656d 706c 6174 655f         template_
-0000ed50: 636f 6e74 656e 7420 3d20 2222 220a 2020  content = """.  
-0000ed60: 2020 2020 2020 2020 2020 7b7b 2520 6c6f            {{% lo
-0000ed70: 6164 2063 6f6f 705f 7574 696c 7320 257d  ad coop_utils %}
-0000ed80: 7d0a 2020 2020 2020 2020 2020 2020 7b7b  }.            {{
-0000ed90: 2520 6e6c 665f 6373 7320 7b30 7d20 257d  % nlf_css {0} %}
-0000eda0: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
-0000edb0: 2020 3c61 3e4f 6e65 3c2f 613e 0a20 2020    <a>One</a>.   
-0000edc0: 2020 2020 2020 2020 2020 2020 203c 6872               <hr
-0000edd0: 202f 3e0a 2020 2020 2020 2020 2020 2020   />.            
-0000ede0: 2020 2020 3c61 3e54 776f 3c2f 613e 0a20      <a>Two</a>. 
-0000edf0: 2020 2020 2020 2020 2020 207b 7b25 2065             {{% e
-0000ee00: 6e64 5f6e 6c66 5f63 7373 2025 7d7d 0a20  nd_nlf_css %}}. 
-0000ee10: 2020 2020 2020 2022 2222 0a0a 2020 2020         """..    
-0000ee20: 2020 2020 7465 6d70 6c61 7465 203d 2074      template = t
-0000ee30: 656d 706c 6174 655f 636f 6e74 656e 742e  emplate_content.
-0000ee40: 666f 726d 6174 2827 6872 3d22 636f 6c6f  format('hr="colo
-0000ee50: 723a 2072 6564 3b22 2729 0a20 2020 2020  r: red;"').     
-0000ee60: 2020 2074 706c 203d 2054 656d 706c 6174     tpl = Templat
-0000ee70: 6528 7465 6d70 6c61 7465 290a 2020 2020  e(template).    
-0000ee80: 2020 2020 6874 6d6c 203d 2074 706c 2e72      html = tpl.r
-0000ee90: 656e 6465 7228 436f 6e74 6578 7428 7b27  ender(Context({'
-0000eea0: 6279 5f65 6d61 696c 273a 2054 7275 657d  by_email': True}
-0000eeb0: 2929 0a20 2020 2020 2020 2073 656c 662e  )).        self.
-0000eec0: 6173 7365 7274 4571 7561 6c28 312c 2068  assertEqual(1, h
-0000eed0: 746d 6c2e 636f 756e 7428 273c 6872 2073  tml.count('<hr s
-0000eee0: 7479 6c65 3d22 636f 6c6f 723a 2072 6564  tyle="color: red
-0000eef0: 3b22 2f3e 2729 290a 0a0a 636c 6173 7320  ;"/>'))...class 
-0000ef00: 4874 6d6c 4669 7854 6573 7428 4261 7365  HtmlFixTest(Base
-0000ef10: 5465 7374 4361 7365 293a 0a20 2020 2022  TestCase):.    "
-0000ef20: 2222 5465 7374 2064 6972 7479 2066 6978  ""Test dirty fix
-0000ef30: 7320 666f 7220 6e65 7773 6c65 7474 6572  s for newsletter
-0000ef40: 2068 746d 6c22 2222 0a0a 2020 2020 6465   html"""..    de
-0000ef50: 6620 7465 7374 5f73 7472 6970 5f61 5f74  f test_strip_a_t
-0000ef60: 6167 7328 7365 6c66 293a 0a20 2020 2020  ags(self):.     
-0000ef70: 2020 2022 2222 4d61 6b65 2073 7572 6520     """Make sure 
-0000ef80: 7468 6174 2074 6865 2061 2074 6167 7320  that the a tags 
-0000ef90: 6861 7665 206e 6f20 7370 6163 6520 696e  have no space in
-0000efa0: 7369 6465 2222 220a 2020 2020 2020 2020  side""".        
-0000efb0: 6874 6d6c 203d 2027 2727 0a20 2020 2020  html = '''.     
-0000efc0: 2020 203c 703e 0a20 2020 2020 2020 2020     <p>.         
-0000efd0: 3c68 313e 5465 7374 3c2f 6831 3e0a 2020  <h1>Test</h1>.  
-0000efe0: 2020 2020 2020 203c 6120 636c 6173 733d         <a class=
-0000eff0: 226c 696e 6b22 2068 7265 663d 222f 223e  "link" href="/">
-0000f000: 0a20 2020 2020 2020 2020 2043 6f6f 6c0a  .          Cool.
-0000f010: 2020 2020 2020 2020 203c 2f61 3e0a 2020           </a>.  
-0000f020: 2020 2020 2020 203c 6469 763e 0a20 2020         <div>.   
-0000f030: 2020 2020 2020 3c61 2068 7265 663d 222f        <a href="/
-0000f040: 7465 7374 223e 0a20 2020 2020 2020 2020  test">.         
-0000f050: 2054 6573 740a 2020 2020 2020 2020 203c   Test.         <
-0000f060: 2f61 3e0a 2020 2020 2020 2020 203c 2f64  /a>.         </d
-0000f070: 6976 3e0a 2020 2020 2020 2020 3c2f 703e  iv>.        </p>
-0000f080: 0a20 2020 2020 2020 2027 2727 0a0a 2020  .        '''..  
-0000f090: 2020 2020 2020 736f 7570 203d 2042 6561        soup = Bea
-0000f0a0: 7574 6966 756c 536f 7570 2868 746d 6c29  utifulSoup(html)
-0000f0b0: 0a20 2020 2020 2020 2066 6978 6564 5f68  .        fixed_h
-0000f0c0: 746d 6c20 3d20 7374 7269 705f 615f 7461  tml = strip_a_ta
-0000f0d0: 6773 2873 6f75 702e 7072 6574 7469 6679  gs(soup.prettify
-0000f0e0: 2829 290a 0a20 2020 2020 2020 2065 7870  ())..        exp
-0000f0f0: 6563 7465 645f 6874 6d6c 203d 2027 3c70  ected_html = '<p
-0000f100: 3e5c 6e20 3c68 313e 5c6e 2020 5465 7374  >\n <h1>\n  Test
-0000f110: 5c6e 203c 2f68 313e 5c6e 203c 6120 636c  \n </h1>\n <a cl
-0000f120: 6173 733d 226c 696e 6b22 2068 7265 663d  ass="link" href=
-0000f130: 222f 223e 436f 6f6c 3c2f 613e 5c6e 203c  "/">Cool</a>\n <
-0000f140: 6469 763e 5c6e 2020 2720 5c0a 2020 2020  div>\n  ' \.    
-0000f150: 2020 2020 273c 6120 6872 6566 3d22 2f74      '<a href="/t
-0000f160: 6573 7422 3e54 6573 743c 2f61 3e5c 6e20  est">Test</a>\n 
-0000f170: 3c2f 6469 763e 5c6e 3c2f 703e 5c6e 270a  </div>\n</p>\n'.
-0000f180: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0000f190: 7365 7274 4571 7561 6c28 6669 7865 645f  sertEqual(fixed_
-0000f1a0: 6874 6d6c 2c20 6578 7065 6374 6564 5f68  html, expected_h
-0000f1b0: 746d 6c29 0a0a 2020 2020 6465 6620 7465  tml)..    def te
-0000f1c0: 7374 5f6e 6f5f 615f 7461 6773 2873 656c  st_no_a_tags(sel
-0000f1d0: 6629 3a0a 2020 2020 2020 2020 2222 224d  f):.        """M
-0000f1e0: 616b 6520 7375 7265 2074 6861 7420 636f  ake sure that co
-0000f1f0: 6e74 656e 7420 6973 2072 6574 7572 6e65  ntent is returne
-0000f200: 6420 7072 6f70 6572 6c79 2069 6620 6e6f  d properly if no
-0000f210: 2061 2074 6167 2069 6e20 636f 6e74 656e   a tag in conten
-0000f220: 7422 2222 0a20 2020 2020 2020 2068 746d  t""".        htm
-0000f230: 6c20 3d20 2727 270a 2020 2020 2020 2020  l = '''.        
-0000f240: 3c70 3e0a 2020 2020 2020 2020 203c 6831  <p>.         <h1
-0000f250: 3e54 6573 743c 2f68 313e 0a20 2020 2020  >Test</h1>.     
-0000f260: 2020 203c 2f70 3e0a 2020 2020 2020 2020     </p>.        
-0000f270: 2727 270a 0a20 2020 2020 2020 2073 6f75  '''..        sou
-0000f280: 7020 3d20 4265 6175 7469 6675 6c53 6f75  p = BeautifulSou
-0000f290: 7028 6874 6d6c 290a 2020 2020 2020 2020  p(html).        
-0000f2a0: 6669 7865 645f 6874 6d6c 203d 2073 7472  fixed_html = str
-0000f2b0: 6970 5f61 5f74 6167 7328 736f 7570 2e70  ip_a_tags(soup.p
-0000f2c0: 7265 7474 6966 7928 2929 0a0a 2020 2020  rettify())..    
-0000f2d0: 2020 2020 6578 7065 6374 6564 5f68 746d      expected_htm
-0000f2e0: 6c20 3d20 273c 703e 5c6e 203c 6831 3e5c  l = '<p>\n <h1>\
-0000f2f0: 6e20 2054 6573 745c 6e20 3c2f 6831 3e5c  n  Test\n </h1>\
-0000f300: 6e3c 2f70 3e5c 6e27 0a0a 2020 2020 2020  n</p>\n'..      
-0000f310: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
-0000f320: 616c 2866 6978 6564 5f68 746d 6c2c 2065  al(fixed_html, e
-0000f330: 7870 6563 7465 645f 6874 6d6c 290a 0a20  xpected_html).. 
-0000f340: 2020 2064 6566 2074 6573 745f 6176 6f69     def test_avoi
-0000f350: 645f 6c69 6e65 5f74 6f6f 5f6c 6f6e 6728  d_line_too_long(
-0000f360: 7365 6c66 293a 0a20 2020 2020 2020 2022  self):.        "
-0000f370: 2222 6e65 7773 6c65 7474 6572 2073 686f  ""newsletter sho
-0000f380: 756c 6420 6e6f 7420 636f 6e74 6169 6e73  uld not contains
-0000f390: 206d 6f72 6520 7468 616e 2039 3938 2063   more than 998 c
-0000f3a0: 6861 7273 2e20 466f 7263 6520 736f 6d65  hars. Force some
-0000f3b0: 2065 6e64 6c69 6e65 2069 6620 736f 2222   endline if so""
-0000f3c0: 220a 2020 2020 2020 2020 6874 6d6c 203d  ".        html =
-0000f3d0: 2027 2727 0a20 2020 2020 2020 203c 703e   '''.        <p>
-0000f3e0: 0a20 2020 2020 2020 2020 3c68 313e 5465  .         <h1>Te
-0000f3f0: 7374 3c2f 6831 3e0a 2020 2020 2020 2020  st</h1>.        
-0000f400: 203c 6120 636c 6173 733d 226c 696e 6b22   <a class="link"
-0000f410: 2068 7265 663d 222f 223e 0a20 2020 2020   href="/">.     
-0000f420: 2020 2020 207b 307d 0a20 2020 2020 2020       {0}.       
-0000f430: 2020 3c2f 613e 0a20 2020 2020 2020 2020    </a>.         
-0000f440: 3c64 6976 3e0a 2020 2020 2020 2020 203c  <div>.         <
-0000f450: 6120 6872 6566 3d22 2f74 6573 7422 3e0a  a href="/test">.
-0000f460: 2020 2020 2020 2020 2020 3c68 323e 4574            <h2>Et
-0000f470: c3a9 3c2f 6832 3e0a 2020 2020 2020 2020  ..</h2>.        
-0000f480: 203c 2f61 3e0a 2020 2020 2020 2020 203c   </a>.         <
-0000f490: 2f64 6976 3e0a 2020 2020 2020 2020 3c2f  /div>.        </
-0000f4a0: 703e 0a20 2020 2020 2020 2027 2727 2e66  p>.        '''.f
-0000f4b0: 6f72 6d61 7428 2761 6263 6420 2720 2a20  ormat('abcd ' * 
-0000f4c0: 3330 3029 2020 2320 3135 3030 0a0a 2020  300)  # 1500..  
-0000f4d0: 2020 2020 2020 6669 7865 645f 6874 6d6c        fixed_html
-0000f4e0: 203d 2061 766f 6964 5f6c 696e 655f 746f   = avoid_line_to
-0000f4f0: 6f5f 6c6f 6e67 2868 746d 6c29 0a0a 2020  o_long(html)..  
-0000f500: 2020 2020 2020 6d61 785f 6c65 6e67 7468        max_length
-0000f510: 203d 2030 0a20 2020 2020 2020 2066 6f72   = 0.        for
-0000f520: 206c 696e 6520 696e 2066 6978 6564 5f68   line in fixed_h
-0000f530: 746d 6c2e 7370 6c69 7428 275c 6e27 293a  tml.split('\n'):
-0000f540: 0a20 2020 2020 2020 2020 2020 206d 6178  .            max
-0000f550: 5f6c 656e 6774 6820 3d20 6d61 7828 6d61  _length = max(ma
-0000f560: 785f 6c65 6e67 7468 2c20 6c65 6e28 6c69  x_length, len(li
-0000f570: 6e65 2929 0a0a 2020 2020 2020 2020 7365  ne))..        se
-0000f580: 6c66 2e61 7373 6572 7445 7175 616c 2866  lf.assertEqual(f
-0000f590: 6978 6564 5f68 746d 6c2e 636f 756e 7428  ixed_html.count(
-0000f5a0: 2761 6263 6427 292c 2033 3030 290a 2020  'abcd'), 300).  
-0000f5b0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
-0000f5c0: 7445 7175 616c 286c 656e 2866 6978 6564  tEqual(len(fixed
-0000f5d0: 5f68 746d 6c2e 7370 6c69 746c 696e 6573  _html.splitlines
-0000f5e0: 2829 292c 206c 656e 2868 746d 6c2e 7370  ()), len(html.sp
-0000f5f0: 6c69 746c 696e 6573 2829 2920 2b20 3120  litlines()) + 1 
-0000f600: 2b20 2831 3530 3020 2f2f 2039 3030 2929  + (1500 // 900))
-0000f610: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
-0000f620: 7365 7274 5472 7565 286d 6178 5f6c 656e  sertTrue(max_len
-0000f630: 6774 6820 3c3d 2039 3030 290a 2020 2020  gth <= 900).    
-0000f640: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
-0000f650: 7275 6528 6669 7865 645f 6874 6d6c 2e66  rue(fixed_html.f
-0000f660: 696e 6428 273c 6831 3e54 6573 743c 2f68  ind('<h1>Test</h
-0000f670: 313e 2729 203e 2030 290a 2020 2020 2020  1>') > 0).      
-0000f680: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-0000f690: 6528 6669 7865 645f 6874 6d6c 2e66 696e  e(fixed_html.fin
-0000f6a0: 6428 273c 6832 3e45 74c3 a93c 2f68 323e  d('<h2>Et..</h2>
-0000f6b0: 2729 203e 2030 290a 0a20 2020 2064 6566  ') > 0)..    def
-0000f6c0: 2074 6573 745f 6176 6f69 645f 6c69 6e65   test_avoid_line
-0000f6d0: 5f76 6572 795f 746f 6f5f 6c6f 6e67 2873  _very_too_long(s
-0000f6e0: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
-0000f6f0: 226e 6577 736c 6574 7465 7220 7368 6f75  "newsletter shou
-0000f700: 6c64 206e 6f74 2063 6f6e 7461 696e 7320  ld not contains 
-0000f710: 6d6f 7265 2074 6861 6e20 3939 3820 6368  more than 998 ch
-0000f720: 6172 732e 2046 6f72 6365 2073 6f6d 6520  ars. Force some 
-0000f730: 656e 646c 696e 6520 6966 2073 6f22 2222  endline if so"""
-0000f740: 0a20 2020 2020 2020 2068 746d 6c20 3d20  .        html = 
-0000f750: 2727 270a 2020 2020 2020 2020 3c70 3e0a  '''.        <p>.
-0000f760: 2020 2020 2020 2020 203c 6831 3e54 6573           <h1>Tes
-0000f770: 743c 2f68 313e 0a20 2020 2020 2020 2020  t</h1>.         
-0000f780: 3c61 2063 6c61 7373 3d22 6c69 6e6b 2220  <a class="link" 
-0000f790: 6872 6566 3d22 2f22 3e0a 2020 2020 2020  href="/">.      
-0000f7a0: 2020 2020 7b30 7d0a 2020 2020 2020 2020      {0}.        
-0000f7b0: 203c 2f61 3e0a 2020 2020 2020 2020 203c   </a>.         <
-0000f7c0: 6469 763e 0a20 2020 2020 2020 2020 3c61  div>.         <a
-0000f7d0: 2068 7265 663d 222f 7465 7374 223e 0a20   href="/test">. 
-0000f7e0: 2020 2020 2020 2020 203c 6832 3e45 74c3           <h2>Et.
-0000f7f0: a93c 2f68 323e 0a20 2020 2020 2020 2020  .</h2>.         
-0000f800: 3c2f 613e 0a20 2020 2020 2020 2020 3c2f  </a>.         </
-0000f810: 6469 763e 0a20 2020 2020 2020 203c 2f70  div>.        </p
-0000f820: 3e0a 2020 2020 2020 2020 2727 272e 666f  >.        '''.fo
-0000f830: 726d 6174 2827 6162 6364 c3a9 2027 202a  rmat('abcd.. ' *
-0000f840: 2036 3030 2920 2023 2034 3230 3020 6368   600)  # 4200 ch
-0000f850: 6172 6163 7465 7273 0a0a 2020 2020 2020  aracters..      
-0000f860: 2020 6669 7865 645f 6874 6d6c 203d 2061    fixed_html = a
-0000f870: 766f 6964 5f6c 696e 655f 746f 6f5f 6c6f  void_line_too_lo
-0000f880: 6e67 2868 746d 6c29 0a0a 2020 2020 2020  ng(html)..      
-0000f890: 2020 6d61 785f 6c65 6e67 7468 203d 2030    max_length = 0
-0000f8a0: 0a20 2020 2020 2020 2066 6f72 206c 696e  .        for lin
-0000f8b0: 6520 696e 2066 6978 6564 5f68 746d 6c2e  e in fixed_html.
-0000f8c0: 7370 6c69 7428 275c 6e27 293a 0a20 2020  split('\n'):.   
-0000f8d0: 2020 2020 2020 2020 206d 6178 5f6c 656e           max_len
-0000f8e0: 6774 6820 3d20 6d61 7828 6d61 785f 6c65  gth = max(max_le
-0000f8f0: 6e67 7468 2c20 6c65 6e28 6c69 6e65 2929  ngth, len(line))
-0000f900: 0a0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
-0000f910: 7373 6572 7445 7175 616c 2866 6978 6564  ssertEqual(fixed
-0000f920: 5f68 746d 6c2e 636f 756e 7428 2761 6263  _html.count('abc
-0000f930: 64c3 a927 292c 2036 3030 290a 2020 2020  d..'), 600).    
-0000f940: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
-0000f950: 7175 616c 286c 656e 2866 6978 6564 5f68  qual(len(fixed_h
-0000f960: 746d 6c2e 7370 6c69 746c 696e 6573 2829  tml.splitlines()
-0000f970: 292c 206c 656e 2868 746d 6c2e 7370 6c69  ), len(html.spli
-0000f980: 746c 696e 6573 2829 2920 2b20 3120 2b20  tlines()) + 1 + 
-0000f990: 2834 3230 3020 2f2f 2039 3030 2929 0a20  (4200 // 900)). 
-0000f9a0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
-0000f9b0: 7274 5472 7565 286d 6178 5f6c 656e 6774  rtTrue(max_lengt
-0000f9c0: 6820 3c3d 2039 3030 290a 2020 2020 2020  h <= 900).      
-0000f9d0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
-0000f9e0: 6528 6669 7865 645f 6874 6d6c 2e66 696e  e(fixed_html.fin
-0000f9f0: 6428 273c 6831 3e54 6573 743c 2f68 313e  d('<h1>Test</h1>
-0000fa00: 2729 203e 2030 290a 2020 2020 2020 2020  ') > 0).        
-0000fa10: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
-0000fa20: 6669 7865 645f 6874 6d6c 2e66 696e 6428  fixed_html.find(
-0000fa30: 273c 6832 3e45 74c3 a93c 2f68 323e 2729  '<h2>Et..</h2>')
-0000fa40: 203e 2030 290a 0a20 2020 2064 6566 2074   > 0)..    def t
-0000fa50: 6573 745f 6176 6f69 645f 6c69 6e65 5f74  est_avoid_line_t
-0000fa60: 6f6f 5f6c 6f6e 675f 6e6f 5f63 6861 6e67  oo_long_no_chang
-0000fa70: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
-0000fa80: 2022 2222 6e65 7773 6c65 7474 6572 2073   """newsletter s
-0000fa90: 686f 756c 6420 6e6f 7420 636f 6e74 6169  hould not contai
-0000faa0: 6e73 206d 6f72 6520 7468 616e 2039 3938  ns more than 998
-0000fab0: 2063 6861 7273 2e20 466f 7263 6520 736f   chars. Force so
-0000fac0: 6d65 2065 6e64 6c69 6e65 2069 6620 736f  me endline if so
-0000fad0: 2222 220a 2020 2020 2020 2020 6874 6d6c  """.        html
-0000fae0: 203d 2027 2727 0a20 2020 2020 2020 203c   = '''.        <
-0000faf0: 703e 0a20 2020 2020 2020 2020 3c68 313e  p>.         <h1>
-0000fb00: 5465 7374 3c2f 6831 3e0a 2020 2020 2020  Test</h1>.      
-0000fb10: 2020 203c 6120 636c 6173 733d 226c 696e     <a class="lin
-0000fb20: 6b22 2068 7265 663d 222f 223e 0a20 2020  k" href="/">.   
-0000fb30: 2020 2020 2020 2043 6f6f 6c0a 2020 2020         Cool.    
-0000fb40: 2020 2020 203c 2f61 3e0a 2020 2020 2020       </a>.      
-0000fb50: 2020 203c 6469 763e 0a20 2020 2020 2020     <div>.       
-0000fb60: 2020 3c61 2068 7265 663d 222f 7465 7374    <a href="/test
-0000fb70: 223e 0a20 2020 2020 2020 2020 2054 6573  ">.          Tes
-0000fb80: 740a 2020 2020 2020 2020 203c 2f61 3e0a  t.         </a>.
-0000fb90: 2020 2020 2020 2020 203c 2f64 6976 3e0a           </div>.
-0000fba0: 2020 2020 2020 2020 3c2f 703e 0a20 2020          </p>.   
-0000fbb0: 2020 2020 2027 2727 0a0a 2020 2020 2020       '''..      
-0000fbc0: 2020 6669 7865 645f 6874 6d6c 203d 2061    fixed_html = a
-0000fbd0: 766f 6964 5f6c 696e 655f 746f 6f5f 6c6f  void_line_too_lo
-0000fbe0: 6e67 2868 746d 6c29 0a20 2020 2020 2020  ng(html).       
-0000fbf0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
-0000fc00: 6c28 6669 7865 645f 6874 6d6c 2c20 6874  l(fixed_html, ht
-0000fc10: 6d6c 290a                                ml).
+00000210: 6672 6f6d 202e 2e6d 6f64 656c 7320 696d  from ..models im
+00000220: 706f 7274 204e 6577 736c 6574 7465 722c  port Newsletter,
+00000230: 204e 6577 736c 6574 7465 7249 7465 6d2c   NewsletterItem,
+00000240: 2050 6965 6365 4f66 4874 6d6c 2c20 4e65   PieceOfHtml, Ne
+00000250: 7773 6c65 7474 6572 5365 6e64 696e 670a  wsletterSending.
+00000260: 6672 6f6d 202e 2e73 6574 7469 6e67 7320  from ..settings 
+00000270: 696d 706f 7274 2068 6173 5f6c 6f63 616c  import has_local
+00000280: 697a 6564 5f75 726c 732c 2067 6574 5f61  ized_urls, get_a
+00000290: 7274 6963 6c65 5f63 6c61 7373 0a66 726f  rticle_class.fro
+000002a0: 6d20 2e2e 7574 696c 7320 696d 706f 7274  m ..utils import
+000002b0: 206d 616b 655f 6c69 6e6b 735f 6162 736f   make_links_abso
+000002c0: 6c75 7465 2c20 7374 7269 705f 615f 7461  lute, strip_a_ta
+000002d0: 6773 2c20 6176 6f69 645f 6c69 6e65 5f74  gs, avoid_line_t
+000002e0: 6f6f 5f6c 6f6e 672c 2073 656e 645f 656d  oo_long, send_em
+000002f0: 6169 6c0a 6672 6f6d 202e 2069 6d70 6f72  ail.from . impor
+00000300: 7420 4261 7365 5465 7374 4361 7365 2c20  t BaseTestCase, 
+00000310: 5573 6572 4261 7365 5465 7374 4361 7365  UserBaseTestCase
+00000320: 2c20 4265 6175 7469 6675 6c53 6f75 700a  , BeautifulSoup.
+00000330: 0a0a 406f 7665 7272 6964 655f 7365 7474  ..@override_sett
+00000340: 696e 6773 2843 4f4f 505f 434d 535f 4e45  ings(COOP_CMS_NE
+00000350: 5753 4c45 5454 4552 5f53 4554 5449 4e47  WSLETTER_SETTING
+00000360: 535f 464f 524d 3d27 2729 0a63 6c61 7373  S_FORM='').class
+00000370: 204e 6577 736c 6574 7465 7253 6574 7469   NewsletterSetti
+00000380: 6e67 7354 6573 7428 5573 6572 4261 7365  ngsTest(UserBase
+00000390: 5465 7374 4361 7365 293a 0a0a 2020 2020  TestCase):..    
+000003a0: 6465 6620 7365 7455 7028 7365 6c66 293a  def setUp(self):
+000003b0: 0a20 2020 2020 2020 2073 7570 6572 284e  .        super(N
+000003c0: 6577 736c 6574 7465 7253 6574 7469 6e67  ewsletterSetting
+000003d0: 7354 6573 742c 2073 656c 6629 2e73 6574  sTest, self).set
+000003e0: 5570 2829 0a20 2020 2020 2020 2073 656c  Up().        sel
+000003f0: 662e 5f43 4f4f 505f 434d 535f 4e45 5753  f._COOP_CMS_NEWS
+00000400: 4c45 5454 4552 5f54 454d 504c 4154 4553  LETTER_TEMPLATES
+00000410: 203d 2067 6574 6174 7472 2873 6574 7469   = getattr(setti
+00000420: 6e67 732c 2027 434f 4f50 5f43 4d53 5f4e  ngs, 'COOP_CMS_N
+00000430: 4557 534c 4554 5445 525f 5445 4d50 4c41  EWSLETTER_TEMPLA
+00000440: 5445 5327 2c20 4e6f 6e65 290a 2020 2020  TES', None).    
+00000450: 2020 2020 7365 7474 696e 6773 2e43 4f4f      settings.COO
+00000460: 505f 434d 535f 4e45 5753 4c45 5454 4552  P_CMS_NEWSLETTER
+00000470: 5f54 454d 504c 4154 4553 203d 2028 0a20  _TEMPLATES = (. 
+00000480: 2020 2020 2020 2020 2020 2028 2774 6573             ('tes
+00000490: 742f 6e65 7773 6c65 7474 6572 5f62 6c75  t/newsletter_blu
+000004a0: 652e 6874 6d6c 272c 2027 426c 7565 2729  e.html', 'Blue')
+000004b0: 2c0a 2020 2020 2020 2020 2020 2020 2827  ,.            ('
+000004c0: 7465 7374 2f6e 6577 736c 6574 7465 725f  test/newsletter_
+000004d0: 7265 642e 6874 6d6c 272c 2027 426c 7565  red.html', 'Blue
+000004e0: 2729 2c0a 2020 2020 2020 2020 290a 0a20  '),.        ).. 
+000004f0: 2020 2064 6566 2074 6561 7244 6f77 6e28     def tearDown(
+00000500: 7365 6c66 293a 0a20 2020 2020 2020 2073  self):.        s
+00000510: 7570 6572 284e 6577 736c 6574 7465 7253  uper(NewsletterS
+00000520: 6574 7469 6e67 7354 6573 742c 2073 656c  ettingsTest, sel
+00000530: 6629 2e74 6561 7244 6f77 6e28 290a 2020  f).tearDown().  
+00000540: 2020 2020 2020 7365 7474 696e 6773 2e43        settings.C
+00000550: 4f4f 505f 434d 535f 4e45 5753 4c45 5454  OOP_CMS_NEWSLETT
+00000560: 4552 5f54 454d 504c 4154 4553 203d 2073  ER_TEMPLATES = s
+00000570: 656c 662e 5f43 4f4f 505f 434d 535f 4e45  elf._COOP_CMS_NE
+00000580: 5753 4c45 5454 4552 5f54 454d 504c 4154  WSLETTER_TEMPLAT
+00000590: 4553 0a0a 2020 2020 6465 6620 7465 7374  ES..    def test
+000005a0: 5f76 6965 775f 6372 6561 7465 5f6e 6577  _view_create_new
+000005b0: 736c 6574 7465 7228 7365 6c66 293a 0a20  sletter(self):. 
+000005c0: 2020 2020 2020 2073 656c 662e 5f6c 6f67         self._log
+000005d0: 5f61 735f 6564 6974 6f72 2829 0a20 2020  _as_editor().   
+000005e0: 2020 2020 2075 726c 203d 2072 6576 6572       url = rever
+000005f0: 7365 2822 636f 6f70 5f63 6d73 5f6e 6577  se("coop_cms_new
+00000600: 5f6e 6577 736c 6574 7465 7222 290a 0a20  _newsletter").. 
+00000610: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+00000620: 3d20 7365 6c66 2e63 6c69 656e 742e 6765  = self.client.ge
+00000630: 7428 7572 6c29 0a20 2020 2020 2020 2073  t(url).        s
+00000640: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00000650: 7265 7370 6f6e 7365 2e73 7461 7475 735f  response.status_
+00000660: 636f 6465 2c20 3230 3029 0a0a 2020 2020  code, 200)..    
+00000670: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00000680: 7175 616c 284e 6577 736c 6574 7465 722e  qual(Newsletter.
+00000690: 6f62 6a65 6374 732e 636f 756e 7428 292c  objects.count(),
+000006a0: 2030 290a 0a20 2020 2064 6566 2074 6573   0)..    def tes
+000006b0: 745f 6372 6561 7465 5f6e 6577 736c 6574  t_create_newslet
+000006c0: 7465 7228 7365 6c66 293a 0a20 2020 2020  ter(self):.     
+000006d0: 2020 2073 656c 662e 5f6c 6f67 5f61 735f     self._log_as_
+000006e0: 6564 6974 6f72 2829 0a20 2020 2020 2020  editor().       
+000006f0: 2075 726c 203d 2072 6576 6572 7365 2822   url = reverse("
+00000700: 636f 6f70 5f63 6d73 5f6e 6577 5f6e 6577  coop_cms_new_new
+00000710: 736c 6574 7465 7222 290a 0a20 2020 2020  sletter")..     
+00000720: 2020 2064 6174 6120 3d20 7b0a 2020 2020     data = {.    
+00000730: 2020 2020 2020 2020 2273 7562 6a65 6374          "subject
+00000740: 223a 2022 7465 7374 222c 0a20 2020 2020  ": "test",.     
+00000750: 2020 2020 2020 2022 7465 6d70 6c61 7465         "template
+00000760: 223a 2022 7465 7374 2f6e 6577 736c 6574  ": "test/newslet
+00000770: 7465 725f 626c 7565 2e68 746d 6c22 2c0a  ter_blue.html",.
+00000780: 2020 2020 2020 2020 2020 2020 2769 7465              'ite
+00000790: 6d73 273a 205b 5d2c 0a20 2020 2020 2020  ms': [],.       
+000007a0: 2020 2020 2027 7369 7465 273a 2053 6974       'site': Sit
+000007b0: 652e 6f62 6a65 6374 732e 6765 745f 6375  e.objects.get_cu
+000007c0: 7272 656e 7428 292e 6964 2c0a 2020 2020  rrent().id,.    
+000007d0: 2020 2020 7d0a 0a20 2020 2020 2020 2072      }..        r
+000007e0: 6573 706f 6e73 6520 3d20 7365 6c66 2e63  esponse = self.c
+000007f0: 6c69 656e 742e 706f 7374 2875 726c 2c20  lient.post(url, 
+00000800: 6461 7461 3d64 6174 6129 0a20 2020 2020  data=data).     
+00000810: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00000820: 7561 6c28 7265 7370 6f6e 7365 2e73 7461  ual(response.sta
+00000830: 7475 735f 636f 6465 2c20 3230 3029 0a20  tus_code, 200). 
+00000840: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00000850: 7274 4571 7561 6c28 4e65 7773 6c65 7474  rtEqual(Newslett
+00000860: 6572 2e6f 626a 6563 7473 2e63 6f75 6e74  er.objects.count
+00000870: 2829 2c20 3129 0a20 2020 2020 2020 206e  (), 1).        n
+00000880: 6577 736c 6574 7465 7220 3d20 4e65 7773  ewsletter = News
+00000890: 6c65 7474 6572 2e6f 626a 6563 7473 2e61  letter.objects.a
+000008a0: 6c6c 2829 5b30 5d0a 0a20 2020 2020 2020  ll()[0]..       
+000008b0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+000008c0: 6c28 6e65 7773 6c65 7474 6572 2e73 7562  l(newsletter.sub
+000008d0: 6a65 6374 2c20 6461 7461 5b22 7375 626a  ject, data["subj
+000008e0: 6563 7422 5d29 0a20 2020 2020 2020 2073  ect"]).        s
+000008f0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00000900: 6e65 7773 6c65 7474 6572 2e74 656d 706c  newsletter.templ
+00000910: 6174 652c 2064 6174 615b 2274 656d 706c  ate, data["templ
+00000920: 6174 6522 5d29 0a20 2020 2020 2020 2073  ate"]).        s
+00000930: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00000940: 6e65 7773 6c65 7474 6572 2e73 6974 652c  newsletter.site,
+00000950: 2053 6974 652e 6f62 6a65 6374 732e 6765   Site.objects.ge
+00000960: 745f 6375 7272 656e 7428 2929 0a0a 2020  t_current())..  
+00000970: 2020 6465 6620 7465 7374 5f63 7265 6174    def test_creat
+00000980: 655f 6e65 7773 6c65 7474 6572 5f61 6c74  e_newsletter_alt
+00000990: 5f73 6974 6528 7365 6c66 293a 0a20 2020  _site(self):.   
+000009a0: 2020 2020 2073 656c 662e 5f6c 6f67 5f61       self._log_a
+000009b0: 735f 6564 6974 6f72 2829 0a20 2020 2020  s_editor().     
+000009c0: 2020 2075 726c 203d 2072 6576 6572 7365     url = reverse
+000009d0: 2822 636f 6f70 5f63 6d73 5f6e 6577 5f6e  ("coop_cms_new_n
+000009e0: 6577 736c 6574 7465 7222 290a 0a20 2020  ewsletter")..   
+000009f0: 2020 2020 2073 6974 6531 203d 2053 6974       site1 = Sit
+00000a00: 652e 6f62 6a65 6374 732e 6765 745f 6375  e.objects.get_cu
+00000a10: 7272 656e 7428 290a 2020 2020 2020 2020  rrent().        
+00000a20: 7369 7465 3220 3d20 6d6f 6d6d 792e 6d61  site2 = mommy.ma
+00000a30: 6b65 2853 6974 6529 0a20 2020 2020 2020  ke(Site).       
+00000a40: 2064 6174 6120 3d20 7b0a 2020 2020 2020   data = {.      
+00000a50: 2020 2020 2020 2273 7562 6a65 6374 223a        "subject":
+00000a60: 2022 7465 7374 222c 0a20 2020 2020 2020   "test",.       
+00000a70: 2020 2020 2022 7465 6d70 6c61 7465 223a       "template":
+00000a80: 2022 7465 7374 2f6e 6577 736c 6574 7465   "test/newslette
+00000a90: 725f 626c 7565 2e68 746d 6c22 2c0a 2020  r_blue.html",.  
+00000aa0: 2020 2020 2020 2020 2020 2769 7465 6d73            'items
+00000ab0: 273a 205b 5d2c 0a20 2020 2020 2020 2020  ': [],.         
+00000ac0: 2020 2027 7369 7465 273a 2073 6974 6532     'site': site2
+00000ad0: 2e69 642c 0a20 2020 2020 2020 207d 0a0a  .id,.        }..
+00000ae0: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
+00000af0: 203d 2073 656c 662e 636c 6965 6e74 2e70   = self.client.p
+00000b00: 6f73 7428 7572 6c2c 2064 6174 613d 6461  ost(url, data=da
+00000b10: 7461 290a 2020 2020 2020 2020 7365 6c66  ta).        self
+00000b20: 2e61 7373 6572 7445 7175 616c 2872 6573  .assertEqual(res
+00000b30: 706f 6e73 652e 7374 6174 7573 5f63 6f64  ponse.status_cod
+00000b40: 652c 2032 3030 290a 2020 2020 2020 2020  e, 200).        
+00000b50: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00000b60: 284e 6577 736c 6574 7465 722e 6f62 6a65  (Newsletter.obje
+00000b70: 6374 732e 636f 756e 7428 292c 2031 290a  cts.count(), 1).
+00000b80: 2020 2020 2020 2020 6e65 7773 6c65 7474          newslett
+00000b90: 6572 203d 204e 6577 736c 6574 7465 722e  er = Newsletter.
+00000ba0: 6f62 6a65 6374 732e 616c 6c28 295b 305d  objects.all()[0]
+00000bb0: 0a0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00000bc0: 7373 6572 7445 7175 616c 286e 6577 736c  ssertEqual(newsl
+00000bd0: 6574 7465 722e 7375 626a 6563 742c 2064  etter.subject, d
+00000be0: 6174 615b 2273 7562 6a65 6374 225d 290a  ata["subject"]).
+00000bf0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00000c00: 6572 7445 7175 616c 286e 6577 736c 6574  ertEqual(newslet
+00000c10: 7465 722e 7465 6d70 6c61 7465 2c20 6461  ter.template, da
+00000c20: 7461 5b22 7465 6d70 6c61 7465 225d 290a  ta["template"]).
+00000c30: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00000c40: 6572 7445 7175 616c 286e 6577 736c 6574  ertEqual(newslet
+00000c50: 7465 722e 7369 7465 2c20 7369 7465 3229  ter.site, site2)
+00000c60: 0a0a 2020 2020 6465 6620 7465 7374 5f76  ..    def test_v
+00000c70: 6965 775f 6564 6974 5f6e 6577 736c 6574  iew_edit_newslet
+00000c80: 7465 7228 7365 6c66 293a 0a20 2020 2020  ter(self):.     
+00000c90: 2020 2073 656c 662e 5f6c 6f67 5f61 735f     self._log_as_
+00000ca0: 6564 6974 6f72 2829 0a20 2020 2020 2020  editor().       
+00000cb0: 206e 6577 736c 6574 7465 7220 3d20 6d6f   newsletter = mo
+00000cc0: 6d6d 792e 6d61 6b65 280a 2020 2020 2020  mmy.make(.      
+00000cd0: 2020 2020 2020 4e65 7773 6c65 7474 6572        Newsletter
+00000ce0: 2c0a 2020 2020 2020 2020 2020 2020 7375  ,.            su
+00000cf0: 626a 6563 743d 2261 206c 6974 746c 6520  bject="a little 
+00000d00: 696e 7472 6f20 666f 7220 7468 6973 206e  intro for this n
+00000d10: 6577 736c 6574 7465 7222 2c0a 2020 2020  ewsletter",.    
+00000d20: 2020 2020 2020 2020 7465 6d70 6c61 7465          template
+00000d30: 3d22 7465 7374 2f6e 6577 736c 6574 7465  ="test/newslette
+00000d40: 725f 626c 7565 2e68 746d 6c22 2c0a 2020  r_blue.html",.  
+00000d50: 2020 2020 2020 2020 2020 7369 7465 3d53            site=S
+00000d60: 6974 652e 6f62 6a65 6374 732e 6765 745f  ite.objects.get_
+00000d70: 6375 7272 656e 7428 290a 2020 2020 2020  current().      
+00000d80: 2020 290a 0a20 2020 2020 2020 2075 726c    )..        url
+00000d90: 203d 2072 6576 6572 7365 2822 636f 6f70   = reverse("coop
+00000da0: 5f63 6d73 5f6e 6577 736c 6574 7465 725f  _cms_newsletter_
+00000db0: 7365 7474 696e 6773 222c 2061 7267 733d  settings", args=
+00000dc0: 5b6e 6577 736c 6574 7465 722e 6964 5d29  [newsletter.id])
+00000dd0: 0a0a 2020 2020 2020 2020 7265 7370 6f6e  ..        respon
+00000de0: 7365 203d 2073 656c 662e 636c 6965 6e74  se = self.client
+00000df0: 2e67 6574 2875 726c 290a 2020 2020 2020  .get(url).      
+00000e00: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00000e10: 616c 2872 6573 706f 6e73 652e 7374 6174  al(response.stat
+00000e20: 7573 5f63 6f64 652c 2032 3030 290a 0a20  us_code, 200).. 
+00000e30: 2020 2064 6566 2074 6573 745f 6564 6974     def test_edit
+00000e40: 5f6e 6577 736c 6574 7465 7228 7365 6c66  _newsletter(self
+00000e50: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+00000e60: 5f6c 6f67 5f61 735f 6564 6974 6f72 2829  _log_as_editor()
+00000e70: 0a20 2020 2020 2020 206e 6577 736c 6574  .        newslet
+00000e80: 7465 7220 3d20 6d6f 6d6d 792e 6d61 6b65  ter = mommy.make
+00000e90: 280a 2020 2020 2020 2020 2020 2020 4e65  (.            Ne
+00000ea0: 7773 6c65 7474 6572 2c0a 2020 2020 2020  wsletter,.      
+00000eb0: 2020 2020 2020 7375 626a 6563 743d 2261        subject="a
+00000ec0: 206c 6974 746c 6520 696e 7472 6f20 666f   little intro fo
+00000ed0: 7220 7468 6973 206e 6577 736c 6574 7465  r this newslette
+00000ee0: 7222 2c0a 2020 2020 2020 2020 2020 2020  r",.            
+00000ef0: 7465 6d70 6c61 7465 3d22 7465 7374 2f6e  template="test/n
+00000f00: 6577 736c 6574 7465 725f 7265 642e 6874  ewsletter_red.ht
+00000f10: 6d6c 222c 0a20 2020 2020 2020 2020 2020  ml",.           
+00000f20: 2073 6974 653d 5369 7465 2e6f 626a 6563   site=Site.objec
+00000f30: 7473 2e67 6574 5f63 7572 7265 6e74 2829  ts.get_current()
+00000f40: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00000f50: 2020 2075 726c 203d 2072 6576 6572 7365     url = reverse
+00000f60: 2822 636f 6f70 5f63 6d73 5f6e 6577 736c  ("coop_cms_newsl
+00000f70: 6574 7465 725f 7365 7474 696e 6773 222c  etter_settings",
+00000f80: 2061 7267 733d 5b6e 6577 736c 6574 7465   args=[newslette
+00000f90: 722e 6964 5d29 0a0a 2020 2020 2020 2020  r.id])..        
+00000fa0: 6461 7461 203d 207b 0a20 2020 2020 2020  data = {.       
+00000fb0: 2020 2020 2022 7375 626a 6563 7422 3a20       "subject": 
+00000fc0: 2274 6573 7422 2c0a 2020 2020 2020 2020  "test",.        
+00000fd0: 2020 2020 2274 656d 706c 6174 6522 3a20      "template": 
+00000fe0: 2274 6573 742f 6e65 7773 6c65 7474 6572  "test/newsletter
+00000ff0: 5f62 6c75 652e 6874 6d6c 222c 0a20 2020  _blue.html",.   
+00001000: 2020 2020 2020 2020 2027 6974 656d 7327           'items'
+00001010: 3a20 5b5d 2c0a 2020 2020 2020 2020 2020  : [],.          
+00001020: 2020 2773 6974 6527 3a20 5369 7465 2e6f    'site': Site.o
+00001030: 626a 6563 7473 2e67 6574 5f63 7572 7265  bjects.get_curre
+00001040: 6e74 2829 2e69 642c 0a20 2020 2020 2020  nt().id,.       
+00001050: 207d 0a0a 2020 2020 2020 2020 7265 7370   }..        resp
+00001060: 6f6e 7365 203d 2073 656c 662e 636c 6965  onse = self.clie
+00001070: 6e74 2e70 6f73 7428 7572 6c2c 2064 6174  nt.post(url, dat
+00001080: 613d 6461 7461 290a 2020 2020 2020 2020  a=data).        
+00001090: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+000010a0: 2872 6573 706f 6e73 652e 7374 6174 7573  (response.status
+000010b0: 5f63 6f64 652c 2032 3030 290a 0a20 2020  _code, 200)..   
+000010c0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+000010d0: 4571 7561 6c28 4e65 7773 6c65 7474 6572  Equal(Newsletter
+000010e0: 2e6f 626a 6563 7473 2e63 6f75 6e74 2829  .objects.count()
+000010f0: 2c20 3129 0a20 2020 2020 2020 206e 6577  , 1).        new
+00001100: 736c 6574 7465 7220 3d20 4e65 7773 6c65  sletter = Newsle
+00001110: 7474 6572 2e6f 626a 6563 7473 2e61 6c6c  tter.objects.all
+00001120: 2829 5b30 5d0a 0a20 2020 2020 2020 2073  ()[0]..        s
+00001130: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00001140: 6e65 7773 6c65 7474 6572 2e73 7562 6a65  newsletter.subje
+00001150: 6374 2c20 6461 7461 5b22 7375 626a 6563  ct, data["subjec
+00001160: 7422 5d29 0a20 2020 2020 2020 2073 656c  t"]).        sel
+00001170: 662e 6173 7365 7274 4571 7561 6c28 6e65  f.assertEqual(ne
+00001180: 7773 6c65 7474 6572 2e74 656d 706c 6174  wsletter.templat
+00001190: 652c 2064 6174 615b 2274 656d 706c 6174  e, data["templat
+000011a0: 6522 5d29 0a20 2020 2020 2020 2073 656c  e"]).        sel
+000011b0: 662e 6173 7365 7274 4571 7561 6c28 6e65  f.assertEqual(ne
+000011c0: 7773 6c65 7474 6572 2e73 6974 652c 2053  wsletter.site, S
+000011d0: 6974 652e 6f62 6a65 6374 732e 6765 745f  ite.objects.get_
+000011e0: 6375 7272 656e 7428 2929 0a0a 2020 2020  current())..    
+000011f0: 6465 6620 7465 7374 5f65 6469 745f 6e65  def test_edit_ne
+00001200: 7773 6c65 7474 6572 5f6f 7468 6572 5f73  wsletter_other_s
+00001210: 6974 6528 7365 6c66 293a 0a20 2020 2020  ite(self):.     
+00001220: 2020 2073 656c 662e 5f6c 6f67 5f61 735f     self._log_as_
+00001230: 6564 6974 6f72 2829 0a20 2020 2020 2020  editor().       
+00001240: 2073 6974 6531 203d 2053 6974 652e 6f62   site1 = Site.ob
+00001250: 6a65 6374 732e 6765 745f 6375 7272 656e  jects.get_curren
+00001260: 7428 290a 2020 2020 2020 2020 7369 7465  t().        site
+00001270: 3220 3d20 6d6f 6d6d 792e 6d61 6b65 2853  2 = mommy.make(S
+00001280: 6974 6529 0a20 2020 2020 2020 206e 6577  ite).        new
+00001290: 736c 6574 7465 7220 3d20 6d6f 6d6d 792e  sletter = mommy.
+000012a0: 6d61 6b65 280a 2020 2020 2020 2020 2020  make(.          
+000012b0: 2020 4e65 7773 6c65 7474 6572 2c0a 2020    Newsletter,.  
+000012c0: 2020 2020 2020 2020 2020 7375 626a 6563            subjec
+000012d0: 743d 2261 206c 6974 746c 6520 696e 7472  t="a little intr
+000012e0: 6f20 666f 7220 7468 6973 206e 6577 736c  o for this newsl
+000012f0: 6574 7465 7222 2c0a 2020 2020 2020 2020  etter",.        
+00001300: 2020 2020 7465 6d70 6c61 7465 3d22 7465      template="te
+00001310: 7374 2f6e 6577 736c 6574 7465 725f 7265  st/newsletter_re
+00001320: 642e 6874 6d6c 222c 0a20 2020 2020 2020  d.html",.       
+00001330: 2020 2020 2073 6974 653d 5369 7465 2e6f       site=Site.o
+00001340: 626a 6563 7473 2e67 6574 5f63 7572 7265  bjects.get_curre
+00001350: 6e74 2829 0a20 2020 2020 2020 2029 0a20  nt().        ). 
+00001360: 2020 2020 2020 2075 726c 203d 2072 6576         url = rev
+00001370: 6572 7365 2822 636f 6f70 5f63 6d73 5f6e  erse("coop_cms_n
+00001380: 6577 736c 6574 7465 725f 7365 7474 696e  ewsletter_settin
+00001390: 6773 222c 2061 7267 733d 5b6e 6577 736c  gs", args=[newsl
+000013a0: 6574 7465 722e 6964 5d29 0a0a 2020 2020  etter.id])..    
+000013b0: 2020 2020 6461 7461 203d 207b 0a20 2020      data = {.   
+000013c0: 2020 2020 2020 2020 2022 7375 626a 6563           "subjec
+000013d0: 7422 3a20 2274 6573 7422 2c0a 2020 2020  t": "test",.    
+000013e0: 2020 2020 2020 2020 2274 656d 706c 6174          "templat
+000013f0: 6522 3a20 2274 6573 742f 6e65 7773 6c65  e": "test/newsle
+00001400: 7474 6572 5f62 6c75 652e 6874 6d6c 222c  tter_blue.html",
+00001410: 0a20 2020 2020 2020 2020 2020 2027 6974  .            'it
+00001420: 656d 7327 3a20 5b5d 2c0a 2020 2020 2020  ems': [],.      
+00001430: 2020 2020 2020 2773 6974 6527 3a20 7369        'site': si
+00001440: 7465 322e 6964 2c0a 2020 2020 2020 2020  te2.id,.        
+00001450: 7d0a 0a20 2020 2020 2020 2072 6573 706f  }..        respo
+00001460: 6e73 6520 3d20 7365 6c66 2e63 6c69 656e  nse = self.clien
+00001470: 742e 706f 7374 2875 726c 2c20 6461 7461  t.post(url, data
+00001480: 3d64 6174 6129 0a20 2020 2020 2020 2073  =data).        s
+00001490: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+000014a0: 7265 7370 6f6e 7365 2e73 7461 7475 735f  response.status_
+000014b0: 636f 6465 2c20 3230 3029 0a0a 2020 2020  code, 200)..    
+000014c0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+000014d0: 7175 616c 284e 6577 736c 6574 7465 722e  qual(Newsletter.
+000014e0: 6f62 6a65 6374 732e 636f 756e 7428 292c  objects.count(),
+000014f0: 2031 290a 2020 2020 2020 2020 6e65 7773   1).        news
+00001500: 6c65 7474 6572 203d 204e 6577 736c 6574  letter = Newslet
+00001510: 7465 722e 6f62 6a65 6374 732e 616c 6c28  ter.objects.all(
+00001520: 295b 305d 0a0a 2020 2020 2020 2020 7365  )[0]..        se
+00001530: 6c66 2e61 7373 6572 7445 7175 616c 286e  lf.assertEqual(n
+00001540: 6577 736c 6574 7465 722e 7375 626a 6563  ewsletter.subjec
+00001550: 742c 2064 6174 615b 2273 7562 6a65 6374  t, data["subject
+00001560: 225d 290a 2020 2020 2020 2020 7365 6c66  "]).        self
+00001570: 2e61 7373 6572 7445 7175 616c 286e 6577  .assertEqual(new
+00001580: 736c 6574 7465 722e 7465 6d70 6c61 7465  sletter.template
+00001590: 2c20 6461 7461 5b22 7465 6d70 6c61 7465  , data["template
+000015a0: 225d 290a 2020 2020 2020 2020 7365 6c66  "]).        self
+000015b0: 2e61 7373 6572 7445 7175 616c 286e 6577  .assertEqual(new
+000015c0: 736c 6574 7465 722e 7369 7465 2c20 7369  sletter.site, si
+000015d0: 7465 3229 0a0a 2020 2020 6465 6620 7465  te2)..    def te
+000015e0: 7374 5f76 6965 775f 6e65 7773 6c65 7474  st_view_newslett
+000015f0: 6572 5f69 7465 6d73 2873 656c 6629 3a0a  er_items(self):.
+00001600: 2020 2020 2020 2020 7365 6c66 2e5f 6c6f          self._lo
+00001610: 675f 6173 5f65 6469 746f 7228 290a 2020  g_as_editor().  
+00001620: 2020 2020 2020 6172 7469 636c 655f 636c        article_cl
+00001630: 6173 7320 3d20 6765 745f 6172 7469 636c  ass = get_articl
+00001640: 655f 636c 6173 7328 290a 0a20 2020 2020  e_class()..     
+00001650: 2020 2073 6974 6520 3d20 5369 7465 2e6f     site = Site.o
+00001660: 626a 6563 7473 2e67 6574 5f63 7572 7265  bjects.get_curre
+00001670: 6e74 2829 0a20 2020 2020 2020 206f 7468  nt().        oth
+00001680: 6572 5f73 6974 6520 3d20 6d6f 6d6d 792e  er_site = mommy.
+00001690: 6d61 6b65 2853 6974 6529 0a0a 2020 2020  make(Site)..    
+000016a0: 2020 2020 6172 7469 636c 655f 3120 3d20      article_1 = 
+000016b0: 6d6f 6d6d 792e 6d61 6b65 2861 7274 6963  mommy.make(artic
+000016c0: 6c65 5f63 6c61 7373 2c20 736c 7567 3d22  le_class, slug="
+000016d0: 7465 7374 3122 2c20 696e 5f6e 6577 736c  test1", in_newsl
+000016e0: 6574 7465 723d 5472 7565 290a 2020 2020  etter=True).    
+000016f0: 2020 2020 6172 7469 636c 655f 3220 3d20      article_2 = 
+00001700: 6d6f 6d6d 792e 6d61 6b65 2861 7274 6963  mommy.make(artic
+00001710: 6c65 5f63 6c61 7373 2c20 736c 7567 3d22  le_class, slug="
+00001720: 7465 7374 3222 2c20 696e 5f6e 6577 736c  test2", in_newsl
+00001730: 6574 7465 723d 5472 7565 2c20 7369 7465  etter=True, site
+00001740: 733d 5b6f 7468 6572 5f73 6974 655d 290a  s=[other_site]).
+00001750: 2020 2020 2020 2020 6172 7469 636c 655f          article_
+00001760: 3320 3d20 6d6f 6d6d 792e 6d61 6b65 2861  3 = mommy.make(a
+00001770: 7274 6963 6c65 5f63 6c61 7373 2c20 736c  rticle_class, sl
+00001780: 7567 3d22 7465 7374 3322 2c20 696e 5f6e  ug="test3", in_n
+00001790: 6577 736c 6574 7465 723d 5472 7565 290a  ewsletter=True).
+000017a0: 2020 2020 2020 2020 6172 7469 636c 655f          article_
+000017b0: 3420 3d20 6d6f 6d6d 792e 6d61 6b65 2861  4 = mommy.make(a
+000017c0: 7274 6963 6c65 5f63 6c61 7373 2c20 736c  rticle_class, sl
+000017d0: 7567 3d22 7465 7374 3422 2c20 696e 5f6e  ug="test4", in_n
+000017e0: 6577 736c 6574 7465 723d 4661 6c73 6529  ewsletter=False)
+000017f0: 0a0a 2020 2020 2020 2020 6172 7469 636c  ..        articl
+00001800: 655f 322e 7369 7465 732e 636c 6561 7228  e_2.sites.clear(
+00001810: 290a 2020 2020 2020 2020 6172 7469 636c  ).        articl
+00001820: 655f 322e 7369 7465 732e 6164 6428 6f74  e_2.sites.add(ot
+00001830: 6865 725f 7369 7465 290a 2020 2020 2020  her_site).      
+00001840: 2020 6172 7469 636c 655f 322e 7361 7665    article_2.save
+00001850: 2829 0a0a 2020 2020 2020 2020 6374 203d  ()..        ct =
+00001860: 2043 6f6e 7465 6e74 5479 7065 2e6f 626a   ContentType.obj
+00001870: 6563 7473 2e67 6574 5f66 6f72 5f6d 6f64  ects.get_for_mod
+00001880: 656c 2861 7274 6963 6c65 5f63 6c61 7373  el(article_class
+00001890: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+000018a0: 7373 6572 7445 7175 616c 2833 2c20 4e65  ssertEqual(3, Ne
+000018b0: 7773 6c65 7474 6572 4974 656d 2e6f 626a  wsletterItem.obj
+000018c0: 6563 7473 2e63 6f75 6e74 2829 290a 2020  ects.count()).  
+000018d0: 2020 2020 2020 6974 656d 5f31 203d 204e        item_1 = N
+000018e0: 6577 736c 6574 7465 7249 7465 6d2e 6f62  ewsletterItem.ob
+000018f0: 6a65 6374 732e 6765 7428 636f 6e74 656e  jects.get(conten
+00001900: 745f 7479 7065 3d63 742c 206f 626a 6563  t_type=ct, objec
+00001910: 745f 6964 3d61 7274 6963 6c65 5f31 2e69  t_id=article_1.i
+00001920: 6429 0a20 2020 2020 2020 2069 7465 6d5f  d).        item_
+00001930: 3220 3d20 4e65 7773 6c65 7474 6572 4974  2 = NewsletterIt
+00001940: 656d 2e6f 626a 6563 7473 2e67 6574 2863  em.objects.get(c
+00001950: 6f6e 7465 6e74 5f74 7970 653d 6374 2c20  ontent_type=ct, 
+00001960: 6f62 6a65 6374 5f69 643d 6172 7469 636c  object_id=articl
+00001970: 655f 322e 6964 290a 2020 2020 2020 2020  e_2.id).        
+00001980: 6974 656d 5f33 203d 204e 6577 736c 6574  item_3 = Newslet
+00001990: 7465 7249 7465 6d2e 6f62 6a65 6374 732e  terItem.objects.
+000019a0: 6765 7428 636f 6e74 656e 745f 7479 7065  get(content_type
+000019b0: 3d63 742c 206f 626a 6563 745f 6964 3d61  =ct, object_id=a
+000019c0: 7274 6963 6c65 5f33 2e69 6429 0a0a 2020  rticle_3.id)..  
+000019d0: 2020 2020 2020 6e65 7773 6c65 7474 6572        newsletter
+000019e0: 203d 206d 6f6d 6d79 2e6d 616b 6528 0a20   = mommy.make(. 
+000019f0: 2020 2020 2020 2020 2020 204e 6577 736c             Newsl
+00001a00: 6574 7465 722c 0a20 2020 2020 2020 2020  etter,.         
+00001a10: 2020 2073 7562 6a65 6374 3d22 6120 6c69     subject="a li
+00001a20: 7474 6c65 2069 6e74 726f 2066 6f72 2074  ttle intro for t
+00001a30: 6869 7320 6e65 7773 6c65 7474 6572 222c  his newsletter",
+00001a40: 0a20 2020 2020 2020 2020 2020 2074 656d  .            tem
+00001a50: 706c 6174 653d 2274 6573 742f 6e65 7773  plate="test/news
+00001a60: 6c65 7474 6572 5f72 6564 2e68 746d 6c22  letter_red.html"
+00001a70: 2c0a 2020 2020 2020 2020 2020 2020 6974  ,.            it
+00001a80: 656d 733d 5b69 7465 6d5f 315d 0a20 2020  ems=[item_1].   
+00001a90: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00001aa0: 7572 6c20 3d20 7265 7665 7273 6528 2263  url = reverse("c
+00001ab0: 6f6f 705f 636d 735f 6e65 7773 6c65 7474  oop_cms_newslett
+00001ac0: 6572 5f73 6574 7469 6e67 7322 2c20 6172  er_settings", ar
+00001ad0: 6773 3d5b 6e65 7773 6c65 7474 6572 2e69  gs=[newsletter.i
+00001ae0: 645d 290a 0a20 2020 2020 2020 2072 6573  d])..        res
+00001af0: 706f 6e73 6520 3d20 7365 6c66 2e63 6c69  ponse = self.cli
+00001b00: 656e 742e 6765 7428 7572 6c29 0a20 2020  ent.get(url).   
+00001b10: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00001b20: 4571 7561 6c28 7265 7370 6f6e 7365 2e73  Equal(response.s
+00001b30: 7461 7475 735f 636f 6465 2c20 3230 3029  tatus_code, 200)
+00001b40: 0a0a 2020 2020 2020 2020 736f 7570 203d  ..        soup =
+00001b50: 2042 6561 7574 6966 756c 536f 7570 2872   BeautifulSoup(r
+00001b60: 6573 706f 6e73 652e 636f 6e74 656e 7429  esponse.content)
+00001b70: 0a0a 2020 2020 2020 2020 6f70 7469 6f6e  ..        option
+00001b80: 7320 3d20 736f 7570 2e73 656c 6563 7428  s = soup.select(
+00001b90: 2223 6964 5f69 7465 6d73 206f 7074 696f  "#id_items optio
+00001ba0: 6e22 290a 2020 2020 2020 2020 7365 6c66  n").        self
+00001bb0: 2e61 7373 6572 7445 7175 616c 2832 2c20  .assertEqual(2, 
+00001bc0: 6c65 6e28 6f70 7469 6f6e 7329 290a 2020  len(options)).  
+00001bd0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00001be0: 7445 7175 616c 280a 2020 2020 2020 2020  tEqual(.        
+00001bf0: 2020 2020 736f 7274 6564 285b 696e 7428      sorted([int(
+00001c00: 6964 5f5b 2276 616c 7565 225d 2920 666f  id_["value"]) fo
+00001c10: 7220 6964 5f20 696e 206f 7074 696f 6e73  r id_ in options
+00001c20: 5d29 2c0a 2020 2020 2020 2020 2020 2020  ]),.            
+00001c30: 736f 7274 6564 285b 6974 656d 2e69 6420  sorted([item.id 
+00001c40: 666f 7220 6974 656d 2069 6e20 5b69 7465  for item in [ite
+00001c50: 6d5f 312c 2069 7465 6d5f 335d 5d29 0a20  m_1, item_3]]). 
+00001c60: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00001c70: 2020 6f70 7469 6f6e 7320 3d20 736f 7570    options = soup
+00001c80: 2e73 656c 6563 7428 2223 6964 5f69 7465  .select("#id_ite
+00001c90: 6d73 206f 7074 696f 6e5b 7365 6c65 6374  ms option[select
+00001ca0: 6564 3d73 656c 6563 7465 645d 2229 0a20  ed=selected]"). 
+00001cb0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00001cc0: 7274 4571 7561 6c28 312c 206c 656e 286f  rtEqual(1, len(o
+00001cd0: 7074 696f 6e73 2929 0a20 2020 2020 2020  ptions)).       
+00001ce0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00001cf0: 6c28 0a20 2020 2020 2020 2020 2020 2073  l(.            s
+00001d00: 6f72 7465 6428 5b69 6e74 2869 645f 5b22  orted([int(id_["
+00001d10: 7661 6c75 6522 5d29 2066 6f72 2069 645f  value"]) for id_
+00001d20: 2069 6e20 6f70 7469 6f6e 735d 292c 0a20   in options]),. 
+00001d30: 2020 2020 2020 2020 2020 2073 6f72 7465             sorte
+00001d40: 6428 5b69 7465 6d2e 6964 2066 6f72 2069  d([item.id for i
+00001d50: 7465 6d20 696e 205b 6974 656d 5f31 5d5d  tem in [item_1]]
+00001d60: 290a 2020 2020 2020 2020 290a 0a20 2020  ).        )..   
+00001d70: 2064 6566 2074 6573 745f 7361 7665 5f6e   def test_save_n
+00001d80: 6577 736c 6574 7465 725f 6974 656d 7328  ewsletter_items(
+00001d90: 7365 6c66 293a 0a20 2020 2020 2020 2073  self):.        s
+00001da0: 656c 662e 5f6c 6f67 5f61 735f 6564 6974  elf._log_as_edit
+00001db0: 6f72 2829 0a20 2020 2020 2020 2061 7274  or().        art
+00001dc0: 6963 6c65 5f63 6c61 7373 203d 2067 6574  icle_class = get
+00001dd0: 5f61 7274 6963 6c65 5f63 6c61 7373 2829  _article_class()
+00001de0: 0a0a 2020 2020 2020 2020 7369 7465 203d  ..        site =
+00001df0: 2053 6974 652e 6f62 6a65 6374 732e 6765   Site.objects.ge
+00001e00: 745f 6375 7272 656e 7428 290a 2020 2020  t_current().    
+00001e10: 2020 2020 6f74 6865 725f 7369 7465 203d      other_site =
+00001e20: 206d 6f6d 6d79 2e6d 616b 6528 5369 7465   mommy.make(Site
+00001e30: 290a 0a20 2020 2020 2020 2061 7274 6963  )..        artic
+00001e40: 6c65 5f31 203d 206d 6f6d 6d79 2e6d 616b  le_1 = mommy.mak
+00001e50: 6528 6172 7469 636c 655f 636c 6173 732c  e(article_class,
+00001e60: 2073 6c75 673d 2274 6573 7431 222c 2069   slug="test1", i
+00001e70: 6e5f 6e65 7773 6c65 7474 6572 3d54 7275  n_newsletter=Tru
+00001e80: 6529 0a20 2020 2020 2020 2061 7274 6963  e).        artic
+00001e90: 6c65 5f32 203d 206d 6f6d 6d79 2e6d 616b  le_2 = mommy.mak
+00001ea0: 6528 6172 7469 636c 655f 636c 6173 732c  e(article_class,
+00001eb0: 2073 6c75 673d 2274 6573 7432 222c 2069   slug="test2", i
+00001ec0: 6e5f 6e65 7773 6c65 7474 6572 3d54 7275  n_newsletter=Tru
+00001ed0: 6529 0a20 2020 2020 2020 2061 7274 6963  e).        artic
+00001ee0: 6c65 5f33 203d 206d 6f6d 6d79 2e6d 616b  le_3 = mommy.mak
+00001ef0: 6528 6172 7469 636c 655f 636c 6173 732c  e(article_class,
+00001f00: 2073 6c75 673d 2274 6573 7433 222c 2069   slug="test3", i
+00001f10: 6e5f 6e65 7773 6c65 7474 6572 3d54 7275  n_newsletter=Tru
+00001f20: 6529 0a0a 2020 2020 2020 2020 6374 203d  e)..        ct =
+00001f30: 2043 6f6e 7465 6e74 5479 7065 2e6f 626a   ContentType.obj
+00001f40: 6563 7473 2e67 6574 5f66 6f72 5f6d 6f64  ects.get_for_mod
+00001f50: 656c 2861 7274 6963 6c65 5f63 6c61 7373  el(article_class
+00001f60: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00001f70: 7373 6572 7445 7175 616c 2833 2c20 4e65  ssertEqual(3, Ne
+00001f80: 7773 6c65 7474 6572 4974 656d 2e6f 626a  wsletterItem.obj
+00001f90: 6563 7473 2e63 6f75 6e74 2829 290a 2020  ects.count()).  
+00001fa0: 2020 2020 2020 6974 656d 5f31 203d 204e        item_1 = N
+00001fb0: 6577 736c 6574 7465 7249 7465 6d2e 6f62  ewsletterItem.ob
+00001fc0: 6a65 6374 732e 6765 7428 636f 6e74 656e  jects.get(conten
+00001fd0: 745f 7479 7065 3d63 742c 206f 626a 6563  t_type=ct, objec
+00001fe0: 745f 6964 3d61 7274 6963 6c65 5f31 2e69  t_id=article_1.i
+00001ff0: 6429 0a20 2020 2020 2020 2069 7465 6d5f  d).        item_
+00002000: 3220 3d20 4e65 7773 6c65 7474 6572 4974  2 = NewsletterIt
+00002010: 656d 2e6f 626a 6563 7473 2e67 6574 2863  em.objects.get(c
+00002020: 6f6e 7465 6e74 5f74 7970 653d 6374 2c20  ontent_type=ct, 
+00002030: 6f62 6a65 6374 5f69 643d 6172 7469 636c  object_id=articl
+00002040: 655f 322e 6964 290a 2020 2020 2020 2020  e_2.id).        
+00002050: 6974 656d 5f33 203d 204e 6577 736c 6574  item_3 = Newslet
+00002060: 7465 7249 7465 6d2e 6f62 6a65 6374 732e  terItem.objects.
+00002070: 6765 7428 636f 6e74 656e 745f 7479 7065  get(content_type
+00002080: 3d63 742c 206f 626a 6563 745f 6964 3d61  =ct, object_id=a
+00002090: 7274 6963 6c65 5f33 2e69 6429 0a0a 2020  rticle_3.id)..  
+000020a0: 2020 2020 2020 6e65 7773 6c65 7474 6572        newsletter
+000020b0: 203d 206d 6f6d 6d79 2e6d 616b 6528 0a20   = mommy.make(. 
+000020c0: 2020 2020 2020 2020 2020 204e 6577 736c             Newsl
+000020d0: 6574 7465 722c 0a20 2020 2020 2020 2020  etter,.         
+000020e0: 2020 2073 7562 6a65 6374 3d22 6120 6c69     subject="a li
+000020f0: 7474 6c65 2069 6e74 726f 2066 6f72 2074  ttle intro for t
+00002100: 6869 7320 6e65 7773 6c65 7474 6572 222c  his newsletter",
+00002110: 0a20 2020 2020 2020 2020 2020 2074 656d  .            tem
+00002120: 706c 6174 653d 2274 6573 742f 6e65 7773  plate="test/news
+00002130: 6c65 7474 6572 5f72 6564 2e68 746d 6c22  letter_red.html"
+00002140: 2c0a 2020 2020 2020 2020 2020 2020 6974  ,.            it
+00002150: 656d 733d 5b69 7465 6d5f 315d 2c0a 2020  ems=[item_1],.  
+00002160: 2020 2020 2020 2020 2020 7369 7465 3d53            site=S
+00002170: 6974 652e 6f62 6a65 6374 732e 6765 745f  ite.objects.get_
+00002180: 6375 7272 656e 7428 292c 0a20 2020 2020  current(),.     
+00002190: 2020 2029 0a0a 2020 2020 2020 2020 6461     )..        da
+000021a0: 7461 203d 207b 0a20 2020 2020 2020 2020  ta = {.         
+000021b0: 2020 2022 7375 626a 6563 7422 3a20 2274     "subject": "t
+000021c0: 6573 7422 2c0a 2020 2020 2020 2020 2020  est",.          
+000021d0: 2020 2274 656d 706c 6174 6522 3a20 2274    "template": "t
+000021e0: 6573 742f 6e65 7773 6c65 7474 6572 5f62  est/newsletter_b
+000021f0: 6c75 652e 6874 6d6c 222c 0a20 2020 2020  lue.html",.     
+00002200: 2020 2020 2020 2027 6974 656d 7327 3a20         'items': 
+00002210: 5b69 7465 6d5f 322e 6964 2c20 6974 656d  [item_2.id, item
+00002220: 5f33 2e69 645d 2c0a 2020 2020 2020 2020  _3.id],.        
+00002230: 2020 2020 2773 6974 6527 3a20 5369 7465      'site': Site
+00002240: 2e6f 626a 6563 7473 2e67 6574 5f63 7572  .objects.get_cur
+00002250: 7265 6e74 2829 2e69 642c 0a20 2020 2020  rent().id,.     
+00002260: 2020 207d 0a0a 2020 2020 2020 2020 7572     }..        ur
+00002270: 6c20 3d20 7265 7665 7273 6528 2263 6f6f  l = reverse("coo
+00002280: 705f 636d 735f 6e65 7773 6c65 7474 6572  p_cms_newsletter
+00002290: 5f73 6574 7469 6e67 7322 2c20 6172 6773  _settings", args
+000022a0: 3d5b 6e65 7773 6c65 7474 6572 2e69 645d  =[newsletter.id]
+000022b0: 290a 0a20 2020 2020 2020 2072 6573 706f  )..        respo
+000022c0: 6e73 6520 3d20 7365 6c66 2e63 6c69 656e  nse = self.clien
+000022d0: 742e 706f 7374 2875 726c 2c20 6461 7461  t.post(url, data
+000022e0: 3d64 6174 6129 0a20 2020 2020 2020 2073  =data).        s
+000022f0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00002300: 7265 7370 6f6e 7365 2e73 7461 7475 735f  response.status_
+00002310: 636f 6465 2c20 3230 3029 0a0a 2020 2020  code, 200)..    
+00002320: 2020 2020 6e65 7773 6c65 7474 6572 203d      newsletter =
+00002330: 204e 6577 736c 6574 7465 722e 6f62 6a65   Newsletter.obje
+00002340: 6374 732e 6765 7428 6964 3d6e 6577 736c  cts.get(id=newsl
+00002350: 6574 7465 722e 6964 290a 2020 2020 2020  etter.id).      
+00002360: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00002370: 616c 286e 6577 736c 6574 7465 722e 7375  al(newsletter.su
+00002380: 626a 6563 742c 2064 6174 615b 2273 7562  bject, data["sub
+00002390: 6a65 6374 225d 290a 2020 2020 2020 2020  ject"]).        
+000023a0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+000023b0: 286e 6577 736c 6574 7465 722e 7465 6d70  (newsletter.temp
+000023c0: 6c61 7465 2c20 6461 7461 5b22 7465 6d70  late, data["temp
+000023d0: 6c61 7465 225d 290a 2020 2020 2020 2020  late"]).        
+000023e0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+000023f0: 280a 2020 2020 2020 2020 2020 2020 6c69  (.            li
+00002400: 7374 2873 6f72 7465 6428 6e2e 6964 2066  st(sorted(n.id f
+00002410: 6f72 206e 2069 6e20 6e65 7773 6c65 7474  or n in newslett
+00002420: 6572 2e69 7465 6d73 2e61 6c6c 2829 2929  er.items.all()))
+00002430: 2c0a 2020 2020 2020 2020 2020 2020 6c69  ,.            li
+00002440: 7374 2873 6f72 7465 6428 6461 7461 5b22  st(sorted(data["
+00002450: 6974 656d 7322 5d29 290a 2020 2020 2020  items"])).      
+00002460: 2020 290a 0a20 2020 2064 6566 2074 6573    )..    def tes
+00002470: 745f 7361 7665 5f6e 6577 736c 6574 7465  t_save_newslette
+00002480: 725f 6974 656d 735f 6f74 6865 725f 7369  r_items_other_si
+00002490: 7465 2873 656c 6629 3a0a 2020 2020 2020  te(self):.      
+000024a0: 2020 7365 6c66 2e5f 6c6f 675f 6173 5f65    self._log_as_e
+000024b0: 6469 746f 7228 290a 2020 2020 2020 2020  ditor().        
+000024c0: 6172 7469 636c 655f 636c 6173 7320 3d20  article_class = 
+000024d0: 6765 745f 6172 7469 636c 655f 636c 6173  get_article_clas
+000024e0: 7328 290a 0a20 2020 2020 2020 2073 6974  s()..        sit
+000024f0: 6520 3d20 5369 7465 2e6f 626a 6563 7473  e = Site.objects
+00002500: 2e67 6574 5f63 7572 7265 6e74 2829 0a20  .get_current(). 
+00002510: 2020 2020 2020 206f 7468 6572 5f73 6974         other_sit
+00002520: 6520 3d20 6d6f 6d6d 792e 6d61 6b65 2853  e = mommy.make(S
+00002530: 6974 6529 0a0a 2020 2020 2020 2020 6172  ite)..        ar
+00002540: 7469 636c 655f 3120 3d20 6d6f 6d6d 792e  ticle_1 = mommy.
+00002550: 6d61 6b65 2861 7274 6963 6c65 5f63 6c61  make(article_cla
+00002560: 7373 2c20 736c 7567 3d22 7465 7374 3122  ss, slug="test1"
+00002570: 2c20 696e 5f6e 6577 736c 6574 7465 723d  , in_newsletter=
+00002580: 5472 7565 290a 2020 2020 2020 2020 6172  True).        ar
+00002590: 7469 636c 655f 3220 3d20 6d6f 6d6d 792e  ticle_2 = mommy.
+000025a0: 6d61 6b65 2861 7274 6963 6c65 5f63 6c61  make(article_cla
+000025b0: 7373 2c20 736c 7567 3d22 7465 7374 3222  ss, slug="test2"
+000025c0: 2c20 696e 5f6e 6577 736c 6574 7465 723d  , in_newsletter=
+000025d0: 5472 7565 290a 2020 2020 2020 2020 6172  True).        ar
+000025e0: 7469 636c 655f 3320 3d20 6d6f 6d6d 792e  ticle_3 = mommy.
+000025f0: 6d61 6b65 2861 7274 6963 6c65 5f63 6c61  make(article_cla
+00002600: 7373 2c20 736c 7567 3d22 7465 7374 3322  ss, slug="test3"
+00002610: 2c20 696e 5f6e 6577 736c 6574 7465 723d  , in_newsletter=
+00002620: 5472 7565 290a 0a20 2020 2020 2020 2061  True)..        a
+00002630: 7274 6963 6c65 5f32 2e73 6974 6573 2e63  rticle_2.sites.c
+00002640: 6c65 6172 2829 0a20 2020 2020 2020 2061  lear().        a
+00002650: 7274 6963 6c65 5f32 2e73 6974 6573 2e61  rticle_2.sites.a
+00002660: 6464 286f 7468 6572 5f73 6974 6529 0a20  dd(other_site). 
+00002670: 2020 2020 2020 2061 7274 6963 6c65 5f32         article_2
+00002680: 2e73 6176 6528 290a 0a20 2020 2020 2020  .save()..       
+00002690: 2063 6f6e 7465 6e74 5f74 7970 6520 3d20   content_type = 
+000026a0: 436f 6e74 656e 7454 7970 652e 6f62 6a65  ContentType.obje
+000026b0: 6374 732e 6765 745f 666f 725f 6d6f 6465  cts.get_for_mode
+000026c0: 6c28 6172 7469 636c 655f 636c 6173 7329  l(article_class)
+000026d0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+000026e0: 7365 7274 4571 7561 6c28 332c 204e 6577  sertEqual(3, New
+000026f0: 736c 6574 7465 7249 7465 6d2e 6f62 6a65  sletterItem.obje
+00002700: 6374 732e 636f 756e 7428 2929 0a20 2020  cts.count()).   
+00002710: 2020 2020 2069 7465 6d5f 3120 3d20 4e65       item_1 = Ne
+00002720: 7773 6c65 7474 6572 4974 656d 2e6f 626a  wsletterItem.obj
+00002730: 6563 7473 2e67 6574 2863 6f6e 7465 6e74  ects.get(content
+00002740: 5f74 7970 653d 636f 6e74 656e 745f 7479  _type=content_ty
+00002750: 7065 2c20 6f62 6a65 6374 5f69 643d 6172  pe, object_id=ar
+00002760: 7469 636c 655f 312e 6964 290a 2020 2020  ticle_1.id).    
+00002770: 2020 2020 6974 656d 5f32 203d 204e 6577      item_2 = New
+00002780: 736c 6574 7465 7249 7465 6d2e 6f62 6a65  sletterItem.obje
+00002790: 6374 732e 6765 7428 636f 6e74 656e 745f  cts.get(content_
+000027a0: 7479 7065 3d63 6f6e 7465 6e74 5f74 7970  type=content_typ
+000027b0: 652c 206f 626a 6563 745f 6964 3d61 7274  e, object_id=art
+000027c0: 6963 6c65 5f32 2e69 6429 0a20 2020 2020  icle_2.id).     
+000027d0: 2020 2069 7465 6d5f 3320 3d20 4e65 7773     item_3 = News
+000027e0: 6c65 7474 6572 4974 656d 2e6f 626a 6563  letterItem.objec
+000027f0: 7473 2e67 6574 2863 6f6e 7465 6e74 5f74  ts.get(content_t
+00002800: 7970 653d 636f 6e74 656e 745f 7479 7065  ype=content_type
+00002810: 2c20 6f62 6a65 6374 5f69 643d 6172 7469  , object_id=arti
+00002820: 636c 655f 332e 6964 290a 0a20 2020 2020  cle_3.id)..     
+00002830: 2020 206e 6577 736c 6574 7465 7220 3d20     newsletter = 
+00002840: 6d6f 6d6d 792e 6d61 6b65 280a 2020 2020  mommy.make(.    
+00002850: 2020 2020 2020 2020 4e65 7773 6c65 7474          Newslett
+00002860: 6572 2c0a 2020 2020 2020 2020 2020 2020  er,.            
+00002870: 7375 626a 6563 743d 2261 206c 6974 746c  subject="a littl
+00002880: 6520 696e 7472 6f20 666f 7220 7468 6973  e intro for this
+00002890: 206e 6577 736c 6574 7465 7222 2c0a 2020   newsletter",.  
+000028a0: 2020 2020 2020 2020 2020 7465 6d70 6c61            templa
+000028b0: 7465 3d22 7465 7374 2f6e 6577 736c 6574  te="test/newslet
+000028c0: 7465 725f 7265 642e 6874 6d6c 222c 0a20  ter_red.html",. 
+000028d0: 2020 2020 2020 2020 2020 2069 7465 6d73             items
+000028e0: 3d5b 6974 656d 5f31 5d0a 2020 2020 2020  =[item_1].      
+000028f0: 2020 290a 0a20 2020 2020 2020 2064 6174    )..        dat
+00002900: 6120 3d20 7b0a 2020 2020 2020 2020 2020  a = {.          
+00002910: 2020 2273 7562 6a65 6374 223a 2022 7465    "subject": "te
+00002920: 7374 222c 0a20 2020 2020 2020 2020 2020  st",.           
+00002930: 2022 7465 6d70 6c61 7465 223a 2022 7465   "template": "te
+00002940: 7374 2f6e 6577 736c 6574 7465 725f 626c  st/newsletter_bl
+00002950: 7565 2e68 746d 6c22 2c0a 2020 2020 2020  ue.html",.      
+00002960: 2020 2020 2020 2769 7465 6d73 273a 205b        'items': [
+00002970: 6974 656d 5f32 2e69 642c 2069 7465 6d5f  item_2.id, item_
+00002980: 332e 6964 5d2c 0a20 2020 2020 2020 2020  3.id],.         
+00002990: 2020 2027 7369 7465 273a 2053 6974 652e     'site': Site.
+000029a0: 6f62 6a65 6374 732e 6765 745f 6375 7272  objects.get_curr
+000029b0: 656e 7428 292e 6964 2c0a 2020 2020 2020  ent().id,.      
+000029c0: 2020 7d0a 0a20 2020 2020 2020 2075 726c    }..        url
+000029d0: 203d 2072 6576 6572 7365 2822 636f 6f70   = reverse("coop
+000029e0: 5f63 6d73 5f6e 6577 736c 6574 7465 725f  _cms_newsletter_
+000029f0: 7365 7474 696e 6773 222c 2061 7267 733d  settings", args=
+00002a00: 5b6e 6577 736c 6574 7465 722e 6964 5d29  [newsletter.id])
+00002a10: 0a0a 2020 2020 2020 2020 7265 7370 6f6e  ..        respon
+00002a20: 7365 203d 2073 656c 662e 636c 6965 6e74  se = self.client
+00002a30: 2e70 6f73 7428 7572 6c2c 2064 6174 613d  .post(url, data=
+00002a40: 6461 7461 290a 2020 2020 2020 2020 7365  data).        se
+00002a50: 6c66 2e61 7373 6572 7445 7175 616c 2872  lf.assertEqual(r
+00002a60: 6573 706f 6e73 652e 7374 6174 7573 5f63  esponse.status_c
+00002a70: 6f64 652c 2032 3030 290a 2020 2020 2020  ode, 200).      
+00002a80: 2020 736f 7570 203d 2042 6561 7574 6966    soup = Beautif
+00002a90: 756c 536f 7570 2872 6573 706f 6e73 652e  ulSoup(response.
+00002aa0: 636f 6e74 656e 7429 0a0a 2020 2020 2020  content)..      
+00002ab0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00002ac0: 616c 286c 656e 2873 6f75 702e 7365 6c65  al(len(soup.sele
+00002ad0: 6374 2822 2e65 7272 6f72 6c69 7374 2229  ct(".errorlist")
+00002ae0: 292c 2031 290a 2020 2020 2020 2020 7365  ), 1).        se
+00002af0: 6c66 2e61 7373 6572 7445 7175 616c 286c  lf.assertEqual(l
+00002b00: 656e 2873 6f75 702e 7365 6c65 6374 2822  en(soup.select("
+00002b10: 2369 645f 6974 656d 7322 295b 305d 2e70  #id_items")[0].p
+00002b20: 6172 656e 742e 7365 6c65 6374 2822 2e65  arent.select(".e
+00002b30: 7272 6f72 6c69 7374 2229 292c 2031 290a  rrorlist")), 1).
+00002b40: 0a20 2020 2020 2020 206e 6577 736c 6574  .        newslet
+00002b50: 7465 7220 3d20 4e65 7773 6c65 7474 6572  ter = Newsletter
+00002b60: 2e6f 626a 6563 7473 2e67 6574 2869 643d  .objects.get(id=
+00002b70: 6e65 7773 6c65 7474 6572 2e69 6429 0a20  newsletter.id). 
+00002b80: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00002b90: 7274 4e6f 7445 7175 616c 286e 6577 736c  rtNotEqual(newsl
+00002ba0: 6574 7465 722e 7375 626a 6563 742c 2064  etter.subject, d
+00002bb0: 6174 615b 2273 7562 6a65 6374 225d 290a  ata["subject"]).
+00002bc0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00002bd0: 6572 744e 6f74 4571 7561 6c28 6e65 7773  ertNotEqual(news
+00002be0: 6c65 7474 6572 2e74 656d 706c 6174 652c  letter.template,
+00002bf0: 2064 6174 615b 2274 656d 706c 6174 6522   data["template"
+00002c00: 5d29 0a20 2020 2020 2020 2073 656c 662e  ]).        self.
+00002c10: 6173 7365 7274 4571 7561 6c28 5b69 7465  assertEqual([ite
+00002c20: 6d5f 312e 6964 5d2c 205b 782e 6964 2066  m_1.id], [x.id f
+00002c30: 6f72 2078 2069 6e20 6e65 7773 6c65 7474  or x in newslett
+00002c40: 6572 2e69 7465 6d73 2e61 6c6c 2829 5d29  er.items.all()])
+00002c50: 0a0a 2020 2020 6465 6620 7465 7374 5f73  ..    def test_s
+00002c60: 6176 655f 6e65 7773 6c65 7474 6572 5f69  ave_newsletter_i
+00002c70: 7465 6d73 5f6e 6f5f 6e65 7773 6c65 7474  tems_no_newslett
+00002c80: 6572 2873 656c 6629 3a0a 2020 2020 2020  er(self):.      
+00002c90: 2020 7365 6c66 2e5f 6c6f 675f 6173 5f65    self._log_as_e
+00002ca0: 6469 746f 7228 290a 2020 2020 2020 2020  ditor().        
+00002cb0: 6172 7469 636c 655f 636c 6173 7320 3d20  article_class = 
+00002cc0: 6765 745f 6172 7469 636c 655f 636c 6173  get_article_clas
+00002cd0: 7328 290a 0a20 2020 2020 2020 2073 6974  s()..        sit
+00002ce0: 6520 3d20 5369 7465 2e6f 626a 6563 7473  e = Site.objects
+00002cf0: 2e67 6574 5f63 7572 7265 6e74 2829 0a20  .get_current(). 
+00002d00: 2020 2020 2020 206f 7468 6572 5f73 6974         other_sit
+00002d10: 6520 3d20 6d6f 6d6d 792e 6d61 6b65 2853  e = mommy.make(S
+00002d20: 6974 6529 0a0a 2020 2020 2020 2020 6172  ite)..        ar
+00002d30: 7469 636c 655f 3120 3d20 6d6f 6d6d 792e  ticle_1 = mommy.
+00002d40: 6d61 6b65 2861 7274 6963 6c65 5f63 6c61  make(article_cla
+00002d50: 7373 2c20 736c 7567 3d22 7465 7374 3122  ss, slug="test1"
+00002d60: 2c20 696e 5f6e 6577 736c 6574 7465 723d  , in_newsletter=
+00002d70: 5472 7565 290a 2020 2020 2020 2020 6172  True).        ar
+00002d80: 7469 636c 655f 3220 3d20 6d6f 6d6d 792e  ticle_2 = mommy.
+00002d90: 6d61 6b65 2861 7274 6963 6c65 5f63 6c61  make(article_cla
+00002da0: 7373 2c20 736c 7567 3d22 7465 7374 3222  ss, slug="test2"
+00002db0: 2c20 696e 5f6e 6577 736c 6574 7465 723d  , in_newsletter=
+00002dc0: 5472 7565 290a 2020 2020 2020 2020 6172  True).        ar
+00002dd0: 7469 636c 655f 3320 3d20 6d6f 6d6d 792e  ticle_3 = mommy.
+00002de0: 6d61 6b65 2861 7274 6963 6c65 5f63 6c61  make(article_cla
+00002df0: 7373 2c20 736c 7567 3d22 7465 7374 3322  ss, slug="test3"
+00002e00: 2c20 696e 5f6e 6577 736c 6574 7465 723d  , in_newsletter=
+00002e10: 5472 7565 290a 0a20 2020 2020 2020 2063  True)..        c
+00002e20: 6f6e 7465 6e74 5f74 7970 6520 3d20 436f  ontent_type = Co
+00002e30: 6e74 656e 7454 7970 652e 6f62 6a65 6374  ntentType.object
+00002e40: 732e 6765 745f 666f 725f 6d6f 6465 6c28  s.get_for_model(
+00002e50: 6172 7469 636c 655f 636c 6173 7329 0a20  article_class). 
+00002e60: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00002e70: 7274 4571 7561 6c28 332c 204e 6577 736c  rtEqual(3, Newsl
+00002e80: 6574 7465 7249 7465 6d2e 6f62 6a65 6374  etterItem.object
+00002e90: 732e 636f 756e 7428 2929 0a20 2020 2020  s.count()).     
+00002ea0: 2020 2069 7465 6d5f 3120 3d20 4e65 7773     item_1 = News
+00002eb0: 6c65 7474 6572 4974 656d 2e6f 626a 6563  letterItem.objec
+00002ec0: 7473 2e67 6574 2863 6f6e 7465 6e74 5f74  ts.get(content_t
+00002ed0: 7970 653d 636f 6e74 656e 745f 7479 7065  ype=content_type
+00002ee0: 2c20 6f62 6a65 6374 5f69 643d 6172 7469  , object_id=arti
+00002ef0: 636c 655f 312e 6964 290a 2020 2020 2020  cle_1.id).      
+00002f00: 2020 6974 656d 5f32 203d 204e 6577 736c    item_2 = Newsl
+00002f10: 6574 7465 7249 7465 6d2e 6f62 6a65 6374  etterItem.object
+00002f20: 732e 6765 7428 636f 6e74 656e 745f 7479  s.get(content_ty
+00002f30: 7065 3d63 6f6e 7465 6e74 5f74 7970 652c  pe=content_type,
+00002f40: 206f 626a 6563 745f 6964 3d61 7274 6963   object_id=artic
+00002f50: 6c65 5f32 2e69 6429 0a20 2020 2020 2020  le_2.id).       
+00002f60: 2069 7465 6d5f 3320 3d20 4e65 7773 6c65   item_3 = Newsle
+00002f70: 7474 6572 4974 656d 2e6f 626a 6563 7473  tterItem.objects
+00002f80: 2e67 6574 2863 6f6e 7465 6e74 5f74 7970  .get(content_typ
+00002f90: 653d 636f 6e74 656e 745f 7479 7065 2c20  e=content_type, 
+00002fa0: 6f62 6a65 6374 5f69 643d 6172 7469 636c  object_id=articl
+00002fb0: 655f 332e 6964 290a 0a20 2020 2020 2020  e_3.id)..       
+00002fc0: 2061 7274 6963 6c65 5f32 2e69 6e5f 6e65   article_2.in_ne
+00002fd0: 7773 6c65 7474 6572 203d 2046 616c 7365  wsletter = False
+00002fe0: 0a20 2020 2020 2020 2061 7274 6963 6c65  .        article
+00002ff0: 5f32 2e73 6176 6528 290a 0a20 2020 2020  _2.save()..     
+00003000: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00003010: 7561 6c28 322c 204e 6577 736c 6574 7465  ual(2, Newslette
+00003020: 7249 7465 6d2e 6f62 6a65 6374 732e 636f  rItem.objects.co
+00003030: 756e 7428 2929 0a0a 2020 2020 2020 2020  unt())..        
+00003040: 6e65 7773 6c65 7474 6572 203d 206d 6f6d  newsletter = mom
+00003050: 6d79 2e6d 616b 6528 0a20 2020 2020 2020  my.make(.       
+00003060: 2020 2020 204e 6577 736c 6574 7465 722c       Newsletter,
+00003070: 0a20 2020 2020 2020 2020 2020 2073 7562  .            sub
+00003080: 6a65 6374 3d22 6120 6c69 7474 6c65 2069  ject="a little i
+00003090: 6e74 726f 2066 6f72 2074 6869 7320 6e65  ntro for this ne
+000030a0: 7773 6c65 7474 6572 222c 0a20 2020 2020  wsletter",.     
+000030b0: 2020 2020 2020 2074 656d 706c 6174 653d         template=
+000030c0: 2274 6573 742f 6e65 7773 6c65 7474 6572  "test/newsletter
+000030d0: 5f72 6564 2e68 746d 6c22 2c0a 2020 2020  _red.html",.    
+000030e0: 2020 2020 2020 2020 6974 656d 733d 5b69          items=[i
+000030f0: 7465 6d5f 315d 0a20 2020 2020 2020 2029  tem_1].        )
+00003100: 0a0a 2020 2020 2020 2020 6461 7461 203d  ..        data =
+00003110: 207b 0a20 2020 2020 2020 2020 2020 2022   {.            "
+00003120: 7375 626a 6563 7422 3a20 2274 6573 7422  subject": "test"
+00003130: 2c0a 2020 2020 2020 2020 2020 2020 2274  ,.            "t
+00003140: 656d 706c 6174 6522 3a20 2274 6573 742f  emplate": "test/
+00003150: 6e65 7773 6c65 7474 6572 5f62 6c75 652e  newsletter_blue.
+00003160: 6874 6d6c 222c 0a20 2020 2020 2020 2020  html",.         
+00003170: 2020 2027 6974 656d 7327 3a20 5b69 7465     'items': [ite
+00003180: 6d5f 322e 6964 2c20 6974 656d 5f33 2e69  m_2.id, item_3.i
+00003190: 645d 2c0a 2020 2020 2020 2020 2020 2020  d],.            
+000031a0: 2773 6974 6527 3a20 5369 7465 2e6f 626a  'site': Site.obj
+000031b0: 6563 7473 2e67 6574 5f63 7572 7265 6e74  ects.get_current
+000031c0: 2829 2e69 642c 0a20 2020 2020 2020 207d  ().id,.        }
+000031d0: 0a0a 2020 2020 2020 2020 7572 6c20 3d20  ..        url = 
+000031e0: 7265 7665 7273 6528 2263 6f6f 705f 636d  reverse("coop_cm
+000031f0: 735f 6e65 7773 6c65 7474 6572 5f73 6574  s_newsletter_set
+00003200: 7469 6e67 7322 2c20 6172 6773 3d5b 6e65  tings", args=[ne
+00003210: 7773 6c65 7474 6572 2e69 645d 290a 0a20  wsletter.id]).. 
+00003220: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+00003230: 3d20 7365 6c66 2e63 6c69 656e 742e 706f  = self.client.po
+00003240: 7374 2875 726c 2c20 6461 7461 3d64 6174  st(url, data=dat
+00003250: 6129 0a20 2020 2020 2020 2073 656c 662e  a).        self.
+00003260: 6173 7365 7274 4571 7561 6c28 7265 7370  assertEqual(resp
+00003270: 6f6e 7365 2e73 7461 7475 735f 636f 6465  onse.status_code
+00003280: 2c20 3230 3029 0a20 2020 2020 2020 2073  , 200).        s
+00003290: 6f75 7020 3d20 4265 6175 7469 6675 6c53  oup = BeautifulS
+000032a0: 6f75 7028 7265 7370 6f6e 7365 2e63 6f6e  oup(response.con
+000032b0: 7465 6e74 290a 0a20 2020 2020 2020 2073  tent)..        s
+000032c0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+000032d0: 6c65 6e28 736f 7570 2e73 656c 6563 7428  len(soup.select(
+000032e0: 222e 6572 726f 726c 6973 7422 2929 2c20  ".errorlist")), 
+000032f0: 3129 0a20 2020 2020 2020 2073 656c 662e  1).        self.
+00003300: 6173 7365 7274 4571 7561 6c28 6c65 6e28  assertEqual(len(
+00003310: 736f 7570 2e73 656c 6563 7428 2223 6964  soup.select("#id
+00003320: 5f69 7465 6d73 2229 5b30 5d2e 7061 7265  _items")[0].pare
+00003330: 6e74 2e73 656c 6563 7428 222e 6572 726f  nt.select(".erro
+00003340: 726c 6973 7422 2929 2c20 3129 0a0a 2020  rlist")), 1)..  
+00003350: 2020 2020 2020 6e65 7773 6c65 7474 6572        newsletter
+00003360: 203d 204e 6577 736c 6574 7465 722e 6f62   = Newsletter.ob
+00003370: 6a65 6374 732e 6765 7428 6964 3d6e 6577  jects.get(id=new
+00003380: 736c 6574 7465 722e 6964 290a 2020 2020  sletter.id).    
+00003390: 2020 2020 7365 6c66 2e61 7373 6572 744e      self.assertN
+000033a0: 6f74 4571 7561 6c28 6e65 7773 6c65 7474  otEqual(newslett
+000033b0: 6572 2e73 7562 6a65 6374 2c20 6461 7461  er.subject, data
+000033c0: 5b22 7375 626a 6563 7422 5d29 0a20 2020  ["subject"]).   
+000033d0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+000033e0: 4e6f 7445 7175 616c 286e 6577 736c 6574  NotEqual(newslet
+000033f0: 7465 722e 7465 6d70 6c61 7465 2c20 6461  ter.template, da
+00003400: 7461 5b22 7465 6d70 6c61 7465 225d 290a  ta["template"]).
+00003410: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00003420: 6572 7445 7175 616c 285b 6974 656d 5f31  ertEqual([item_1
+00003430: 2e69 645d 2c20 5b78 2e69 6420 666f 7220  .id], [x.id for 
+00003440: 7820 696e 206e 6577 736c 6574 7465 722e  x in newsletter.
+00003450: 6974 656d 732e 616c 6c28 295d 290a 0a20  items.all()]).. 
+00003460: 2020 2064 6566 2074 6573 745f 7669 6577     def test_view
+00003470: 5f63 7265 6174 655f 6e65 7773 6c65 7474  _create_newslett
+00003480: 6572 5f6e 6f74 5f6c 6f67 6765 6428 7365  er_not_logged(se
+00003490: 6c66 293a 0a20 2020 2020 2020 2075 726c  lf):.        url
+000034a0: 203d 2072 6576 6572 7365 2822 636f 6f70   = reverse("coop
+000034b0: 5f63 6d73 5f6e 6577 5f6e 6577 736c 6574  _cms_new_newslet
+000034c0: 7465 7222 290a 0a20 2020 2020 2020 2072  ter")..        r
+000034d0: 6573 706f 6e73 6520 3d20 7365 6c66 2e63  esponse = self.c
+000034e0: 6c69 656e 742e 6765 7428 7572 6c29 0a20  lient.get(url). 
+000034f0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00003500: 7274 4571 7561 6c28 7265 7370 6f6e 7365  rtEqual(response
+00003510: 2e73 7461 7475 735f 636f 6465 2c20 3330  .status_code, 30
+00003520: 3229 0a0a 2020 2020 6465 6620 7465 7374  2)..    def test
+00003530: 5f63 7265 6174 655f 6e65 7773 6c65 7474  _create_newslett
+00003540: 6572 5f6e 6f74 5f6c 6f67 6765 6428 7365  er_not_logged(se
+00003550: 6c66 293a 0a20 2020 2020 2020 2075 726c  lf):.        url
+00003560: 203d 2072 6576 6572 7365 2822 636f 6f70   = reverse("coop
+00003570: 5f63 6d73 5f6e 6577 5f6e 6577 736c 6574  _cms_new_newslet
+00003580: 7465 7222 290a 0a20 2020 2020 2020 2064  ter")..        d
+00003590: 6174 6120 3d20 7b0a 2020 2020 2020 2020  ata = {.        
+000035a0: 2020 2020 2273 7562 6a65 6374 223a 2022      "subject": "
+000035b0: 7465 7374 222c 0a20 2020 2020 2020 2020  test",.         
+000035c0: 2020 2022 7465 6d70 6c61 7465 223a 2022     "template": "
+000035d0: 7465 7374 2f6e 6577 736c 6574 7465 725f  test/newsletter_
+000035e0: 626c 7565 2e68 746d 6c22 2c0a 2020 2020  blue.html",.    
+000035f0: 2020 2020 2020 2020 2769 7465 6d73 273a          'items':
+00003600: 205b 5d2c 0a20 2020 2020 2020 2020 2020   [],.           
+00003610: 2027 7369 7465 273a 2053 6974 652e 6f62   'site': Site.ob
+00003620: 6a65 6374 732e 6765 745f 6375 7272 656e  jects.get_curren
+00003630: 7428 292e 6964 2c0a 2020 2020 2020 2020  t().id,.        
+00003640: 7d0a 0a20 2020 2020 2020 2072 6573 706f  }..        respo
+00003650: 6e73 6520 3d20 7365 6c66 2e63 6c69 656e  nse = self.clien
+00003660: 742e 706f 7374 2875 726c 2c20 6461 7461  t.post(url, data
+00003670: 3d64 6174 6129 0a20 2020 2020 2020 2073  =data).        s
+00003680: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00003690: 7265 7370 6f6e 7365 2e73 7461 7475 735f  response.status_
+000036a0: 636f 6465 2c20 3330 3229 0a0a 2020 2020  code, 302)..    
+000036b0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+000036c0: 7175 616c 284e 6577 736c 6574 7465 722e  qual(Newsletter.
+000036d0: 6f62 6a65 6374 732e 636f 756e 7428 292c  objects.count(),
+000036e0: 2030 290a 0a20 2020 2064 6566 2074 6573   0)..    def tes
+000036f0: 745f 7669 6577 5f65 6469 745f 6e65 7773  t_view_edit_news
+00003700: 6c65 7474 6572 5f6e 6f74 5f6c 6f67 6765  letter_not_logge
+00003710: 6428 7365 6c66 293a 0a20 2020 2020 2020  d(self):.       
+00003720: 206e 6577 736c 6574 7465 7220 3d20 6d6f   newsletter = mo
+00003730: 6d6d 792e 6d61 6b65 280a 2020 2020 2020  mmy.make(.      
+00003740: 2020 2020 2020 4e65 7773 6c65 7474 6572        Newsletter
+00003750: 2c0a 2020 2020 2020 2020 2020 2020 7375  ,.            su
+00003760: 626a 6563 743d 2261 206c 6974 746c 6520  bject="a little 
+00003770: 696e 7472 6f20 666f 7220 7468 6973 206e  intro for this n
+00003780: 6577 736c 6574 7465 7222 2c0a 2020 2020  ewsletter",.    
+00003790: 2020 2020 2020 2020 7465 6d70 6c61 7465          template
+000037a0: 3d22 7465 7374 2f6e 6577 736c 6574 7465  ="test/newslette
+000037b0: 725f 626c 7565 2e68 746d 6c22 2c0a 2020  r_blue.html",.  
+000037c0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+000037d0: 2075 726c 203d 2072 6576 6572 7365 2822   url = reverse("
+000037e0: 636f 6f70 5f63 6d73 5f6e 6577 736c 6574  coop_cms_newslet
+000037f0: 7465 725f 7365 7474 696e 6773 222c 2061  ter_settings", a
+00003800: 7267 733d 5b6e 6577 736c 6574 7465 722e  rgs=[newsletter.
+00003810: 6964 5d29 0a0a 2020 2020 2020 2020 7265  id])..        re
+00003820: 7370 6f6e 7365 203d 2073 656c 662e 636c  sponse = self.cl
+00003830: 6965 6e74 2e67 6574 2875 726c 290a 2020  ient.get(url).  
+00003840: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00003850: 7445 7175 616c 2872 6573 706f 6e73 652e  tEqual(response.
+00003860: 7374 6174 7573 5f63 6f64 652c 2033 3032  status_code, 302
+00003870: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+00003880: 6564 6974 5f6e 6577 736c 6574 7465 725f  edit_newsletter_
+00003890: 6e6f 745f 6c6f 6767 6564 2873 656c 6629  not_logged(self)
+000038a0: 3a0a 2020 2020 2020 2020 7375 626a 6563  :.        subjec
+000038b0: 7420 3d20 2261 206c 6974 746c 6520 696e  t = "a little in
+000038c0: 7472 6f20 666f 7220 7468 6973 206e 6577  tro for this new
+000038d0: 736c 6574 7465 7222 0a20 2020 2020 2020  sletter".       
+000038e0: 206e 6577 736c 6574 7465 7220 3d20 6d6f   newsletter = mo
+000038f0: 6d6d 792e 6d61 6b65 280a 2020 2020 2020  mmy.make(.      
+00003900: 2020 2020 2020 4e65 7773 6c65 7474 6572        Newsletter
+00003910: 2c0a 2020 2020 2020 2020 2020 2020 7375  ,.            su
+00003920: 626a 6563 743d 7375 626a 6563 742c 0a20  bject=subject,. 
+00003930: 2020 2020 2020 2020 2020 2074 656d 706c             templ
+00003940: 6174 653d 2274 6573 742f 6e65 7773 6c65  ate="test/newsle
+00003950: 7474 6572 5f72 6564 2e68 746d 6c22 2c0a  tter_red.html",.
+00003960: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00003970: 2020 7572 6c20 3d20 7265 7665 7273 6528    url = reverse(
+00003980: 2263 6f6f 705f 636d 735f 6e65 7773 6c65  "coop_cms_newsle
+00003990: 7474 6572 5f73 6574 7469 6e67 7322 2c20  tter_settings", 
+000039a0: 6172 6773 3d5b 6e65 7773 6c65 7474 6572  args=[newsletter
+000039b0: 2e69 645d 290a 0a20 2020 2020 2020 2064  .id])..        d
+000039c0: 6174 6120 3d20 7b0a 2020 2020 2020 2020  ata = {.        
+000039d0: 2020 2020 2273 7562 6a65 6374 223a 2022      "subject": "
+000039e0: 7465 7374 222c 0a20 2020 2020 2020 2020  test",.         
+000039f0: 2020 2022 7465 6d70 6c61 7465 223a 2022     "template": "
+00003a00: 7465 7374 2f6e 6577 736c 6574 7465 725f  test/newsletter_
+00003a10: 626c 7565 2e68 746d 6c22 2c0a 2020 2020  blue.html",.    
+00003a20: 2020 2020 2020 2020 2769 7465 6d73 273a          'items':
+00003a30: 205b 5d0a 2020 2020 2020 2020 7d0a 0a20   [].        }.. 
+00003a40: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+00003a50: 3d20 7365 6c66 2e63 6c69 656e 742e 706f  = self.client.po
+00003a60: 7374 2875 726c 2c20 6461 7461 3d64 6174  st(url, data=dat
+00003a70: 6129 0a20 2020 2020 2020 2073 656c 662e  a).        self.
+00003a80: 6173 7365 7274 4571 7561 6c28 7265 7370  assertEqual(resp
+00003a90: 6f6e 7365 2e73 7461 7475 735f 636f 6465  onse.status_code
+00003aa0: 2c20 3330 3229 0a0a 2020 2020 2020 2020  , 302)..        
+00003ab0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00003ac0: 284e 6577 736c 6574 7465 722e 6f62 6a65  (Newsletter.obje
+00003ad0: 6374 732e 636f 756e 7428 292c 2031 290a  cts.count(), 1).
+00003ae0: 2020 2020 2020 2020 6e65 7773 6c65 7474          newslett
+00003af0: 6572 203d 204e 6577 736c 6574 7465 722e  er = Newsletter.
+00003b00: 6f62 6a65 6374 732e 616c 6c28 295b 305d  objects.all()[0]
+00003b10: 0a0a 2020 2020 2020 2020 7365 6c66 2e61  ..        self.a
+00003b20: 7373 6572 7445 7175 616c 286e 6577 736c  ssertEqual(newsl
+00003b30: 6574 7465 722e 7375 626a 6563 742c 2073  etter.subject, s
+00003b40: 7562 6a65 6374 290a 0a0a 636c 6173 7320  ubject)...class 
+00003b50: 4e65 7773 6c65 7474 6572 5465 7374 2855  NewsletterTest(U
+00003b60: 7365 7242 6173 6554 6573 7443 6173 6529  serBaseTestCase)
+00003b70: 3a0a 0a20 2020 2064 6566 2074 6573 745f  :..    def test_
+00003b80: 6372 6561 7465 5f61 7274 6963 6c65 5f66  create_article_f
+00003b90: 6f72 5f6e 6577 736c 6574 7465 7228 7365  or_newsletter(se
+00003ba0: 6c66 293a 0a20 2020 2020 2020 2061 7274  lf):.        art
+00003bb0: 6963 6c65 5f63 6c61 7373 203d 2067 6574  icle_class = get
+00003bc0: 5f61 7274 6963 6c65 5f63 6c61 7373 2829  _article_class()
+00003bd0: 0a20 2020 2020 2020 2063 6f6e 7465 6e74  .        content
+00003be0: 5f74 7970 6520 3d20 436f 6e74 656e 7454  _type = ContentT
+00003bf0: 7970 652e 6f62 6a65 6374 732e 6765 745f  ype.objects.get_
+00003c00: 666f 725f 6d6f 6465 6c28 6172 7469 636c  for_model(articl
+00003c10: 655f 636c 6173 7329 0a20 2020 2020 2020  e_class).       
+00003c20: 200a 2020 2020 2020 2020 6172 7420 3d20   .        art = 
+00003c30: 6d6f 6d6d 792e 6d61 6b65 2861 7274 6963  mommy.make(artic
+00003c40: 6c65 5f63 6c61 7373 2c20 736c 7567 3d22  le_class, slug="
+00003c50: 7465 7374 222c 2069 6e5f 6e65 7773 6c65  test", in_newsle
+00003c60: 7474 6572 3d54 7275 6529 0a20 2020 2020  tter=True).     
+00003c70: 2020 200a 2020 2020 2020 2020 7365 6c66     .        self
+00003c80: 2e61 7373 6572 7445 7175 616c 2831 2c20  .assertEqual(1, 
+00003c90: 4e65 7773 6c65 7474 6572 4974 656d 2e6f  NewsletterItem.o
+00003ca0: 626a 6563 7473 2e63 6f75 6e74 2829 290a  bjects.count()).
+00003cb0: 2020 2020 2020 2020 6974 656d 203d 204e          item = N
+00003cc0: 6577 736c 6574 7465 7249 7465 6d2e 6f62  ewsletterItem.ob
+00003cd0: 6a65 6374 732e 6765 7428 636f 6e74 656e  jects.get(conten
+00003ce0: 745f 7479 7065 3d63 6f6e 7465 6e74 5f74  t_type=content_t
+00003cf0: 7970 652c 206f 626a 6563 745f 6964 3d61  ype, object_id=a
+00003d00: 7274 2e69 6429 0a20 2020 2020 2020 2073  rt.id).        s
+00003d10: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00003d20: 6974 656d 2e63 6f6e 7465 6e74 5f6f 626a  item.content_obj
+00003d30: 6563 742c 2061 7274 290a 2020 2020 2020  ect, art).      
+00003d40: 2020 0a20 2020 2020 2020 2061 7274 2e64    .        art.d
+00003d50: 656c 6574 6528 290a 2020 2020 2020 2020  elete().        
+00003d60: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+00003d70: 2830 2c20 4e65 7773 6c65 7474 6572 4974  (0, NewsletterIt
+00003d80: 656d 2e6f 626a 6563 7473 2e63 6f75 6e74  em.objects.count
+00003d90: 2829 290a 0a20 2020 2064 6566 2074 6573  ())..    def tes
+00003da0: 745f 6372 6561 7465 5f61 7274 6963 6c65  t_create_article
+00003db0: 5f6e 6f74 5f66 6f72 5f6e 6577 736c 6574  _not_for_newslet
+00003dc0: 7465 7228 7365 6c66 293a 0a20 2020 2020  ter(self):.     
+00003dd0: 2020 2061 7274 6963 6c65 5f63 6c61 7373     article_class
+00003de0: 203d 2067 6574 5f61 7274 6963 6c65 5f63   = get_article_c
+00003df0: 6c61 7373 2829 0a20 2020 2020 2020 2043  lass().        C
+00003e00: 6f6e 7465 6e74 5479 7065 2e6f 626a 6563  ontentType.objec
+00003e10: 7473 2e67 6574 5f66 6f72 5f6d 6f64 656c  ts.get_for_model
+00003e20: 2861 7274 6963 6c65 5f63 6c61 7373 290a  (article_class).
+00003e30: 2020 2020 2020 2020 0a20 2020 2020 2020          .       
+00003e40: 2061 7274 203d 206d 6f6d 6d79 2e6d 616b   art = mommy.mak
+00003e50: 6528 6172 7469 636c 655f 636c 6173 732c  e(article_class,
+00003e60: 2073 6c75 673d 2274 6573 7422 2c20 696e   slug="test", in
+00003e70: 5f6e 6577 736c 6574 7465 723d 4661 6c73  _newsletter=Fals
+00003e80: 6529 0a20 2020 2020 2020 2073 656c 662e  e).        self.
+00003e90: 6173 7365 7274 4571 7561 6c28 302c 204e  assertEqual(0, N
+00003ea0: 6577 736c 6574 7465 7249 7465 6d2e 6f62  ewsletterItem.ob
+00003eb0: 6a65 6374 732e 636f 756e 7428 2929 0a20  jects.count()). 
+00003ec0: 2020 2020 2020 200a 2020 2020 2020 2020         .        
+00003ed0: 6172 742e 6465 6c65 7465 2829 0a20 2020  art.delete().   
+00003ee0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00003ef0: 4571 7561 6c28 302c 204e 6577 736c 6574  Equal(0, Newslet
+00003f00: 7465 7249 7465 6d2e 6f62 6a65 6374 732e  terItem.objects.
+00003f10: 636f 756e 7428 2929 0a0a 2020 2020 6465  count())..    de
+00003f20: 6620 7465 7374 5f63 7265 6174 655f 6172  f test_create_ar
+00003f30: 7469 636c 655f 636f 6d6d 616e 6473 2873  ticle_commands(s
+00003f40: 656c 6629 3a0a 2020 2020 2020 2020 6172  elf):.        ar
+00003f50: 7469 636c 655f 636c 6173 7320 3d20 6765  ticle_class = ge
+00003f60: 745f 6172 7469 636c 655f 636c 6173 7328  t_article_class(
+00003f70: 290a 2020 2020 2020 2020 636f 6e74 656e  ).        conten
+00003f80: 745f 7479 7065 203d 2043 6f6e 7465 6e74  t_type = Content
+00003f90: 5479 7065 2e6f 626a 6563 7473 2e67 6574  Type.objects.get
+00003fa0: 5f66 6f72 5f6d 6f64 656c 2861 7274 6963  _for_model(artic
+00003fb0: 6c65 5f63 6c61 7373 290a 2020 2020 2020  le_class).      
+00003fc0: 2020 6172 7431 203d 206d 6f6d 6d79 2e6d    art1 = mommy.m
+00003fd0: 616b 6528 6172 7469 636c 655f 636c 6173  ake(article_clas
+00003fe0: 732c 2073 6c75 673d 2274 6573 7431 222c  s, slug="test1",
+00003ff0: 2069 6e5f 6e65 7773 6c65 7474 6572 3d54   in_newsletter=T
+00004000: 7275 6529 0a20 2020 2020 2020 2061 7274  rue).        art
+00004010: 3220 3d20 6d6f 6d6d 792e 6d61 6b65 2861  2 = mommy.make(a
+00004020: 7274 6963 6c65 5f63 6c61 7373 2c20 736c  rticle_class, sl
+00004030: 7567 3d22 7465 7374 3222 2c20 696e 5f6e  ug="test2", in_n
+00004040: 6577 736c 6574 7465 723d 5472 7565 290a  ewsletter=True).
+00004050: 2020 2020 2020 2020 6172 7433 203d 206d          art3 = m
+00004060: 6f6d 6d79 2e6d 616b 6528 6172 7469 636c  ommy.make(articl
+00004070: 655f 636c 6173 732c 2073 6c75 673d 2274  e_class, slug="t
+00004080: 6573 7433 222c 2069 6e5f 6e65 7773 6c65  est3", in_newsle
+00004090: 7474 6572 3d46 616c 7365 290a 2020 2020  tter=False).    
+000040a0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+000040b0: 7175 616c 2832 2c20 4e65 7773 6c65 7474  qual(2, Newslett
+000040c0: 6572 4974 656d 2e6f 626a 6563 7473 2e63  erItem.objects.c
+000040d0: 6f75 6e74 2829 290a 2020 2020 2020 2020  ount()).        
+000040e0: 4e65 7773 6c65 7474 6572 4974 656d 2e6f  NewsletterItem.o
+000040f0: 626a 6563 7473 2e61 6c6c 2829 2e64 656c  bjects.all().del
+00004100: 6574 6528 290a 2020 2020 2020 2020 7365  ete().        se
+00004110: 6c66 2e61 7373 6572 7445 7175 616c 2830  lf.assertEqual(0
+00004120: 2c20 4e65 7773 6c65 7474 6572 4974 656d  , NewsletterItem
+00004130: 2e6f 626a 6563 7473 2e63 6f75 6e74 2829  .objects.count()
+00004140: 290a 2020 2020 2020 2020 6d61 6e61 6765  ).        manage
+00004150: 6d65 6e74 2e63 616c 6c5f 636f 6d6d 616e  ment.call_comman
+00004160: 6428 2763 7265 6174 655f 6e65 7773 6c65  d('create_newsle
+00004170: 7474 6572 5f69 7465 6d73 272c 2076 6572  tter_items', ver
+00004180: 626f 7369 7479 3d30 2920 2023 202c 2069  bosity=0)  # , i
+00004190: 6e74 6572 6163 7469 7665 3d46 616c 7365  nteractive=False
+000041a0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+000041b0: 7373 6572 7445 7175 616c 2832 2c20 4e65  ssertEqual(2, Ne
+000041c0: 7773 6c65 7474 6572 4974 656d 2e6f 626a  wsletterItem.obj
+000041d0: 6563 7473 2e63 6f75 6e74 2829 290a 2020  ects.count()).  
+000041e0: 2020 2020 2020 6974 656d 3120 3d20 4e65        item1 = Ne
+000041f0: 7773 6c65 7474 6572 4974 656d 2e6f 626a  wsletterItem.obj
+00004200: 6563 7473 2e67 6574 2863 6f6e 7465 6e74  ects.get(content
+00004210: 5f74 7970 653d 636f 6e74 656e 745f 7479  _type=content_ty
+00004220: 7065 2c20 6f62 6a65 6374 5f69 643d 6172  pe, object_id=ar
+00004230: 7431 2e69 6429 0a20 2020 2020 2020 2069  t1.id).        i
+00004240: 7465 6d32 203d 204e 6577 736c 6574 7465  tem2 = Newslette
+00004250: 7249 7465 6d2e 6f62 6a65 6374 732e 6765  rItem.objects.ge
+00004260: 7428 636f 6e74 656e 745f 7479 7065 3d63  t(content_type=c
+00004270: 6f6e 7465 6e74 5f74 7970 652c 206f 626a  ontent_type, obj
+00004280: 6563 745f 6964 3d61 7274 322e 6964 290a  ect_id=art2.id).
+00004290: 0a20 2020 2064 6566 2074 6573 745f 7669  .    def test_vi
+000042a0: 6577 5f6e 6577 736c 6574 7465 7228 7365  ew_newsletter(se
+000042b0: 6c66 293a 0a20 2020 2020 2020 2061 7274  lf):.        art
+000042c0: 6963 6c65 5f63 6c61 7373 203d 2067 6574  icle_class = get
+000042d0: 5f61 7274 6963 6c65 5f63 6c61 7373 2829  _article_class()
+000042e0: 0a20 2020 2020 2020 2063 6f6e 7465 6e74  .        content
+000042f0: 5f74 7970 6520 3d20 436f 6e74 656e 7454  _type = ContentT
+00004300: 7970 652e 6f62 6a65 6374 732e 6765 745f  ype.objects.get_
+00004310: 666f 725f 6d6f 6465 6c28 6172 7469 636c  for_model(articl
+00004320: 655f 636c 6173 7329 0a20 2020 2020 2020  e_class).       
+00004330: 200a 2020 2020 2020 2020 6172 7431 203d   .        art1 =
+00004340: 206d 6f6d 6d79 2e6d 616b 6528 6172 7469   mommy.make(arti
+00004350: 636c 655f 636c 6173 732c 2074 6974 6c65  cle_class, title
+00004360: 3d22 4172 7420 3122 2c20 696e 5f6e 6577  ="Art 1", in_new
+00004370: 736c 6574 7465 723d 5472 7565 290a 2020  sletter=True).  
+00004380: 2020 2020 2020 6172 7432 203d 206d 6f6d        art2 = mom
+00004390: 6d79 2e6d 616b 6528 6172 7469 636c 655f  my.make(article_
+000043a0: 636c 6173 732c 2074 6974 6c65 3d22 4172  class, title="Ar
+000043b0: 7420 3222 2c20 696e 5f6e 6577 736c 6574  t 2", in_newslet
+000043c0: 7465 723d 5472 7565 290a 2020 2020 2020  ter=True).      
+000043d0: 2020 6172 7433 203d 206d 6f6d 6d79 2e6d    art3 = mommy.m
+000043e0: 616b 6528 6172 7469 636c 655f 636c 6173  ake(article_clas
+000043f0: 732c 2074 6974 6c65 3d22 4172 7420 3322  s, title="Art 3"
+00004400: 2c20 696e 5f6e 6577 736c 6574 7465 723d  , in_newsletter=
+00004410: 5472 7565 290a 2020 2020 2020 2020 0a20  True).        . 
+00004420: 2020 2020 2020 206e 6577 736c 6574 7465         newslette
+00004430: 7220 3d20 6d6f 6d6d 792e 6d61 6b65 280a  r = mommy.make(.
+00004440: 2020 2020 2020 2020 2020 2020 4e65 7773              News
+00004450: 6c65 7474 6572 2c0a 2020 2020 2020 2020  letter,.        
+00004460: 2020 2020 636f 6e74 656e 743d 2261 206c      content="a l
+00004470: 6974 746c 6520 696e 7472 6f20 666f 7220  ittle intro for 
+00004480: 7468 6973 206e 6577 736c 6574 7465 7222  this newsletter"
+00004490: 2c0a 2020 2020 2020 2020 2020 2020 7465  ,.            te
+000044a0: 6d70 6c61 7465 3d22 7465 7374 2f6e 6577  mplate="test/new
+000044b0: 736c 6574 7465 725f 626c 7565 2e68 746d  sletter_blue.htm
+000044c0: 6c22 2c0a 2020 2020 2020 2020 2020 2020  l",.            
+000044d0: 6973 5f70 7562 6c69 633d 5472 7565 0a20  is_public=True. 
+000044e0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+000044f0: 206e 6577 736c 6574 7465 722e 6974 656d   newsletter.item
+00004500: 732e 6164 6428 4e65 7773 6c65 7474 6572  s.add(Newsletter
+00004510: 4974 656d 2e6f 626a 6563 7473 2e67 6574  Item.objects.get
+00004520: 2863 6f6e 7465 6e74 5f74 7970 653d 636f  (content_type=co
+00004530: 6e74 656e 745f 7479 7065 2c20 6f62 6a65  ntent_type, obje
+00004540: 6374 5f69 643d 6172 7431 2e69 6429 290a  ct_id=art1.id)).
+00004550: 2020 2020 2020 2020 6e65 7773 6c65 7474          newslett
+00004560: 6572 2e69 7465 6d73 2e61 6464 284e 6577  er.items.add(New
+00004570: 736c 6574 7465 7249 7465 6d2e 6f62 6a65  sletterItem.obje
+00004580: 6374 732e 6765 7428 636f 6e74 656e 745f  cts.get(content_
+00004590: 7479 7065 3d63 6f6e 7465 6e74 5f74 7970  type=content_typ
+000045a0: 652c 206f 626a 6563 745f 6964 3d61 7274  e, object_id=art
+000045b0: 322e 6964 2929 0a20 2020 2020 2020 206e  2.id)).        n
+000045c0: 6577 736c 6574 7465 722e 7361 7665 2829  ewsletter.save()
+000045d0: 0a20 2020 2020 2020 200a 2020 2020 2020  .        .      
+000045e0: 2020 7572 6c20 3d20 7265 7665 7273 6528    url = reverse(
+000045f0: 2763 6f6f 705f 636d 735f 7669 6577 5f6e  'coop_cms_view_n
+00004600: 6577 736c 6574 7465 7227 2c20 6172 6773  ewsletter', args
+00004610: 3d5b 6e65 7773 6c65 7474 6572 2e69 645d  =[newsletter.id]
+00004620: 290a 2020 2020 2020 2020 7265 7370 6f6e  ).        respon
+00004630: 7365 203d 2073 656c 662e 636c 6965 6e74  se = self.client
+00004640: 2e67 6574 2875 726c 290a 2020 2020 2020  .get(url).      
+00004650: 2020 0a20 2020 2020 2020 2073 656c 662e    .        self.
+00004660: 6173 7365 7274 4571 7561 6c28 3230 302c  assertEqual(200,
+00004670: 2072 6573 706f 6e73 652e 7374 6174 7573   response.status
+00004680: 5f63 6f64 6529 0a20 2020 2020 2020 200a  _code).        .
+00004690: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+000046a0: 6572 7443 6f6e 7461 696e 7328 7265 7370  ertContains(resp
+000046b0: 6f6e 7365 2c20 6e65 7773 6c65 7474 6572  onse, newsletter
+000046c0: 2e63 6f6e 7465 6e74 290a 2020 2020 2020  .content).      
+000046d0: 2020 7365 6c66 2e61 7373 6572 7443 6f6e    self.assertCon
+000046e0: 7461 696e 7328 7265 7370 6f6e 7365 2c20  tains(response, 
+000046f0: 6172 7431 2e74 6974 6c65 290a 2020 2020  art1.title).    
+00004700: 2020 2020 7365 6c66 2e61 7373 6572 7443      self.assertC
+00004710: 6f6e 7461 696e 7328 7265 7370 6f6e 7365  ontains(response
+00004720: 2c20 6172 7432 2e74 6974 6c65 290a 2020  , art2.title).  
+00004730: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00004740: 744e 6f74 436f 6e74 6169 6e73 2872 6573  tNotContains(res
+00004750: 706f 6e73 652c 2061 7274 332e 7469 746c  ponse, art3.titl
+00004760: 6529 0a0a 2020 2020 6465 6620 7465 7374  e)..    def test
+00004770: 5f76 6965 775f 6e65 7773 6c65 7474 6572  _view_newsletter
+00004780: 5f6e 6f74 5f70 7562 6c69 6328 7365 6c66  _not_public(self
+00004790: 293a 0a0a 2020 2020 2020 2020 6e65 7773  ):..        news
+000047a0: 6c65 7474 6572 203d 206d 6f6d 6d79 2e6d  letter = mommy.m
+000047b0: 616b 6528 0a20 2020 2020 2020 2020 2020  ake(.           
+000047c0: 204e 6577 736c 6574 7465 722c 0a20 2020   Newsletter,.   
+000047d0: 2020 2020 2020 2020 2063 6f6e 7465 6e74           content
+000047e0: 3d22 6120 6c69 7474 6c65 2069 6e74 726f  ="a little intro
+000047f0: 2066 6f72 2074 6869 7320 6e65 7773 6c65   for this newsle
+00004800: 7474 6572 222c 0a20 2020 2020 2020 2020  tter",.         
+00004810: 2020 2074 656d 706c 6174 653d 2274 6573     template="tes
+00004820: 742f 6e65 7773 6c65 7474 6572 5f62 6c75  t/newsletter_blu
+00004830: 652e 6874 6d6c 222c 0a20 2020 2020 2020  e.html",.       
+00004840: 2029 0a20 2020 2020 2020 2075 726c 203d   ).        url =
+00004850: 2072 6576 6572 7365 2827 636f 6f70 5f63   reverse('coop_c
+00004860: 6d73 5f76 6965 775f 6e65 7773 6c65 7474  ms_view_newslett
+00004870: 6572 272c 2061 7267 733d 5b6e 6577 736c  er', args=[newsl
+00004880: 6574 7465 722e 6964 5d29 0a20 2020 2020  etter.id]).     
+00004890: 2020 2072 6573 706f 6e73 6520 3d20 7365     response = se
+000048a0: 6c66 2e63 6c69 656e 742e 6765 7428 7572  lf.client.get(ur
+000048b0: 6c29 0a20 2020 2020 2020 2073 656c 662e  l).        self.
+000048c0: 6173 7365 7274 4e6f 7441 6c6c 6f77 6564  assertNotAllowed
+000048d0: 2872 6573 706f 6e73 6529 0a20 2020 2020  (response).     
+000048e0: 2020 200a 2020 2020 6465 6620 7465 7374     .    def test
+000048f0: 5f65 6469 745f 6e65 7773 6c65 7474 6572  _edit_newsletter
+00004900: 5f69 735f 7075 626c 6963 2873 656c 6629  _is_public(self)
+00004910: 3a0a 2020 2020 2020 2020 6e65 7773 6c65  :.        newsle
+00004920: 7474 6572 203d 206d 6f6d 6d79 2e6d 616b  tter = mommy.mak
+00004930: 6528 0a20 2020 2020 2020 2020 2020 204e  e(.            N
+00004940: 6577 736c 6574 7465 722c 0a20 2020 2020  ewsletter,.     
+00004950: 2020 2020 2020 2063 6f6e 7465 6e74 3d22         content="
+00004960: 6120 6c69 7474 6c65 2069 6e74 726f 2066  a little intro f
+00004970: 6f72 2074 6869 7320 6e65 7773 6c65 7474  or this newslett
+00004980: 6572 222c 0a20 2020 2020 2020 2020 2020  er",.           
+00004990: 2074 656d 706c 6174 653d 2274 6573 742f   template="test/
+000049a0: 6e65 7773 6c65 7474 6572 5f62 6c75 652e  newsletter_blue.
+000049b0: 6874 6d6c 222c 0a20 2020 2020 2020 2020  html",.         
+000049c0: 2020 2069 735f 7075 626c 6963 3d54 7275     is_public=Tru
+000049d0: 650a 2020 2020 2020 2020 290a 0a20 2020  e.        )..   
+000049e0: 2020 2020 2073 656c 662e 5f6c 6f67 5f61       self._log_a
+000049f0: 735f 6564 6974 6f72 2829 0a20 2020 2020  s_editor().     
+00004a00: 2020 2075 726c 203d 2072 6576 6572 7365     url = reverse
+00004a10: 2827 636f 6f70 5f63 6d73 5f65 6469 745f  ('coop_cms_edit_
+00004a20: 6e65 7773 6c65 7474 6572 272c 2061 7267  newsletter', arg
+00004a30: 733d 5b6e 6577 736c 6574 7465 722e 6964  s=[newsletter.id
+00004a40: 5d29 0a20 2020 2020 2020 2072 6573 706f  ]).        respo
+00004a50: 6e73 6520 3d20 7365 6c66 2e63 6c69 656e  nse = self.clien
+00004a60: 742e 6765 7428 7572 6c29 0a20 2020 2020  t.get(url).     
+00004a70: 2020 200a 2020 2020 2020 2020 7365 6c66     .        self
+00004a80: 2e61 7373 6572 7445 7175 616c 2832 3030  .assertEqual(200
+00004a90: 2c20 7265 7370 6f6e 7365 2e73 7461 7475  , response.statu
+00004aa0: 735f 636f 6465 290a 2020 2020 2020 2020  s_code).        
+00004ab0: 0a20 2020 2020 2020 2064 6174 6120 3d20  .        data = 
+00004ac0: 7b27 636f 6e74 656e 7427 3a20 2741 2062  {'content': 'A b
+00004ad0: 6574 7465 7220 696e 7472 6f27 7d0a 2020  etter intro'}.  
+00004ae0: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+00004af0: 2073 656c 662e 636c 6965 6e74 2e70 6f73   self.client.pos
+00004b00: 7428 7572 6c2c 2064 6174 613d 6461 7461  t(url, data=data
+00004b10: 2c20 666f 6c6c 6f77 3d54 7275 6529 0a20  , follow=True). 
+00004b20: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00004b30: 7274 4571 7561 6c28 3230 302c 2072 6573  rtEqual(200, res
+00004b40: 706f 6e73 652e 7374 6174 7573 5f63 6f64  ponse.status_cod
+00004b50: 6529 0a20 2020 2020 2020 200a 2020 2020  e).        .    
+00004b60: 2020 2020 7365 6c66 2e61 7373 6572 744e      self.assertN
+00004b70: 6f74 436f 6e74 6169 6e73 2872 6573 706f  otContains(respo
+00004b80: 6e73 652c 206e 6577 736c 6574 7465 722e  nse, newsletter.
+00004b90: 636f 6e74 656e 7429 0a20 2020 2020 2020  content).       
+00004ba0: 2073 656c 662e 6173 7365 7274 436f 6e74   self.assertCont
+00004bb0: 6169 6e73 2872 6573 706f 6e73 652c 2064  ains(response, d
+00004bc0: 6174 615b 2763 6f6e 7465 6e74 275d 290a  ata['content']).
+00004bd0: 0a20 2020 2064 6566 2074 6573 745f 6564  .    def test_ed
+00004be0: 6974 5f6e 6577 736c 6574 7465 725f 6e6f  it_newsletter_no
+00004bf0: 745f 7075 626c 6963 2873 656c 6629 3a0a  t_public(self):.
+00004c00: 2020 2020 2020 2020 6e65 7773 6c65 7474          newslett
+00004c10: 6572 203d 206d 6f6d 6d79 2e6d 616b 6528  er = mommy.make(
+00004c20: 0a20 2020 2020 2020 2020 2020 204e 6577  .            New
+00004c30: 736c 6574 7465 722c 0a20 2020 2020 2020  sletter,.       
+00004c40: 2020 2020 2063 6f6e 7465 6e74 3d22 6120       content="a 
+00004c50: 6c69 7474 6c65 2069 6e74 726f 2066 6f72  little intro for
+00004c60: 2074 6869 7320 6e65 7773 6c65 7474 6572   this newsletter
+00004c70: 222c 0a20 2020 2020 2020 2020 2020 2074  ",.            t
+00004c80: 656d 706c 6174 653d 2274 6573 742f 6e65  emplate="test/ne
+00004c90: 7773 6c65 7474 6572 5f62 6c75 652e 6874  wsletter_blue.ht
+00004ca0: 6d6c 222c 0a20 2020 2020 2020 2020 2020  ml",.           
+00004cb0: 2069 735f 7075 626c 6963 3d46 616c 7365   is_public=False
+00004cc0: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+00004cd0: 2020 2020 7365 6c66 2e5f 6c6f 675f 6173      self._log_as
+00004ce0: 5f65 6469 746f 7228 290a 2020 2020 2020  _editor().      
+00004cf0: 2020 7572 6c20 3d20 7265 7665 7273 6528    url = reverse(
+00004d00: 2763 6f6f 705f 636d 735f 6564 6974 5f6e  'coop_cms_edit_n
+00004d10: 6577 736c 6574 7465 7227 2c20 6172 6773  ewsletter', args
+00004d20: 3d5b 6e65 7773 6c65 7474 6572 2e69 645d  =[newsletter.id]
+00004d30: 290a 2020 2020 2020 2020 7265 7370 6f6e  ).        respon
+00004d40: 7365 203d 2073 656c 662e 636c 6965 6e74  se = self.client
+00004d50: 2e67 6574 2875 726c 290a 0a20 2020 2020  .get(url)..     
+00004d60: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00004d70: 7561 6c28 3230 302c 2072 6573 706f 6e73  ual(200, respons
+00004d80: 652e 7374 6174 7573 5f63 6f64 6529 0a0a  e.status_code)..
+00004d90: 2020 2020 2020 2020 6461 7461 203d 207b          data = {
+00004da0: 2763 6f6e 7465 6e74 273a 2027 4120 6265  'content': 'A be
+00004db0: 7474 6572 2069 6e74 726f 277d 0a20 2020  tter intro'}.   
+00004dc0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+00004dd0: 7365 6c66 2e63 6c69 656e 742e 706f 7374  self.client.post
+00004de0: 2875 726c 2c20 6461 7461 3d64 6174 612c  (url, data=data,
+00004df0: 2066 6f6c 6c6f 773d 5472 7565 290a 2020   follow=True).  
+00004e00: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00004e10: 7445 7175 616c 2832 3030 2c20 7265 7370  tEqual(200, resp
+00004e20: 6f6e 7365 2e73 7461 7475 735f 636f 6465  onse.status_code
+00004e30: 290a 0a20 2020 2020 2020 2073 656c 662e  )..        self.
+00004e40: 6173 7365 7274 4e6f 7443 6f6e 7461 696e  assertNotContain
+00004e50: 7328 7265 7370 6f6e 7365 2c20 6e65 7773  s(response, news
+00004e60: 6c65 7474 6572 2e63 6f6e 7465 6e74 290a  letter.content).
+00004e70: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00004e80: 6572 7443 6f6e 7461 696e 7328 7265 7370  ertContains(resp
+00004e90: 6f6e 7365 2c20 6461 7461 5b27 636f 6e74  onse, data['cont
+00004ea0: 656e 7427 5d29 0a0a 2020 2020 6465 6620  ent'])..    def 
+00004eb0: 7465 7374 5f65 6469 745f 6e65 7773 6c65  test_edit_newsle
+00004ec0: 7474 6572 5f61 6e6f 6e79 6d6f 7573 2873  tter_anonymous(s
+00004ed0: 656c 6629 3a0a 2020 2020 2020 2020 6f72  elf):.        or
+00004ee0: 6967 696e 616c 5f64 6174 6120 3d20 7b0a  iginal_data = {.
+00004ef0: 2020 2020 2020 2020 2020 2020 2763 6f6e              'con
+00004f00: 7465 6e74 273a 2022 6120 6c69 7474 6c65  tent': "a little
+00004f10: 2069 6e74 726f 2066 6f72 2074 6869 7320   intro for this 
+00004f20: 6e65 7773 6c65 7474 6572 222c 0a20 2020  newsletter",.   
+00004f30: 2020 2020 2020 2020 2027 7465 6d70 6c61           'templa
+00004f40: 7465 273a 2022 7465 7374 2f6e 6577 736c  te': "test/newsl
+00004f50: 6574 7465 725f 626c 7565 2e68 746d 6c22  etter_blue.html"
+00004f60: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
+00004f70: 2020 206e 6577 736c 6574 7465 7220 3d20     newsletter = 
+00004f80: 6d6f 6d6d 792e 6d61 6b65 284e 6577 736c  mommy.make(Newsl
+00004f90: 6574 7465 722c 202a 2a6f 7269 6769 6e61  etter, **origina
+00004fa0: 6c5f 6461 7461 290a 2020 2020 2020 2020  l_data).        
+00004fb0: 0a20 2020 2020 2020 2075 726c 203d 2072  .        url = r
+00004fc0: 6576 6572 7365 2827 636f 6f70 5f63 6d73  everse('coop_cms
+00004fd0: 5f65 6469 745f 6e65 7773 6c65 7474 6572  _edit_newsletter
+00004fe0: 272c 2061 7267 733d 5b6e 6577 736c 6574  ', args=[newslet
+00004ff0: 7465 722e 6964 5d29 0a20 2020 2020 2020  ter.id]).       
+00005000: 2072 6573 706f 6e73 6520 3d20 7365 6c66   response = self
+00005010: 2e63 6c69 656e 742e 6765 7428 7572 6c29  .client.get(url)
+00005020: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00005030: 7365 7274 4e6f 7441 6c6c 6f77 6564 2872  sertNotAllowed(r
+00005040: 6573 706f 6e73 6529 0a20 2020 2020 2020  esponse).       
+00005050: 200a 2020 2020 2020 2020 7265 7370 6f6e   .        respon
+00005060: 7365 203d 2073 656c 662e 636c 6965 6e74  se = self.client
+00005070: 2e70 6f73 7428 7572 6c2c 2064 6174 613d  .post(url, data=
+00005080: 7b27 636f 6e74 656e 7427 3a20 273a 4f50  {'content': ':OP
+00005090: 277d 290a 2020 2020 2020 2020 7365 6c66  '}).        self
+000050a0: 2e61 7373 6572 744e 6f74 416c 6c6f 7765  .assertNotAllowe
+000050b0: 6428 7265 7370 6f6e 7365 290a 2020 2020  d(response).    
+000050c0: 2020 2020 0a20 2020 2020 2020 206e 6577      .        new
+000050d0: 736c 6574 7465 7220 3d20 4e65 7773 6c65  sletter = Newsle
+000050e0: 7474 6572 2e6f 626a 6563 7473 2e67 6574  tter.objects.get
+000050f0: 2869 643d 6e65 7773 6c65 7474 6572 2e69  (id=newsletter.i
+00005100: 6429 0a20 2020 2020 2020 2073 656c 662e  d).        self.
+00005110: 6173 7365 7274 4571 7561 6c28 6e65 7773  assertEqual(news
+00005120: 6c65 7474 6572 2e63 6f6e 7465 6e74 2c20  letter.content, 
+00005130: 6f72 6967 696e 616c 5f64 6174 615b 2763  original_data['c
+00005140: 6f6e 7465 6e74 275d 290a 2020 2020 2020  ontent']).      
+00005150: 2020 0a20 2020 2064 6566 2074 6573 745f    .    def test_
+00005160: 6564 6974 5f6e 6577 736c 6574 7465 725f  edit_newsletter_
+00005170: 6e6f 5f61 7274 6963 6c65 7328 7365 6c66  no_articles(self
+00005180: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+00005190: 5f6c 6f67 5f61 735f 6564 6974 6f72 2829  _log_as_editor()
+000051a0: 0a20 2020 2020 2020 206f 7269 6769 6e61  .        origina
+000051b0: 6c5f 6461 7461 203d 207b 0a20 2020 2020  l_data = {.     
+000051c0: 2020 2020 2020 2027 636f 6e74 656e 7427         'content'
+000051d0: 3a20 2261 206c 6974 746c 6520 696e 7472  : "a little intr
+000051e0: 6f20 666f 7220 7468 6973 206e 6577 736c  o for this newsl
+000051f0: 6574 7465 7222 2c0a 2020 2020 2020 2020  etter",.        
+00005200: 2020 2020 2774 656d 706c 6174 6527 3a20      'template': 
+00005210: 2274 6573 742f 6e65 7773 6c65 7474 6572  "test/newsletter
+00005220: 5f62 6c75 652e 6874 6d6c 220a 2020 2020  _blue.html".    
+00005230: 2020 2020 7d0a 2020 2020 2020 2020 6e65      }.        ne
+00005240: 7773 6c65 7474 6572 203d 206d 6f6d 6d79  wsletter = mommy
+00005250: 2e6d 616b 6528 4e65 7773 6c65 7474 6572  .make(Newsletter
+00005260: 2c20 2a2a 6f72 6967 696e 616c 5f64 6174  , **original_dat
+00005270: 6129 0a20 2020 2020 2020 200a 2020 2020  a).        .    
+00005280: 2020 2020 7572 6c20 3d20 7265 7665 7273      url = revers
+00005290: 6528 2763 6f6f 705f 636d 735f 6564 6974  e('coop_cms_edit
+000052a0: 5f6e 6577 736c 6574 7465 7227 2c20 6172  _newsletter', ar
+000052b0: 6773 3d5b 6e65 7773 6c65 7474 6572 2e69  gs=[newsletter.i
+000052c0: 645d 290a 2020 2020 2020 2020 0a20 2020  d]).        .   
+000052d0: 2020 2020 2064 6174 6120 3d20 7b27 636f       data = {'co
+000052e0: 6e74 656e 7427 3a20 273a 4f50 277d 0a20  ntent': ':OP'}. 
+000052f0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+00005300: 3d20 7365 6c66 2e63 6c69 656e 742e 706f  = self.client.po
+00005310: 7374 2875 726c 2c20 6461 7461 3d64 6174  st(url, data=dat
+00005320: 612c 2066 6f6c 6c6f 773d 5472 7565 290a  a, follow=True).
+00005330: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00005340: 6572 7445 7175 616c 2832 3030 2c20 7265  ertEqual(200, re
+00005350: 7370 6f6e 7365 2e73 7461 7475 735f 636f  sponse.status_co
+00005360: 6465 290a 2020 2020 2020 2020 7365 6c66  de).        self
+00005370: 2e61 7373 6572 7443 6f6e 7461 696e 7328  .assertContains(
+00005380: 7265 7370 6f6e 7365 2c20 6461 7461 5b27  response, data['
+00005390: 636f 6e74 656e 7427 5d29 0a20 2020 2020  content']).     
+000053a0: 2020 200a 2020 2020 2020 2020 7265 7370     .        resp
+000053b0: 6f6e 7365 203d 2073 656c 662e 636c 6965  onse = self.clie
+000053c0: 6e74 2e67 6574 2875 726c 290a 2020 2020  nt.get(url).    
+000053d0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+000053e0: 7175 616c 2832 3030 2c20 7265 7370 6f6e  qual(200, respon
+000053f0: 7365 2e73 7461 7475 735f 636f 6465 290a  se.status_code).
+00005400: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00005410: 6572 7443 6f6e 7461 696e 7328 7265 7370  ertContains(resp
+00005420: 6f6e 7365 2c20 6461 7461 5b27 636f 6e74  onse, data['cont
+00005430: 656e 7427 5d29 0a20 2020 2020 2020 200a  ent']).        .
+00005440: 2020 2020 6465 6620 7465 7374 5f6e 6577      def test_new
+00005450: 736c 6574 7465 725f 7465 6d70 6c61 7465  sletter_template
+00005460: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
+00005470: 2022 2222 6974 2073 686f 756c 6420 7365   """it should se
+00005480: 6e64 2065 6d61 696c 2077 6974 6820 7269  nd email with ri
+00005490: 6768 7420 636f 6e74 656e 7422 2222 0a20  ght content""". 
+000054a0: 2020 2020 2020 2061 7274 6963 6c65 5f63         article_c
+000054b0: 6c61 7373 203d 2067 6574 5f61 7274 6963  lass = get_artic
+000054c0: 6c65 5f63 6c61 7373 2829 0a20 2020 2020  le_class().     
+000054d0: 2020 2063 6f6e 7465 6e74 5f74 7970 6520     content_type 
+000054e0: 3d20 436f 6e74 656e 7454 7970 652e 6f62  = ContentType.ob
+000054f0: 6a65 6374 732e 6765 745f 666f 725f 6d6f  jects.get_for_mo
+00005500: 6465 6c28 6172 7469 636c 655f 636c 6173  del(article_clas
+00005510: 7329 0a20 2020 2020 2020 200a 2020 2020  s).        .    
+00005520: 2020 2020 6172 7431 203d 206d 6f6d 6d79      art1 = mommy
+00005530: 2e6d 616b 6528 6172 7469 636c 655f 636c  .make(article_cl
+00005540: 6173 732c 2074 6974 6c65 3d22 4172 7420  ass, title="Art 
+00005550: 3122 2c20 696e 5f6e 6577 736c 6574 7465  1", in_newslette
+00005560: 723d 5472 7565 290a 2020 2020 2020 2020  r=True).        
+00005570: 706f 6820 3d20 6d6f 6d6d 792e 6d61 6b65  poh = mommy.make
+00005580: 2850 6965 6365 4f66 4874 6d6c 2c20 6469  (PieceOfHtml, di
+00005590: 765f 6964 3d22 6e65 7773 6c65 7474 6572  v_id="newsletter
+000055a0: 5f68 6561 6465 7222 2c20 636f 6e74 656e  _header", conten
+000055b0: 743d 2248 454c 4c4f 2121 2122 290a 2020  t="HELLO!!!").  
+000055c0: 2020 2020 2020 0a20 2020 2020 2020 206e        .        n
+000055d0: 6577 736c 6574 7465 7220 3d20 6d6f 6d6d  ewsletter = momm
+000055e0: 792e 6d61 6b65 280a 2020 2020 2020 2020  y.make(.        
+000055f0: 2020 2020 4e65 7773 6c65 7474 6572 2c0a      Newsletter,.
+00005600: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+00005610: 656e 743d 2261 206c 6974 746c 6520 696e  ent="a little in
+00005620: 7472 6f20 666f 7220 7468 6973 206e 6577  tro for this new
+00005630: 736c 6574 7465 7222 2c0a 2020 2020 2020  sletter",.      
+00005640: 2020 2020 2020 7465 6d70 6c61 7465 3d22        template="
+00005650: 7465 7374 2f6e 6577 736c 6574 7465 725f  test/newsletter_
+00005660: 626c 7565 2e68 746d 6c22 0a20 2020 2020  blue.html".     
+00005670: 2020 2029 0a20 2020 2020 2020 206e 6577     ).        new
+00005680: 736c 6574 7465 722e 6974 656d 732e 6164  sletter.items.ad
+00005690: 6428 4e65 7773 6c65 7474 6572 4974 656d  d(NewsletterItem
+000056a0: 2e6f 626a 6563 7473 2e67 6574 2863 6f6e  .objects.get(con
+000056b0: 7465 6e74 5f74 7970 653d 636f 6e74 656e  tent_type=conten
+000056c0: 745f 7479 7065 2c20 6f62 6a65 6374 5f69  t_type, object_i
+000056d0: 643d 6172 7431 2e69 6429 290a 2020 2020  d=art1.id)).    
+000056e0: 2020 2020 6e65 7773 6c65 7474 6572 2e73      newsletter.s
+000056f0: 6176 6528 290a 2020 2020 2020 2020 0a20  ave().        . 
+00005700: 2020 2020 2020 2073 656c 662e 5f6c 6f67         self._log
+00005710: 5f61 735f 6564 6974 6f72 2829 0a20 2020  _as_editor().   
+00005720: 2020 2020 200a 2020 2020 2020 2020 7669       .        vi
+00005730: 6577 5f6e 616d 6573 203d 205b 2763 6f6f  ew_names = ['coo
+00005740: 705f 636d 735f 7669 6577 5f6e 6577 736c  p_cms_view_newsl
+00005750: 6574 7465 7227 2c20 2763 6f6f 705f 636d  etter', 'coop_cm
+00005760: 735f 6564 6974 5f6e 6577 736c 6574 7465  s_edit_newslette
+00005770: 7227 5d0a 2020 2020 2020 2020 666f 7220  r'].        for 
+00005780: 7669 6577 5f6e 616d 6520 696e 2076 6965  view_name in vie
+00005790: 775f 6e61 6d65 733a 0a0a 2020 2020 2020  w_names:..      
+000057a0: 2020 2020 2020 7572 6c20 3d20 7265 7665        url = reve
+000057b0: 7273 6528 7669 6577 5f6e 616d 652c 2061  rse(view_name, a
+000057c0: 7267 733d 5b6e 6577 736c 6574 7465 722e  rgs=[newsletter.
+000057d0: 6964 5d29 0a20 2020 2020 2020 2020 2020  id]).           
+000057e0: 2072 6573 706f 6e73 6520 3d20 7365 6c66   response = self
+000057f0: 2e63 6c69 656e 742e 6765 7428 7572 6c29  .client.get(url)
+00005800: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00005810: 662e 6173 7365 7274 4571 7561 6c28 3230  f.assertEqual(20
+00005820: 302c 2072 6573 706f 6e73 652e 7374 6174  0, response.stat
+00005830: 7573 5f63 6f64 6529 0a0a 2020 2020 2020  us_code)..      
+00005840: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00005850: 7443 6f6e 7461 696e 7328 7265 7370 6f6e  tContains(respon
+00005860: 7365 2c20 6e65 7773 6c65 7474 6572 2e63  se, newsletter.c
+00005870: 6f6e 7465 6e74 290a 2020 2020 2020 2020  ontent).        
+00005880: 2020 2020 7365 6c66 2e61 7373 6572 7443      self.assertC
+00005890: 6f6e 7461 696e 7328 7265 7370 6f6e 7365  ontains(response
+000058a0: 2c20 6172 7431 2e74 6974 6c65 290a 2020  , art1.title).  
+000058b0: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+000058c0: 7373 6572 7443 6f6e 7461 696e 7328 7265  ssertContains(re
+000058d0: 7370 6f6e 7365 2c20 2262 6163 6b67 726f  sponse, "backgro
+000058e0: 756e 643a 2062 6c75 653b 2229 0a20 2020  und: blue;").   
+000058f0: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
+00005900: 7365 7274 4e6f 7443 6f6e 7461 696e 7328  sertNotContains(
+00005910: 7265 7370 6f6e 7365 2c20 706f 682e 636f  response, poh.co
+00005920: 6e74 656e 7429 0a20 2020 2020 2020 200a  ntent).        .
+00005930: 2020 2020 2020 2020 6e65 7773 6c65 7474          newslett
+00005940: 6572 2e74 656d 706c 6174 6520 3d20 2274  er.template = "t
+00005950: 6573 742f 6e65 7773 6c65 7474 6572 5f72  est/newsletter_r
+00005960: 6564 2e68 746d 6c22 0a20 2020 2020 2020  ed.html".       
+00005970: 206e 6577 736c 6574 7465 722e 7361 7665   newsletter.save
+00005980: 2829 0a20 2020 2020 2020 200a 2020 2020  ().        .    
+00005990: 2020 2020 666f 7220 7669 6577 5f6e 616d      for view_nam
+000059a0: 6520 696e 2076 6965 775f 6e61 6d65 733a  e in view_names:
+000059b0: 0a20 2020 2020 2020 2020 2020 2075 726c  .            url
+000059c0: 203d 2072 6576 6572 7365 2876 6965 775f   = reverse(view_
+000059d0: 6e61 6d65 2c20 6172 6773 3d5b 6e65 7773  name, args=[news
+000059e0: 6c65 7474 6572 2e69 645d 290a 2020 2020  letter.id]).    
+000059f0: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
+00005a00: 203d 2073 656c 662e 636c 6965 6e74 2e67   = self.client.g
+00005a10: 6574 2875 726c 290a 2020 2020 2020 2020  et(url).        
+00005a20: 2020 2020 0a20 2020 2020 2020 2020 2020      .           
+00005a30: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00005a40: 6c28 3230 302c 2072 6573 706f 6e73 652e  l(200, response.
+00005a50: 7374 6174 7573 5f63 6f64 6529 0a20 2020  status_code).   
+00005a60: 2020 2020 2020 2020 200a 2020 2020 2020           .      
+00005a70: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00005a80: 7443 6f6e 7461 696e 7328 7265 7370 6f6e  tContains(respon
+00005a90: 7365 2c20 6e65 7773 6c65 7474 6572 2e63  se, newsletter.c
+00005aa0: 6f6e 7465 6e74 290a 2020 2020 2020 2020  ontent).        
+00005ab0: 2020 2020 7365 6c66 2e61 7373 6572 7443      self.assertC
+00005ac0: 6f6e 7461 696e 7328 7265 7370 6f6e 7365  ontains(response
+00005ad0: 2c20 6172 7431 2e74 6974 6c65 290a 2020  , art1.title).  
+00005ae0: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+00005af0: 7373 6572 7443 6f6e 7461 696e 7328 7265  ssertContains(re
+00005b00: 7370 6f6e 7365 2c20 2262 6163 6b67 726f  sponse, "backgro
+00005b10: 756e 643a 2072 6564 3b22 290a 2020 2020  und: red;").    
+00005b20: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00005b30: 6572 7443 6f6e 7461 696e 7328 7265 7370  ertContains(resp
+00005b40: 6f6e 7365 2c20 706f 682e 636f 6e74 656e  onse, poh.conten
+00005b50: 7429 0a20 2020 2020 2020 2020 2020 200a  t).            .
+00005b60: 2020 2020 6465 6620 7465 7374 5f63 6861      def test_cha
+00005b70: 6e67 655f 6e65 7773 6c65 7474 6572 5f74  nge_newsletter_t
+00005b80: 656d 706c 6174 6573 2873 656c 6629 3a0a  emplates(self):.
+00005b90: 2020 2020 2020 2020 7365 7474 696e 6773          settings
+00005ba0: 2e43 4f4f 505f 434d 535f 4e45 5753 4c45  .COOP_CMS_NEWSLE
+00005bb0: 5454 4552 5f54 454d 504c 4154 4553 203d  TTER_TEMPLATES =
+00005bc0: 2028 0a20 2020 2020 2020 2020 2020 2028   (.            (
+00005bd0: 2774 6573 742f 6e65 7773 6c65 7474 6572  'test/newsletter
+00005be0: 5f72 6564 2e68 746d 6c27 2c20 2752 6564  _red.html', 'Red
+00005bf0: 2729 2c0a 2020 2020 2020 2020 2020 2020  '),.            
+00005c00: 2827 7465 7374 2f6e 6577 736c 6574 7465  ('test/newslette
+00005c10: 725f 626c 7565 2e68 746d 6c27 2c20 2742  r_blue.html', 'B
+00005c20: 6c75 6527 292c 0a20 2020 2020 2020 2029  lue'),.        )
+00005c30: 0a20 2020 2020 2020 2073 656c 662e 5f6c  .        self._l
+00005c40: 6f67 5f61 735f 6564 6974 6f72 2829 0a20  og_as_editor(). 
+00005c50: 2020 2020 2020 200a 2020 2020 2020 2020         .        
+00005c60: 6e65 7773 6c65 7474 6572 203d 206d 6f6d  newsletter = mom
+00005c70: 6d79 2e6d 616b 6528 4e65 7773 6c65 7474  my.make(Newslett
+00005c80: 6572 2c20 7465 6d70 6c61 7465 3d27 7465  er, template='te
+00005c90: 7374 2f6e 6577 736c 6574 7465 725f 626c  st/newsletter_bl
+00005ca0: 7565 2e68 746d 6c27 290a 2020 2020 2020  ue.html').      
+00005cb0: 2020 0a20 2020 2020 2020 2075 726c 203d    .        url =
+00005cc0: 2072 6576 6572 7365 2827 636f 6f70 5f63   reverse('coop_c
+00005cd0: 6d73 5f63 6861 6e67 655f 6e65 7773 6c65  ms_change_newsle
+00005ce0: 7474 6572 5f74 656d 706c 6174 6527 2c20  tter_template', 
+00005cf0: 6172 6773 3d5b 6e65 7773 6c65 7474 6572  args=[newsletter
+00005d00: 2e69 645d 290a 2020 2020 2020 2020 7265  .id]).        re
+00005d10: 7370 6f6e 7365 203d 2073 656c 662e 636c  sponse = self.cl
+00005d20: 6965 6e74 2e67 6574 2875 726c 290a 2020  ient.get(url).  
+00005d30: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00005d40: 7445 7175 616c 2832 3030 2c20 7265 7370  tEqual(200, resp
+00005d50: 6f6e 7365 2e73 7461 7475 735f 636f 6465  onse.status_code
+00005d60: 290a 2020 2020 2020 2020 0a20 2020 2020  ).        .     
+00005d70: 2020 2066 6f72 2074 706c 2c20 6e61 6d65     for tpl, name
+00005d80: 2069 6e20 7365 7474 696e 6773 2e43 4f4f   in settings.COO
+00005d90: 505f 434d 535f 4e45 5753 4c45 5454 4552  P_CMS_NEWSLETTER
+00005da0: 5f54 454d 504c 4154 4553 3a0a 2020 2020  _TEMPLATES:.    
+00005db0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00005dc0: 6572 7443 6f6e 7461 696e 7328 7265 7370  ertContains(resp
+00005dd0: 6f6e 7365 2c20 7470 6c29 0a20 2020 2020  onse, tpl).     
+00005de0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00005df0: 7274 436f 6e74 6169 6e73 2872 6573 706f  rtContains(respo
+00005e00: 6e73 652c 206e 616d 6529 0a20 2020 2020  nse, name).     
+00005e10: 2020 2020 2020 200a 2020 2020 2020 2020         .        
+00005e20: 6461 7461 3d7b 2774 656d 706c 6174 6527  data={'template'
+00005e30: 3a20 2774 6573 742f 6e65 7773 6c65 7474  : 'test/newslett
+00005e40: 6572 5f72 6564 2e68 746d 6c27 7d0a 2020  er_red.html'}.  
+00005e50: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+00005e60: 2073 656c 662e 636c 6965 6e74 2e70 6f73   self.client.pos
+00005e70: 7428 7572 6c2c 2064 6174 613d 6461 7461  t(url, data=data
+00005e80: 2c20 666f 6c6c 6f77 3d54 7275 6529 0a20  , follow=True). 
+00005e90: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00005ea0: 7274 4571 7561 6c28 3230 302c 2072 6573  rtEqual(200, res
+00005eb0: 706f 6e73 652e 7374 6174 7573 5f63 6f64  ponse.status_cod
+00005ec0: 6529 0a20 2020 2020 2020 2073 656c 662e  e).        self.
+00005ed0: 6173 7365 7274 436f 6e74 6169 6e73 2872  assertContains(r
+00005ee0: 6573 706f 6e73 652c 2072 6576 6572 7365  esponse, reverse
+00005ef0: 2827 636f 6f70 5f63 6d73 5f65 6469 745f  ('coop_cms_edit_
+00005f00: 6e65 7773 6c65 7474 6572 272c 2061 7267  newsletter', arg
+00005f10: 733d 5b6e 6577 736c 6574 7465 722e 6964  s=[newsletter.id
+00005f20: 5d29 290a 2020 2020 2020 2020 0a20 2020  ])).        .   
+00005f30: 2020 2020 206e 6577 736c 6574 7465 7220       newsletter 
+00005f40: 3d20 4e65 7773 6c65 7474 6572 2e6f 626a  = Newsletter.obj
+00005f50: 6563 7473 2e67 6574 2869 643d 6e65 7773  ects.get(id=news
+00005f60: 6c65 7474 6572 2e69 6429 0a20 2020 2020  letter.id).     
+00005f70: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00005f80: 7561 6c28 6e65 7773 6c65 7474 6572 2e74  ual(newsletter.t
+00005f90: 656d 706c 6174 652c 2064 6174 615b 2774  emplate, data['t
+00005fa0: 656d 706c 6174 6527 5d29 0a20 2020 2020  emplate']).     
+00005fb0: 2020 200a 2020 2020 6465 6620 7465 7374     .    def test
+00005fc0: 5f63 6861 6e67 655f 6e65 7773 6c65 7474  _change_newslett
+00005fd0: 6572 5f74 656d 706c 6174 6573 5f61 6e6f  er_templates_ano
+00005fe0: 6e79 6d6f 7573 2873 656c 6629 3a0a 2020  nymous(self):.  
+00005ff0: 2020 2020 2020 7365 7474 696e 6773 2e43        settings.C
+00006000: 4f4f 505f 434d 535f 4e45 5753 4c45 5454  OOP_CMS_NEWSLETT
+00006010: 4552 5f54 454d 504c 4154 4553 203d 2028  ER_TEMPLATES = (
+00006020: 0a20 2020 2020 2020 2020 2020 2028 2774  .            ('t
+00006030: 6573 742f 6e65 7773 6c65 7474 6572 5f72  est/newsletter_r
+00006040: 6564 2e68 746d 6c27 2c20 2752 6564 2729  ed.html', 'Red')
+00006050: 2c0a 2020 2020 2020 2020 2020 2020 2827  ,.            ('
+00006060: 7465 7374 2f6e 6577 736c 6574 7465 725f  test/newsletter_
+00006070: 626c 7565 2e68 746d 6c27 2c20 2742 6c75  blue.html', 'Blu
+00006080: 6527 292c 0a20 2020 2020 2020 2029 0a20  e'),.        ). 
+00006090: 2020 2020 2020 206f 7269 6769 6e61 6c5f         original_
+000060a0: 6461 7461 3d7b 2774 656d 706c 6174 6527  data={'template'
+000060b0: 3a20 2774 6573 742f 6e65 7773 6c65 7474  : 'test/newslett
+000060c0: 6572 5f62 6c75 652e 6874 6d6c 277d 0a20  er_blue.html'}. 
+000060d0: 2020 2020 2020 206e 6577 736c 6574 7465         newslette
+000060e0: 7220 3d20 6d6f 6d6d 792e 6d61 6b65 284e  r = mommy.make(N
+000060f0: 6577 736c 6574 7465 722c 202a 2a6f 7269  ewsletter, **ori
+00006100: 6769 6e61 6c5f 6461 7461 290a 2020 2020  ginal_data).    
+00006110: 2020 2020 0a20 2020 2020 2020 2075 726c      .        url
+00006120: 203d 2072 6576 6572 7365 2827 636f 6f70   = reverse('coop
+00006130: 5f63 6d73 5f63 6861 6e67 655f 6e65 7773  _cms_change_news
+00006140: 6c65 7474 6572 5f74 656d 706c 6174 6527  letter_template'
+00006150: 2c20 6172 6773 3d5b 6e65 7773 6c65 7474  , args=[newslett
+00006160: 6572 2e69 645d 290a 2020 2020 2020 2020  er.id]).        
+00006170: 7265 7370 6f6e 7365 203d 2073 656c 662e  response = self.
+00006180: 636c 6965 6e74 2e67 6574 2875 726c 290a  client.get(url).
+00006190: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+000061a0: 6572 7445 7175 616c 2833 3032 2c20 7265  ertEqual(302, re
+000061b0: 7370 6f6e 7365 2e73 7461 7475 735f 636f  sponse.status_co
+000061c0: 6465 290a 2020 2020 2020 2020 0a20 2020  de).        .   
+000061d0: 2020 2020 2064 6174 613d 7b27 7465 6d70       data={'temp
+000061e0: 6c61 7465 273a 2027 7465 7374 2f6e 6577  late': 'test/new
+000061f0: 736c 6574 7465 725f 7265 642e 6874 6d6c  sletter_red.html
+00006200: 277d 0a20 2020 2020 2020 2072 6573 706f  '}.        respo
+00006210: 6e73 6520 3d20 7365 6c66 2e63 6c69 656e  nse = self.clien
+00006220: 742e 706f 7374 2875 726c 2c20 6461 7461  t.post(url, data
+00006230: 3d64 6174 6129 0a20 2020 2020 2020 2073  =data).        s
+00006240: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00006250: 3330 322c 2072 6573 706f 6e73 652e 7374  302, response.st
+00006260: 6174 7573 5f63 6f64 6529 0a20 2020 2020  atus_code).     
+00006270: 2020 200a 2020 2020 2020 2020 6e65 7773     .        news
+00006280: 6c65 7474 6572 203d 204e 6577 736c 6574  letter = Newslet
+00006290: 7465 722e 6f62 6a65 6374 732e 6765 7428  ter.objects.get(
+000062a0: 6964 3d6e 6577 736c 6574 7465 722e 6964  id=newsletter.id
+000062b0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+000062c0: 7373 6572 7445 7175 616c 286e 6577 736c  ssertEqual(newsl
+000062d0: 6574 7465 722e 7465 6d70 6c61 7465 2c20  etter.template, 
+000062e0: 6f72 6967 696e 616c 5f64 6174 615b 2774  original_data['t
+000062f0: 656d 706c 6174 6527 5d29 0a20 2020 2020  emplate']).     
+00006300: 2020 200a 2020 2020 6465 6620 7465 7374     .    def test
+00006310: 5f63 6861 6e67 655f 6e65 7773 6c65 7474  _change_newslett
+00006320: 6572 5f75 6e6b 6e6f 775f 7465 6d70 6c61  er_unknow_templa
+00006330: 7465 2873 656c 6629 3a0a 2020 2020 2020  te(self):.      
+00006340: 2020 7365 7474 696e 6773 2e43 4f4f 505f    settings.COOP_
+00006350: 434d 535f 4e45 5753 4c45 5454 4552 5f54  CMS_NEWSLETTER_T
+00006360: 454d 504c 4154 4553 203d 2028 0a20 2020  EMPLATES = (.   
+00006370: 2020 2020 2020 2020 2028 2774 6573 742f           ('test/
+00006380: 6e65 7773 6c65 7474 6572 5f72 6564 2e68  newsletter_red.h
+00006390: 746d 6c27 2c20 2752 6564 2729 2c0a 2020  tml', 'Red'),.  
+000063a0: 2020 2020 2020 2020 2020 2827 7465 7374            ('test
+000063b0: 2f6e 6577 736c 6574 7465 725f 626c 7565  /newsletter_blue
+000063c0: 2e68 746d 6c27 2c20 2742 6c75 6527 292c  .html', 'Blue'),
+000063d0: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+000063e0: 2020 206f 7269 6769 6e61 6c5f 6461 7461     original_data
+000063f0: 3d7b 2774 656d 706c 6174 6527 3a20 2774  ={'template': 't
+00006400: 6573 742f 6e65 7773 6c65 7474 6572 5f62  est/newsletter_b
+00006410: 6c75 652e 6874 6d6c 277d 0a20 2020 2020  lue.html'}.     
+00006420: 2020 206e 6577 736c 6574 7465 7220 3d20     newsletter = 
+00006430: 6d6f 6d6d 792e 6d61 6b65 284e 6577 736c  mommy.make(Newsl
+00006440: 6574 7465 722c 202a 2a6f 7269 6769 6e61  etter, **origina
+00006450: 6c5f 6461 7461 290a 2020 2020 2020 2020  l_data).        
+00006460: 0a20 2020 2020 2020 2073 656c 662e 5f6c  .        self._l
+00006470: 6f67 5f61 735f 6564 6974 6f72 2829 0a20  og_as_editor(). 
+00006480: 2020 2020 2020 2075 726c 203d 2072 6576         url = rev
+00006490: 6572 7365 2827 636f 6f70 5f63 6d73 5f63  erse('coop_cms_c
+000064a0: 6861 6e67 655f 6e65 7773 6c65 7474 6572  hange_newsletter
+000064b0: 5f74 656d 706c 6174 6527 2c20 6172 6773  _template', args
+000064c0: 3d5b 6e65 7773 6c65 7474 6572 2e69 645d  =[newsletter.id]
+000064d0: 290a 2020 2020 2020 2020 6461 7461 3d7b  ).        data={
+000064e0: 2774 656d 706c 6174 6527 3a20 2774 6573  'template': 'tes
+000064f0: 742f 6e65 7773 6c65 7474 6572 5f79 656c  t/newsletter_yel
+00006500: 6c6f 772e 6874 6d6c 277d 0a20 2020 2020  low.html'}.     
+00006510: 2020 2072 6573 706f 6e73 6520 3d20 7365     response = se
+00006520: 6c66 2e63 6c69 656e 742e 706f 7374 2875  lf.client.post(u
+00006530: 726c 2c20 6461 7461 3d64 6174 6129 0a20  rl, data=data). 
+00006540: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00006550: 7274 4571 7561 6c28 3230 302c 2072 6573  rtEqual(200, res
+00006560: 706f 6e73 652e 7374 6174 7573 5f63 6f64  ponse.status_cod
+00006570: 6529 0a20 2020 2020 2020 200a 2020 2020  e).        .    
+00006580: 2020 2020 6e65 7773 6c65 7474 6572 203d      newsletter =
+00006590: 204e 6577 736c 6574 7465 722e 6f62 6a65   Newsletter.obje
+000065a0: 6374 732e 6765 7428 6964 3d6e 6577 736c  cts.get(id=newsl
+000065b0: 6574 7465 722e 6964 290a 2020 2020 2020  etter.id).      
+000065c0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+000065d0: 616c 286e 6577 736c 6574 7465 722e 7465  al(newsletter.te
+000065e0: 6d70 6c61 7465 2c20 6f72 6967 696e 616c  mplate, original
+000065f0: 5f64 6174 615b 2774 656d 706c 6174 6527  _data['template'
+00006600: 5d29 0a0a 2020 2020 406f 7665 7272 6964  ])..    @overrid
+00006610: 655f 7365 7474 696e 6773 280a 2020 2020  e_settings(.    
+00006620: 2020 2020 434f 4f50 5f43 4d53 5f54 4553      COOP_CMS_TES
+00006630: 545f 454d 4149 4c53 3d5b 0a20 2020 2020  T_EMAILS=[.     
+00006640: 2020 2020 2020 2028 2759 6f75 7220 6e61         ('Your na
+00006650: 6d65 203c 636f 6f70 5f63 6d73 406d 6169  me <coop_cms@mai
+00006660: 6c69 6e61 746f 722e 636f 6d3e 272c 2027  linator.com>', '
+00006670: 596f 7572 206e 616d 6520 3c63 6f6f 705f  Your name <coop_
+00006680: 636d 7340 6d61 696c 696e 6174 6f72 2e63  cms@mailinator.c
+00006690: 6f6d 3e27 292c 0a20 2020 2020 2020 2020  om>'),.         
+000066a0: 2020 2028 2754 6573 7420 5477 6f20 3c74     ('Test Two <t
+000066b0: 6573 7432 4074 6573 7432 2e66 723e 272c  est2@test2.fr>',
+000066c0: 2027 5465 7374 2054 776f 203c 7465 7374   'Test Two <test
+000066d0: 3240 7465 7374 323e 2729 2c0a 2020 2020  2@test2>'),.    
+000066e0: 2020 2020 5d2c 0a20 2020 2020 2020 2043      ],.        C
+000066f0: 4f4f 505f 434d 535f 4652 4f4d 5f45 4d41  OOP_CMS_FROM_EMA
+00006700: 494c 3d27 636f 6e74 6163 7440 746f 746f  IL='contact@toto
+00006710: 2e66 7227 0a20 2020 2029 0a20 2020 2064  .fr'.    ).    d
+00006720: 6566 2074 6573 745f 7365 6e64 5f74 6573  ef test_send_tes
+00006730: 745f 6e65 7773 6c65 7474 6572 5f6e 6f5f  t_newsletter_no_
+00006740: 7465 7874 2873 656c 662c 2074 656d 706c  text(self, templ
+00006750: 6174 653d 2774 6573 742f 6e65 7773 6c65  ate='test/newsle
+00006760: 7474 6572 5f62 6c75 652e 6874 6d6c 2729  tter_blue.html')
+00006770: 3a0a 2020 2020 2020 2020 7365 7474 696e  :.        settin
+00006780: 6773 2e53 4954 455f 4944 203d 2031 0a20  gs.SITE_ID = 1. 
+00006790: 2020 2020 2020 2073 6974 6520 3d20 5369         site = Si
+000067a0: 7465 2e6f 626a 6563 7473 2e67 6574 2869  te.objects.get(i
+000067b0: 643d 7365 7474 696e 6773 2e53 4954 455f  d=settings.SITE_
+000067c0: 4944 290a 2020 2020 2020 2020 7369 7465  ID).        site
+000067d0: 2e64 6f6d 6169 6e20 3d20 2774 6f74 6f2e  .domain = 'toto.
+000067e0: 6672 270a 2020 2020 2020 2020 7369 7465  fr'.        site
+000067f0: 2e73 6176 6528 290a 0a20 2020 2020 2020  .save()..       
+00006800: 2072 656c 5f63 6f6e 7465 6e74 203d 2027   rel_content = '
+00006810: 2727 0a20 2020 2020 2020 2020 2020 2020  ''.             
+00006820: 2020 203c 6831 3e54 6974 6c65 3c2f 6831     <h1>Title</h1
+00006830: 3e3c 6120 6872 6566 3d22 7b30 7d2f 746f  ><a href="{0}/to
+00006840: 746f 2f22 3e3c 696d 6720 7372 633d 227b  to/"><img src="{
+00006850: 307d 2f74 6f74 6f2e 6a70 6722 3e3c 2f61  0}/toto.jpg"></a
+00006860: 3e3c 6272 202f 3e3c 696d 6720 7372 633d  ><br /><img src=
+00006870: 227b 307d 2f74 6f74 6f2e 6a70 6722 3e0a  "{0}/toto.jpg">.
+00006880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006890: 3c64 6976 3e3c 6120 6872 6566 3d22 6874  <div><a href="ht
+000068a0: 7470 3a2f 2f77 7777 2e67 6f6f 676c 652e  tp://www.google.
+000068b0: 6672 223e 476f 6f67 6c65 3c2f 613e 3c2f  fr">Google</a></
+000068c0: 6469 763e 0a20 2020 2020 2020 2020 2020  div>.           
+000068d0: 2027 2727 0a20 2020 2020 2020 206f 7269   '''.        ori
+000068e0: 6769 6e61 6c5f 6461 7461 203d 207b 0a20  ginal_data = {. 
+000068f0: 2020 2020 2020 2020 2020 2027 7465 6d70             'temp
+00006900: 6c61 7465 273a 2074 656d 706c 6174 652c  late': template,
+00006910: 0a20 2020 2020 2020 2020 2020 2027 7375  .            'su
+00006920: 626a 6563 7427 3a20 2774 6573 7420 656d  bject': 'test em
+00006930: 6169 6c27 2c0a 2020 2020 2020 2020 2020  ail',.          
+00006940: 2020 2763 6f6e 7465 6e74 273a 2072 656c    'content': rel
+00006950: 5f63 6f6e 7465 6e74 2e66 6f72 6d61 7428  _content.format(
+00006960: 2222 290a 2020 2020 2020 2020 7d0a 2020  "").        }.  
+00006970: 2020 2020 2020 6e65 7773 6c65 7474 6572        newsletter
+00006980: 203d 206d 6f6d 6d79 2e6d 616b 6528 4e65   = mommy.make(Ne
+00006990: 7773 6c65 7474 6572 2c20 7369 7465 3d73  wsletter, site=s
+000069a0: 6974 652c 202a 2a6f 7269 6769 6e61 6c5f  ite, **original_
+000069b0: 6461 7461 290a 0a20 2020 2020 2020 2073  data)..        s
+000069c0: 656c 662e 5f6c 6f67 5f61 735f 6564 6974  elf._log_as_edit
+000069d0: 6f72 2829 0a20 2020 2020 2020 2064 6174  or().        dat
+000069e0: 6120 3d20 7b0a 2020 2020 2020 2020 2020  a = {.          
+000069f0: 2020 2265 6d61 696c 7322 3a20 5b5d 2c0a    "emails": [],.
+00006a00: 2020 2020 2020 2020 2020 2020 2265 6d61              "ema
+00006a10: 696c 223a 2022 222c 0a20 2020 2020 2020  il": "",.       
+00006a20: 2020 2020 2022 656d 6169 6c32 223a 2022       "email2": "
+00006a30: 220a 2020 2020 2020 2020 7d0a 0a20 2020  ".        }..   
+00006a40: 2020 2020 2075 726c 203d 2072 6576 6572       url = rever
+00006a50: 7365 2827 636f 6f70 5f63 6d73 5f74 6573  se('coop_cms_tes
+00006a60: 745f 6e65 7773 6c65 7474 6572 272c 2061  t_newsletter', a
+00006a70: 7267 733d 5b6e 6577 736c 6574 7465 722e  rgs=[newsletter.
+00006a80: 6964 5d29 0a20 2020 2020 2020 2072 6573  id]).        res
+00006a90: 706f 6e73 6520 3d20 7365 6c66 2e63 6c69  ponse = self.cli
+00006aa0: 656e 742e 706f 7374 2875 726c 2c20 6461  ent.post(url, da
+00006ab0: 7461 290a 2020 2020 2020 2020 7365 6c66  ta).        self
+00006ac0: 2e61 7373 6572 7445 7175 616c 2832 3030  .assertEqual(200
+00006ad0: 2c20 7265 7370 6f6e 7365 2e73 7461 7475  , response.statu
+00006ae0: 735f 636f 6465 290a 2020 2020 2020 2020  s_code).        
+00006af0: 7365 6c66 2e61 7373 6572 7443 6f6e 7461  self.assertConta
+00006b00: 696e 7328 7265 7370 6f6e 7365 2c20 273c  ins(response, '<
+00006b10: 666f 726d 2729 0a20 2020 2020 2020 2073  form').        s
+00006b20: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00006b30: 6c65 6e28 6d61 696c 2e6f 7574 626f 7829  len(mail.outbox)
+00006b40: 2c20 3029 0a0a 2020 2020 406f 7665 7272  , 0)..    @overr
+00006b50: 6964 655f 7365 7474 696e 6773 280a 2020  ide_settings(.  
+00006b60: 2020 2020 2020 434f 4f50 5f43 4d53 5f54        COOP_CMS_T
+00006b70: 4553 545f 454d 4149 4c53 3d5b 0a20 2020  EST_EMAILS=[.   
+00006b80: 2020 2020 2020 2020 2028 2759 6f75 7220           ('Your 
+00006b90: 6e61 6d65 203c 636f 6f70 5f63 6d73 406d  name <coop_cms@m
+00006ba0: 6169 6c69 6e61 746f 722e 636f 6d3e 272c  ailinator.com>',
+00006bb0: 2027 596f 7572 206e 616d 6520 3c63 6f6f   'Your name <coo
+00006bc0: 705f 636d 7340 6d61 696c 696e 6174 6f72  p_cms@mailinator
+00006bd0: 2e63 6f6d 3e27 292c 0a20 2020 2020 2020  .com>'),.       
+00006be0: 2020 2020 2028 2754 6573 7420 5477 6f20       ('Test Two 
+00006bf0: 3c74 6573 7432 4074 6573 7432 2e66 723e  <test2@test2.fr>
+00006c00: 272c 2027 5465 7374 2054 776f 203c 7465  ', 'Test Two <te
+00006c10: 7374 3240 7465 7374 323e 2729 2c0a 2020  st2@test2>'),.  
+00006c20: 2020 2020 2020 5d2c 0a20 2020 2020 2020        ],.       
+00006c30: 2043 4f4f 505f 434d 535f 4652 4f4d 5f45   COOP_CMS_FROM_E
+00006c40: 4d41 494c 3d27 636f 6e74 6163 7440 746f  MAIL='contact@to
+00006c50: 746f 2e66 7227 0a20 2020 2029 0a20 2020  to.fr'.    ).   
+00006c60: 2064 6566 2074 6573 745f 7365 6e64 5f74   def test_send_t
+00006c70: 6573 745f 6e65 7773 6c65 7474 6572 2873  est_newsletter(s
+00006c80: 656c 662c 2074 656d 706c 6174 653d 2774  elf, template='t
+00006c90: 6573 742f 6e65 7773 6c65 7474 6572 5f62  est/newsletter_b
+00006ca0: 6c75 652e 6874 6d6c 272c 2065 7874 7261  lue.html', extra
+00006cb0: 5f63 6865 636b 6572 3d4e 6f6e 6529 3a0a  _checker=None):.
+00006cc0: 2020 2020 2020 2020 7365 7474 696e 6773          settings
+00006cd0: 2e53 4954 455f 4944 203d 2031 0a20 2020  .SITE_ID = 1.   
+00006ce0: 2020 2020 2073 6974 6520 3d20 5369 7465       site = Site
+00006cf0: 2e6f 626a 6563 7473 2e67 6574 2869 643d  .objects.get(id=
+00006d00: 7365 7474 696e 6773 2e53 4954 455f 4944  settings.SITE_ID
+00006d10: 290a 2020 2020 2020 2020 7369 7465 2e64  ).        site.d
+00006d20: 6f6d 6169 6e20 3d20 2774 6f74 6f2e 6672  omain = 'toto.fr
+00006d30: 270a 2020 2020 2020 2020 7369 7465 2e73  '.        site.s
+00006d40: 6176 6528 290a 2020 2020 2020 2020 0a20  ave().        . 
+00006d50: 2020 2020 2020 2072 656c 5f63 6f6e 7465         rel_conte
+00006d60: 6e74 203d 2027 2727 0a20 2020 2020 2020  nt = '''.       
+00006d70: 2020 2020 203c 6831 3e54 6974 6c65 3c2f       <h1>Title</
+00006d80: 6831 3e3c 6120 6872 6566 3d22 7b30 7d2f  h1><a href="{0}/
+00006d90: 746f 746f 2f22 3e3c 696d 6720 7372 633d  toto/"><img src=
+00006da0: 227b 307d 2f74 6f74 6f2e 6a70 6722 3e3c  "{0}/toto.jpg"><
+00006db0: 2f61 3e3c 6272 202f 3e3c 696d 6720 7372  /a><br /><img sr
+00006dc0: 633d 227b 307d 2f74 6f74 6f2e 6a70 6722  c="{0}/toto.jpg"
+00006dd0: 3e0a 2020 2020 2020 2020 2020 2020 3c64  >.            <d
+00006de0: 6976 3e3c 6120 6872 6566 3d22 6874 7470  iv><a href="http
+00006df0: 3a2f 2f77 7777 2e67 6f6f 676c 652e 6672  ://www.google.fr
+00006e00: 223e 476f 6f67 6c65 3c2f 613e 3c2f 6469  ">Google</a></di
+00006e10: 763e 0a20 2020 2020 2020 2027 2727 0a20  v>.        '''. 
+00006e20: 2020 2020 2020 206f 7269 6769 6e61 6c5f         original_
+00006e30: 6461 7461 203d 207b 0a20 2020 2020 2020  data = {.       
+00006e40: 2020 2020 2027 7465 6d70 6c61 7465 273a       'template':
+00006e50: 2074 656d 706c 6174 652c 0a20 2020 2020   template,.     
+00006e60: 2020 2020 2020 2027 7375 626a 6563 7427         'subject'
+00006e70: 3a20 2774 6573 7420 656d 6169 6c27 2c0a  : 'test email',.
+00006e80: 2020 2020 2020 2020 2020 2020 2763 6f6e              'con
+00006e90: 7465 6e74 273a 2072 656c 5f63 6f6e 7465  tent': rel_conte
+00006ea0: 6e74 2e66 6f72 6d61 7428 2222 290a 2020  nt.format("").  
+00006eb0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00006ec0: 6e65 7773 6c65 7474 6572 203d 206d 6f6d  newsletter = mom
+00006ed0: 6d79 2e6d 616b 6528 4e65 7773 6c65 7474  my.make(Newslett
+00006ee0: 6572 2c20 7369 7465 3d73 6974 652c 202a  er, site=site, *
+00006ef0: 2a6f 7269 6769 6e61 6c5f 6461 7461 290a  *original_data).
+00006f00: 0a20 2020 2020 2020 2073 656c 662e 5f6c  .        self._l
+00006f10: 6f67 5f61 735f 6564 6974 6f72 2829 0a20  og_as_editor(). 
+00006f20: 2020 2020 2020 2064 6174 6120 3d20 7b0a         data = {.
+00006f30: 2020 2020 2020 2020 2020 2020 2265 6d61              "ema
+00006f40: 696c 7322 3a20 5b65 6d61 696c 5b30 5d20  ils": [email[0] 
+00006f50: 666f 7220 656d 6169 6c20 696e 2073 6574  for email in set
+00006f60: 7469 6e67 732e 434f 4f50 5f43 4d53 5f54  tings.COOP_CMS_T
+00006f70: 4553 545f 454d 4149 4c53 5d2c 0a20 2020  EST_EMAILS],.   
+00006f80: 2020 2020 2020 2020 2022 656d 6169 6c22           "email"
+00006f90: 3a20 2222 2c0a 2020 2020 2020 2020 2020  : "",.          
+00006fa0: 2020 2265 6d61 696c 3222 3a20 2222 0a20    "email2": "". 
+00006fb0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00006fc0: 200a 2020 2020 2020 2020 7572 6c20 3d20   .        url = 
+00006fd0: 7265 7665 7273 6528 2763 6f6f 705f 636d  reverse('coop_cm
+00006fe0: 735f 7465 7374 5f6e 6577 736c 6574 7465  s_test_newslette
+00006ff0: 7227 2c20 6172 6773 3d5b 6e65 7773 6c65  r', args=[newsle
+00007000: 7474 6572 2e69 645d 290a 2020 2020 2020  tter.id]).      
+00007010: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
+00007020: 662e 636c 6965 6e74 2e70 6f73 7428 7572  f.client.post(ur
+00007030: 6c2c 2064 6174 6129 0a20 2020 2020 2020  l, data).       
+00007040: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00007050: 6c28 3230 302c 2072 6573 706f 6e73 652e  l(200, response.
+00007060: 7374 6174 7573 5f63 6f64 6529 0a20 2020  status_code).   
+00007070: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00007080: 4571 7561 6c28 0a20 2020 2020 2020 2020  Equal(.         
+00007090: 2020 205b 7465 7374 5f61 6464 7265 7373     [test_address
+000070a0: 5b30 5d20 666f 7220 7465 7374 5f61 6464  [0] for test_add
+000070b0: 7265 7373 2069 6e20 7365 7474 696e 6773  ress in settings
+000070c0: 2e43 4f4f 505f 434d 535f 5445 5354 5f45  .COOP_CMS_TEST_E
+000070d0: 4d41 494c 535d 2c0a 2020 2020 2020 2020  MAILS],.        
+000070e0: 2020 2020 5b72 6563 6569 7665 645f 656d      [received_em
+000070f0: 6169 6c2e 746f 5b30 5d20 666f 7220 7265  ail.to[0] for re
+00007100: 6365 6976 6564 5f65 6d61 696c 2069 6e20  ceived_email in 
+00007110: 6d61 696c 2e6f 7574 626f 785d 0a20 2020  mail.outbox].   
+00007120: 2020 2020 2029 0a20 2020 2020 2020 2066       ).        f
+00007130: 6f72 2072 6563 6569 7665 645f 656d 6169  or received_emai
+00007140: 6c20 696e 206d 6169 6c2e 6f75 7462 6f78  l in mail.outbox
+00007150: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
+00007160: 6c66 2e61 7373 6572 7445 7175 616c 2872  lf.assertEqual(r
+00007170: 6563 6569 7665 645f 656d 6169 6c2e 6672  eceived_email.fr
+00007180: 6f6d 5f65 6d61 696c 2c20 7365 7474 696e  om_email, settin
+00007190: 6773 2e43 4f4f 505f 434d 535f 4652 4f4d  gs.COOP_CMS_FROM
+000071a0: 5f45 4d41 494c 290a 2020 2020 2020 2020  _EMAIL).        
+000071b0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+000071c0: 7175 616c 2872 6563 6569 7665 645f 656d  qual(received_em
+000071d0: 6169 6c2e 7375 626a 6563 742c 206e 6577  ail.subject, new
+000071e0: 736c 6574 7465 722e 7375 626a 6563 7429  sletter.subject)
+000071f0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00007200: 662e 6173 7365 7274 5472 7565 2872 6563  f.assertTrue(rec
+00007210: 6569 7665 645f 656d 6169 6c2e 626f 6479  eived_email.body
+00007220: 2e66 696e 6428 2754 6974 6c65 2729 203e  .find('Title') >
+00007230: 3d20 3029 0a20 2020 2020 2020 2020 2020  = 0).           
+00007240: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
+00007250: 2872 6563 6569 7665 645f 656d 6169 6c2e  (received_email.
+00007260: 626f 6479 2e66 696e 6428 2747 6f6f 676c  body.find('Googl
+00007270: 6527 2920 3e3d 2030 290a 2020 2020 2020  e') >= 0).      
+00007280: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00007290: 7454 7275 6528 7265 6365 6976 6564 5f65  tTrue(received_e
+000072a0: 6d61 696c 2e61 6c74 6572 6e61 7469 7665  mail.alternative
+000072b0: 735b 305d 5b31 5d2c 2022 7465 7874 2f68  s[0][1], "text/h
+000072c0: 746d 6c22 290a 2020 2020 2020 2020 2020  tml").          
+000072d0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+000072e0: 6528 7265 6365 6976 6564 5f65 6d61 696c  e(received_email
+000072f0: 2e61 6c74 6572 6e61 7469 7665 735b 305d  .alternatives[0]
+00007300: 5b30 5d2e 6669 6e64 2827 5469 746c 6527  [0].find('Title'
+00007310: 2920 3e3d 2030 290a 2020 2020 2020 2020  ) >= 0).        
+00007320: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
+00007330: 7275 6528 7265 6365 6976 6564 5f65 6d61  rue(received_ema
+00007340: 696c 2e61 6c74 6572 6e61 7469 7665 735b  il.alternatives[
+00007350: 305d 5b30 5d2e 6669 6e64 2827 476f 6f67  0][0].find('Goog
+00007360: 6c65 2729 203e 3d20 3029 0a20 2020 2020  le') >= 0).     
+00007370: 2020 2020 2020 2073 6974 655f 7072 6566         site_pref
+00007380: 6978 203d 2022 6874 7470 3a2f 2f22 202b  ix = "http://" +
+00007390: 2073 6974 652e 646f 6d61 696e 0a20 2020   site.domain.   
+000073a0: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
+000073b0: 7365 7274 5472 7565 2872 6563 6569 7665  sertTrue(receive
+000073c0: 645f 656d 6169 6c2e 616c 7465 726e 6174  d_email.alternat
+000073d0: 6976 6573 5b30 5d5b 305d 2e66 696e 6428  ives[0][0].find(
+000073e0: 7369 7465 5f70 7265 6669 7829 203e 3d20  site_prefix) >= 
+000073f0: 3029 0a20 2020 2020 2020 2020 2020 2069  0).            i
+00007400: 6620 6578 7472 615f 6368 6563 6b65 723a  f extra_checker:
+00007410: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00007420: 2065 7874 7261 5f63 6865 636b 6572 2872   extra_checker(r
+00007430: 6563 6569 7665 645f 656d 6169 6c29 0a0a  eceived_email)..
+00007440: 2020 2020 406f 7665 7272 6964 655f 7365      @override_se
+00007450: 7474 696e 6773 280a 2020 2020 2020 2020  ttings(.        
+00007460: 434f 4f50 5f43 4d53 5f54 4553 545f 454d  COOP_CMS_TEST_EM
+00007470: 4149 4c53 3d5b 0a20 2020 2020 2020 2020  AILS=[.         
+00007480: 2020 2028 2759 6f75 7220 6e61 6d65 203c     ('Your name <
+00007490: 636f 6f70 5f63 6d73 406d 6169 6c69 6e61  coop_cms@mailina
+000074a0: 746f 722e 636f 6d3e 272c 2027 596f 7572  tor.com>', 'Your
+000074b0: 206e 616d 6520 3c63 6f6f 705f 636d 7340   name <coop_cms@
+000074c0: 6d61 696c 696e 6174 6f72 2e63 6f6d 3e27  mailinator.com>'
+000074d0: 292c 0a20 2020 2020 2020 2020 2020 2028  ),.            (
+000074e0: 2754 6573 7420 5477 6f20 3c74 6573 7432  'Test Two <test2
+000074f0: 4074 6573 7432 2e66 723e 272c 2027 5465  @test2.fr>', 'Te
+00007500: 7374 2054 776f 203c 7465 7374 3240 7465  st Two <test2@te
+00007510: 7374 323e 2729 2c0a 2020 2020 2020 2020  st2>'),.        
+00007520: 5d2c 0a20 2020 2020 2020 2043 4f4f 505f  ],.        COOP_
+00007530: 434d 535f 4652 4f4d 5f45 4d41 494c 3d27  CMS_FROM_EMAIL='
+00007540: 636f 6e74 6163 7440 746f 746f 2e66 7227  contact@toto.fr'
+00007550: 0a20 2020 2029 0a20 2020 2064 6566 2074  .    ).    def t
+00007560: 6573 745f 7365 6e64 5f74 6573 745f 6e65  est_send_test_ne
+00007570: 7773 6c65 7474 6572 5f6d 756c 7469 5f6c  wsletter_multi_l
+00007580: 696e 6573 2873 656c 662c 2074 656d 706c  ines(self, templ
+00007590: 6174 653d 2774 6573 742f 6e65 7773 6c65  ate='test/newsle
+000075a0: 7474 6572 5f62 6c75 652e 6874 6d6c 272c  tter_blue.html',
+000075b0: 2065 7874 7261 5f63 6865 636b 6572 3d4e   extra_checker=N
+000075c0: 6f6e 6529 3a0a 2020 2020 2020 2020 7365  one):.        se
+000075d0: 7474 696e 6773 2e53 4954 455f 4944 203d  ttings.SITE_ID =
+000075e0: 2031 0a20 2020 2020 2020 2073 6974 6520   1.        site 
+000075f0: 3d20 5369 7465 2e6f 626a 6563 7473 2e67  = Site.objects.g
+00007600: 6574 2869 643d 7365 7474 696e 6773 2e53  et(id=settings.S
+00007610: 4954 455f 4944 290a 2020 2020 2020 2020  ITE_ID).        
+00007620: 7369 7465 2e64 6f6d 6169 6e20 3d20 2774  site.domain = 't
+00007630: 6f74 6f2e 6672 270a 2020 2020 2020 2020  oto.fr'.        
+00007640: 7369 7465 2e73 6176 6528 290a 0a20 2020  site.save()..   
+00007650: 2020 2020 2072 656c 5f63 6f6e 7465 6e74       rel_content
+00007660: 203d 2027 2727 0a20 2020 2020 2020 2020   = '''.         
+00007670: 2020 2020 2020 203c 6831 3e54 6974 6c65         <h1>Title
+00007680: 3c2f 6831 3e3c 6120 6872 6566 3d22 7b30  </h1><a href="{0
+00007690: 7d2f 746f 746f 2f22 3e3c 696d 6720 7372  }/toto/"><img sr
+000076a0: 633d 227b 307d 2f74 6f74 6f2e 6a70 6722  c="{0}/toto.jpg"
+000076b0: 3e3c 2f61 3e3c 6272 202f 3e3c 696d 6720  ></a><br /><img 
+000076c0: 7372 633d 227b 307d 2f74 6f74 6f2e 6a70  src="{0}/toto.jp
+000076d0: 6722 3e0a 2020 2020 2020 2020 2020 2020  g">.            
+000076e0: 2020 2020 3c64 6976 3e3c 6120 6872 6566      <div><a href
+000076f0: 3d22 6874 7470 3a2f 2f77 7777 2e67 6f6f  ="http://www.goo
+00007700: 676c 652e 6672 223e 476f 6f67 6c65 3c2f  gle.fr">Google</
+00007710: 613e 3c2f 6469 763e 0a20 2020 2020 2020  a></div>.       
+00007720: 2020 2020 2027 2727 0a20 2020 2020 2020       '''.       
+00007730: 206f 7269 6769 6e61 6c5f 6461 7461 203d   original_data =
+00007740: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+00007750: 7465 6d70 6c61 7465 273a 2074 656d 706c  template': templ
+00007760: 6174 652c 0a20 2020 2020 2020 2020 2020  ate,.           
+00007770: 2027 7375 626a 6563 7427 3a20 2774 6573   'subject': 'tes
+00007780: 745c 7265 6d61 696c 5c6e 6d75 6c74 692d  t\remail\nmulti-
+00007790: 6c69 6e65 7327 2c0a 2020 2020 2020 2020  lines',.        
+000077a0: 2020 2020 2763 6f6e 7465 6e74 273a 2072      'content': r
+000077b0: 656c 5f63 6f6e 7465 6e74 2e66 6f72 6d61  el_content.forma
+000077c0: 7428 2222 290a 2020 2020 2020 2020 7d0a  t("").        }.
+000077d0: 2020 2020 2020 2020 6e65 7773 6c65 7474          newslett
+000077e0: 6572 203d 206d 6f6d 6d79 2e6d 616b 6528  er = mommy.make(
+000077f0: 4e65 7773 6c65 7474 6572 2c20 7369 7465  Newsletter, site
+00007800: 3d73 6974 652c 202a 2a6f 7269 6769 6e61  =site, **origina
+00007810: 6c5f 6461 7461 290a 0a20 2020 2020 2020  l_data)..       
+00007820: 2073 656c 662e 5f6c 6f67 5f61 735f 6564   self._log_as_ed
+00007830: 6974 6f72 2829 0a20 2020 2020 2020 2064  itor().        d
+00007840: 6174 6120 3d20 7b0a 2020 2020 2020 2020  ata = {.        
+00007850: 2020 2020 2265 6d61 696c 7322 3a20 5b65      "emails": [e
+00007860: 6d61 696c 5b30 5d20 666f 7220 656d 6169  mail[0] for emai
+00007870: 6c20 696e 2073 6574 7469 6e67 732e 434f  l in settings.CO
+00007880: 4f50 5f43 4d53 5f54 4553 545f 454d 4149  OP_CMS_TEST_EMAI
+00007890: 4c53 5d2c 0a20 2020 2020 2020 2020 2020  LS],.           
+000078a0: 2022 656d 6169 6c22 3a20 2222 2c0a 2020   "email": "",.  
+000078b0: 2020 2020 2020 2020 2020 2265 6d61 696c            "email
+000078c0: 3222 3a20 2222 0a20 2020 2020 2020 207d  2": "".        }
+000078d0: 0a0a 2020 2020 2020 2020 7572 6c20 3d20  ..        url = 
+000078e0: 7265 7665 7273 6528 2763 6f6f 705f 636d  reverse('coop_cm
+000078f0: 735f 7465 7374 5f6e 6577 736c 6574 7465  s_test_newslette
+00007900: 7227 2c20 6172 6773 3d5b 6e65 7773 6c65  r', args=[newsle
+00007910: 7474 6572 2e69 645d 290a 2020 2020 2020  tter.id]).      
+00007920: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
+00007930: 662e 636c 6965 6e74 2e70 6f73 7428 7572  f.client.post(ur
+00007940: 6c2c 2064 6174 6129 0a20 2020 2020 2020  l, data).       
+00007950: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00007960: 6c28 3230 302c 2072 6573 706f 6e73 652e  l(200, response.
+00007970: 7374 6174 7573 5f63 6f64 6529 0a20 2020  status_code).   
+00007980: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00007990: 4571 7561 6c28 0a20 2020 2020 2020 2020  Equal(.         
+000079a0: 2020 205b 7465 7374 5f61 6464 7265 7373     [test_address
+000079b0: 5b30 5d20 666f 7220 7465 7374 5f61 6464  [0] for test_add
+000079c0: 7265 7373 2069 6e20 7365 7474 696e 6773  ress in settings
+000079d0: 2e43 4f4f 505f 434d 535f 5445 5354 5f45  .COOP_CMS_TEST_E
+000079e0: 4d41 494c 535d 2c0a 2020 2020 2020 2020  MAILS],.        
+000079f0: 2020 2020 5b72 6563 6569 7665 645f 656d      [received_em
+00007a00: 6169 6c2e 746f 5b30 5d20 666f 7220 7265  ail.to[0] for re
+00007a10: 6365 6976 6564 5f65 6d61 696c 2069 6e20  ceived_email in 
+00007a20: 6d61 696c 2e6f 7574 626f 785d 0a20 2020  mail.outbox].   
+00007a30: 2020 2020 2029 0a20 2020 2020 2020 2066       ).        f
+00007a40: 6f72 2072 6563 6569 7665 645f 656d 6169  or received_emai
+00007a50: 6c20 696e 206d 6169 6c2e 6f75 7462 6f78  l in mail.outbox
+00007a60: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
+00007a70: 6c66 2e61 7373 6572 7445 7175 616c 2872  lf.assertEqual(r
+00007a80: 6563 6569 7665 645f 656d 6169 6c2e 6672  eceived_email.fr
+00007a90: 6f6d 5f65 6d61 696c 2c20 7365 7474 696e  om_email, settin
+00007aa0: 6773 2e43 4f4f 505f 434d 535f 4652 4f4d  gs.COOP_CMS_FROM
+00007ab0: 5f45 4d41 494c 290a 2020 2020 2020 2020  _EMAIL).        
+00007ac0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00007ad0: 7175 616c 2872 6563 6569 7665 645f 656d  qual(received_em
+00007ae0: 6169 6c2e 7375 626a 6563 742c 2027 7465  ail.subject, 'te
+00007af0: 7374 2065 6d61 696c 206d 756c 7469 2d6c  st email multi-l
+00007b00: 696e 6573 2729 0a20 2020 2020 2020 2020  ines').         
+00007b10: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+00007b20: 7565 2872 6563 6569 7665 645f 656d 6169  ue(received_emai
+00007b30: 6c2e 626f 6479 2e66 696e 6428 2754 6974  l.body.find('Tit
+00007b40: 6c65 2729 203e 3d20 3029 0a20 2020 2020  le') >= 0).     
+00007b50: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00007b60: 7274 5472 7565 2872 6563 6569 7665 645f  rtTrue(received_
+00007b70: 656d 6169 6c2e 626f 6479 2e66 696e 6428  email.body.find(
+00007b80: 2747 6f6f 676c 6527 2920 3e3d 2030 290a  'Google') >= 0).
+00007b90: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00007ba0: 2e61 7373 6572 7454 7275 6528 7265 6365  .assertTrue(rece
+00007bb0: 6976 6564 5f65 6d61 696c 2e61 6c74 6572  ived_email.alter
+00007bc0: 6e61 7469 7665 735b 305d 5b31 5d2c 2022  natives[0][1], "
+00007bd0: 7465 7874 2f68 746d 6c22 290a 2020 2020  text/html").    
+00007be0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+00007bf0: 6572 7454 7275 6528 7265 6365 6976 6564  ertTrue(received
+00007c00: 5f65 6d61 696c 2e61 6c74 6572 6e61 7469  _email.alternati
+00007c10: 7665 735b 305d 5b30 5d2e 6669 6e64 2827  ves[0][0].find('
+00007c20: 5469 746c 6527 2920 3e3d 2030 290a 2020  Title') >= 0).  
+00007c30: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+00007c40: 7373 6572 7454 7275 6528 7265 6365 6976  ssertTrue(receiv
+00007c50: 6564 5f65 6d61 696c 2e61 6c74 6572 6e61  ed_email.alterna
+00007c60: 7469 7665 735b 305d 5b30 5d2e 6669 6e64  tives[0][0].find
+00007c70: 2827 476f 6f67 6c65 2729 203e 3d20 3029  ('Google') >= 0)
+00007c80: 0a20 2020 2020 2020 2020 2020 2073 6974  .            sit
+00007c90: 655f 7072 6566 6978 203d 2022 6874 7470  e_prefix = "http
+00007ca0: 3a2f 2f22 202b 2073 6974 652e 646f 6d61  ://" + site.doma
+00007cb0: 696e 0a20 2020 2020 2020 2020 2020 2073  in.            s
+00007cc0: 656c 662e 6173 7365 7274 5472 7565 2872  elf.assertTrue(r
+00007cd0: 6563 6569 7665 645f 656d 6169 6c2e 616c  eceived_email.al
+00007ce0: 7465 726e 6174 6976 6573 5b30 5d5b 305d  ternatives[0][0]
+00007cf0: 2e66 696e 6428 7369 7465 5f70 7265 6669  .find(site_prefi
+00007d00: 7829 203e 3d20 3029 0a20 2020 2020 2020  x) >= 0).       
+00007d10: 2020 2020 2069 6620 6578 7472 615f 6368       if extra_ch
+00007d20: 6563 6b65 723a 0a20 2020 2020 2020 2020  ecker:.         
+00007d30: 2020 2020 2020 2065 7874 7261 5f63 6865         extra_che
+00007d40: 636b 6572 2872 6563 6569 7665 645f 656d  cker(received_em
+00007d50: 6169 6c29 0a0a 2020 2020 406f 7665 7272  ail)..    @overr
+00007d60: 6964 655f 7365 7474 696e 6773 280a 2020  ide_settings(.  
+00007d70: 2020 2020 2020 434f 4f50 5f43 4d53 5f54        COOP_CMS_T
+00007d80: 4553 545f 454d 4149 4c53 3d5b 0a20 2020  EST_EMAILS=[.   
+00007d90: 2020 2020 2020 2020 2028 2759 6f75 7220           ('Your 
+00007da0: 6e61 6d65 203c 636f 6f70 5f63 6d73 406d  name <coop_cms@m
+00007db0: 6169 6c69 6e61 746f 722e 636f 6d3e 272c  ailinator.com>',
+00007dc0: 2027 596f 7572 206e 616d 6520 3c63 6f6f   'Your name <coo
+00007dd0: 705f 636d 7340 6d61 696c 696e 6174 6f72  p_cms@mailinator
+00007de0: 2e63 6f6d 3e27 292c 0a20 2020 2020 2020  .com>'),.       
+00007df0: 2020 2020 2028 2754 6573 7420 5477 6f20       ('Test Two 
+00007e00: 3c74 6573 7432 4065 7861 6d70 6c65 2e63  <test2@example.c
+00007e10: 6f6d 3e27 2c20 2754 6573 7420 5477 6f20  om>', 'Test Two 
+00007e20: 3c74 6573 7432 4065 7861 6d70 6c65 2e63  <test2@example.c
+00007e30: 6f6d 3e27 292c 0a20 2020 2020 2020 205d  om>'),.        ]
+00007e40: 2c0a 2020 2020 2020 2020 434f 4f50 5f43  ,.        COOP_C
+00007e50: 4d53 5f46 524f 4d5f 454d 4149 4c3d 2763  MS_FROM_EMAIL='c
+00007e60: 6f6e 7461 6374 4074 6f74 6f2e 6672 270a  ontact@toto.fr'.
+00007e70: 2020 2020 290a 2020 2020 6465 6620 7465      ).    def te
+00007e80: 7374 5f73 656e 645f 7465 7374 5f6e 6577  st_send_test_new
+00007e90: 736c 6574 7465 725f 6164 645f 656d 6169  sletter_add_emai
+00007ea0: 6c28 7365 6c66 2c20 7465 6d70 6c61 7465  l(self, template
+00007eb0: 3d27 7465 7374 2f6e 6577 736c 6574 7465  ='test/newslette
+00007ec0: 725f 626c 7565 2e68 746d 6c27 2c20 6578  r_blue.html', ex
+00007ed0: 7472 615f 6368 6563 6b65 723d 4e6f 6e65  tra_checker=None
+00007ee0: 293a 0a20 2020 2020 2020 2073 6574 7469  ):.        setti
+00007ef0: 6e67 732e 5349 5445 5f49 4420 3d20 310a  ngs.SITE_ID = 1.
+00007f00: 2020 2020 2020 2020 7369 7465 203d 2053          site = S
+00007f10: 6974 652e 6f62 6a65 6374 732e 6765 7428  ite.objects.get(
+00007f20: 6964 3d73 6574 7469 6e67 732e 5349 5445  id=settings.SITE
+00007f30: 5f49 4429 0a20 2020 2020 2020 2073 6974  _ID).        sit
+00007f40: 652e 646f 6d61 696e 203d 2027 746f 746f  e.domain = 'toto
+00007f50: 2e66 7227 0a20 2020 2020 2020 2073 6974  .fr'.        sit
+00007f60: 652e 7361 7665 2829 0a20 2020 200a 2020  e.save().    .  
+00007f70: 2020 2020 2020 7265 6c5f 636f 6e74 656e        rel_conten
+00007f80: 7420 3d20 2727 270a 2020 2020 2020 2020  t = '''.        
+00007f90: 2020 2020 2020 2020 3c68 313e 5469 746c          <h1>Titl
+00007fa0: 653c 2f68 313e 3c61 2068 7265 663d 227b  e</h1><a href="{
+00007fb0: 307d 2f74 6f74 6f2f 223e 3c69 6d67 2073  0}/toto/"><img s
+00007fc0: 7263 3d22 7b30 7d2f 746f 746f 2e6a 7067  rc="{0}/toto.jpg
+00007fd0: 223e 3c2f 613e 3c62 7220 2f3e 3c69 6d67  "></a><br /><img
+00007fe0: 2073 7263 3d22 7b30 7d2f 746f 746f 2e6a   src="{0}/toto.j
+00007ff0: 7067 223e 0a20 2020 2020 2020 2020 2020  pg">.           
+00008000: 2020 2020 203c 6469 763e 3c61 2068 7265       <div><a hre
+00008010: 663d 2268 7474 703a 2f2f 7777 772e 676f  f="http://www.go
+00008020: 6f67 6c65 2e66 7222 3e47 6f6f 676c 653c  ogle.fr">Google<
+00008030: 2f61 3e3c 2f64 6976 3e0a 2020 2020 2020  /a></div>.      
+00008040: 2020 2020 2020 2727 270a 2020 2020 2020        '''.      
+00008050: 2020 6f72 6967 696e 616c 5f64 6174 6120    original_data 
+00008060: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+00008070: 2774 656d 706c 6174 6527 3a20 7465 6d70  'template': temp
+00008080: 6c61 7465 2c0a 2020 2020 2020 2020 2020  late,.          
+00008090: 2020 2773 7562 6a65 6374 273a 2027 7465    'subject': 'te
+000080a0: 7374 2065 6d61 696c 272c 0a20 2020 2020  st email',.     
+000080b0: 2020 2020 2020 2027 636f 6e74 656e 7427         'content'
+000080c0: 3a20 7265 6c5f 636f 6e74 656e 742e 666f  : rel_content.fo
+000080d0: 726d 6174 2822 2229 0a20 2020 2020 2020  rmat("").       
+000080e0: 207d 0a20 2020 2020 2020 206e 6577 736c   }.        newsl
+000080f0: 6574 7465 7220 3d20 6d6f 6d6d 792e 6d61  etter = mommy.ma
+00008100: 6b65 284e 6577 736c 6574 7465 722c 2073  ke(Newsletter, s
+00008110: 6974 653d 7369 7465 2c20 2a2a 6f72 6967  ite=site, **orig
+00008120: 696e 616c 5f64 6174 6129 0a20 2020 200a  inal_data).    .
+00008130: 2020 2020 2020 2020 7365 6c66 2e5f 6c6f          self._lo
+00008140: 675f 6173 5f65 6469 746f 7228 290a 2020  g_as_editor().  
+00008150: 2020 2020 2020 6461 7461 203d 207b 0a20        data = {. 
+00008160: 2020 2020 2020 2020 2020 2022 656d 6169             "emai
+00008170: 6c73 223a 205b 656d 6169 6c5b 305d 2066  ls": [email[0] f
+00008180: 6f72 2065 6d61 696c 2069 6e20 7365 7474  or email in sett
+00008190: 696e 6773 2e43 4f4f 505f 434d 535f 5445  ings.COOP_CMS_TE
+000081a0: 5354 5f45 4d41 494c 535d 2c0a 2020 2020  ST_EMAILS],.    
+000081b0: 2020 2020 2020 2020 2261 6464 6974 696f          "additio
+000081c0: 6e61 6c5f 656d 6169 6c31 223a 2027 7465  nal_email1": 'te
+000081d0: 7374 4074 6573 742e 7465 7374 272c 0a20  st@test.test',. 
+000081e0: 2020 2020 2020 207d 0a20 2020 200a 2020         }.    .  
+000081f0: 2020 2020 2020 7572 6c20 3d20 7265 7665        url = reve
+00008200: 7273 6528 2763 6f6f 705f 636d 735f 7465  rse('coop_cms_te
+00008210: 7374 5f6e 6577 736c 6574 7465 7227 2c20  st_newsletter', 
+00008220: 6172 6773 3d5b 6e65 7773 6c65 7474 6572  args=[newsletter
+00008230: 2e69 645d 290a 2020 2020 2020 2020 7265  .id]).        re
+00008240: 7370 6f6e 7365 203d 2073 656c 662e 636c  sponse = self.cl
+00008250: 6965 6e74 2e70 6f73 7428 7572 6c2c 2064  ient.post(url, d
+00008260: 6174 6129 0a20 2020 2020 2020 2073 656c  ata).        sel
+00008270: 662e 6173 7365 7274 4571 7561 6c28 3230  f.assertEqual(20
+00008280: 302c 2072 6573 706f 6e73 652e 7374 6174  0, response.stat
+00008290: 7573 5f63 6f64 6529 0a20 2020 2020 2020  us_code).       
+000082a0: 2074 6573 745f 6164 6472 6573 7320 3d20   test_address = 
+000082b0: 5b74 6573 745f 6164 6472 6573 735b 305d  [test_address[0]
+000082c0: 2066 6f72 2074 6573 745f 6164 6472 6573   for test_addres
+000082d0: 7320 696e 2073 6574 7469 6e67 732e 434f  s in settings.CO
+000082e0: 4f50 5f43 4d53 5f54 4553 545f 454d 4149  OP_CMS_TEST_EMAI
+000082f0: 4c53 5d0a 2020 2020 2020 2020 7465 7374  LS].        test
+00008300: 5f61 6464 7265 7373 2e61 7070 656e 6428  _address.append(
+00008310: 2274 6573 7440 7465 7374 2e74 6573 7422  "test@test.test"
+00008320: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+00008330: 7373 6572 7445 7175 616c 280a 2020 2020  ssertEqual(.    
+00008340: 2020 2020 2020 2020 7465 7374 5f61 6464          test_add
+00008350: 7265 7373 2c0a 2020 2020 2020 2020 2020  ress,.          
+00008360: 2020 5b72 6563 6569 7665 645f 656d 6169    [received_emai
+00008370: 6c2e 746f 5b30 5d20 666f 7220 7265 6365  l.to[0] for rece
+00008380: 6976 6564 5f65 6d61 696c 2069 6e20 6d61  ived_email in ma
+00008390: 696c 2e6f 7574 626f 785d 0a20 2020 2020  il.outbox].     
+000083a0: 2020 2029 0a20 2020 2020 2020 2066 6f72     ).        for
+000083b0: 2072 6563 6569 7665 645f 656d 6169 6c20   received_email 
+000083c0: 696e 206d 6169 6c2e 6f75 7462 6f78 3a0a  in mail.outbox:.
+000083d0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+000083e0: 2e61 7373 6572 7445 7175 616c 2872 6563  .assertEqual(rec
+000083f0: 6569 7665 645f 656d 6169 6c2e 6672 6f6d  eived_email.from
+00008400: 5f65 6d61 696c 2c20 7365 7474 696e 6773  _email, settings
+00008410: 2e43 4f4f 505f 434d 535f 4652 4f4d 5f45  .COOP_CMS_FROM_E
+00008420: 4d41 494c 290a 2020 2020 2020 2020 2020  MAIL).          
+00008430: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+00008440: 616c 2872 6563 6569 7665 645f 656d 6169  al(received_emai
+00008450: 6c2e 7375 626a 6563 742c 206e 6577 736c  l.subject, newsl
+00008460: 6574 7465 722e 7375 626a 6563 7429 0a20  etter.subject). 
+00008470: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00008480: 6173 7365 7274 5472 7565 2872 6563 6569  assertTrue(recei
+00008490: 7665 645f 656d 6169 6c2e 626f 6479 2e66  ved_email.body.f
+000084a0: 696e 6428 2754 6974 6c65 2729 203e 3d20  ind('Title') >= 
+000084b0: 3029 0a20 2020 2020 2020 2020 2020 2073  0).            s
+000084c0: 656c 662e 6173 7365 7274 5472 7565 2872  elf.assertTrue(r
+000084d0: 6563 6569 7665 645f 656d 6169 6c2e 626f  eceived_email.bo
+000084e0: 6479 2e66 696e 6428 2747 6f6f 676c 6527  dy.find('Google'
+000084f0: 2920 3e3d 2030 290a 2020 2020 2020 2020  ) >= 0).        
+00008500: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
+00008510: 7275 6528 7265 6365 6976 6564 5f65 6d61  rue(received_ema
+00008520: 696c 2e61 6c74 6572 6e61 7469 7665 735b  il.alternatives[
+00008530: 305d 5b31 5d2c 2022 7465 7874 2f68 746d  0][1], "text/htm
+00008540: 6c22 290a 2020 2020 2020 2020 2020 2020  l").            
+00008550: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+00008560: 7265 6365 6976 6564 5f65 6d61 696c 2e61  received_email.a
+00008570: 6c74 6572 6e61 7469 7665 735b 305d 5b30  lternatives[0][0
+00008580: 5d2e 6669 6e64 2827 5469 746c 6527 2920  ].find('Title') 
+00008590: 3e3d 2030 290a 2020 2020 2020 2020 2020  >= 0).          
+000085a0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+000085b0: 6528 7265 6365 6976 6564 5f65 6d61 696c  e(received_email
+000085c0: 2e61 6c74 6572 6e61 7469 7665 735b 305d  .alternatives[0]
+000085d0: 5b30 5d2e 6669 6e64 2827 476f 6f67 6c65  [0].find('Google
+000085e0: 2729 203e 3d20 3029 0a20 2020 2020 2020  ') >= 0).       
+000085f0: 2020 2020 2073 6974 655f 7072 6566 6978       site_prefix
+00008600: 203d 2022 6874 7470 3a2f 2f22 202b 2073   = "http://" + s
+00008610: 6974 652e 646f 6d61 696e 0a20 2020 2020  ite.domain.     
+00008620: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00008630: 7274 5472 7565 2872 6563 6569 7665 645f  rtTrue(received_
+00008640: 656d 6169 6c2e 616c 7465 726e 6174 6976  email.alternativ
+00008650: 6573 5b30 5d5b 305d 2e66 696e 6428 7369  es[0][0].find(si
+00008660: 7465 5f70 7265 6669 7829 203e 3d20 3029  te_prefix) >= 0)
+00008670: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00008680: 6578 7472 615f 6368 6563 6b65 723a 0a20  extra_checker:. 
+00008690: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+000086a0: 7874 7261 5f63 6865 636b 6572 2872 6563  xtra_checker(rec
+000086b0: 6569 7665 645f 656d 6169 6c29 0a0a 2020  eived_email)..  
+000086c0: 2020 406f 7665 7272 6964 655f 7365 7474    @override_sett
+000086d0: 696e 6773 280a 2020 2020 2020 2020 434f  ings(.        CO
+000086e0: 4f50 5f43 4d53 5f54 4553 545f 454d 4149  OP_CMS_TEST_EMAI
+000086f0: 4c53 3d5b 0a20 2020 2020 2020 2020 2020  LS=[.           
+00008700: 2028 2759 6f75 7220 6e61 6d65 203c 636f   ('Your name <co
+00008710: 6f70 5f63 6d73 406d 6169 6c69 6e61 746f  op_cms@mailinato
+00008720: 722e 636f 6d3e 272c 2027 596f 7572 206e  r.com>', 'Your n
+00008730: 616d 6520 3c63 6f6f 705f 636d 7340 6d61  ame <coop_cms@ma
+00008740: 696c 696e 6174 6f72 2e63 6f6d 3e27 292c  ilinator.com>'),
+00008750: 0a20 2020 2020 2020 2020 2020 2028 2754  .            ('T
+00008760: 6573 7420 5477 6f20 3c74 6573 7432 4065  est Two <test2@e
+00008770: 7861 6d70 6c65 2e63 6f6d 3e27 2c20 2754  xample.com>', 'T
+00008780: 6573 7420 5477 6f20 3c74 6573 7432 4065  est Two <test2@e
+00008790: 7861 6d70 6c65 2e63 6f6d 3e27 292c 0a20  xample.com>'),. 
+000087a0: 2020 2020 2020 205d 2c0a 2020 2020 2020         ],.      
+000087b0: 2020 434f 4f50 5f43 4d53 5f46 524f 4d5f    COOP_CMS_FROM_
+000087c0: 454d 4149 4c3d 2763 6f6e 7461 6374 4074  EMAIL='contact@t
+000087d0: 6f74 6f2e 6672 270a 2020 2020 290a 2020  oto.fr'.    ).  
+000087e0: 2020 6465 6620 7465 7374 5f73 656e 645f    def test_send_
+000087f0: 7465 7374 5f6e 6577 736c 6574 7465 725f  test_newsletter_
+00008800: 6164 645f 7477 6f5f 656d 6169 6c73 2873  add_two_emails(s
+00008810: 656c 662c 2074 656d 706c 6174 653d 2774  elf, template='t
+00008820: 6573 742f 6e65 7773 6c65 7474 6572 5f62  est/newsletter_b
+00008830: 6c75 652e 6874 6d6c 272c 2065 7874 7261  lue.html', extra
+00008840: 5f63 6865 636b 6572 3d4e 6f6e 6529 3a0a  _checker=None):.
+00008850: 2020 2020 2020 2020 7365 7474 696e 6773          settings
+00008860: 2e53 4954 455f 4944 203d 2031 0a20 2020  .SITE_ID = 1.   
+00008870: 2020 2020 2073 6974 6520 3d20 5369 7465       site = Site
+00008880: 2e6f 626a 6563 7473 2e67 6574 2869 643d  .objects.get(id=
+00008890: 7365 7474 696e 6773 2e53 4954 455f 4944  settings.SITE_ID
+000088a0: 290a 2020 2020 2020 2020 7369 7465 2e64  ).        site.d
+000088b0: 6f6d 6169 6e20 3d20 2774 6f74 6f2e 6672  omain = 'toto.fr
+000088c0: 270a 2020 2020 2020 2020 7369 7465 2e73  '.        site.s
+000088d0: 6176 6528 290a 2020 2020 0a20 2020 2020  ave().    .     
+000088e0: 2020 2072 656c 5f63 6f6e 7465 6e74 203d     rel_content =
+000088f0: 2027 2727 0a20 2020 2020 2020 2020 2020   '''.           
+00008900: 2020 2020 2020 2020 203c 6831 3e54 6974           <h1>Tit
+00008910: 6c65 3c2f 6831 3e3c 6120 6872 6566 3d22  le</h1><a href="
+00008920: 7b30 7d2f 746f 746f 2f22 3e3c 696d 6720  {0}/toto/"><img 
+00008930: 7372 633d 227b 307d 2f74 6f74 6f2e 6a70  src="{0}/toto.jp
+00008940: 6722 3e3c 2f61 3e3c 6272 202f 3e3c 696d  g"></a><br /><im
+00008950: 6720 7372 633d 227b 307d 2f74 6f74 6f2e  g src="{0}/toto.
+00008960: 6a70 6722 3e0a 2020 2020 2020 2020 2020  jpg">.          
+00008970: 2020 2020 2020 2020 2020 3c64 6976 3e3c            <div><
+00008980: 6120 6872 6566 3d22 6874 7470 3a2f 2f77  a href="http://w
+00008990: 7777 2e67 6f6f 676c 652e 6672 223e 476f  ww.google.fr">Go
+000089a0: 6f67 6c65 3c2f 613e 3c2f 6469 763e 0a20  ogle</a></div>. 
+000089b0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+000089c0: 2727 0a20 2020 2020 2020 206f 7269 6769  ''.        origi
+000089d0: 6e61 6c5f 6461 7461 203d 207b 0a20 2020  nal_data = {.   
+000089e0: 2020 2020 2020 2020 2027 7465 6d70 6c61           'templa
+000089f0: 7465 273a 2074 656d 706c 6174 652c 0a20  te': template,. 
+00008a00: 2020 2020 2020 2020 2020 2027 7375 626a             'subj
+00008a10: 6563 7427 3a20 2774 6573 7420 656d 6169  ect': 'test emai
+00008a20: 6c27 2c0a 2020 2020 2020 2020 2020 2020  l',.            
+00008a30: 2763 6f6e 7465 6e74 273a 2072 656c 5f63  'content': rel_c
+00008a40: 6f6e 7465 6e74 2e66 6f72 6d61 7428 2222  ontent.format(""
+00008a50: 290a 2020 2020 2020 2020 7d0a 2020 2020  ).        }.    
+00008a60: 2020 2020 6e65 7773 6c65 7474 6572 203d      newsletter =
+00008a70: 206d 6f6d 6d79 2e6d 616b 6528 4e65 7773   mommy.make(News
+00008a80: 6c65 7474 6572 2c20 7369 7465 3d73 6974  letter, site=sit
+00008a90: 652c 202a 2a6f 7269 6769 6e61 6c5f 6461  e, **original_da
+00008aa0: 7461 290a 2020 2020 0a20 2020 2020 2020  ta).    .       
+00008ab0: 2073 656c 662e 5f6c 6f67 5f61 735f 6564   self._log_as_ed
+00008ac0: 6974 6f72 2829 0a20 2020 2020 2020 2064  itor().        d
+00008ad0: 6174 6120 3d20 7b0a 2020 2020 2020 2020  ata = {.        
+00008ae0: 2020 2020 2265 6d61 696c 7322 3a20 5b65      "emails": [e
+00008af0: 6d61 696c 5b30 5d20 666f 7220 656d 6169  mail[0] for emai
+00008b00: 6c20 696e 2073 6574 7469 6e67 732e 434f  l in settings.CO
+00008b10: 4f50 5f43 4d53 5f54 4553 545f 454d 4149  OP_CMS_TEST_EMAI
+00008b20: 4c53 5d2c 0a20 2020 2020 2020 2020 2020  LS],.           
+00008b30: 2022 6164 6469 7469 6f6e 616c 5f65 6d61   "additional_ema
+00008b40: 696c 3122 3a20 2774 6573 7440 7465 7374  il1": 'test@test
+00008b50: 2e74 6573 7427 2c0a 2020 2020 2020 2020  .test',.        
+00008b60: 2020 2020 2261 6464 6974 696f 6e61 6c5f      "additional_
+00008b70: 656d 6169 6c32 223a 2027 7465 7374 3240  email2": 'test2@
+00008b80: 7465 7374 322e 7465 7374 3227 0a20 2020  test2.test2'.   
+00008b90: 2020 2020 207d 0a20 2020 200a 2020 2020       }.    .    
+00008ba0: 2020 2020 7572 6c20 3d20 7265 7665 7273      url = revers
+00008bb0: 6528 2763 6f6f 705f 636d 735f 7465 7374  e('coop_cms_test
+00008bc0: 5f6e 6577 736c 6574 7465 7227 2c20 6172  _newsletter', ar
+00008bd0: 6773 3d5b 6e65 7773 6c65 7474 6572 2e69  gs=[newsletter.i
+00008be0: 645d 290a 2020 2020 2020 2020 7265 7370  d]).        resp
+00008bf0: 6f6e 7365 203d 2073 656c 662e 636c 6965  onse = self.clie
+00008c00: 6e74 2e70 6f73 7428 7572 6c2c 2064 6174  nt.post(url, dat
+00008c10: 6129 0a20 2020 2020 2020 2073 656c 662e  a).        self.
+00008c20: 6173 7365 7274 4571 7561 6c28 3230 302c  assertEqual(200,
+00008c30: 2072 6573 706f 6e73 652e 7374 6174 7573   response.status
+00008c40: 5f63 6f64 6529 0a20 2020 2020 2020 2074  _code).        t
+00008c50: 6573 745f 6164 6472 6573 7320 3d20 5b74  est_address = [t
+00008c60: 6573 745f 6164 6472 6573 735b 305d 2066  est_address[0] f
+00008c70: 6f72 2074 6573 745f 6164 6472 6573 7320  or test_address 
+00008c80: 696e 2073 6574 7469 6e67 732e 434f 4f50  in settings.COOP
+00008c90: 5f43 4d53 5f54 4553 545f 454d 4149 4c53  _CMS_TEST_EMAILS
+00008ca0: 5d0a 2020 2020 2020 2020 7465 7374 5f61  ].        test_a
+00008cb0: 6464 7265 7373 2e61 7070 656e 6428 2274  ddress.append("t
+00008cc0: 6573 7440 7465 7374 2e74 6573 7422 290a  est@test.test").
+00008cd0: 2020 2020 2020 2020 7465 7374 5f61 6464          test_add
+00008ce0: 7265 7373 2e61 7070 656e 6428 2274 6573  ress.append("tes
+00008cf0: 7432 4074 6573 7432 2e74 6573 7432 2229  t2@test2.test2")
+00008d00: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+00008d10: 7365 7274 4571 7561 6c28 0a20 2020 2020  sertEqual(.     
+00008d20: 2020 2020 2020 2074 6573 745f 6164 6472         test_addr
+00008d30: 6573 732c 0a20 2020 2020 2020 2020 2020  ess,.           
+00008d40: 205b 7265 6365 6976 6564 5f65 6d61 696c   [received_email
+00008d50: 2e74 6f5b 305d 2066 6f72 2072 6563 6569  .to[0] for recei
+00008d60: 7665 645f 656d 6169 6c20 696e 206d 6169  ved_email in mai
+00008d70: 6c2e 6f75 7462 6f78 5d0a 2020 2020 2020  l.outbox].      
+00008d80: 2020 290a 2020 2020 2020 2020 666f 7220    ).        for 
+00008d90: 7265 6365 6976 6564 5f65 6d61 696c 2069  received_email i
+00008da0: 6e20 6d61 696c 2e6f 7574 626f 783a 0a20  n mail.outbox:. 
+00008db0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00008dc0: 6173 7365 7274 4571 7561 6c28 7265 6365  assertEqual(rece
+00008dd0: 6976 6564 5f65 6d61 696c 2e66 726f 6d5f  ived_email.from_
+00008de0: 656d 6169 6c2c 2073 6574 7469 6e67 732e  email, settings.
+00008df0: 434f 4f50 5f43 4d53 5f46 524f 4d5f 454d  COOP_CMS_FROM_EM
+00008e00: 4149 4c29 0a20 2020 2020 2020 2020 2020  AIL).           
+00008e10: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+00008e20: 6c28 7265 6365 6976 6564 5f65 6d61 696c  l(received_email
+00008e30: 2e73 7562 6a65 6374 2c20 6e65 7773 6c65  .subject, newsle
+00008e40: 7474 6572 2e73 7562 6a65 6374 290a 2020  tter.subject).  
+00008e50: 2020 2020 2020 2020 2020 7365 6c66 2e61            self.a
+00008e60: 7373 6572 7454 7275 6528 7265 6365 6976  ssertTrue(receiv
+00008e70: 6564 5f65 6d61 696c 2e62 6f64 792e 6669  ed_email.body.fi
+00008e80: 6e64 2827 5469 746c 6527 2920 3e3d 2030  nd('Title') >= 0
+00008e90: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
+00008ea0: 6c66 2e61 7373 6572 7454 7275 6528 7265  lf.assertTrue(re
+00008eb0: 6365 6976 6564 5f65 6d61 696c 2e62 6f64  ceived_email.bod
+00008ec0: 792e 6669 6e64 2827 476f 6f67 6c65 2729  y.find('Google')
+00008ed0: 203e 3d20 3029 0a20 2020 2020 2020 2020   >= 0).         
+00008ee0: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+00008ef0: 7565 2872 6563 6569 7665 645f 656d 6169  ue(received_emai
+00008f00: 6c2e 616c 7465 726e 6174 6976 6573 5b30  l.alternatives[0
+00008f10: 5d5b 315d 2c20 2274 6578 742f 6874 6d6c  ][1], "text/html
+00008f20: 2229 0a20 2020 2020 2020 2020 2020 2073  ").            s
+00008f30: 656c 662e 6173 7365 7274 5472 7565 2872  elf.assertTrue(r
+00008f40: 6563 6569 7665 645f 656d 6169 6c2e 616c  eceived_email.al
+00008f50: 7465 726e 6174 6976 6573 5b30 5d5b 305d  ternatives[0][0]
+00008f60: 2e66 696e 6428 2754 6974 6c65 2729 203e  .find('Title') >
+00008f70: 3d20 3029 0a20 2020 2020 2020 2020 2020  = 0).           
+00008f80: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
+00008f90: 2872 6563 6569 7665 645f 656d 6169 6c2e  (received_email.
+00008fa0: 616c 7465 726e 6174 6976 6573 5b30 5d5b  alternatives[0][
+00008fb0: 305d 2e66 696e 6428 2747 6f6f 676c 6527  0].find('Google'
+00008fc0: 2920 3e3d 2030 290a 2020 2020 2020 2020  ) >= 0).        
+00008fd0: 2020 2020 7369 7465 5f70 7265 6669 7820      site_prefix 
+00008fe0: 3d20 2268 7474 703a 2f2f 2220 2b20 7369  = "http://" + si
+00008ff0: 7465 2e64 6f6d 6169 6e0a 2020 2020 2020  te.domain.      
+00009000: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00009010: 7454 7275 6528 7265 6365 6976 6564 5f65  tTrue(received_e
+00009020: 6d61 696c 2e61 6c74 6572 6e61 7469 7665  mail.alternative
+00009030: 735b 305d 5b30 5d2e 6669 6e64 2873 6974  s[0][0].find(sit
+00009040: 655f 7072 6566 6978 2920 3e3d 2030 290a  e_prefix) >= 0).
+00009050: 2020 2020 2020 2020 2020 2020 6966 2065              if e
+00009060: 7874 7261 5f63 6865 636b 6572 3a0a 2020  xtra_checker:.  
+00009070: 2020 2020 2020 2020 2020 2020 2020 6578                ex
+00009080: 7472 615f 6368 6563 6b65 7228 7265 6365  tra_checker(rece
+00009090: 6976 6564 5f65 6d61 696c 290a 0a20 2020  ived_email)..   
+000090a0: 2040 6f76 6572 7269 6465 5f73 6574 7469   @override_setti
+000090b0: 6e67 7328 0a20 2020 2020 2020 2043 4f4f  ngs(.        COO
+000090c0: 505f 434d 535f 5445 5354 5f45 4d41 494c  P_CMS_TEST_EMAIL
+000090d0: 533d 5b0a 2020 2020 2020 2020 2020 2020  S=[.            
+000090e0: 2827 596f 7572 206e 616d 6520 3c63 6f6f  ('Your name <coo
+000090f0: 705f 636d 7340 6d61 696c 696e 6174 6f72  p_cms@mailinator
+00009100: 2e63 6f6d 3e27 2c20 2759 6f75 7220 6e61  .com>', 'Your na
+00009110: 6d65 203c 636f 6f70 5f63 6d73 406d 6169  me <coop_cms@mai
+00009120: 6c69 6e61 746f 722e 636f 6d3e 2729 2c0a  linator.com>'),.
+00009130: 2020 2020 2020 2020 2020 2020 2827 5465              ('Te
+00009140: 7374 2054 776f 203c 7465 7374 3240 6578  st Two <test2@ex
+00009150: 616d 706c 652e 636f 6d3e 272c 2027 5465  ample.com>', 'Te
+00009160: 7374 2054 776f 203c 7465 7374 3240 6578  st Two <test2@ex
+00009170: 616d 706c 652e 636f 6d3e 2729 2c0a 2020  ample.com>'),.  
+00009180: 2020 2020 2020 5d2c 0a20 2020 2020 2020        ],.       
+00009190: 2043 4f4f 505f 434d 535f 4652 4f4d 5f45   COOP_CMS_FROM_E
+000091a0: 4d41 494c 3d27 636f 6e74 6163 7440 746f  MAIL='contact@to
+000091b0: 746f 2e66 7227 0a20 2020 2029 0a20 2020  to.fr'.    ).   
+000091c0: 2064 6566 2074 6573 745f 7365 6e64 5f74   def test_send_t
+000091d0: 6573 745f 6e65 7773 6c65 7474 6572 5f61  est_newsletter_a
+000091e0: 6464 5f73 616d 655f 656d 6169 6c73 2873  dd_same_emails(s
+000091f0: 656c 662c 2074 656d 706c 6174 653d 2774  elf, template='t
+00009200: 6573 742f 6e65 7773 6c65 7474 6572 5f62  est/newsletter_b
+00009210: 6c75 652e 6874 6d6c 272c 2065 7874 7261  lue.html', extra
+00009220: 5f63 6865 636b 6572 3d4e 6f6e 6529 3a0a  _checker=None):.
+00009230: 2020 2020 2020 2020 7365 7474 696e 6773          settings
+00009240: 2e53 4954 455f 4944 203d 2031 0a20 2020  .SITE_ID = 1.   
+00009250: 2020 2020 2073 6974 6520 3d20 5369 7465       site = Site
+00009260: 2e6f 626a 6563 7473 2e67 6574 2869 643d  .objects.get(id=
+00009270: 7365 7474 696e 6773 2e53 4954 455f 4944  settings.SITE_ID
+00009280: 290a 2020 2020 2020 2020 7369 7465 2e64  ).        site.d
+00009290: 6f6d 6169 6e20 3d20 2774 6f74 6f2e 6672  omain = 'toto.fr
+000092a0: 270a 2020 2020 2020 2020 7369 7465 2e73  '.        site.s
+000092b0: 6176 6528 290a 2020 2020 0a20 2020 2020  ave().    .     
+000092c0: 2020 2072 656c 5f63 6f6e 7465 6e74 203d     rel_content =
+000092d0: 2027 2727 0a20 2020 2020 2020 2020 2020   '''.           
+000092e0: 2020 2020 2020 2020 2020 2020 203c 6831               <h1
+000092f0: 3e54 6974 6c65 3c2f 6831 3e3c 6120 6872  >Title</h1><a hr
+00009300: 6566 3d22 7b30 7d2f 746f 746f 2f22 3e3c  ef="{0}/toto/"><
+00009310: 696d 6720 7372 633d 227b 307d 2f74 6f74  img src="{0}/tot
+00009320: 6f2e 6a70 6722 3e3c 2f61 3e3c 6272 202f  o.jpg"></a><br /
+00009330: 3e3c 696d 6720 7372 633d 227b 307d 2f74  ><img src="{0}/t
+00009340: 6f74 6f2e 6a70 6722 3e0a 2020 2020 2020  oto.jpg">.      
+00009350: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00009360: 2020 3c64 6976 3e3c 6120 6872 6566 3d22    <div><a href="
+00009370: 6874 7470 3a2f 2f77 7777 2e67 6f6f 676c  http://www.googl
+00009380: 652e 6672 223e 476f 6f67 6c65 3c2f 613e  e.fr">Google</a>
+00009390: 3c2f 6469 763e 0a20 2020 2020 2020 2020  </div>.         
+000093a0: 2020 2020 2020 2020 2020 2027 2727 0a20             '''. 
+000093b0: 2020 2020 2020 206f 7269 6769 6e61 6c5f         original_
+000093c0: 6461 7461 203d 207b 0a20 2020 2020 2020  data = {.       
+000093d0: 2020 2020 2027 7465 6d70 6c61 7465 273a       'template':
+000093e0: 2074 656d 706c 6174 652c 0a20 2020 2020   template,.     
+000093f0: 2020 2020 2020 2027 7375 626a 6563 7427         'subject'
+00009400: 3a20 2774 6573 7420 656d 6169 6c27 2c0a  : 'test email',.
+00009410: 2020 2020 2020 2020 2020 2020 2763 6f6e              'con
+00009420: 7465 6e74 273a 2072 656c 5f63 6f6e 7465  tent': rel_conte
+00009430: 6e74 2e66 6f72 6d61 7428 2222 290a 2020  nt.format("").  
+00009440: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00009450: 6e65 7773 6c65 7474 6572 203d 206d 6f6d  newsletter = mom
+00009460: 6d79 2e6d 616b 6528 4e65 7773 6c65 7474  my.make(Newslett
+00009470: 6572 2c20 7369 7465 3d73 6974 652c 202a  er, site=site, *
+00009480: 2a6f 7269 6769 6e61 6c5f 6461 7461 290a  *original_data).
+00009490: 2020 2020 0a20 2020 2020 2020 2073 656c      .        sel
+000094a0: 662e 5f6c 6f67 5f61 735f 6564 6974 6f72  f._log_as_editor
+000094b0: 2829 0a20 2020 2020 2020 2064 6174 6120  ().        data 
+000094c0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+000094d0: 2265 6d61 696c 7322 3a20 5b65 6d61 696c  "emails": [email
+000094e0: 5b30 5d20 666f 7220 656d 6169 6c20 696e  [0] for email in
+000094f0: 2073 6574 7469 6e67 732e 434f 4f50 5f43   settings.COOP_C
+00009500: 4d53 5f54 4553 545f 454d 4149 4c53 5d2c  MS_TEST_EMAILS],
+00009510: 0a20 2020 2020 2020 2020 2020 2022 6164  .            "ad
+00009520: 6469 7469 6f6e 616c 5f65 6d61 696c 3122  ditional_email1"
+00009530: 3a20 2774 6573 7440 7465 7374 2e74 6573  : 'test@test.tes
+00009540: 7427 2c0a 2020 2020 2020 2020 2020 2020  t',.            
+00009550: 2261 6464 6974 696f 6e61 6c5f 656d 6169  "additional_emai
+00009560: 6c32 223a 2027 7465 7374 4074 6573 742e  l2": 'test@test.
+00009570: 7465 7374 270a 2020 2020 2020 2020 7d0a  test'.        }.
+00009580: 2020 2020 0a20 2020 2020 2020 2075 726c      .        url
+00009590: 203d 2072 6576 6572 7365 2827 636f 6f70   = reverse('coop
+000095a0: 5f63 6d73 5f74 6573 745f 6e65 7773 6c65  _cms_test_newsle
+000095b0: 7474 6572 272c 2061 7267 733d 5b6e 6577  tter', args=[new
+000095c0: 736c 6574 7465 722e 6964 5d29 0a20 2020  sletter.id]).   
+000095d0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+000095e0: 7365 6c66 2e63 6c69 656e 742e 706f 7374  self.client.post
+000095f0: 2875 726c 2c20 6461 7461 290a 2020 2020  (url, data).    
+00009600: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+00009610: 7175 616c 2832 3030 2c20 7265 7370 6f6e  qual(200, respon
+00009620: 7365 2e73 7461 7475 735f 636f 6465 290a  se.status_code).
+00009630: 2020 2020 2020 2020 7465 7374 5f61 6464          test_add
+00009640: 7265 7373 203d 205b 7465 7374 5f61 6464  ress = [test_add
+00009650: 7265 7373 5b30 5d20 666f 7220 7465 7374  ress[0] for test
+00009660: 5f61 6464 7265 7373 2069 6e20 7365 7474  _address in sett
+00009670: 696e 6773 2e43 4f4f 505f 434d 535f 5445  ings.COOP_CMS_TE
+00009680: 5354 5f45 4d41 494c 535d 0a20 2020 2020  ST_EMAILS].     
+00009690: 2020 2074 6573 745f 6164 6472 6573 732e     test_address.
+000096a0: 6170 7065 6e64 2822 7465 7374 4074 6573  append("test@tes
+000096b0: 742e 7465 7374 2229 0a20 2020 2020 2020  t.test").       
+000096c0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+000096d0: 6c28 0a20 2020 2020 2020 2020 2020 2074  l(.            t
+000096e0: 6573 745f 6164 6472 6573 732c 0a20 2020  est_address,.   
+000096f0: 2020 2020 2020 2020 205b 7265 6365 6976           [receiv
+00009700: 6564 5f65 6d61 696c 2e74 6f5b 305d 2066  ed_email.to[0] f
+00009710: 6f72 2072 6563 6569 7665 645f 656d 6169  or received_emai
+00009720: 6c20 696e 206d 6169 6c2e 6f75 7462 6f78  l in mail.outbox
+00009730: 5d0a 2020 2020 2020 2020 290a 2020 2020  ].        ).    
+00009740: 2020 2020 666f 7220 7265 6365 6976 6564      for received
+00009750: 5f65 6d61 696c 2069 6e20 6d61 696c 2e6f  _email in mail.o
+00009760: 7574 626f 783a 0a20 2020 2020 2020 2020  utbox:.         
+00009770: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+00009780: 7561 6c28 7265 6365 6976 6564 5f65 6d61  ual(received_ema
+00009790: 696c 2e66 726f 6d5f 656d 6169 6c2c 2073  il.from_email, s
+000097a0: 6574 7469 6e67 732e 434f 4f50 5f43 4d53  ettings.COOP_CMS
+000097b0: 5f46 524f 4d5f 454d 4149 4c29 0a20 2020  _FROM_EMAIL).   
+000097c0: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
+000097d0: 7365 7274 4571 7561 6c28 7265 6365 6976  sertEqual(receiv
+000097e0: 6564 5f65 6d61 696c 2e73 7562 6a65 6374  ed_email.subject
+000097f0: 2c20 6e65 7773 6c65 7474 6572 2e73 7562  , newsletter.sub
+00009800: 6a65 6374 290a 2020 2020 2020 2020 2020  ject).          
+00009810: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+00009820: 6528 7265 6365 6976 6564 5f65 6d61 696c  e(received_email
+00009830: 2e62 6f64 792e 6669 6e64 2827 5469 746c  .body.find('Titl
+00009840: 6527 2920 3e3d 2030 290a 2020 2020 2020  e') >= 0).      
+00009850: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+00009860: 7454 7275 6528 7265 6365 6976 6564 5f65  tTrue(received_e
+00009870: 6d61 696c 2e62 6f64 792e 6669 6e64 2827  mail.body.find('
+00009880: 476f 6f67 6c65 2729 203e 3d20 3029 0a20  Google') >= 0). 
+00009890: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+000098a0: 6173 7365 7274 5472 7565 2872 6563 6569  assertTrue(recei
+000098b0: 7665 645f 656d 6169 6c2e 616c 7465 726e  ved_email.altern
+000098c0: 6174 6976 6573 5b30 5d5b 315d 2c20 2274  atives[0][1], "t
+000098d0: 6578 742f 6874 6d6c 2229 0a20 2020 2020  ext/html").     
+000098e0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+000098f0: 7274 5472 7565 2872 6563 6569 7665 645f  rtTrue(received_
+00009900: 656d 6169 6c2e 616c 7465 726e 6174 6976  email.alternativ
+00009910: 6573 5b30 5d5b 305d 2e66 696e 6428 2754  es[0][0].find('T
+00009920: 6974 6c65 2729 203e 3d20 3029 0a20 2020  itle') >= 0).   
+00009930: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
+00009940: 7365 7274 5472 7565 2872 6563 6569 7665  sertTrue(receive
+00009950: 645f 656d 6169 6c2e 616c 7465 726e 6174  d_email.alternat
+00009960: 6976 6573 5b30 5d5b 305d 2e66 696e 6428  ives[0][0].find(
+00009970: 2747 6f6f 676c 6527 2920 3e3d 2030 290a  'Google') >= 0).
+00009980: 2020 2020 2020 2020 2020 2020 7369 7465              site
+00009990: 5f70 7265 6669 7820 3d20 2268 7474 703a  _prefix = "http:
+000099a0: 2f2f 2220 2b20 7369 7465 2e64 6f6d 6169  //" + site.domai
+000099b0: 6e0a 2020 2020 2020 2020 2020 2020 7365  n.            se
+000099c0: 6c66 2e61 7373 6572 7454 7275 6528 7265  lf.assertTrue(re
+000099d0: 6365 6976 6564 5f65 6d61 696c 2e61 6c74  ceived_email.alt
+000099e0: 6572 6e61 7469 7665 735b 305d 5b30 5d2e  ernatives[0][0].
+000099f0: 6669 6e64 2873 6974 655f 7072 6566 6978  find(site_prefix
+00009a00: 2920 3e3d 2030 290a 2020 2020 2020 2020  ) >= 0).        
+00009a10: 2020 2020 6966 2065 7874 7261 5f63 6865      if extra_che
+00009a20: 636b 6572 3a0a 2020 2020 2020 2020 2020  cker:.          
+00009a30: 2020 2020 2020 6578 7472 615f 6368 6563        extra_chec
+00009a40: 6b65 7228 7265 6365 6976 6564 5f65 6d61  ker(received_ema
+00009a50: 696c 290a 0a20 2020 2040 6f76 6572 7269  il)..    @overri
+00009a60: 6465 5f73 6574 7469 6e67 7328 0a20 2020  de_settings(.   
+00009a70: 2020 2020 2043 4f4f 505f 434d 535f 5445       COOP_CMS_TE
+00009a80: 5354 5f45 4d41 494c 533d 5b0a 2020 2020  ST_EMAILS=[.    
+00009a90: 2020 2020 2020 2020 2827 596f 7572 206e          ('Your n
+00009aa0: 616d 6520 3c63 6f6f 705f 636d 7340 6d61  ame <coop_cms@ma
+00009ab0: 696c 696e 6174 6f72 2e63 6f6d 3e27 2c20  ilinator.com>', 
+00009ac0: 2759 6f75 7220 6e61 6d65 2729 2c0a 2020  'Your name'),.  
+00009ad0: 2020 2020 2020 2020 2020 2774 6573 7432            'test2
+00009ae0: 4065 7861 6d70 6c65 2e63 6f6d 272c 0a20  @example.com',. 
+00009af0: 2020 2020 2020 205d 2c0a 2020 2020 2020         ],.      
+00009b00: 2020 434f 4f50 5f43 4d53 5f46 524f 4d5f    COOP_CMS_FROM_
+00009b10: 454d 4149 4c3d 2763 6f6e 7461 6374 4074  EMAIL='contact@t
+00009b20: 6f74 6f2e 6672 270a 2020 2020 290a 2020  oto.fr'.    ).  
+00009b30: 2020 6465 6620 7465 7374 5f73 656e 645f    def test_send_
+00009b40: 7465 7374 5f6e 6577 736c 6574 7465 725f  test_newsletter_
+00009b50: 6f6e 6c79 5f63 686f 6963 6573 2873 656c  only_choices(sel
+00009b60: 662c 2074 656d 706c 6174 653d 2774 6573  f, template='tes
+00009b70: 742f 6e65 7773 6c65 7474 6572 5f62 6c75  t/newsletter_blu
+00009b80: 652e 6874 6d6c 272c 2065 7874 7261 5f63  e.html', extra_c
+00009b90: 6865 636b 6572 3d4e 6f6e 6529 3a0a 2020  hecker=None):.  
+00009ba0: 2020 2020 2020 7365 7474 696e 6773 2e53        settings.S
+00009bb0: 4954 455f 4944 203d 2031 0a20 2020 2020  ITE_ID = 1.     
+00009bc0: 2020 2073 6974 6520 3d20 5369 7465 2e6f     site = Site.o
+00009bd0: 626a 6563 7473 2e67 6574 2869 643d 7365  bjects.get(id=se
+00009be0: 7474 696e 6773 2e53 4954 455f 4944 290a  ttings.SITE_ID).
+00009bf0: 2020 2020 2020 2020 7369 7465 2e64 6f6d          site.dom
+00009c00: 6169 6e20 3d20 2774 6f74 6f2e 6672 270a  ain = 'toto.fr'.
+00009c10: 2020 2020 2020 2020 7369 7465 2e73 6176          site.sav
+00009c20: 6528 290a 0a20 2020 2020 2020 2072 656c  e()..        rel
+00009c30: 5f63 6f6e 7465 6e74 203d 2027 2727 0a20  _content = '''. 
+00009c40: 2020 2020 2020 2020 2020 203c 6831 3e54             <h1>T
+00009c50: 6974 6c65 3c2f 6831 3e3c 6120 6872 6566  itle</h1><a href
+00009c60: 3d22 7b30 7d2f 746f 746f 2f22 3e3c 696d  ="{0}/toto/"><im
+00009c70: 6720 7372 633d 227b 307d 2f74 6f74 6f2e  g src="{0}/toto.
+00009c80: 6a70 6722 3e3c 2f61 3e3c 6272 202f 3e3c  jpg"></a><br /><
+00009c90: 696d 6720 7372 633d 227b 307d 2f74 6f74  img src="{0}/tot
+00009ca0: 6f2e 6a70 6722 3e0a 2020 2020 2020 2020  o.jpg">.        
+00009cb0: 2020 2020 3c64 6976 3e3c 6120 6872 6566      <div><a href
+00009cc0: 3d22 6874 7470 3a2f 2f77 7777 2e67 6f6f  ="http://www.goo
+00009cd0: 676c 652e 6672 223e 476f 6f67 6c65 3c2f  gle.fr">Google</
+00009ce0: 613e 3c2f 6469 763e 0a20 2020 2020 2020  a></div>.       
+00009cf0: 2027 2727 0a20 2020 2020 2020 206f 7269   '''.        ori
+00009d00: 6769 6e61 6c5f 6461 7461 203d 207b 0a20  ginal_data = {. 
+00009d10: 2020 2020 2020 2020 2020 2027 7465 6d70             'temp
+00009d20: 6c61 7465 273a 2074 656d 706c 6174 652c  late': template,
+00009d30: 0a20 2020 2020 2020 2020 2020 2027 7375  .            'su
+00009d40: 626a 6563 7427 3a20 2774 6573 7420 656d  bject': 'test em
+00009d50: 6169 6c27 2c0a 2020 2020 2020 2020 2020  ail',.          
+00009d60: 2020 2763 6f6e 7465 6e74 273a 2072 656c    'content': rel
+00009d70: 5f63 6f6e 7465 6e74 2e66 6f72 6d61 7428  _content.format(
+00009d80: 2222 290a 2020 2020 2020 2020 7d0a 2020  "").        }.  
+00009d90: 2020 2020 2020 6e65 7773 6c65 7474 6572        newsletter
+00009da0: 203d 206d 6f6d 6d79 2e6d 616b 6528 4e65   = mommy.make(Ne
+00009db0: 7773 6c65 7474 6572 2c20 7369 7465 3d73  wsletter, site=s
+00009dc0: 6974 652c 202a 2a6f 7269 6769 6e61 6c5f  ite, **original_
+00009dd0: 6461 7461 290a 0a20 2020 2020 2020 2073  data)..        s
+00009de0: 656c 662e 5f6c 6f67 5f61 735f 6564 6974  elf._log_as_edit
+00009df0: 6f72 2829 0a20 2020 2020 2020 2065 6d61  or().        ema
+00009e00: 696c 7320 3d20 5b27 596f 7572 206e 616d  ils = ['Your nam
+00009e10: 6520 3c63 6f6f 705f 636d 7340 6d61 696c  e <coop_cms@mail
+00009e20: 696e 6174 6f72 2e63 6f6d 3e27 2c20 2774  inator.com>', 't
+00009e30: 6573 7432 4065 7861 6d70 6c65 2e63 6f6d  est2@example.com
+00009e40: 275d 0a20 2020 2020 2020 2064 6174 6120  '].        data 
+00009e50: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+00009e60: 2265 6d61 696c 7322 3a20 656d 6169 6c73  "emails": emails
+00009e70: 2c0a 2020 2020 2020 2020 2020 2020 2261  ,.            "a
+00009e80: 6464 6974 696f 6e61 6c5f 656d 6169 6c31  dditional_email1
+00009e90: 223a 2027 272c 0a20 2020 2020 2020 2020  ": '',.         
+00009ea0: 2020 2022 6164 6469 7469 6f6e 616c 5f65     "additional_e
+00009eb0: 6d61 696c 3222 3a20 2727 0a20 2020 2020  mail2": ''.     
+00009ec0: 2020 207d 0a0a 2020 2020 2020 2020 7572     }..        ur
+00009ed0: 6c20 3d20 7265 7665 7273 6528 2763 6f6f  l = reverse('coo
+00009ee0: 705f 636d 735f 7465 7374 5f6e 6577 736c  p_cms_test_newsl
+00009ef0: 6574 7465 7227 2c20 6172 6773 3d5b 6e65  etter', args=[ne
+00009f00: 7773 6c65 7474 6572 2e69 645d 290a 2020  wsletter.id]).  
+00009f10: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+00009f20: 2073 656c 662e 636c 6965 6e74 2e70 6f73   self.client.pos
+00009f30: 7428 7572 6c2c 2064 6174 6129 0a20 2020  t(url, data).   
+00009f40: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00009f50: 4571 7561 6c28 3230 302c 2072 6573 706f  Equal(200, respo
+00009f60: 6e73 652e 7374 6174 7573 5f63 6f64 6529  nse.status_code)
+00009f70: 0a20 2020 2020 2020 2074 6573 745f 6164  .        test_ad
+00009f80: 6472 6573 7320 3d20 656d 6169 6c73 0a20  dress = emails. 
+00009f90: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+00009fa0: 7274 4571 7561 6c28 0a20 2020 2020 2020  rtEqual(.       
+00009fb0: 2020 2020 2074 6573 745f 6164 6472 6573       test_addres
+00009fc0: 732c 0a20 2020 2020 2020 2020 2020 205b  s,.            [
+00009fd0: 7265 6365 6976 6564 5f65 6d61 696c 2e74  received_email.t
+00009fe0: 6f5b 305d 2066 6f72 2072 6563 6569 7665  o[0] for receive
+00009ff0: 645f 656d 6169 6c20 696e 206d 6169 6c2e  d_email in mail.
+0000a000: 6f75 7462 6f78 5d0a 2020 2020 2020 2020  outbox].        
+0000a010: 290a 2020 2020 2020 2020 666f 7220 7265  ).        for re
+0000a020: 6365 6976 6564 5f65 6d61 696c 2069 6e20  ceived_email in 
+0000a030: 6d61 696c 2e6f 7574 626f 783a 0a20 2020  mail.outbox:.   
+0000a040: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
+0000a050: 7365 7274 4571 7561 6c28 7265 6365 6976  sertEqual(receiv
+0000a060: 6564 5f65 6d61 696c 2e66 726f 6d5f 656d  ed_email.from_em
+0000a070: 6169 6c2c 2073 6574 7469 6e67 732e 434f  ail, settings.CO
+0000a080: 4f50 5f43 4d53 5f46 524f 4d5f 454d 4149  OP_CMS_FROM_EMAI
+0000a090: 4c29 0a20 2020 2020 2020 2020 2020 2073  L).            s
+0000a0a0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000a0b0: 7265 6365 6976 6564 5f65 6d61 696c 2e73  received_email.s
+0000a0c0: 7562 6a65 6374 2c20 6e65 7773 6c65 7474  ubject, newslett
+0000a0d0: 6572 2e73 7562 6a65 6374 290a 2020 2020  er.subject).    
+0000a0e0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0000a0f0: 6572 7454 7275 6528 7265 6365 6976 6564  ertTrue(received
+0000a100: 5f65 6d61 696c 2e62 6f64 792e 6669 6e64  _email.body.find
+0000a110: 2827 5469 746c 6527 2920 3e3d 2030 290a  ('Title') >= 0).
+0000a120: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000a130: 2e61 7373 6572 7454 7275 6528 7265 6365  .assertTrue(rece
+0000a140: 6976 6564 5f65 6d61 696c 2e62 6f64 792e  ived_email.body.
+0000a150: 6669 6e64 2827 476f 6f67 6c65 2729 203e  find('Google') >
+0000a160: 3d20 3029 0a20 2020 2020 2020 2020 2020  = 0).           
+0000a170: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
+0000a180: 2872 6563 6569 7665 645f 656d 6169 6c2e  (received_email.
+0000a190: 616c 7465 726e 6174 6976 6573 5b30 5d5b  alternatives[0][
+0000a1a0: 315d 2c20 2274 6578 742f 6874 6d6c 2229  1], "text/html")
+0000a1b0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0000a1c0: 662e 6173 7365 7274 5472 7565 2872 6563  f.assertTrue(rec
+0000a1d0: 6569 7665 645f 656d 6169 6c2e 616c 7465  eived_email.alte
+0000a1e0: 726e 6174 6976 6573 5b30 5d5b 305d 2e66  rnatives[0][0].f
+0000a1f0: 696e 6428 2754 6974 6c65 2729 203e 3d20  ind('Title') >= 
+0000a200: 3029 0a20 2020 2020 2020 2020 2020 2073  0).            s
+0000a210: 656c 662e 6173 7365 7274 5472 7565 2872  elf.assertTrue(r
+0000a220: 6563 6569 7665 645f 656d 6169 6c2e 616c  eceived_email.al
+0000a230: 7465 726e 6174 6976 6573 5b30 5d5b 305d  ternatives[0][0]
+0000a240: 2e66 696e 6428 2747 6f6f 676c 6527 2920  .find('Google') 
+0000a250: 3e3d 2030 290a 2020 2020 2020 2020 2020  >= 0).          
+0000a260: 2020 7369 7465 5f70 7265 6669 7820 3d20    site_prefix = 
+0000a270: 2268 7474 703a 2f2f 2220 2b20 7369 7465  "http://" + site
+0000a280: 2e64 6f6d 6169 6e0a 2020 2020 2020 2020  .domain.        
+0000a290: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
+0000a2a0: 7275 6528 7265 6365 6976 6564 5f65 6d61  rue(received_ema
+0000a2b0: 696c 2e61 6c74 6572 6e61 7469 7665 735b  il.alternatives[
+0000a2c0: 305d 5b30 5d2e 6669 6e64 2873 6974 655f  0][0].find(site_
+0000a2d0: 7072 6566 6978 2920 3e3d 2030 290a 2020  prefix) >= 0).  
+0000a2e0: 2020 2020 2020 2020 2020 6966 2065 7874            if ext
+0000a2f0: 7261 5f63 6865 636b 6572 3a0a 2020 2020  ra_checker:.    
+0000a300: 2020 2020 2020 2020 2020 2020 6578 7472              extr
+0000a310: 615f 6368 6563 6b65 7228 7265 6365 6976  a_checker(receiv
+0000a320: 6564 5f65 6d61 696c 290a 0a20 2020 2040  ed_email)..    @
+0000a330: 6f76 6572 7269 6465 5f73 6574 7469 6e67  override_setting
+0000a340: 7328 0a20 2020 2020 2020 2043 4f4f 505f  s(.        COOP_
+0000a350: 434d 535f 5445 5354 5f45 4d41 494c 533d  CMS_TEST_EMAILS=
+0000a360: 5b0a 2020 2020 2020 2020 2020 2020 2759  [.            'Y
+0000a370: 6f75 7220 6e61 6d65 203c 636f 6f70 5f63  our name <coop_c
+0000a380: 6d73 406d 6169 6c69 6e61 746f 722e 636f  ms@mailinator.co
+0000a390: 6d3e 272c 0a20 2020 2020 2020 2020 2020  m>',.           
+0000a3a0: 2028 2754 6573 7420 5477 6f20 3c74 6573   ('Test Two <tes
+0000a3b0: 7432 4065 7861 6d70 6c65 2e63 6f6d 3e27  t2@example.com>'
+0000a3c0: 2c20 2754 6573 7420 5477 6f20 3c74 6573  , 'Test Two <tes
+0000a3d0: 7432 4065 7861 6d70 6c65 2e63 6f6d 3e27  t2@example.com>'
+0000a3e0: 292c 0a20 2020 2020 2020 205d 2c0a 2020  ),.        ],.  
+0000a3f0: 2020 2020 2020 434f 4f50 5f43 4d53 5f46        COOP_CMS_F
+0000a400: 524f 4d5f 454d 4149 4c3d 2763 6f6e 7461  ROM_EMAIL='conta
+0000a410: 6374 4074 6f74 6f2e 6672 270a 2020 2020  ct@toto.fr'.    
+0000a420: 290a 2020 2020 6465 6620 7465 7374 5f73  ).    def test_s
+0000a430: 656e 645f 7465 7374 5f6e 6577 736c 6574  end_test_newslet
+0000a440: 7465 725f 6164 645f 656d 6169 6c5f 616e  ter_add_email_an
+0000a450: 645f 6e6f 5f63 686f 6963 6528 7365 6c66  d_no_choice(self
+0000a460: 2c20 7465 6d70 6c61 7465 3d27 7465 7374  , template='test
+0000a470: 2f6e 6577 736c 6574 7465 725f 626c 7565  /newsletter_blue
+0000a480: 2e68 746d 6c27 2c20 6578 7472 615f 6368  .html', extra_ch
+0000a490: 6563 6b65 723d 4e6f 6e65 293a 0a20 2020  ecker=None):.   
+0000a4a0: 2020 2020 2073 6574 7469 6e67 732e 5349       settings.SI
+0000a4b0: 5445 5f49 4420 3d20 310a 2020 2020 2020  TE_ID = 1.      
+0000a4c0: 2020 7369 7465 203d 2053 6974 652e 6f62    site = Site.ob
+0000a4d0: 6a65 6374 732e 6765 7428 6964 3d73 6574  jects.get(id=set
+0000a4e0: 7469 6e67 732e 5349 5445 5f49 4429 0a20  tings.SITE_ID). 
+0000a4f0: 2020 2020 2020 2073 6974 652e 646f 6d61         site.doma
+0000a500: 696e 203d 2027 746f 746f 2e66 7227 0a20  in = 'toto.fr'. 
+0000a510: 2020 2020 2020 2073 6974 652e 7361 7665         site.save
+0000a520: 2829 0a20 2020 200a 2020 2020 2020 2020  ().    .        
+0000a530: 7265 6c5f 636f 6e74 656e 7420 3d20 2727  rel_content = ''
+0000a540: 270a 2020 2020 2020 2020 2020 2020 3c68  '.            <h
+0000a550: 313e 5469 746c 653c 2f68 313e 3c61 2068  1>Title</h1><a h
+0000a560: 7265 663d 227b 307d 2f74 6f74 6f2f 223e  ref="{0}/toto/">
+0000a570: 3c69 6d67 2073 7263 3d22 7b30 7d2f 746f  <img src="{0}/to
+0000a580: 746f 2e6a 7067 223e 3c2f 613e 3c62 7220  to.jpg"></a><br 
+0000a590: 2f3e 3c69 6d67 2073 7263 3d22 7b30 7d2f  /><img src="{0}/
+0000a5a0: 746f 746f 2e6a 7067 223e 0a20 2020 2020  toto.jpg">.     
+0000a5b0: 2020 2020 2020 203c 6469 763e 3c61 2068         <div><a h
+0000a5c0: 7265 663d 2268 7474 703a 2f2f 7777 772e  ref="http://www.
+0000a5d0: 676f 6f67 6c65 2e66 7222 3e47 6f6f 676c  google.fr">Googl
+0000a5e0: 653c 2f61 3e3c 2f64 6976 3e0a 2020 2020  e</a></div>.    
+0000a5f0: 2020 2020 2727 270a 2020 2020 2020 2020      '''.        
+0000a600: 6f72 6967 696e 616c 5f64 6174 6120 3d20  original_data = 
+0000a610: 7b0a 2020 2020 2020 2020 2020 2020 2774  {.            't
+0000a620: 656d 706c 6174 6527 3a20 7465 6d70 6c61  emplate': templa
+0000a630: 7465 2c0a 2020 2020 2020 2020 2020 2020  te,.            
+0000a640: 2773 7562 6a65 6374 273a 2027 7465 7374  'subject': 'test
+0000a650: 2065 6d61 696c 272c 0a20 2020 2020 2020   email',.       
+0000a660: 2020 2020 2027 636f 6e74 656e 7427 3a20       'content': 
+0000a670: 7265 6c5f 636f 6e74 656e 742e 666f 726d  rel_content.form
+0000a680: 6174 2822 2229 0a20 2020 2020 2020 207d  at("").        }
+0000a690: 0a20 2020 2020 2020 206e 6577 736c 6574  .        newslet
+0000a6a0: 7465 7220 3d20 6d6f 6d6d 792e 6d61 6b65  ter = mommy.make
+0000a6b0: 284e 6577 736c 6574 7465 722c 2073 6974  (Newsletter, sit
+0000a6c0: 653d 7369 7465 2c20 2a2a 6f72 6967 696e  e=site, **origin
+0000a6d0: 616c 5f64 6174 6129 0a20 2020 200a 2020  al_data).    .  
+0000a6e0: 2020 2020 2020 7365 6c66 2e5f 6c6f 675f        self._log_
+0000a6f0: 6173 5f65 6469 746f 7228 290a 2020 2020  as_editor().    
+0000a700: 2020 2020 6461 7461 203d 207b 0a20 2020      data = {.   
+0000a710: 2020 2020 2020 2020 2022 6164 6469 7469           "additi
+0000a720: 6f6e 616c 5f65 6d61 696c 3122 3a20 2774  onal_email1": 't
+0000a730: 6573 7440 7465 7374 2e74 6573 7427 2c0a  est@test.test',.
+0000a740: 2020 2020 2020 2020 2020 2020 2261 6464              "add
+0000a750: 6974 696f 6e61 6c5f 656d 6169 6c32 223a  itional_email2":
+0000a760: 2027 270a 2020 2020 2020 2020 7d0a 2020   ''.        }.  
+0000a770: 2020 0a20 2020 2020 2020 2075 726c 203d    .        url =
+0000a780: 2072 6576 6572 7365 2827 636f 6f70 5f63   reverse('coop_c
+0000a790: 6d73 5f74 6573 745f 6e65 7773 6c65 7474  ms_test_newslett
+0000a7a0: 6572 272c 2061 7267 733d 5b6e 6577 736c  er', args=[newsl
+0000a7b0: 6574 7465 722e 6964 5d29 0a20 2020 2020  etter.id]).     
+0000a7c0: 2020 2072 6573 706f 6e73 6520 3d20 7365     response = se
+0000a7d0: 6c66 2e63 6c69 656e 742e 706f 7374 2875  lf.client.post(u
+0000a7e0: 726c 2c20 6461 7461 290a 2020 2020 2020  rl, data).      
+0000a7f0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000a800: 616c 2832 3030 2c20 7265 7370 6f6e 7365  al(200, response
+0000a810: 2e73 7461 7475 735f 636f 6465 290a 2020  .status_code).  
+0000a820: 2020 2020 2020 7465 7374 5f61 6464 7265        test_addre
+0000a830: 7373 203d 205b 5d0a 2020 2020 2020 2020  ss = [].        
+0000a840: 7465 7374 5f61 6464 7265 7373 2e61 7070  test_address.app
+0000a850: 656e 6428 2274 6573 7440 7465 7374 2e74  end("test@test.t
+0000a860: 6573 7422 290a 2020 2020 2020 2020 7365  est").        se
+0000a870: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
+0000a880: 2020 2020 2020 2020 2020 2020 7465 7374              test
+0000a890: 5f61 6464 7265 7373 2c0a 2020 2020 2020  _address,.      
+0000a8a0: 2020 2020 2020 5b72 6563 6569 7665 645f        [received_
+0000a8b0: 656d 6169 6c2e 746f 5b30 5d20 666f 7220  email.to[0] for 
+0000a8c0: 7265 6365 6976 6564 5f65 6d61 696c 2069  received_email i
+0000a8d0: 6e20 6d61 696c 2e6f 7574 626f 785d 0a20  n mail.outbox]. 
+0000a8e0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0000a8f0: 2066 6f72 2072 6563 6569 7665 645f 656d   for received_em
+0000a900: 6169 6c20 696e 206d 6169 6c2e 6f75 7462  ail in mail.outb
+0000a910: 6f78 3a0a 2020 2020 2020 2020 2020 2020  ox:.            
+0000a920: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0000a930: 2872 6563 6569 7665 645f 656d 6169 6c2e  (received_email.
+0000a940: 6672 6f6d 5f65 6d61 696c 2c20 7365 7474  from_email, sett
+0000a950: 696e 6773 2e43 4f4f 505f 434d 535f 4652  ings.COOP_CMS_FR
+0000a960: 4f4d 5f45 4d41 494c 290a 2020 2020 2020  OM_EMAIL).      
+0000a970: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000a980: 7445 7175 616c 2872 6563 6569 7665 645f  tEqual(received_
+0000a990: 656d 6169 6c2e 7375 626a 6563 742c 206e  email.subject, n
+0000a9a0: 6577 736c 6574 7465 722e 7375 626a 6563  ewsletter.subjec
+0000a9b0: 7429 0a20 2020 2020 2020 2020 2020 2073  t).            s
+0000a9c0: 656c 662e 6173 7365 7274 5472 7565 2872  elf.assertTrue(r
+0000a9d0: 6563 6569 7665 645f 656d 6169 6c2e 626f  eceived_email.bo
+0000a9e0: 6479 2e66 696e 6428 2754 6974 6c65 2729  dy.find('Title')
+0000a9f0: 203e 3d20 3029 0a20 2020 2020 2020 2020   >= 0).         
+0000aa00: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+0000aa10: 7565 2872 6563 6569 7665 645f 656d 6169  ue(received_emai
+0000aa20: 6c2e 626f 6479 2e66 696e 6428 2747 6f6f  l.body.find('Goo
+0000aa30: 676c 6527 2920 3e3d 2030 290a 2020 2020  gle') >= 0).    
+0000aa40: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0000aa50: 6572 7454 7275 6528 7265 6365 6976 6564  ertTrue(received
+0000aa60: 5f65 6d61 696c 2e61 6c74 6572 6e61 7469  _email.alternati
+0000aa70: 7665 735b 305d 5b31 5d2c 2022 7465 7874  ves[0][1], "text
+0000aa80: 2f68 746d 6c22 290a 2020 2020 2020 2020  /html").        
+0000aa90: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
+0000aaa0: 7275 6528 7265 6365 6976 6564 5f65 6d61  rue(received_ema
+0000aab0: 696c 2e61 6c74 6572 6e61 7469 7665 735b  il.alternatives[
+0000aac0: 305d 5b30 5d2e 6669 6e64 2827 5469 746c  0][0].find('Titl
+0000aad0: 6527 2920 3e3d 2030 290a 2020 2020 2020  e') >= 0).      
+0000aae0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000aaf0: 7454 7275 6528 7265 6365 6976 6564 5f65  tTrue(received_e
+0000ab00: 6d61 696c 2e61 6c74 6572 6e61 7469 7665  mail.alternative
+0000ab10: 735b 305d 5b30 5d2e 6669 6e64 2827 476f  s[0][0].find('Go
+0000ab20: 6f67 6c65 2729 203e 3d20 3029 0a20 2020  ogle') >= 0).   
+0000ab30: 2020 2020 2020 2020 2073 6974 655f 7072           site_pr
+0000ab40: 6566 6978 203d 2022 6874 7470 3a2f 2f22  efix = "http://"
+0000ab50: 202b 2073 6974 652e 646f 6d61 696e 0a20   + site.domain. 
+0000ab60: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000ab70: 6173 7365 7274 5472 7565 2872 6563 6569  assertTrue(recei
+0000ab80: 7665 645f 656d 6169 6c2e 616c 7465 726e  ved_email.altern
+0000ab90: 6174 6976 6573 5b30 5d5b 305d 2e66 696e  atives[0][0].fin
+0000aba0: 6428 7369 7465 5f70 7265 6669 7829 203e  d(site_prefix) >
+0000abb0: 3d20 3029 0a20 2020 2020 2020 2020 2020  = 0).           
+0000abc0: 2069 6620 6578 7472 615f 6368 6563 6b65   if extra_checke
+0000abd0: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
+0000abe0: 2020 2065 7874 7261 5f63 6865 636b 6572     extra_checker
+0000abf0: 2872 6563 6569 7665 645f 656d 6169 6c29  (received_email)
+0000ac00: 0a20 2020 2020 2020 200a 2020 2020 6465  .        .    de
+0000ac10: 6620 7465 7374 5f73 6368 6564 756c 655f  f test_schedule_
+0000ac20: 6e65 7773 6c65 7474 6572 5f73 656e 6469  newsletter_sendi
+0000ac30: 6e67 2873 656c 6629 3a0a 2020 2020 2020  ng(self):.      
+0000ac40: 2020 6e65 7773 6c65 7474 6572 203d 206d    newsletter = m
+0000ac50: 6f6d 6d79 2e6d 616b 6528 4e65 7773 6c65  ommy.make(Newsle
+0000ac60: 7474 6572 290a 2020 2020 2020 2020 0a20  tter).        . 
+0000ac70: 2020 2020 2020 2073 656c 662e 5f6c 6f67         self._log
+0000ac80: 5f61 735f 6564 6974 6f72 2829 0a20 2020  _as_editor().   
+0000ac90: 2020 2020 2075 726c 203d 2072 6576 6572       url = rever
+0000aca0: 7365 2827 636f 6f70 5f63 6d73 5f73 6368  se('coop_cms_sch
+0000acb0: 6564 756c 655f 6e65 7773 6c65 7474 6572  edule_newsletter
+0000acc0: 5f73 656e 6469 6e67 272c 2061 7267 733d  _sending', args=
+0000acd0: 5b6e 6577 736c 6574 7465 722e 6964 5d29  [newsletter.id])
+0000ace0: 0a20 2020 2020 2020 200a 2020 2020 2020  .        .      
+0000acf0: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
+0000ad00: 662e 636c 6965 6e74 2e67 6574 2875 726c  f.client.get(url
+0000ad10: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0000ad20: 7373 6572 7445 7175 616c 2832 3030 2c20  ssertEqual(200, 
+0000ad30: 7265 7370 6f6e 7365 2e73 7461 7475 735f  response.status_
+0000ad40: 636f 6465 290a 2020 2020 2020 2020 0a20  code).        . 
+0000ad50: 2020 2020 2020 2073 6368 5f64 7420 3d20         sch_dt = 
+0000ad60: 2232 3033 302d 3132 2d31 3220 3132 3a30  "2030-12-12 12:0
+0000ad70: 303a 3030 220a 2020 2020 2020 2020 7265  0:00".        re
+0000ad80: 7370 6f6e 7365 203d 2073 656c 662e 636c  sponse = self.cl
+0000ad90: 6965 6e74 2e70 6f73 7428 7572 6c2c 2064  ient.post(url, d
+0000ada0: 6174 613d 7b27 7363 6865 6475 6c69 6e67  ata={'scheduling
+0000adb0: 5f64 7427 3a20 7363 685f 6474 7d29 0a20  _dt': sch_dt}). 
+0000adc0: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0000add0: 7274 4571 7561 6c28 3230 302c 2072 6573  rtEqual(200, res
+0000ade0: 706f 6e73 652e 7374 6174 7573 5f63 6f64  ponse.status_cod
+0000adf0: 6529 0a20 2020 2020 2020 2073 656c 662e  e).        self.
+0000ae00: 6173 7365 7274 436f 6e74 6169 6e73 2872  assertContains(r
+0000ae10: 6573 706f 6e73 652c 2027 242e 636f 6c6f  esponse, '$.colo
+0000ae20: 7262 6f78 2e63 6c6f 7365 2829 2729 0a20  rbox.close()'). 
+0000ae30: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0000ae40: 7274 4571 7561 6c28 312c 204e 6577 736c  rtEqual(1, Newsl
+0000ae50: 6574 7465 7253 656e 6469 6e67 2e6f 626a  etterSending.obj
+0000ae60: 6563 7473 2e63 6f75 6e74 2829 290a 2020  ects.count()).  
+0000ae70: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000ae80: 7445 7175 616c 286e 6577 736c 6574 7465  tEqual(newslette
+0000ae90: 722c 204e 6577 736c 6574 7465 7253 656e  r, NewsletterSen
+0000aea0: 6469 6e67 2e6f 626a 6563 7473 2e61 6c6c  ding.objects.all
+0000aeb0: 2829 5b30 5d2e 6e65 7773 6c65 7474 6572  ()[0].newsletter
+0000aec0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0000aed0: 7373 6572 7445 7175 616c 2832 3033 302c  ssertEqual(2030,
+0000aee0: 204e 6577 736c 6574 7465 7253 656e 6469   NewsletterSendi
+0000aef0: 6e67 2e6f 626a 6563 7473 2e61 6c6c 2829  ng.objects.all()
+0000af00: 5b30 5d2e 7363 6865 6475 6c69 6e67 5f64  [0].scheduling_d
+0000af10: 742e 7965 6172 290a 2020 2020 2020 2020  t.year).        
+0000af20: 0a20 2020 2064 6566 2074 6573 745f 7363  .    def test_sc
+0000af30: 6865 6475 6c65 5f6e 6577 736c 6574 7465  hedule_newslette
+0000af40: 725f 7365 6e64 696e 675f 696e 7661 6c69  r_sending_invali
+0000af50: 645f 7661 6c75 6528 7365 6c66 293a 0a20  d_value(self):. 
+0000af60: 2020 2020 2020 206e 6577 736c 6574 7465         newslette
+0000af70: 7220 3d20 6d6f 6d6d 792e 6d61 6b65 284e  r = mommy.make(N
+0000af80: 6577 736c 6574 7465 7229 0a20 2020 2020  ewsletter).     
+0000af90: 2020 200a 2020 2020 2020 2020 7365 6c66     .        self
+0000afa0: 2e5f 6c6f 675f 6173 5f65 6469 746f 7228  ._log_as_editor(
+0000afb0: 290a 2020 2020 2020 2020 7572 6c20 3d20  ).        url = 
+0000afc0: 7265 7665 7273 6528 2763 6f6f 705f 636d  reverse('coop_cm
+0000afd0: 735f 7363 6865 6475 6c65 5f6e 6577 736c  s_schedule_newsl
+0000afe0: 6574 7465 725f 7365 6e64 696e 6727 2c20  etter_sending', 
+0000aff0: 6172 6773 3d5b 6e65 7773 6c65 7474 6572  args=[newsletter
+0000b000: 2e69 645d 290a 2020 2020 2020 2020 0a20  .id]).        . 
+0000b010: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+0000b020: 3d20 7365 6c66 2e63 6c69 656e 742e 6765  = self.client.ge
+0000b030: 7428 7572 6c29 0a20 2020 2020 2020 2073  t(url).        s
+0000b040: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000b050: 3230 302c 2072 6573 706f 6e73 652e 7374  200, response.st
+0000b060: 6174 7573 5f63 6f64 6529 0a20 2020 2020  atus_code).     
+0000b070: 2020 200a 2020 2020 2020 2020 7363 685f     .        sch_
+0000b080: 6474 203d 2027 270a 2020 2020 2020 2020  dt = ''.        
+0000b090: 7265 7370 6f6e 7365 203d 2073 656c 662e  response = self.
+0000b0a0: 636c 6965 6e74 2e70 6f73 7428 7572 6c2c  client.post(url,
+0000b0b0: 2064 6174 613d 7b27 7363 6865 6475 6c69   data={'scheduli
+0000b0c0: 6e67 5f64 7427 3a20 7363 685f 6474 7d29  ng_dt': sch_dt})
+0000b0d0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000b0e0: 7365 7274 4571 7561 6c28 3230 302c 2072  sertEqual(200, r
+0000b0f0: 6573 706f 6e73 652e 7374 6174 7573 5f63  esponse.status_c
+0000b100: 6f64 6529 0a20 2020 2020 2020 2073 656c  ode).        sel
+0000b110: 662e 6173 7365 7274 4571 7561 6c28 302c  f.assertEqual(0,
+0000b120: 204e 6577 736c 6574 7465 7253 656e 6469   NewsletterSendi
+0000b130: 6e67 2e6f 626a 6563 7473 2e63 6f75 6e74  ng.objects.count
+0000b140: 2829 290a 2020 2020 2020 2020 0a20 2020  ()).        .   
+0000b150: 2020 2020 2073 6368 5f64 7420 3d20 2774       sch_dt = 't
+0000b160: 6f74 6f27 0a20 2020 2020 2020 2072 6573  oto'.        res
+0000b170: 706f 6e73 6520 3d20 7365 6c66 2e63 6c69  ponse = self.cli
+0000b180: 656e 742e 706f 7374 2875 726c 2c20 6461  ent.post(url, da
+0000b190: 7461 3d7b 2773 6368 6564 756c 696e 675f  ta={'scheduling_
+0000b1a0: 6474 273a 2073 6368 5f64 747d 290a 2020  dt': sch_dt}).  
+0000b1b0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000b1c0: 7445 7175 616c 2832 3030 2c20 7265 7370  tEqual(200, resp
+0000b1d0: 6f6e 7365 2e73 7461 7475 735f 636f 6465  onse.status_code
+0000b1e0: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0000b1f0: 7373 6572 7445 7175 616c 2830 2c20 4e65  ssertEqual(0, Ne
+0000b200: 7773 6c65 7474 6572 5365 6e64 696e 672e  wsletterSending.
+0000b210: 6f62 6a65 6374 732e 636f 756e 7428 2929  objects.count())
+0000b220: 0a20 2020 2020 2020 200a 2020 2020 2020  .        .      
+0000b230: 2020 7363 685f 6474 203d 2022 3230 3035    sch_dt = "2005
+0000b240: 2d31 322d 3132 2031 323a 3030 3a30 3022  -12-12 12:00:00"
+0000b250: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
+0000b260: 6520 3d20 7365 6c66 2e63 6c69 656e 742e  e = self.client.
+0000b270: 706f 7374 2875 726c 2c20 6461 7461 3d7b  post(url, data={
+0000b280: 2773 6368 6564 756c 696e 675f 6474 273a  'scheduling_dt':
+0000b290: 2073 6368 5f64 747d 290a 2020 2020 2020   sch_dt}).      
+0000b2a0: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000b2b0: 616c 2832 3030 2c20 7265 7370 6f6e 7365  al(200, response
+0000b2c0: 2e73 7461 7475 735f 636f 6465 290a 2020  .status_code).  
+0000b2d0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000b2e0: 7445 7175 616c 2830 2c20 4e65 7773 6c65  tEqual(0, Newsle
+0000b2f0: 7474 6572 5365 6e64 696e 672e 6f62 6a65  tterSending.obje
+0000b300: 6374 732e 636f 756e 7428 2929 0a20 2020  cts.count()).   
+0000b310: 200a 2020 2020 6465 6620 7465 7374 5f73   .    def test_s
+0000b320: 6368 6564 756c 655f 616e 6f6e 796d 6f75  chedule_anonymou
+0000b330: 7328 7365 6c66 293a 0a20 2020 2020 2020  s(self):.       
+0000b340: 206e 6577 736c 6574 7465 7220 3d20 6d6f   newsletter = mo
+0000b350: 6d6d 792e 6d61 6b65 284e 6577 736c 6574  mmy.make(Newslet
+0000b360: 7465 7229 0a20 2020 2020 2020 200a 2020  ter).        .  
+0000b370: 2020 2020 2020 6c6f 6769 6e5f 7572 6c20        login_url 
+0000b380: 3d20 7265 7665 7273 6528 276c 6f67 696e  = reverse('login
+0000b390: 2729 0a20 2020 2020 2020 2075 726c 203d  ').        url =
+0000b3a0: 2072 6576 6572 7365 2827 636f 6f70 5f63   reverse('coop_c
+0000b3b0: 6d73 5f73 6368 6564 756c 655f 6e65 7773  ms_schedule_news
+0000b3c0: 6c65 7474 6572 5f73 656e 6469 6e67 272c  letter_sending',
+0000b3d0: 2061 7267 733d 5b6e 6577 736c 6574 7465   args=[newslette
+0000b3e0: 722e 6964 5d29 0a20 2020 2020 2020 200a  r.id]).        .
+0000b3f0: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
+0000b400: 203d 2073 656c 662e 636c 6965 6e74 2e67   = self.client.g
+0000b410: 6574 2875 726c 2c20 666f 6c6c 6f77 3d46  et(url, follow=F
+0000b420: 616c 7365 290a 2020 2020 2020 2020 7265  alse).        re
+0000b430: 6469 7265 6374 5f75 726c 203d 2072 6573  direct_url = res
+0000b440: 706f 6e73 655b 274c 6f63 6174 696f 6e27  ponse['Location'
+0000b450: 5d0a 2020 2020 2020 2020 6966 2068 6173  ].        if has
+0000b460: 5f6c 6f63 616c 697a 6564 5f75 726c 7328  _localized_urls(
+0000b470: 293a 0a20 2020 2020 2020 2020 2020 206c  ):.            l
+0000b480: 6f67 696e 5f75 726c 203d 206c 6f67 696e  ogin_url = login
+0000b490: 5f75 726c 5b3a 325d 0a20 2020 2020 2020  _url[:2].       
+0000b4a0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000b4b0: 5472 7565 2872 6564 6972 6563 745f 7572  True(redirect_ur
+0000b4c0: 6c2e 6669 6e64 286c 6f67 696e 5f75 726c  l.find(login_url
+0000b4d0: 2920 3e3d 2030 290a 2020 2020 2020 2020  ) >= 0).        
+0000b4e0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0000b4f0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+0000b500: 6528 7265 6469 7265 6374 5f75 726c 2e66  e(redirect_url.f
+0000b510: 696e 6428 6c6f 6769 6e5f 7572 6c29 203e  ind(login_url) >
+0000b520: 3d20 3029 0a20 2020 2020 2020 200a 2020  = 0).        .  
+0000b530: 2020 2020 2020 7363 685f 6474 203d 2074        sch_dt = t
+0000b540: 696d 657a 6f6e 652e 6e6f 7728 292b 7469  imezone.now()+ti
+0000b550: 6d65 6465 6c74 6128 3129 0a20 2020 2020  medelta(1).     
+0000b560: 2020 2072 6573 706f 6e73 6520 3d20 7365     response = se
+0000b570: 6c66 2e63 6c69 656e 742e 706f 7374 2875  lf.client.post(u
+0000b580: 726c 2c20 6461 7461 3d7b 2773 656e 6469  rl, data={'sendi
+0000b590: 6e67 5f64 7427 3a20 7363 685f 6474 7d29  ng_dt': sch_dt})
+0000b5a0: 0a20 2020 2020 2020 2072 6564 6972 6563  .        redirec
+0000b5b0: 745f 7572 6c20 3d20 7265 7370 6f6e 7365  t_url = response
+0000b5c0: 5b27 4c6f 6361 7469 6f6e 275d 0a20 2020  ['Location'].   
+0000b5d0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000b5e0: 5472 7565 2872 6564 6972 6563 745f 7572  True(redirect_ur
+0000b5f0: 6c2e 6669 6e64 286c 6f67 696e 5f75 726c  l.find(login_url
+0000b600: 2920 3e3d 2030 290a 2020 2020 0a20 2020  ) >= 0).    .   
+0000b610: 2064 6566 2074 6573 745f 7365 6e64 5f6e   def test_send_n
+0000b620: 6577 736c 6574 7465 7228 7365 6c66 293a  ewsletter(self):
+0000b630: 0a20 2020 2020 2020 200a 2020 2020 2020  .        .      
+0000b640: 2020 6e65 7773 6c65 7474 6572 5f64 6174    newsletter_dat
+0000b650: 6120 3d20 7b0a 2020 2020 2020 2020 2020  a = {.          
+0000b660: 2020 2773 7562 6a65 6374 273a 2027 5468    'subject': 'Th
+0000b670: 6973 2069 7320 7468 6520 7375 626a 6563  is is the subjec
+0000b680: 7427 2c0a 2020 2020 2020 2020 2020 2020  t',.            
+0000b690: 2763 6f6e 7465 6e74 273a 2027 3c68 323e  'content': '<h2>
+0000b6a0: 4865 6c6c 6f20 6775 7973 213c 2f68 323e  Hello guys!</h2>
+0000b6b0: 3c70 3e56 6973 6974 203c 6120 6872 6566  <p>Visit <a href
+0000b6c0: 3d22 6874 7470 3a2f 2f74 6f74 6f2e 6672  ="http://toto.fr
+0000b6d0: 223e 7573 3c2f 613e 3c2f 703e 272c 0a20  ">us</a></p>',. 
+0000b6e0: 2020 2020 2020 2020 2020 2027 7465 6d70             'temp
+0000b6f0: 6c61 7465 273a 2027 7465 7374 2f6e 6577  late': 'test/new
+0000b700: 736c 6574 7465 725f 626c 7565 2e68 746d  sletter_blue.htm
+0000b710: 6c27 2c0a 2020 2020 2020 2020 7d0a 2020  l',.        }.  
+0000b720: 2020 2020 2020 6e65 7773 6c65 7474 6572        newsletter
+0000b730: 203d 206d 6f6d 6d79 2e6d 616b 6528 4e65   = mommy.make(Ne
+0000b740: 7773 6c65 7474 6572 2c20 2a2a 6e65 7773  wsletter, **news
+0000b750: 6c65 7474 6572 5f64 6174 6129 0a20 2020  letter_data).   
+0000b760: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000b770: 4571 7561 6c28 6e65 7773 6c65 7474 6572  Equal(newsletter
+0000b780: 2e69 735f 7075 626c 6963 2c20 4661 6c73  .is_public, Fals
+0000b790: 6529 0a20 2020 2020 2020 2073 6368 5f64  e).        sch_d
+0000b7a0: 7420 3d20 7469 6d65 7a6f 6e65 2e6e 6f77  t = timezone.now
+0000b7b0: 2829 202d 2074 696d 6564 656c 7461 2831  () - timedelta(1
+0000b7c0: 290a 2020 2020 2020 2020 7365 6e64 696e  ).        sendin
+0000b7d0: 6720 3d20 6d6f 6d6d 792e 6d61 6b65 284e  g = mommy.make(N
+0000b7e0: 6577 736c 6574 7465 7253 656e 6469 6e67  ewsletterSending
+0000b7f0: 2c20 6e65 7773 6c65 7474 6572 3d6e 6577  , newsletter=new
+0000b800: 736c 6574 7465 722c 2073 6368 6564 756c  sletter, schedul
+0000b810: 696e 675f 6474 3d20 7363 685f 6474 2c20  ing_dt= sch_dt, 
+0000b820: 7365 6e64 696e 675f 6474 3d20 4e6f 6e65  sending_dt= None
+0000b830: 290a 0a20 2020 2020 2020 206d 616e 6167  )..        manag
+0000b840: 656d 656e 742e 6361 6c6c 5f63 6f6d 6d61  ement.call_comma
+0000b850: 6e64 2827 7365 6e64 5f6e 6577 736c 6574  nd('send_newslet
+0000b860: 7465 7227 2c20 2774 6f74 6f40 746f 746f  ter', 'toto@toto
+0000b870: 2e66 7227 2c20 7665 7262 6f73 6974 793d  .fr', verbosity=
+0000b880: 3029 2020 2320 2c20 696e 7465 7261 6374  0)  # , interact
+0000b890: 6976 653d 4661 6c73 6529 0a0a 2020 2020  ive=False)..    
+0000b8a0: 2020 2020 7365 6e64 696e 6720 3d20 4e65      sending = Ne
+0000b8b0: 7773 6c65 7474 6572 5365 6e64 696e 672e  wsletterSending.
+0000b8c0: 6f62 6a65 6374 732e 6765 7428 6964 3d73  objects.get(id=s
+0000b8d0: 656e 6469 6e67 2e69 6429 0a20 2020 2020  ending.id).     
+0000b8e0: 2020 2073 656c 662e 6173 7365 7274 4e6f     self.assertNo
+0000b8f0: 7445 7175 616c 2873 656e 6469 6e67 2e73  tEqual(sending.s
+0000b900: 656e 6469 6e67 5f64 742c 204e 6f6e 6529  ending_dt, None)
+0000b910: 0a20 2020 2020 2020 200a 2020 2020 2020  .        .      
+0000b920: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000b930: 616c 286c 656e 286d 6169 6c2e 6f75 7462  al(len(mail.outb
+0000b940: 6f78 292c 2031 290a 2020 2020 2020 2020  ox), 1).        
+0000b950: 656d 6169 6c20 3d20 6d61 696c 2e6f 7574  email = mail.out
+0000b960: 626f 785b 305d 0a20 2020 2020 2020 2073  box[0].        s
+0000b970: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000b980: 656d 6169 6c2e 746f 2c20 5b27 746f 746f  email.to, ['toto
+0000b990: 4074 6f74 6f2e 6672 275d 290a 2020 2020  @toto.fr']).    
+0000b9a0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0000b9b0: 7175 616c 2865 6d61 696c 2e73 7562 6a65  qual(email.subje
+0000b9c0: 6374 2c20 6e65 7773 6c65 7474 6572 5f64  ct, newsletter_d
+0000b9d0: 6174 615b 2773 7562 6a65 6374 275d 290a  ata['subject']).
+0000b9e0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0000b9f0: 6572 7454 7275 6528 656d 6169 6c2e 626f  ertTrue(email.bo
+0000ba00: 6479 2e66 696e 6428 2748 656c 6c6f 2067  dy.find('Hello g
+0000ba10: 7579 7327 2920 3e3d 2030 290a 2020 2020  uys') >= 0).    
+0000ba20: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
+0000ba30: 7275 6528 656d 6169 6c2e 616c 7465 726e  rue(email.altern
+0000ba40: 6174 6976 6573 5b30 5d5b 315d 2c20 2274  atives[0][1], "t
+0000ba50: 6578 742f 6874 6d6c 2229 0a20 2020 2020  ext/html").     
+0000ba60: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+0000ba70: 7565 2865 6d61 696c 2e61 6c74 6572 6e61  ue(email.alterna
+0000ba80: 7469 7665 735b 305d 5b30 5d2e 6669 6e64  tives[0][0].find
+0000ba90: 2827 4865 6c6c 6f20 6775 7973 2729 203e  ('Hello guys') >
+0000baa0: 3d20 3029 0a0a 2020 2020 2020 2020 6e65  = 0)..        ne
+0000bab0: 7773 6c65 7474 6572 203d 204e 6577 736c  wsletter = Newsl
+0000bac0: 6574 7465 722e 6f62 6a65 6374 732e 6765  etter.objects.ge
+0000bad0: 7428 6964 3d6e 6577 736c 6574 7465 722e  t(id=newsletter.
+0000bae0: 6964 290a 2020 2020 2020 2020 7365 6c66  id).        self
+0000baf0: 2e61 7373 6572 7445 7175 616c 286e 6577  .assertEqual(new
+0000bb00: 736c 6574 7465 722e 6973 5f70 7562 6c69  sletter.is_publi
+0000bb10: 632c 2054 7275 6529 0a20 2020 2020 2020  c, True).       
+0000bb20: 200a 2020 2020 2020 2020 2320 6368 6563   .        # chec
+0000bb30: 6b20 7768 6574 2068 6170 7065 6e73 2069  k whet happens i
+0000bb40: 6620 636f 6d6d 616e 6420 6973 2063 616c  f command is cal
+0000bb50: 6c65 6420 6167 6169 6e0a 2020 2020 2020  led again.      
+0000bb60: 2020 6d61 696c 2e6f 7574 626f 7820 3d20    mail.outbox = 
+0000bb70: 5b5d 0a20 2020 2020 2020 206d 616e 6167  [].        manag
+0000bb80: 656d 656e 742e 6361 6c6c 5f63 6f6d 6d61  ement.call_comma
+0000bb90: 6e64 2827 7365 6e64 5f6e 6577 736c 6574  nd('send_newslet
+0000bba0: 7465 7227 2c20 2774 6f74 6f40 746f 746f  ter', 'toto@toto
+0000bbb0: 2e66 7227 2c20 7665 7262 6f73 6974 793d  .fr', verbosity=
+0000bbc0: 3029 2020 2320 2c20 696e 7465 7261 6374  0)  # , interact
+0000bbd0: 6976 653d 4661 6c73 6529 0a20 2020 2020  ive=False).     
+0000bbe0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0000bbf0: 7561 6c28 6c65 6e28 6d61 696c 2e6f 7574  ual(len(mail.out
+0000bc00: 626f 7829 2c20 3029 0a0a 2020 2020 6465  box), 0)..    de
+0000bc10: 6620 7465 7374 5f73 656e 645f 6e65 7773  f test_send_news
+0000bc20: 6c65 7474 6572 5f73 6576 6572 616c 2873  letter_several(s
+0000bc30: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+0000bc40: 2269 7420 7368 6f75 6c64 2073 656e 6420  "it should send 
+0000bc50: 6e65 7773 6c65 7474 6572 2074 6f20 7365  newsletter to se
+0000bc60: 7665 7261 6c20 6164 6472 6573 7365 7322  veral addresses"
+0000bc70: 2222 0a0a 2020 2020 2020 2020 6e65 7773  ""..        news
+0000bc80: 6c65 7474 6572 5f64 6174 6120 3d20 7b0a  letter_data = {.
+0000bc90: 2020 2020 2020 2020 2020 2020 2773 7562              'sub
+0000bca0: 6a65 6374 273a 2027 5468 6973 2069 7320  ject': 'This is 
+0000bcb0: 7468 6520 7375 626a 6563 7427 2c0a 2020  the subject',.  
+0000bcc0: 2020 2020 2020 2020 2020 2763 6f6e 7465            'conte
+0000bcd0: 6e74 273a 2027 3c68 323e 4865 6c6c 6f20  nt': '<h2>Hello 
+0000bce0: 6775 7973 213c 2f68 323e 3c70 3e56 6973  guys!</h2><p>Vis
+0000bcf0: 6974 203c 6120 6872 6566 3d22 6874 7470  it <a href="http
+0000bd00: 3a2f 2f74 6f74 6f2e 6672 223e 7573 3c2f  ://toto.fr">us</
+0000bd10: 613e 3c2f 703e 272c 0a20 2020 2020 2020  a></p>',.       
+0000bd20: 2020 2020 2027 7465 6d70 6c61 7465 273a       'template':
+0000bd30: 2027 7465 7374 2f6e 6577 736c 6574 7465   'test/newslette
+0000bd40: 725f 626c 7565 2e68 746d 6c27 2c0a 2020  r_blue.html',.  
+0000bd50: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+0000bd60: 6e65 7773 6c65 7474 6572 203d 206d 6f6d  newsletter = mom
+0000bd70: 6d79 2e6d 616b 6528 4e65 7773 6c65 7474  my.make(Newslett
+0000bd80: 6572 2c20 2a2a 6e65 7773 6c65 7474 6572  er, **newsletter
+0000bd90: 5f64 6174 6129 0a20 2020 2020 2020 200a  _data).        .
+0000bda0: 2020 2020 2020 2020 7363 685f 6474 203d          sch_dt =
+0000bdb0: 2074 696d 657a 6f6e 652e 6e6f 7728 2920   timezone.now() 
+0000bdc0: 2d20 7469 6d65 6465 6c74 6128 3129 0a20  - timedelta(1). 
+0000bdd0: 2020 2020 2020 2073 656e 6469 6e67 203d         sending =
+0000bde0: 206d 6f6d 6d79 2e6d 616b 6528 4e65 7773   mommy.make(News
+0000bdf0: 6c65 7474 6572 5365 6e64 696e 672c 206e  letterSending, n
+0000be00: 6577 736c 6574 7465 723d 6e65 7773 6c65  ewsletter=newsle
+0000be10: 7474 6572 2c20 7363 6865 6475 6c69 6e67  tter, scheduling
+0000be20: 5f64 743d 2073 6368 5f64 742c 2073 656e  _dt= sch_dt, sen
+0000be30: 6469 6e67 5f64 743d 204e 6f6e 6529 0a20  ding_dt= None). 
+0000be40: 2020 2020 2020 200a 2020 2020 2020 2020         .        
+0000be50: 6164 6472 6573 7365 7320 3d20 273b 272e  addresses = ';'.
+0000be60: 6a6f 696e 285b 2774 6f74 6f40 746f 746f  join(['toto@toto
+0000be70: 2e66 7227 5d2a 3529 0a20 2020 2020 2020  .fr']*5).       
+0000be80: 206d 616e 6167 656d 656e 742e 6361 6c6c   management.call
+0000be90: 5f63 6f6d 6d61 6e64 2827 7365 6e64 5f6e  _command('send_n
+0000bea0: 6577 736c 6574 7465 7227 2c20 6164 6472  ewsletter', addr
+0000beb0: 6573 7365 732c 2076 6572 626f 7369 7479  esses, verbosity
+0000bec0: 3d30 2920 2023 202c 2069 6e74 6572 6163  =0)  # , interac
+0000bed0: 7469 7665 3d46 616c 7365 290a 2020 2020  tive=False).    
+0000bee0: 2020 2020 0a20 2020 2020 2020 2073 656e      .        sen
+0000bef0: 6469 6e67 203d 204e 6577 736c 6574 7465  ding = Newslette
+0000bf00: 7253 656e 6469 6e67 2e6f 626a 6563 7473  rSending.objects
+0000bf10: 2e67 6574 2869 643d 7365 6e64 696e 672e  .get(id=sending.
+0000bf20: 6964 290a 2020 2020 2020 2020 7365 6c66  id).        self
+0000bf30: 2e61 7373 6572 744e 6f74 4571 7561 6c28  .assertNotEqual(
+0000bf40: 7365 6e64 696e 672e 7365 6e64 696e 675f  sending.sending_
+0000bf50: 6474 2c20 4e6f 6e65 290a 2020 2020 2020  dt, None).      
+0000bf60: 2020 0a20 2020 2020 2020 2073 656c 662e    .        self.
+0000bf70: 6173 7365 7274 4571 7561 6c28 6c65 6e28  assertEqual(len(
+0000bf80: 6d61 696c 2e6f 7574 626f 7829 2c20 3529  mail.outbox), 5)
+0000bf90: 0a20 2020 2020 2020 2066 6f72 2065 6d61  .        for ema
+0000bfa0: 696c 2069 6e20 6d61 696c 2e6f 7574 626f  il in mail.outbo
+0000bfb0: 783a 0a20 2020 2020 2020 2020 2020 2073  x:.            s
+0000bfc0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000bfd0: 656d 6169 6c2e 746f 2c20 5b27 746f 746f  email.to, ['toto
+0000bfe0: 4074 6f74 6f2e 6672 275d 290a 2020 2020  @toto.fr']).    
+0000bff0: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0000c000: 6572 7445 7175 616c 2865 6d61 696c 2e73  ertEqual(email.s
+0000c010: 7562 6a65 6374 2c20 6e65 7773 6c65 7474  ubject, newslett
+0000c020: 6572 5f64 6174 615b 2773 7562 6a65 6374  er_data['subject
+0000c030: 275d 290a 2020 2020 2020 2020 2020 2020  ']).            
+0000c040: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+0000c050: 656d 6169 6c2e 626f 6479 2e66 696e 6428  email.body.find(
+0000c060: 2748 656c 6c6f 2067 7579 7327 293e 3d30  'Hello guys')>=0
+0000c070: 290a 2020 2020 2020 2020 2020 2020 7365  ).            se
+0000c080: 6c66 2e61 7373 6572 7454 7275 6528 656d  lf.assertTrue(em
+0000c090: 6169 6c2e 616c 7465 726e 6174 6976 6573  ail.alternatives
+0000c0a0: 5b30 5d5b 315d 2c20 2274 6578 742f 6874  [0][1], "text/ht
+0000c0b0: 6d6c 2229 0a20 2020 2020 2020 2020 2020  ml").           
+0000c0c0: 2073 656c 662e 6173 7365 7274 5472 7565   self.assertTrue
+0000c0d0: 2865 6d61 696c 2e61 6c74 6572 6e61 7469  (email.alternati
+0000c0e0: 7665 735b 305d 5b30 5d2e 6669 6e64 2827  ves[0][0].find('
+0000c0f0: 4865 6c6c 6f20 6775 7973 2729 3e3d 3029  Hello guys')>=0)
+0000c100: 0a20 2020 2020 2020 200a 2020 2020 2020  .        .      
+0000c110: 2020 2320 6368 6563 6b20 7768 6574 2068    # check whet h
+0000c120: 6170 7065 6e73 2069 6620 636f 6d6d 616e  appens if comman
+0000c130: 6420 6973 2063 616c 6c65 6420 6167 6169  d is called agai
+0000c140: 6e0a 2020 2020 2020 2020 6d61 696c 2e6f  n.        mail.o
+0000c150: 7574 626f 7820 3d20 5b5d 0a20 2020 2020  utbox = [].     
+0000c160: 2020 206d 616e 6167 656d 656e 742e 6361     management.ca
+0000c170: 6c6c 5f63 6f6d 6d61 6e64 2827 7365 6e64  ll_command('send
+0000c180: 5f6e 6577 736c 6574 7465 7227 2c20 2774  _newsletter', 't
+0000c190: 6f74 6f40 746f 746f 2e66 7227 2c20 7665  oto@toto.fr', ve
+0000c1a0: 7262 6f73 6974 793d 3029 2020 2320 202c  rbosity=0)  #  ,
+0000c1b0: 2069 6e74 6572 6163 7469 7665 3d46 616c   interactive=Fal
+0000c1c0: 7365 290a 2020 2020 2020 2020 7365 6c66  se).        self
+0000c1d0: 2e61 7373 6572 7445 7175 616c 286c 656e  .assertEqual(len
+0000c1e0: 286d 6169 6c2e 6f75 7462 6f78 292c 2030  (mail.outbox), 0
+0000c1f0: 290a 0a20 2020 2064 6566 2074 6573 745f  )..    def test_
+0000c200: 7365 6e64 5f6e 6577 736c 6574 7465 725f  send_newsletter_
+0000c210: 6e6f 745f 7965 7428 7365 6c66 293a 0a20  not_yet(self):. 
+0000c220: 2020 2020 2020 200a 2020 2020 2020 2020         .        
+0000c230: 6e65 7773 6c65 7474 6572 5f64 6174 6120  newsletter_data 
+0000c240: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0000c250: 2773 7562 6a65 6374 273a 2027 5468 6973  'subject': 'This
+0000c260: 2069 7320 7468 6520 7375 626a 6563 7427   is the subject'
+0000c270: 2c0a 2020 2020 2020 2020 2020 2020 2763  ,.            'c
+0000c280: 6f6e 7465 6e74 273a 2027 3c68 323e 4865  ontent': '<h2>He
+0000c290: 6c6c 6f20 6775 7973 213c 2f68 323e 3c70  llo guys!</h2><p
+0000c2a0: 3e56 6973 6974 203c 6120 6872 6566 3d22  >Visit <a href="
+0000c2b0: 6874 7470 3a2f 2f74 6f74 6f2e 6672 223e  http://toto.fr">
+0000c2c0: 7573 3c2f 613e 3c2f 703e 272c 0a20 2020  us</a></p>',.   
+0000c2d0: 2020 2020 2020 2020 2027 7465 6d70 6c61           'templa
+0000c2e0: 7465 273a 2027 7465 7374 2f6e 6577 736c  te': 'test/newsl
+0000c2f0: 6574 7465 725f 626c 7565 2e68 746d 6c27  etter_blue.html'
+0000c300: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+0000c310: 2020 2020 6e65 7773 6c65 7474 6572 203d      newsletter =
+0000c320: 206d 6f6d 6d79 2e6d 616b 6528 4e65 7773   mommy.make(News
+0000c330: 6c65 7474 6572 2c20 2a2a 6e65 7773 6c65  letter, **newsle
+0000c340: 7474 6572 5f64 6174 6129 0a20 2020 2020  tter_data).     
+0000c350: 2020 200a 2020 2020 2020 2020 7363 685f     .        sch_
+0000c360: 6474 203d 2074 696d 657a 6f6e 652e 6e6f  dt = timezone.no
+0000c370: 7728 2920 2b20 7469 6d65 6465 6c74 6128  w() + timedelta(
+0000c380: 3129 0a20 2020 2020 2020 2073 656e 6469  1).        sendi
+0000c390: 6e67 203d 206d 6f6d 6d79 2e6d 616b 6528  ng = mommy.make(
+0000c3a0: 4e65 7773 6c65 7474 6572 5365 6e64 696e  NewsletterSendin
+0000c3b0: 672c 206e 6577 736c 6574 7465 723d 6e65  g, newsletter=ne
+0000c3c0: 7773 6c65 7474 6572 2c20 7363 6865 6475  wsletter, schedu
+0000c3d0: 6c69 6e67 5f64 743d 2073 6368 5f64 742c  ling_dt= sch_dt,
+0000c3e0: 2073 656e 6469 6e67 5f64 743d 204e 6f6e   sending_dt= Non
+0000c3f0: 6529 0a20 2020 2020 2020 200a 2020 2020  e).        .    
+0000c400: 2020 2020 6d61 6e61 6765 6d65 6e74 2e63      management.c
+0000c410: 616c 6c5f 636f 6d6d 616e 6428 2773 656e  all_command('sen
+0000c420: 645f 6e65 7773 6c65 7474 6572 272c 2027  d_newsletter', '
+0000c430: 746f 746f 4074 6f74 6f2e 6672 272c 2076  toto@toto.fr', v
+0000c440: 6572 626f 7369 7479 3d30 2920 2023 202c  erbosity=0)  # ,
+0000c450: 2069 6e74 6572 6163 7469 7665 3d46 616c   interactive=Fal
+0000c460: 7365 290a 2020 2020 2020 2020 0a20 2020  se).        .   
+0000c470: 2020 2020 2073 656e 6469 6e67 203d 204e       sending = N
+0000c480: 6577 736c 6574 7465 7253 656e 6469 6e67  ewsletterSending
+0000c490: 2e6f 626a 6563 7473 2e67 6574 2869 643d  .objects.get(id=
+0000c4a0: 7365 6e64 696e 672e 6964 290a 2020 2020  sending.id).    
+0000c4b0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0000c4c0: 7175 616c 2873 656e 6469 6e67 2e73 656e  qual(sending.sen
+0000c4d0: 6469 6e67 5f64 742c 204e 6f6e 6529 0a20  ding_dt, None). 
+0000c4e0: 2020 2020 2020 200a 2020 2020 2020 2020         .        
+0000c4f0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0000c500: 286c 656e 286d 6169 6c2e 6f75 7462 6f78  (len(mail.outbox
+0000c510: 292c 2030 290a 0a0a 406f 7665 7272 6964  ), 0)...@overrid
+0000c520: 655f 7365 7474 696e 6773 2843 4f4f 505f  e_settings(COOP_
+0000c530: 434d 535f 4652 4f4d 5f45 4d41 494c 3d27  CMS_FROM_EMAIL='
+0000c540: 636f 6e74 6163 7440 746f 746f 2e66 7227  contact@toto.fr'
+0000c550: 290a 636c 6173 7320 5365 6e64 456d 6169  ).class SendEmai
+0000c560: 6c54 6573 7428 5573 6572 4261 7365 5465  lTest(UserBaseTe
+0000c570: 7374 4361 7365 293a 0a20 2020 2022 2222  stCase):.    """
+0000c580: 7465 7374 2075 7469 6c73 2e73 656e 645f  test utils.send_
+0000c590: 656d 6169 6c22 2222 0a0a 2020 2020 6465  email"""..    de
+0000c5a0: 6620 7465 7374 5f73 656e 645f 656d 6169  f test_send_emai
+0000c5b0: 6c28 7365 6c66 293a 0a20 2020 2020 2020  l(self):.       
+0000c5c0: 2073 6574 7469 6e67 732e 5349 5445 5f49   settings.SITE_I
+0000c5d0: 4420 3d20 310a 2020 2020 2020 2020 7369  D = 1.        si
+0000c5e0: 7465 203d 2053 6974 652e 6f62 6a65 6374  te = Site.object
+0000c5f0: 732e 6765 7428 6964 3d73 6574 7469 6e67  s.get(id=setting
+0000c600: 732e 5349 5445 5f49 4429 0a20 2020 2020  s.SITE_ID).     
+0000c610: 2020 2073 6974 652e 646f 6d61 696e 203d     site.domain =
+0000c620: 2027 746f 746f 2e66 7227 0a20 2020 2020   'toto.fr'.     
+0000c630: 2020 2073 6974 652e 7361 7665 2829 0a0a     site.save()..
+0000c640: 2020 2020 2020 2020 7369 7465 3220 3d20          site2 = 
+0000c650: 6d6f 6d6d 792e 6d61 6b65 2853 6974 652c  mommy.make(Site,
+0000c660: 2064 6f6d 6169 6e3d 2274 6f74 6f2e 636f   domain="toto.co
+0000c670: 6d22 290a 0a20 2020 2020 2020 2023 2073  m")..        # s
+0000c680: 7562 6a65 6374 2c20 7465 6d70 6c61 7465  ubject, template
+0000c690: 5f6e 616d 652c 2063 6f6e 7465 7874 2c20  _name, context, 
+0000c6a0: 7369 7465 5f64 6f6d 6169 6e2c 2064 6573  site_domain, des
+0000c6b0: 7473 2c20 6c61 6e67 203d 204e 6f6e 652c  ts, lang = None,
+0000c6c0: 206c 6973 745f 756e 7375 6273 6372 6962   list_unsubscrib
+0000c6d0: 6520 3d20 4e6f 6e65 0a0a 2020 2020 2020  e = None..      
+0000c6e0: 2020 7375 626a 6563 7420 3d20 2248 656c    subject = "Hel
+0000c6f0: 6c6f 220a 2020 2020 2020 2020 6465 7374  lo".        dest
+0000c700: 7320 3d20 5b27 746f 746f 4074 6f74 6f2e  s = ['toto@toto.
+0000c710: 6672 275d 0a0a 2020 2020 2020 2020 7365  fr']..        se
+0000c720: 6e64 5f65 6d61 696c 2873 7562 6a65 6374  nd_email(subject
+0000c730: 2c20 2274 6573 742f 7465 7374 5f73 656e  , "test/test_sen
+0000c740: 645f 656d 6169 6c2e 6874 6d6c 222c 207b  d_email.html", {
+0000c750: 2776 616c 7565 273a 2027 4142 4344 277d  'value': 'ABCD'}
+0000c760: 2c20 2268 7474 703a 2f2f 2220 2b20 7369  , "http://" + si
+0000c770: 7465 322e 646f 6d61 696e 2c20 6465 7374  te2.domain, dest
+0000c780: 7329 0a0a 2020 2020 2020 2020 7365 6c66  s)..        self
+0000c790: 2e61 7373 6572 7445 7175 616c 280a 2020  .assertEqual(.  
+0000c7a0: 2020 2020 2020 2020 2020 5b5b 7465 7374            [[test
+0000c7b0: 5f61 6464 7265 7373 5d20 666f 7220 7465  _address] for te
+0000c7c0: 7374 5f61 6464 7265 7373 2069 6e20 6465  st_address in de
+0000c7d0: 7374 735d 2c0a 2020 2020 2020 2020 2020  sts],.          
+0000c7e0: 2020 5b72 6563 6569 7665 645f 656d 6169    [received_emai
+0000c7f0: 6c2e 746f 2066 6f72 2072 6563 6569 7665  l.to for receive
+0000c800: 645f 656d 6169 6c20 696e 206d 6169 6c2e  d_email in mail.
+0000c810: 6f75 7462 6f78 5d0a 2020 2020 2020 2020  outbox].        
+0000c820: 290a 2020 2020 2020 2020 666f 7220 7265  ).        for re
+0000c830: 6365 6976 6564 5f65 6d61 696c 2069 6e20  ceived_email in 
+0000c840: 6d61 696c 2e6f 7574 626f 783a 0a20 2020  mail.outbox:.   
+0000c850: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
+0000c860: 7365 7274 4571 7561 6c28 7265 6365 6976  sertEqual(receiv
+0000c870: 6564 5f65 6d61 696c 2e66 726f 6d5f 656d  ed_email.from_em
+0000c880: 6169 6c2c 2073 6574 7469 6e67 732e 434f  ail, settings.CO
+0000c890: 4f50 5f43 4d53 5f46 524f 4d5f 454d 4149  OP_CMS_FROM_EMAI
+0000c8a0: 4c29 0a20 2020 2020 2020 2020 2020 2073  L).            s
+0000c8b0: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000c8c0: 7265 6365 6976 6564 5f65 6d61 696c 2e73  received_email.s
+0000c8d0: 7562 6a65 6374 2c20 7375 626a 6563 7429  ubject, subject)
+0000c8e0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0000c8f0: 662e 6173 7365 7274 5472 7565 2872 6563  f.assertTrue(rec
+0000c900: 6569 7665 645f 656d 6169 6c2e 626f 6479  eived_email.body
+0000c910: 2e66 696e 6428 2741 4243 4427 2920 3e3d  .find('ABCD') >=
+0000c920: 2030 290a 2020 2020 2020 2020 2020 2020   0).            
+0000c930: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+0000c940: 7265 6365 6976 6564 5f65 6d61 696c 2e61  received_email.a
+0000c950: 6c74 6572 6e61 7469 7665 735b 305d 5b31  lternatives[0][1
+0000c960: 5d2c 2022 7465 7874 2f68 746d 6c22 290a  ], "text/html").
+0000c970: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000c980: 2e61 7373 6572 7454 7275 6528 7265 6365  .assertTrue(rece
+0000c990: 6976 6564 5f65 6d61 696c 2e61 6c74 6572  ived_email.alter
+0000c9a0: 6e61 7469 7665 735b 305d 5b30 5d2e 6669  natives[0][0].fi
+0000c9b0: 6e64 2827 4142 4344 2729 203e 3d20 3029  nd('ABCD') >= 0)
+0000c9c0: 0a20 2020 2020 2020 2020 2020 2073 6974  .            sit
+0000c9d0: 655f 7072 6566 6978 203d 2022 6874 7470  e_prefix = "http
+0000c9e0: 3a2f 2f22 202b 2073 6974 6532 2e64 6f6d  ://" + site2.dom
+0000c9f0: 6169 6e0a 2020 2020 2020 2020 2020 2020  ain.            
+0000ca00: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+0000ca10: 7265 6365 6976 6564 5f65 6d61 696c 2e61  received_email.a
+0000ca20: 6c74 6572 6e61 7469 7665 735b 305d 5b30  lternatives[0][0
+0000ca30: 5d2e 6669 6e64 2873 6974 655f 7072 6566  ].find(site_pref
+0000ca40: 6978 2920 3e3d 2030 290a 0a20 2020 2040  ix) >= 0)..    @
+0000ca50: 736b 6970 4966 2827 656e 2720 6e6f 7420  skipIf('en' not 
+0000ca60: 696e 205b 6c61 6e67 5f63 6f64 6520 666f  in [lang_code fo
+0000ca70: 7220 286c 616e 675f 636f 6465 2c20 6c61  r (lang_code, la
+0000ca80: 6e67 5f6e 616d 6529 2069 6e20 7365 7474  ng_name) in sett
+0000ca90: 696e 6773 2e4c 414e 4755 4147 4553 5d2c  ings.LANGUAGES],
+0000caa0: 2027 456e 676c 6973 6820 7265 7175 6972   'English requir
+0000cab0: 6564 2066 6f72 2074 6869 7320 7465 7374  ed for this test
+0000cac0: 2729 0a20 2020 2064 6566 2074 6573 745f  ').    def test_
+0000cad0: 7365 6e64 5f65 6d61 696c 5f65 6e28 7365  send_email_en(se
+0000cae0: 6c66 293a 0a20 2020 2020 2020 2073 6574  lf):.        set
+0000caf0: 7469 6e67 732e 5349 5445 5f49 4420 3d20  tings.SITE_ID = 
+0000cb00: 310a 2020 2020 2020 2020 7369 7465 203d  1.        site =
+0000cb10: 2053 6974 652e 6f62 6a65 6374 732e 6765   Site.objects.ge
+0000cb20: 7428 6964 3d73 6574 7469 6e67 732e 5349  t(id=settings.SI
+0000cb30: 5445 5f49 4429 0a20 2020 2020 2020 2073  TE_ID).        s
+0000cb40: 6974 652e 646f 6d61 696e 203d 2027 746f  ite.domain = 'to
+0000cb50: 746f 2e66 7227 0a20 2020 2020 2020 2073  to.fr'.        s
+0000cb60: 6974 652e 7361 7665 2829 0a0a 2020 2020  ite.save()..    
+0000cb70: 2020 2020 7369 7465 3220 3d20 6d6f 6d6d      site2 = momm
+0000cb80: 792e 6d61 6b65 2853 6974 652c 2064 6f6d  y.make(Site, dom
+0000cb90: 6169 6e3d 2274 6f74 6f2e 636f 6d22 290a  ain="toto.com").
+0000cba0: 0a20 2020 2020 2020 2023 2073 7562 6a65  .        # subje
+0000cbb0: 6374 2c20 7465 6d70 6c61 7465 5f6e 616d  ct, template_nam
+0000cbc0: 652c 2063 6f6e 7465 7874 2c20 7369 7465  e, context, site
+0000cbd0: 5f64 6f6d 6169 6e2c 2064 6573 7473 2c20  _domain, dests, 
+0000cbe0: 6c61 6e67 203d 204e 6f6e 652c 206c 6973  lang = None, lis
+0000cbf0: 745f 756e 7375 6273 6372 6962 6520 3d20  t_unsubscribe = 
+0000cc00: 4e6f 6e65 0a0a 2020 2020 2020 2020 7375  None..        su
+0000cc10: 626a 6563 7420 3d20 2248 656c 6c6f 220a  bject = "Hello".
+0000cc20: 2020 2020 2020 2020 6465 7374 7320 3d20          dests = 
+0000cc30: 5b27 746f 746f 4074 6f74 6f2e 6672 275d  ['toto@toto.fr']
+0000cc40: 0a0a 2020 2020 2020 2020 7365 6e64 5f65  ..        send_e
+0000cc50: 6d61 696c 2873 7562 6a65 6374 2c20 2274  mail(subject, "t
+0000cc60: 6573 742f 7465 7374 5f73 656e 645f 656d  est/test_send_em
+0000cc70: 6169 6c2e 6874 6d6c 222c 207b 2776 616c  ail.html", {'val
+0000cc80: 7565 273a 2027 4142 4344 277d 2c20 2268  ue': 'ABCD'}, "h
+0000cc90: 7474 703a 2f2f 2220 2b20 7369 7465 322e  ttp://" + site2.
+0000cca0: 646f 6d61 696e 2c20 6465 7374 732c 2027  domain, dests, '
+0000ccb0: 656e 2729 0a0a 2020 2020 2020 2020 7365  en')..        se
+0000ccc0: 6c66 2e61 7373 6572 7445 7175 616c 280a  lf.assertEqual(.
+0000ccd0: 2020 2020 2020 2020 2020 2020 5b5b 7465              [[te
+0000cce0: 7374 5f61 6464 7265 7373 5d20 666f 7220  st_address] for 
+0000ccf0: 7465 7374 5f61 6464 7265 7373 2069 6e20  test_address in 
+0000cd00: 6465 7374 735d 2c0a 2020 2020 2020 2020  dests],.        
+0000cd10: 2020 2020 5b72 6563 6569 7665 645f 656d      [received_em
+0000cd20: 6169 6c2e 746f 2066 6f72 2072 6563 6569  ail.to for recei
+0000cd30: 7665 645f 656d 6169 6c20 696e 206d 6169  ved_email in mai
+0000cd40: 6c2e 6f75 7462 6f78 5d0a 2020 2020 2020  l.outbox].      
+0000cd50: 2020 290a 2020 2020 2020 2020 666f 7220    ).        for 
+0000cd60: 7265 6365 6976 6564 5f65 6d61 696c 2069  received_email i
+0000cd70: 6e20 6d61 696c 2e6f 7574 626f 783a 0a0a  n mail.outbox:..
+0000cd80: 2020 2020 2020 2020 2020 2020 7472 616e              tran
+0000cd90: 736c 6174 6564 203d 2022 5472 616e 736c  slated = "Transl
+0000cda0: 6174 6520 7468 6973 2073 7472 696e 6720  ate this string 
+0000cdb0: 666f 7220 7465 7374 2220 2023 2075 6765  for test"  # uge
+0000cdc0: 7474 6578 7428 2254 7261 6e73 6c61 7465  ttext("Translate
+0000cdd0: 2074 6869 7320 7374 7269 6e67 2066 6f72   this string for
+0000cde0: 2074 6573 7422 290a 0a20 2020 2020 2020   test")..       
+0000cdf0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000ce00: 4571 7561 6c28 7265 6365 6976 6564 5f65  Equal(received_e
+0000ce10: 6d61 696c 2e66 726f 6d5f 656d 6169 6c2c  mail.from_email,
+0000ce20: 2073 6574 7469 6e67 732e 434f 4f50 5f43   settings.COOP_C
+0000ce30: 4d53 5f46 524f 4d5f 454d 4149 4c29 0a20  MS_FROM_EMAIL). 
+0000ce40: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000ce50: 6173 7365 7274 4571 7561 6c28 7265 6365  assertEqual(rece
+0000ce60: 6976 6564 5f65 6d61 696c 2e73 7562 6a65  ived_email.subje
+0000ce70: 6374 2c20 7375 626a 6563 7429 0a20 2020  ct, subject).   
+0000ce80: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
+0000ce90: 7365 7274 5472 7565 2872 6563 6569 7665  sertTrue(receive
+0000cea0: 645f 656d 6169 6c2e 626f 6479 2e66 696e  d_email.body.fin
+0000ceb0: 6428 2741 4243 4427 2920 3e3d 2030 290a  d('ABCD') >= 0).
+0000cec0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000ced0: 2e61 7373 6572 7454 7275 6528 7265 6365  .assertTrue(rece
+0000cee0: 6976 6564 5f65 6d61 696c 2e62 6f64 792e  ived_email.body.
+0000cef0: 6669 6e64 2874 7261 6e73 6c61 7465 6429  find(translated)
+0000cf00: 203e 3d20 3029 0a20 2020 2020 2020 2020   >= 0).         
+0000cf10: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+0000cf20: 7565 2872 6563 6569 7665 645f 656d 6169  ue(received_emai
+0000cf30: 6c2e 616c 7465 726e 6174 6976 6573 5b30  l.alternatives[0
+0000cf40: 5d5b 315d 2c20 2274 6578 742f 6874 6d6c  ][1], "text/html
+0000cf50: 2229 0a20 2020 2020 2020 2020 2020 2073  ").            s
+0000cf60: 656c 662e 6173 7365 7274 5472 7565 2872  elf.assertTrue(r
+0000cf70: 6563 6569 7665 645f 656d 6169 6c2e 616c  eceived_email.al
+0000cf80: 7465 726e 6174 6976 6573 5b30 5d5b 305d  ternatives[0][0]
+0000cf90: 2e66 696e 6428 2741 4243 4427 2920 3e3d  .find('ABCD') >=
+0000cfa0: 2030 290a 2020 2020 2020 2020 2020 2020   0).            
+0000cfb0: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+0000cfc0: 7265 6365 6976 6564 5f65 6d61 696c 2e61  received_email.a
+0000cfd0: 6c74 6572 6e61 7469 7665 735b 305d 5b30  lternatives[0][0
+0000cfe0: 5d2e 6669 6e64 2874 7261 6e73 6c61 7465  ].find(translate
+0000cff0: 6429 203e 3d20 3029 0a20 2020 2020 2020  d) >= 0).       
+0000d000: 2020 2020 2073 6974 655f 7072 6566 6978       site_prefix
+0000d010: 203d 2022 6874 7470 3a2f 2f22 202b 2073   = "http://" + s
+0000d020: 6974 6532 2e64 6f6d 6169 6e0a 2020 2020  ite2.domain.    
+0000d030: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0000d040: 6572 7454 7275 6528 7265 6365 6976 6564  ertTrue(received
+0000d050: 5f65 6d61 696c 2e61 6c74 6572 6e61 7469  _email.alternati
+0000d060: 7665 735b 305d 5b30 5d2e 6669 6e64 2873  ves[0][0].find(s
+0000d070: 6974 655f 7072 6566 6978 2920 3e3d 2030  ite_prefix) >= 0
+0000d080: 290a 0a20 2020 2040 736b 6970 4966 2827  )..    @skipIf('
+0000d090: 6672 2720 6e6f 7420 696e 205b 6c61 6e67  fr' not in [lang
+0000d0a0: 5f63 6f64 6520 666f 7220 286c 616e 675f  _code for (lang_
+0000d0b0: 636f 6465 2c20 6c61 6e67 5f6e 616d 6529  code, lang_name)
+0000d0c0: 2069 6e20 7365 7474 696e 6773 2e4c 414e   in settings.LAN
+0000d0d0: 4755 4147 4553 5d2c 2027 4672 656e 6368  GUAGES], 'French
+0000d0e0: 2072 6571 7569 7265 6420 666f 7220 7468   required for th
+0000d0f0: 6973 2074 6573 7427 290a 2020 2020 6465  is test').    de
+0000d100: 6620 7465 7374 5f73 656e 645f 656d 6169  f test_send_emai
+0000d110: 6c5f 6672 2873 656c 6629 3a0a 2020 2020  l_fr(self):.    
+0000d120: 2020 2020 7365 7474 696e 6773 2e53 4954      settings.SIT
+0000d130: 455f 4944 203d 2031 0a20 2020 2020 2020  E_ID = 1.       
+0000d140: 2073 6974 6520 3d20 5369 7465 2e6f 626a   site = Site.obj
+0000d150: 6563 7473 2e67 6574 2869 643d 7365 7474  ects.get(id=sett
+0000d160: 696e 6773 2e53 4954 455f 4944 290a 2020  ings.SITE_ID).  
+0000d170: 2020 2020 2020 7369 7465 2e64 6f6d 6169        site.domai
+0000d180: 6e20 3d20 2774 6f74 6f2e 6672 270a 2020  n = 'toto.fr'.  
+0000d190: 2020 2020 2020 7369 7465 2e73 6176 6528        site.save(
+0000d1a0: 290a 0a20 2020 2020 2020 2073 6974 6532  )..        site2
+0000d1b0: 203d 206d 6f6d 6d79 2e6d 616b 6528 5369   = mommy.make(Si
+0000d1c0: 7465 2c20 646f 6d61 696e 3d22 746f 746f  te, domain="toto
+0000d1d0: 2e63 6f6d 2229 0a0a 2020 2020 2020 2020  .com")..        
+0000d1e0: 2320 7375 626a 6563 742c 2074 656d 706c  # subject, templ
+0000d1f0: 6174 655f 6e61 6d65 2c20 636f 6e74 6578  ate_name, contex
+0000d200: 742c 2073 6974 655f 646f 6d61 696e 2c20  t, site_domain, 
+0000d210: 6465 7374 732c 206c 616e 6720 3d20 4e6f  dests, lang = No
+0000d220: 6e65 2c20 6c69 7374 5f75 6e73 7562 7363  ne, list_unsubsc
+0000d230: 7269 6265 203d 204e 6f6e 650a 0a20 2020  ribe = None..   
+0000d240: 2020 2020 2073 7562 6a65 6374 203d 2022       subject = "
+0000d250: 4865 6c6c 6f22 0a20 2020 2020 2020 2064  Hello".        d
+0000d260: 6573 7473 203d 205b 2774 6f74 6f40 746f  ests = ['toto@to
+0000d270: 746f 2e66 7227 5d0a 0a20 2020 2020 2020  to.fr']..       
+0000d280: 2073 656e 645f 656d 6169 6c28 7375 626a   send_email(subj
+0000d290: 6563 742c 2022 7465 7374 2f74 6573 745f  ect, "test/test_
+0000d2a0: 7365 6e64 5f65 6d61 696c 2e68 746d 6c22  send_email.html"
+0000d2b0: 2c20 7b27 7661 6c75 6527 3a20 2741 4243  , {'value': 'ABC
+0000d2c0: 4427 7d2c 2022 6874 7470 3a2f 2f22 202b  D'}, "http://" +
+0000d2d0: 2073 6974 6532 2e64 6f6d 6169 6e2c 2064   site2.domain, d
+0000d2e0: 6573 7473 2c20 2766 7227 290a 0a20 2020  ests, 'fr')..   
+0000d2f0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000d300: 4571 7561 6c28 0a20 2020 2020 2020 2020  Equal(.         
+0000d310: 2020 205b 5b74 6573 745f 6164 6472 6573     [[test_addres
+0000d320: 735d 2066 6f72 2074 6573 745f 6164 6472  s] for test_addr
+0000d330: 6573 7320 696e 2064 6573 7473 5d2c 0a20  ess in dests],. 
+0000d340: 2020 2020 2020 2020 2020 205b 7265 6365             [rece
+0000d350: 6976 6564 5f65 6d61 696c 2e74 6f20 666f  ived_email.to fo
+0000d360: 7220 7265 6365 6976 6564 5f65 6d61 696c  r received_email
+0000d370: 2069 6e20 6d61 696c 2e6f 7574 626f 785d   in mail.outbox]
+0000d380: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+0000d390: 2020 2066 6f72 2072 6563 6569 7665 645f     for received_
+0000d3a0: 656d 6169 6c20 696e 206d 6169 6c2e 6f75  email in mail.ou
+0000d3b0: 7462 6f78 3a0a 2020 2020 2020 2020 2020  tbox:.          
+0000d3c0: 2020 7472 616e 736c 6174 6564 203d 2022    translated = "
+0000d3d0: 5472 6164 7569 7420 6365 7474 6520 6368  Traduit cette ch
+0000d3e0: 6169 6e65 2070 6f75 7220 7465 7374 2220  aine pour test" 
+0000d3f0: 2023 2075 6765 7474 6578 7428 2254 7261   # ugettext("Tra
+0000d400: 6e73 6c61 7465 2074 6869 7320 7374 7269  nslate this stri
+0000d410: 6e67 2066 6f72 2074 6573 7422 290a 0a20  ng for test").. 
+0000d420: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000d430: 6173 7365 7274 4571 7561 6c28 7265 6365  assertEqual(rece
+0000d440: 6976 6564 5f65 6d61 696c 2e66 726f 6d5f  ived_email.from_
+0000d450: 656d 6169 6c2c 2073 6574 7469 6e67 732e  email, settings.
+0000d460: 434f 4f50 5f43 4d53 5f46 524f 4d5f 454d  COOP_CMS_FROM_EM
+0000d470: 4149 4c29 0a20 2020 2020 2020 2020 2020  AIL).           
+0000d480: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000d490: 6c28 7265 6365 6976 6564 5f65 6d61 696c  l(received_email
+0000d4a0: 2e73 7562 6a65 6374 2c20 7375 626a 6563  .subject, subjec
+0000d4b0: 7429 0a20 2020 2020 2020 2020 2020 2073  t).            s
+0000d4c0: 656c 662e 6173 7365 7274 5472 7565 2872  elf.assertTrue(r
+0000d4d0: 6563 6569 7665 645f 656d 6169 6c2e 626f  eceived_email.bo
+0000d4e0: 6479 2e66 696e 6428 2741 4243 4427 2920  dy.find('ABCD') 
+0000d4f0: 3e3d 2030 290a 2020 2020 2020 2020 2020  >= 0).          
+0000d500: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+0000d510: 6528 7265 6365 6976 6564 5f65 6d61 696c  e(received_email
+0000d520: 2e62 6f64 792e 6669 6e64 2874 7261 6e73  .body.find(trans
+0000d530: 6c61 7465 6429 203e 3d20 3029 0a20 2020  lated) >= 0).   
+0000d540: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
+0000d550: 7365 7274 5472 7565 2872 6563 6569 7665  sertTrue(receive
+0000d560: 645f 656d 6169 6c2e 616c 7465 726e 6174  d_email.alternat
+0000d570: 6976 6573 5b30 5d5b 315d 2c20 2274 6578  ives[0][1], "tex
+0000d580: 742f 6874 6d6c 2229 0a20 2020 2020 2020  t/html").       
+0000d590: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000d5a0: 5472 7565 2872 6563 6569 7665 645f 656d  True(received_em
+0000d5b0: 6169 6c2e 616c 7465 726e 6174 6976 6573  ail.alternatives
+0000d5c0: 5b30 5d5b 305d 2e66 696e 6428 2741 4243  [0][0].find('ABC
+0000d5d0: 4427 2920 3e3d 2030 290a 2020 2020 2020  D') >= 0).      
+0000d5e0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000d5f0: 7454 7275 6528 7265 6365 6976 6564 5f65  tTrue(received_e
+0000d600: 6d61 696c 2e61 6c74 6572 6e61 7469 7665  mail.alternative
+0000d610: 735b 305d 5b30 5d2e 6669 6e64 2874 7261  s[0][0].find(tra
+0000d620: 6e73 6c61 7465 6429 203e 3d20 3029 0a20  nslated) >= 0). 
+0000d630: 2020 2020 2020 2020 2020 2073 6974 655f             site_
+0000d640: 7072 6566 6978 203d 2022 6874 7470 3a2f  prefix = "http:/
+0000d650: 2f22 202b 2073 6974 6532 2e64 6f6d 6169  /" + site2.domai
+0000d660: 6e0a 2020 2020 2020 2020 2020 2020 7365  n.            se
+0000d670: 6c66 2e61 7373 6572 7454 7275 6528 7265  lf.assertTrue(re
+0000d680: 6365 6976 6564 5f65 6d61 696c 2e61 6c74  ceived_email.alt
+0000d690: 6572 6e61 7469 7665 735b 305d 5b30 5d2e  ernatives[0][0].
+0000d6a0: 6669 6e64 2873 6974 655f 7072 6566 6978  find(site_prefix
+0000d6b0: 2920 3e3d 2030 290a 0a20 2020 2040 736b  ) >= 0)..    @sk
+0000d6c0: 6970 4966 2827 736e 2720 696e 205b 6c61  ipIf('sn' in [la
+0000d6d0: 6e67 5f63 6f64 6520 666f 7220 286c 616e  ng_code for (lan
+0000d6e0: 675f 636f 6465 2c20 6c61 6e67 5f6e 616d  g_code, lang_nam
+0000d6f0: 6529 2069 6e20 7365 7474 696e 6773 2e4c  e) in settings.L
+0000d700: 414e 4755 4147 4553 5d2c 2027 4e6f 2043  ANGUAGES], 'No C
+0000d710: 6869 6e65 7365 2066 6f72 2074 6869 7320  hinese for this 
+0000d720: 7465 7374 2729 0a20 2020 2064 6566 2074  test').    def t
+0000d730: 6573 745f 7365 6e64 5f65 6d61 696c 5f73  est_send_email_s
+0000d740: 6e28 7365 6c66 293a 0a20 2020 2020 2020  n(self):.       
+0000d750: 2073 6574 7469 6e67 732e 5349 5445 5f49   settings.SITE_I
+0000d760: 4420 3d20 310a 2020 2020 2020 2020 7369  D = 1.        si
+0000d770: 7465 203d 2053 6974 652e 6f62 6a65 6374  te = Site.object
+0000d780: 732e 6765 7428 6964 3d73 6574 7469 6e67  s.get(id=setting
+0000d790: 732e 5349 5445 5f49 4429 0a20 2020 2020  s.SITE_ID).     
+0000d7a0: 2020 2073 6974 652e 646f 6d61 696e 203d     site.domain =
+0000d7b0: 2027 746f 746f 2e66 7227 0a20 2020 2020   'toto.fr'.     
+0000d7c0: 2020 2073 6974 652e 7361 7665 2829 0a0a     site.save()..
+0000d7d0: 2020 2020 2020 2020 7369 7465 3220 3d20          site2 = 
+0000d7e0: 6d6f 6d6d 792e 6d61 6b65 2853 6974 652c  mommy.make(Site,
+0000d7f0: 2064 6f6d 6169 6e3d 2274 6f74 6f2e 636f   domain="toto.co
+0000d800: 6d22 290a 0a20 2020 2020 2020 2023 2073  m")..        # s
+0000d810: 7562 6a65 6374 2c20 7465 6d70 6c61 7465  ubject, template
+0000d820: 5f6e 616d 652c 2063 6f6e 7465 7874 2c20  _name, context, 
+0000d830: 7369 7465 5f64 6f6d 6169 6e2c 2064 6573  site_domain, des
+0000d840: 7473 2c20 6c61 6e67 203d 204e 6f6e 652c  ts, lang = None,
+0000d850: 206c 6973 745f 756e 7375 6273 6372 6962   list_unsubscrib
+0000d860: 6520 3d20 4e6f 6e65 0a0a 2020 2020 2020  e = None..      
+0000d870: 2020 7375 626a 6563 7420 3d20 2248 656c    subject = "Hel
+0000d880: 6c6f 220a 2020 2020 2020 2020 6465 7374  lo".        dest
+0000d890: 7320 3d20 5b27 746f 746f 4074 6f74 6f2e  s = ['toto@toto.
+0000d8a0: 6672 275d 0a0a 2020 2020 2020 2020 7365  fr']..        se
+0000d8b0: 6e64 5f65 6d61 696c 2873 7562 6a65 6374  nd_email(subject
+0000d8c0: 2c20 2274 6573 742f 7465 7374 5f73 656e  , "test/test_sen
+0000d8d0: 645f 656d 6169 6c2e 6874 6d6c 222c 207b  d_email.html", {
+0000d8e0: 2776 616c 7565 273a 2027 4142 4344 277d  'value': 'ABCD'}
+0000d8f0: 2c20 2268 7474 703a 2f2f 2220 2b20 7369  , "http://" + si
+0000d900: 7465 322e 646f 6d61 696e 2c20 6465 7374  te2.domain, dest
+0000d910: 732c 2027 736e 2729 0a0a 2020 2020 2020  s, 'sn')..      
+0000d920: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000d930: 616c 280a 2020 2020 2020 2020 2020 2020  al(.            
+0000d940: 5b5b 7465 7374 5f61 6464 7265 7373 5d20  [[test_address] 
+0000d950: 666f 7220 7465 7374 5f61 6464 7265 7373  for test_address
+0000d960: 2069 6e20 6465 7374 735d 2c0a 2020 2020   in dests],.    
+0000d970: 2020 2020 2020 2020 5b72 6563 6569 7665          [receive
+0000d980: 645f 656d 6169 6c2e 746f 2066 6f72 2072  d_email.to for r
+0000d990: 6563 6569 7665 645f 656d 6169 6c20 696e  eceived_email in
+0000d9a0: 206d 6169 6c2e 6f75 7462 6f78 5d0a 2020   mail.outbox].  
+0000d9b0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0000d9c0: 666f 7220 7265 6365 6976 6564 5f65 6d61  for received_ema
+0000d9d0: 696c 2069 6e20 6d61 696c 2e6f 7574 626f  il in mail.outbo
+0000d9e0: 783a 0a20 2020 2020 2020 2020 2020 206c  x:.            l
+0000d9f0: 616e 6720 3d20 6765 745f 6c61 6e67 7561  ang = get_langua
+0000da00: 6765 2829 0a20 2020 2020 2020 2020 2020  ge().           
+0000da10: 2069 6620 6c61 6e67 203d 3d20 2766 7227   if lang == 'fr'
+0000da20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000da30: 2020 7472 616e 736c 6174 6564 203d 2022    translated = "
+0000da40: 5472 6164 7569 7420 6365 7474 6520 6368  Traduit cette ch
+0000da50: 6169 6e65 2070 6f75 7220 7465 7374 2220  aine pour test" 
+0000da60: 2023 2075 6765 7474 6578 7428 2254 7261   # ugettext("Tra
+0000da70: 6e73 6c61 7465 2074 6869 7320 7374 7269  nslate this stri
+0000da80: 6e67 2066 6f72 2074 6573 7422 290a 2020  ng for test").  
+0000da90: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0000daa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000dab0: 7472 616e 736c 6174 6564 203d 2022 5472  translated = "Tr
+0000dac0: 616e 736c 6174 6520 7468 6973 2073 7472  anslate this str
+0000dad0: 696e 6720 666f 7220 7465 7374 2220 2023  ing for test"  #
+0000dae0: 2075 6765 7474 6578 7428 2254 7261 6e73   ugettext("Trans
+0000daf0: 6c61 7465 2074 6869 7320 7374 7269 6e67  late this string
+0000db00: 2066 6f72 2074 6573 7422 290a 0a20 2020   for test")..   
+0000db10: 2020 2020 2020 2020 2073 656c 662e 6173           self.as
+0000db20: 7365 7274 4571 7561 6c28 7265 6365 6976  sertEqual(receiv
+0000db30: 6564 5f65 6d61 696c 2e66 726f 6d5f 656d  ed_email.from_em
+0000db40: 6169 6c2c 2073 6574 7469 6e67 732e 434f  ail, settings.CO
+0000db50: 4f50 5f43 4d53 5f46 524f 4d5f 454d 4149  OP_CMS_FROM_EMAI
+0000db60: 4c29 0a20 2020 2020 2020 2020 2020 2073  L).            s
+0000db70: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+0000db80: 7265 6365 6976 6564 5f65 6d61 696c 2e73  received_email.s
+0000db90: 7562 6a65 6374 2c20 7375 626a 6563 7429  ubject, subject)
+0000dba0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0000dbb0: 662e 6173 7365 7274 5472 7565 2872 6563  f.assertTrue(rec
+0000dbc0: 6569 7665 645f 656d 6169 6c2e 626f 6479  eived_email.body
+0000dbd0: 2e66 696e 6428 2741 4243 4427 2920 3e3d  .find('ABCD') >=
+0000dbe0: 2030 290a 2020 2020 2020 2020 2020 2020   0).            
+0000dbf0: 7365 6c66 2e61 7373 6572 7454 7275 6528  self.assertTrue(
+0000dc00: 7265 6365 6976 6564 5f65 6d61 696c 2e62  received_email.b
+0000dc10: 6f64 792e 6669 6e64 2874 7261 6e73 6c61  ody.find(transla
+0000dc20: 7465 6429 203e 3d20 3029 0a20 2020 2020  ted) >= 0).     
+0000dc30: 2020 2020 2020 2073 656c 662e 6173 7365         self.asse
+0000dc40: 7274 5472 7565 2872 6563 6569 7665 645f  rtTrue(received_
+0000dc50: 656d 6169 6c2e 616c 7465 726e 6174 6976  email.alternativ
+0000dc60: 6573 5b30 5d5b 315d 2c20 2274 6578 742f  es[0][1], "text/
+0000dc70: 6874 6d6c 2229 0a20 2020 2020 2020 2020  html").         
+0000dc80: 2020 2073 656c 662e 6173 7365 7274 5472     self.assertTr
+0000dc90: 7565 2872 6563 6569 7665 645f 656d 6169  ue(received_emai
+0000dca0: 6c2e 616c 7465 726e 6174 6976 6573 5b30  l.alternatives[0
+0000dcb0: 5d5b 305d 2e66 696e 6428 2741 4243 4427  ][0].find('ABCD'
+0000dcc0: 2920 3e3d 2030 290a 2020 2020 2020 2020  ) >= 0).        
+0000dcd0: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
+0000dce0: 7275 6528 7265 6365 6976 6564 5f65 6d61  rue(received_ema
+0000dcf0: 696c 2e61 6c74 6572 6e61 7469 7665 735b  il.alternatives[
+0000dd00: 305d 5b30 5d2e 6669 6e64 2874 7261 6e73  0][0].find(trans
+0000dd10: 6c61 7465 6429 203e 3d20 3029 0a20 2020  lated) >= 0).   
+0000dd20: 2020 2020 2020 2020 2073 6974 655f 7072           site_pr
+0000dd30: 6566 6978 203d 2022 6874 7470 3a2f 2f22  efix = "http://"
+0000dd40: 202b 2073 6974 6532 2e64 6f6d 6169 6e0a   + site2.domain.
+0000dd50: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+0000dd60: 2e61 7373 6572 7454 7275 6528 7265 6365  .assertTrue(rece
+0000dd70: 6976 6564 5f65 6d61 696c 2e61 6c74 6572  ived_email.alter
+0000dd80: 6e61 7469 7665 735b 305d 5b30 5d2e 6669  natives[0][0].fi
+0000dd90: 6e64 2873 6974 655f 7072 6566 6978 2920  nd(site_prefix) 
+0000dda0: 3e3d 2030 290a 0a0a 636c 6173 7320 4162  >= 0)...class Ab
+0000ddb0: 7355 726c 5465 7374 2855 7365 7242 6173  sUrlTest(UserBas
+0000ddc0: 6554 6573 7443 6173 6529 3a0a 2020 2020  eTestCase):.    
+0000ddd0: 0a20 2020 2064 6566 2073 6574 5570 2873  .    def setUp(s
+0000dde0: 656c 6629 3a0a 2020 2020 2020 2020 7375  elf):.        su
+0000ddf0: 7065 7228 4162 7355 726c 5465 7374 2c20  per(AbsUrlTest, 
+0000de00: 7365 6c66 292e 7365 7455 7028 290a 2020  self).setUp().  
+0000de10: 2020 2020 2020 7365 7474 696e 6773 2e53        settings.S
+0000de20: 4954 455f 4944 203d 2031 0a20 2020 2020  ITE_ID = 1.     
+0000de30: 2020 2073 656c 662e 7369 7465 203d 2053     self.site = S
+0000de40: 6974 652e 6f62 6a65 6374 732e 6765 7428  ite.objects.get(
+0000de50: 6964 3d73 6574 7469 6e67 732e 5349 5445  id=settings.SITE
+0000de60: 5f49 4429 0a20 2020 2020 2020 2073 656c  _ID).        sel
+0000de70: 662e 7369 7465 2e64 6f6d 6169 6e20 3d20  f.site.domain = 
+0000de80: 2274 6f74 6f2e 6672 220a 2020 2020 2020  "toto.fr".      
+0000de90: 2020 7365 6c66 2e73 6974 652e 7361 7665    self.site.save
+0000dea0: 2829 0a20 2020 2020 2020 2073 656c 662e  ().        self.
+0000deb0: 7369 7465 5f70 7265 6669 7820 3d20 2268  site_prefix = "h
+0000dec0: 7474 703a 2f2f 222b 7365 6c66 2e73 6974  ttp://"+self.sit
+0000ded0: 652e 646f 6d61 696e 0a20 2020 2020 2020  e.domain.       
+0000dee0: 2073 656c 662e 6e65 7773 6c65 7474 6572   self.newsletter
+0000def0: 203d 206d 6f6d 6d79 2e6d 616b 6528 4e65   = mommy.make(Ne
+0000df00: 7773 6c65 7474 6572 2c20 7369 7465 3d73  wsletter, site=s
+0000df10: 656c 662e 7369 7465 290a 2020 2020 2020  elf.site).      
+0000df20: 2020 2373 6574 7469 6e67 732e 434f 4f50    #settings.COOP
+0000df30: 5f43 4d53 5f53 4954 455f 5052 4546 4958  _CMS_SITE_PREFIX
+0000df40: 203d 2073 656c 662e 7369 7465 5f70 7265   = self.site_pre
+0000df50: 6669 780a 0a20 2020 2064 6566 205f 746f  fix..    def _to
+0000df60: 5f74 6578 7428 7365 6c66 2c20 736f 7570  _text(self, soup
+0000df70: 293a 0a20 2020 2020 2020 2074 6578 7420  ):.        text 
+0000df80: 3d20 736f 7570 2e70 7265 7474 6966 7928  = soup.prettify(
+0000df90: 290a 2020 2020 2020 2020 7465 7874 203d  ).        text =
+0000dfa0: 2073 7472 6970 5f61 5f74 6167 7328 7465   strip_a_tags(te
+0000dfb0: 7874 290a 2020 2020 2020 2020 7265 7475  xt).        retu
+0000dfc0: 726e 2074 6578 740a 2020 2020 0a20 2020  rn text.    .   
+0000dfd0: 2064 6566 2074 6573 745f 6872 6566 2873   def test_href(s
+0000dfe0: 656c 6629 3a0a 2020 2020 2020 2020 7465  elf):.        te
+0000dff0: 7374 5f68 746d 6c20 3d20 273c 6120 6872  st_html = '<a hr
+0000e000: 6566 3d22 2573 2f74 6f74 6f22 3e54 6869  ef="%s/toto">Thi
+0000e010: 7320 6973 2061 206c 696e 6b3c 2f61 3e27  s is a link</a>'
+0000e020: 0a20 2020 2020 2020 2072 656c 5f68 746d  .        rel_htm
+0000e030: 6c20 3d20 7465 7374 5f68 746d 6c20 2520  l = test_html % 
+0000e040: 2222 0a20 2020 2020 2020 2061 6273 5f68  "".        abs_h
+0000e050: 746d 6c20 3d20 7365 6c66 2e5f 746f 5f74  tml = self._to_t
+0000e060: 6578 7428 4265 6175 7469 6675 6c53 6f75  ext(BeautifulSou
+0000e070: 7028 7465 7374 5f68 746d 6c20 2520 7365  p(test_html % se
+0000e080: 6c66 2e73 6974 655f 7072 6566 6978 2929  lf.site_prefix))
+0000e090: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000e0a0: 7365 7274 4571 7561 6c28 6162 735f 6874  sertEqual(abs_ht
+0000e0b0: 6d6c 2c20 7374 7269 705f 615f 7461 6773  ml, strip_a_tags
+0000e0c0: 286d 616b 655f 6c69 6e6b 735f 6162 736f  (make_links_abso
+0000e0d0: 6c75 7465 2872 656c 5f68 746d 6c2c 2073  lute(rel_html, s
+0000e0e0: 656c 662e 6e65 7773 6c65 7474 6572 2929  elf.newsletter))
+0000e0f0: 290a 2020 2020 2020 2020 0a20 2020 2064  ).        .    d
+0000e100: 6566 2074 6573 745f 7372 6328 7365 6c66  ef test_src(self
+0000e110: 293a 0a20 2020 2020 2020 2074 6573 745f  ):.        test_
+0000e120: 6874 6d6c 203d 2027 3c68 313e 4d79 2069  html = '<h1>My i
+0000e130: 6d61 6765 3c2f 6831 3e3c 696d 6720 7372  mage</h1><img sr
+0000e140: 633d 2225 732f 746f 746f 223e 270a 2020  c="%s/toto">'.  
+0000e150: 2020 2020 2020 7265 6c5f 6874 6d6c 203d        rel_html =
+0000e160: 2074 6573 745f 6874 6d6c 2025 2022 220a   test_html % "".
+0000e170: 2020 2020 2020 2020 6162 735f 6874 6d6c          abs_html
+0000e180: 203d 2073 656c 662e 5f74 6f5f 7465 7874   = self._to_text
+0000e190: 2842 6561 7574 6966 756c 536f 7570 2874  (BeautifulSoup(t
+0000e1a0: 6573 745f 6874 6d6c 2025 2073 656c 662e  est_html % self.
+0000e1b0: 7369 7465 5f70 7265 6669 7829 290a 2020  site_prefix)).  
+0000e1c0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+0000e1d0: 7445 7175 616c 2861 6273 5f68 746d 6c2c  tEqual(abs_html,
+0000e1e0: 2073 7472 6970 5f61 5f74 6167 7328 6d61   strip_a_tags(ma
+0000e1f0: 6b65 5f6c 696e 6b73 5f61 6273 6f6c 7574  ke_links_absolut
+0000e200: 6528 7265 6c5f 6874 6d6c 2c20 7365 6c66  e(rel_html, self
+0000e210: 2e6e 6577 736c 6574 7465 7229 2929 0a20  .newsletter))). 
+0000e220: 2020 2020 2020 200a 2020 2020 6465 6620         .    def 
+0000e230: 7465 7374 5f72 656c 6174 6976 655f 7061  test_relative_pa
+0000e240: 7468 2873 656c 6629 3a0a 2020 2020 2020  th(self):.      
+0000e250: 2020 7465 7374 5f68 746d 6c20 3d20 273c    test_html = '<
+0000e260: 6831 3e4d 7920 696d 6167 653c 2f68 313e  h1>My image</h1>
+0000e270: 3c69 6d67 2073 7263 3d22 2573 2f74 6f74  <img src="%s/tot
+0000e280: 6f22 3e27 0a20 2020 2020 2020 2072 656c  o">'.        rel
+0000e290: 5f68 746d 6c20 3d20 7465 7374 5f68 746d  _html = test_htm
+0000e2a0: 6c20 2520 222e 2e2f 2e2e 2f2e 2e22 0a20  l % "../../..". 
+0000e2b0: 2020 2020 2020 2061 6273 5f68 746d 6c20         abs_html 
+0000e2c0: 3d20 7365 6c66 2e5f 746f 5f74 6578 7428  = self._to_text(
+0000e2d0: 4265 6175 7469 6675 6c53 6f75 7028 7465  BeautifulSoup(te
+0000e2e0: 7374 5f68 746d 6c20 2520 7365 6c66 2e73  st_html % self.s
+0000e2f0: 6974 655f 7072 6566 6978 2929 0a20 2020  ite_prefix)).   
+0000e300: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000e310: 4571 7561 6c28 6162 735f 6874 6d6c 2c20  Equal(abs_html, 
+0000e320: 7374 7269 705f 615f 7461 6773 286d 616b  strip_a_tags(mak
+0000e330: 655f 6c69 6e6b 735f 6162 736f 6c75 7465  e_links_absolute
+0000e340: 2872 656c 5f68 746d 6c2c 2073 656c 662e  (rel_html, self.
+0000e350: 6e65 7773 6c65 7474 6572 2929 290a 2020  newsletter))).  
+0000e360: 2020 0a20 2020 2064 6566 2074 6573 745f    .    def test_
+0000e370: 7372 635f 616e 645f 696d 6728 7365 6c66  src_and_img(self
+0000e380: 293a 0a20 2020 2020 2020 2074 6573 745f  ):.        test_
+0000e390: 6874 6d6c 203d 2027 3c68 313e 4d79 2069  html = '<h1>My i
+0000e3a0: 6d61 6765 3c2f 6831 3e3c 6120 6872 6566  mage</h1><a href
+0000e3b0: 3d22 7b30 7d2f 6131 223e 5468 6973 2069  ="{0}/a1">This i
+0000e3c0: 7320 6120 6c69 6e6b 3c2f 613e 3c69 6d67  s a link</a><img
+0000e3d0: 2073 7263 3d22 7b30 7d2f 746f 746f 222f   src="{0}/toto"/
+0000e3e0: 3e3c 696d 6720 7372 633d 227b 307d 2f74  ><img src="{0}/t
+0000e3f0: 6974 6922 2f3e 2720 2b20 5c0a 2020 2020  iti"/>' + \.    
+0000e400: 2020 2020 2020 2020 273c 6120 6872 6566          '<a href
+0000e410: 3d22 7b30 7d2f 6132 223e 5468 6973 2069  ="{0}/a2">This i
+0000e420: 7320 616e 6f74 6865 7220 6c69 6e6b 3c2f  s another link</
+0000e430: 613e 270a 2020 2020 2020 2020 7265 6c5f  a>'.        rel_
+0000e440: 6874 6d6c 203d 2074 6573 745f 6874 6d6c  html = test_html
+0000e450: 2e66 6f72 6d61 7428 2222 290a 2020 2020  .format("").    
+0000e460: 2020 2020 6874 6d6c 203d 2074 6573 745f      html = test_
+0000e470: 6874 6d6c 2e66 6f72 6d61 7428 7365 6c66  html.format(self
+0000e480: 2e73 6974 655f 7072 6566 6978 290a 2020  .site_prefix).  
+0000e490: 2020 2020 2020 6162 735f 6874 6d6c 203d        abs_html =
+0000e4a0: 2073 656c 662e 5f74 6f5f 7465 7874 2842   self._to_text(B
+0000e4b0: 6561 7574 6966 756c 536f 7570 2868 746d  eautifulSoup(htm
+0000e4c0: 6c29 290a 2020 2020 2020 2020 7365 6c66  l)).        self
+0000e4d0: 2e61 7373 6572 7445 7175 616c 2861 6273  .assertEqual(abs
+0000e4e0: 5f68 746d 6c2c 2073 7472 6970 5f61 5f74  _html, strip_a_t
+0000e4f0: 6167 7328 6d61 6b65 5f6c 696e 6b73 5f61  ags(make_links_a
+0000e500: 6273 6f6c 7574 6528 7265 6c5f 6874 6d6c  bsolute(rel_html
+0000e510: 2c20 7365 6c66 2e6e 6577 736c 6574 7465  , self.newslette
+0000e520: 7229 2929 0a20 2020 2020 2020 200a 2020  r))).        .  
+0000e530: 2020 6465 6620 7465 7374 5f68 7265 665f    def test_href_
+0000e540: 7265 6c5f 616e 645f 6162 7328 7365 6c66  rel_and_abs(self
+0000e550: 293a 0a20 2020 2020 2020 2074 6573 745f  ):.        test_
+0000e560: 6874 6d6c 203d 2027 3c61 2068 7265 663d  html = '<a href=
+0000e570: 2225 732f 746f 746f 223e 5468 6973 2069  "%s/toto">This i
+0000e580: 7320 6120 6c69 6e6b 3c2f 613e 3c61 2068  s a link</a><a h
+0000e590: 7265 663d 2268 7474 703a 2f2f 7777 772e  ref="http://www.
+0000e5a0: 6170 6964 6576 2e66 7222 3e61 6e6f 7468  apidev.fr">anoth
+0000e5b0: 6572 3c2f 613e 270a 2020 2020 2020 2020  er</a>'.        
+0000e5c0: 7265 6c5f 6874 6d6c 203d 2074 6573 745f  rel_html = test_
+0000e5d0: 6874 6d6c 2025 2022 220a 2020 2020 2020  html % "".      
+0000e5e0: 2020 6162 735f 6874 6d6c 203d 2073 656c    abs_html = sel
+0000e5f0: 662e 5f74 6f5f 7465 7874 2842 6561 7574  f._to_text(Beaut
+0000e600: 6966 756c 536f 7570 2874 6573 745f 6874  ifulSoup(test_ht
+0000e610: 6d6c 2025 2073 656c 662e 7369 7465 5f70  ml % self.site_p
+0000e620: 7265 6669 7829 290a 2020 2020 2020 2020  refix)).        
+0000e630: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0000e640: 2861 6273 5f68 746d 6c2c 2073 7472 6970  (abs_html, strip
+0000e650: 5f61 5f74 6167 7328 6d61 6b65 5f6c 696e  _a_tags(make_lin
+0000e660: 6b73 5f61 6273 6f6c 7574 6528 7265 6c5f  ks_absolute(rel_
+0000e670: 6874 6d6c 2c20 7365 6c66 2e6e 6577 736c  html, self.newsl
+0000e680: 6574 7465 7229 2929 0a20 2020 2020 2020  etter))).       
+0000e690: 200a 2020 2020 6465 6620 7465 7374 5f73   .    def test_s
+0000e6a0: 7479 6c65 5f69 6e5f 6265 7477 6565 6e28  tyle_in_between(
+0000e6b0: 7365 6c66 293a 0a20 2020 2020 2020 2074  self):.        t
+0000e6c0: 6573 745f 6874 6d6c 203d 2027 3c69 6d67  est_html = '<img
+0000e6d0: 2073 7479 6c65 3d22 6d61 7267 696e 3a20   style="margin: 
+0000e6e0: 303b 2077 6964 7468 3a20 3730 3070 783b  0; width: 700px;
+0000e6f0: 2220 7372 633d 2225 732f 6d65 6469 612f  " src="%s/media/
+0000e700: 696d 672f 6e65 7773 6c65 7474 6572 5f68  img/newsletter_h
+0000e710: 6561 6465 722e 706e 6722 2061 6c74 3d22  eader.png" alt="
+0000e720: 4c6f 676f 223e 270a 2020 2020 2020 2020  Logo">'.        
+0000e730: 7265 6c5f 6874 6d6c 203d 2074 6573 745f  rel_html = test_
+0000e740: 6874 6d6c 2025 2022 220a 2020 2020 2020  html % "".      
+0000e750: 2020 6162 735f 6874 6d6c 203d 2073 656c    abs_html = sel
+0000e760: 662e 5f74 6f5f 7465 7874 2842 6561 7574  f._to_text(Beaut
+0000e770: 6966 756c 536f 7570 2874 6573 745f 6874  ifulSoup(test_ht
+0000e780: 6d6c 2025 2073 656c 662e 7369 7465 5f70  ml % self.site_p
+0000e790: 7265 6669 7829 290a 2020 2020 2020 2020  refix)).        
+0000e7a0: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0000e7b0: 2861 6273 5f68 746d 6c2c 2073 7472 6970  (abs_html, strip
+0000e7c0: 5f61 5f74 6167 7328 6d61 6b65 5f6c 696e  _a_tags(make_lin
+0000e7d0: 6b73 5f61 6273 6f6c 7574 6528 7265 6c5f  ks_absolute(rel_
+0000e7e0: 6874 6d6c 2c20 7365 6c66 2e6e 6577 736c  html, self.newsl
+0000e7f0: 6574 7465 7229 2929 0a20 2020 2020 2020  etter))).       
+0000e800: 200a 2020 2020 6465 6620 7465 7374 5f6d   .    def test_m
+0000e810: 6973 7369 6e67 5f61 7474 7228 7365 6c66  issing_attr(self
+0000e820: 293a 0a20 2020 2020 2020 2074 6573 745f  ):.        test_
+0000e830: 6874 6d6c 203d 2027 3c69 6d67 2061 6c74  html = '<img alt
+0000e840: 3d22 4c6f 676f 2220 2f3e 3c61 206e 616d  ="Logo" /><a nam
+0000e850: 653d 2261 6122 3e6c 696e 6b3c 2f61 3e27  e="aa">link</a>'
+0000e860: 0a20 2020 2020 2020 2061 6273 5f68 746d  .        abs_htm
+0000e870: 6c20 3d20 7365 6c66 2e5f 746f 5f74 6578  l = self._to_tex
+0000e880: 7428 4265 6175 7469 6675 6c53 6f75 7028  t(BeautifulSoup(
+0000e890: 7465 7374 5f68 746d 6c29 290a 2020 2020  test_html)).    
+0000e8a0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0000e8b0: 7175 616c 2861 6273 5f68 746d 6c2c 2073  qual(abs_html, s
+0000e8c0: 7472 6970 5f61 5f74 6167 7328 6d61 6b65  trip_a_tags(make
+0000e8d0: 5f6c 696e 6b73 5f61 6273 6f6c 7574 6528  _links_absolute(
+0000e8e0: 7465 7374 5f68 746d 6c2c 2073 656c 662e  test_html, self.
+0000e8f0: 6e65 7773 6c65 7474 6572 2929 290a 0a0a  newsletter)))...
+0000e900: 636c 6173 7320 4e65 7773 6c65 7474 6572  class Newsletter
+0000e910: 4672 6965 6e64 6c79 5465 6d70 6c61 7465  FriendlyTemplate
+0000e920: 5461 6773 5465 7374 2842 6173 6554 6573  TagsTest(BaseTes
+0000e930: 7443 6173 6529 3a0a 2020 2020 0a20 2020  tCase):.    .   
+0000e940: 2074 656d 706c 6174 655f 636f 6e74 656e   template_conten
+0000e950: 7420 3d20 2222 220a 2020 2020 2020 2020  t = """.        
+0000e960: 7b7b 2520 6c6f 6164 2063 6f6f 705f 7574  {{% load coop_ut
+0000e970: 696c 7320 257d 7d0a 2020 2020 2020 2020  ils %}}.        
+0000e980: 7b7b 2520 6e6c 665f 6373 7320 7b30 7d20  {{% nlf_css {0} 
+0000e990: 257d 7d0a 2020 2020 2020 2020 2020 2020  %}}.            
+0000e9a0: 3c61 3e4f 6e65 3c2f 613e 0a20 2020 2020  <a>One</a>.     
+0000e9b0: 2020 2020 2020 203c 613e 5477 6f3c 2f61         <a>Two</a
+0000e9c0: 3e0a 2020 2020 2020 2020 2020 2020 3c61  >.            <a
+0000e9d0: 3e54 6872 6565 3c2f 613e 0a20 2020 2020  >Three</a>.     
+0000e9e0: 2020 2020 2020 203c 696d 6720 2f3e 0a20         <img />. 
+0000e9f0: 2020 2020 2020 2020 2020 203c 7461 626c             <tabl
+0000ea00: 653e 3c74 723e 3c74 643e 3c2f 7464 3e3c  e><tr><td></td><
+0000ea10: 7464 3e3c 2f74 643e 3c2f 7461 626c 653e  td></td></table>
+0000ea20: 0a20 2020 2020 2020 2020 2020 203c 7461  .            <ta
+0000ea30: 626c 6520 636c 6173 733d 2274 6869 732d  ble class="this-
+0000ea40: 6f6e 6522 3e3c 7472 3e3c 7464 3e3c 2f74  one"><tr><td></t
+0000ea50: 643e 3c74 643e 3c2f 7464 3e3c 2f74 6162  d><td></td></tab
+0000ea60: 6c65 3e0a 2020 2020 2020 2020 7b7b 2520  le>.        {{% 
+0000ea70: 656e 645f 6e6c 665f 6373 7320 257d 7d0a  end_nlf_css %}}.
+0000ea80: 2020 2020 2222 220a 2020 2020 0a20 2020      """.    .   
+0000ea90: 2064 6566 2074 6573 745f 656d 6169 6c5f   def test_email_
+0000eaa0: 6d6f 6465 5f69 735f 696e 6c69 6e65 2873  mode_is_inline(s
+0000eab0: 656c 6629 3a0a 2020 2020 2020 2020 7465  elf):.        te
+0000eac0: 6d70 6c61 7465 203d 2073 656c 662e 7465  mplate = self.te
+0000ead0: 6d70 6c61 7465 5f63 6f6e 7465 6e74 2e66  mplate_content.f
+0000eae0: 6f72 6d61 7428 2761 3d22 636f 6c6f 723a  ormat('a="color:
+0000eaf0: 2072 6564 3b22 2729 0a20 2020 2020 2020   red;"').       
+0000eb00: 2074 706c 203d 2054 656d 706c 6174 6528   tpl = Template(
+0000eb10: 7465 6d70 6c61 7465 290a 2020 2020 2020  template).      
+0000eb20: 2020 6874 6d6c 203d 2074 706c 2e72 656e    html = tpl.ren
+0000eb30: 6465 7228 436f 6e74 6578 7428 7b27 6279  der(Context({'by
+0000eb40: 5f65 6d61 696c 273a 2054 7275 657d 2929  _email': True}))
+0000eb50: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000eb60: 7365 7274 4571 7561 6c28 302c 2068 746d  sertEqual(0, htm
+0000eb70: 6c2e 636f 756e 7428 273c 7374 796c 653e  l.count('<style>
+0000eb80: 2729 290a 2020 2020 2020 2020 7365 6c66  ')).        self
+0000eb90: 2e61 7373 6572 7445 7175 616c 2833 2c20  .assertEqual(3, 
+0000eba0: 6874 6d6c 2e63 6f75 6e74 2827 3c61 2073  html.count('<a s
+0000ebb0: 7479 6c65 3d22 636f 6c6f 723a 2072 6564  tyle="color: red
+0000ebc0: 3b22 3e27 2929 0a20 2020 2020 2020 200a  ;">')).        .
+0000ebd0: 2020 2020 6465 6620 7465 7374 5f65 6469      def test_edi
+0000ebe0: 745f 6d6f 6465 5f69 735f 696e 5f73 7479  t_mode_is_in_sty
+0000ebf0: 6c65 2873 656c 6629 3a0a 2020 2020 2020  le(self):.      
+0000ec00: 2020 7465 6d70 6c61 7465 203d 2073 656c    template = sel
+0000ec10: 662e 7465 6d70 6c61 7465 5f63 6f6e 7465  f.template_conte
+0000ec20: 6e74 2e66 6f72 6d61 7428 2761 3d22 636f  nt.format('a="co
+0000ec30: 6c6f 723a 2072 6564 3b22 2729 0a20 2020  lor: red;"').   
+0000ec40: 2020 2020 2074 706c 203d 2054 656d 706c       tpl = Templ
+0000ec50: 6174 6528 7465 6d70 6c61 7465 290a 2020  ate(template).  
+0000ec60: 2020 2020 2020 6874 6d6c 203d 2074 706c        html = tpl
+0000ec70: 2e72 656e 6465 7228 436f 6e74 6578 7428  .render(Context(
+0000ec80: 7b27 6279 5f65 6d61 696c 273a 2046 616c  {'by_email': Fal
+0000ec90: 7365 7d29 290a 2020 2020 2020 2020 7365  se})).        se
+0000eca0: 6c66 2e61 7373 6572 7445 7175 616c 2831  lf.assertEqual(1
+0000ecb0: 2c20 6874 6d6c 2e63 6f75 6e74 2827 3c73  , html.count('<s
+0000ecc0: 7479 6c65 3e27 2929 0a20 2020 2020 2020  tyle>')).       
+0000ecd0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000ece0: 6c28 312c 2068 746d 6c2e 636f 756e 7428  l(1, html.count(
+0000ecf0: 2761 207b 2063 6f6c 6f72 3a20 7265 643b  'a { color: red;
+0000ed00: 207d 2729 290a 2020 2020 2020 2020 7365   }')).        se
+0000ed10: 6c66 2e61 7373 6572 7445 7175 616c 2830  lf.assertEqual(0
+0000ed20: 2c20 6874 6d6c 2e63 6f75 6e74 2827 3c61  , html.count('<a
+0000ed30: 2073 7479 6c65 3d22 636f 6c6f 723a 2072   style="color: r
+0000ed40: 6564 3b22 3e27 2929 0a20 2020 2020 2020  ed;">')).       
+0000ed50: 200a 2020 2020 6465 6620 7465 7374 5f73   .    def test_s
+0000ed60: 6576 6572 616c 5f61 7267 735f 656d 6169  everal_args_emai
+0000ed70: 6c5f 6d6f 6465 5f69 735f 696e 6c69 6e65  l_mode_is_inline
+0000ed80: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+0000ed90: 7465 6d70 6c61 7465 203d 2073 656c 662e  template = self.
+0000eda0: 7465 6d70 6c61 7465 5f63 6f6e 7465 6e74  template_content
+0000edb0: 2e66 6f72 6d61 7428 0a20 2020 2020 2020  .format(.       
+0000edc0: 2020 2020 2027 613d 2263 6f6c 6f72 3a20       'a="color: 
+0000edd0: 7265 643b 2062 6163 6b67 726f 756e 643a  red; background:
+0000ede0: 2062 6c75 653b 2220 7464 3d22 626f 7264   blue;" td="bord
+0000edf0: 6572 3a20 6e6f 6e65 3b22 2069 6d67 3d22  er: none;" img="
+0000ee00: 7769 6474 683a 2031 3030 7078 3b22 270a  width: 100px;"'.
+0000ee10: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0000ee20: 2020 7470 6c20 3d20 5465 6d70 6c61 7465    tpl = Template
+0000ee30: 2874 656d 706c 6174 6529 0a20 2020 2020  (template).     
+0000ee40: 2020 2068 746d 6c20 3d20 7470 6c2e 7265     html = tpl.re
+0000ee50: 6e64 6572 2843 6f6e 7465 7874 287b 2762  nder(Context({'b
+0000ee60: 795f 656d 6169 6c27 3a20 5472 7565 7d29  y_email': True})
+0000ee70: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0000ee80: 7373 6572 7445 7175 616c 2830 2c20 6874  ssertEqual(0, ht
+0000ee90: 6d6c 2e63 6f75 6e74 2827 3c73 7479 6c65  ml.count('<style
+0000eea0: 3e27 2929 0a20 2020 2020 2020 2073 656c  >')).        sel
+0000eeb0: 662e 6173 7365 7274 4571 7561 6c28 332c  f.assertEqual(3,
+0000eec0: 2068 746d 6c2e 636f 756e 7428 273c 6120   html.count('<a 
+0000eed0: 7374 796c 653d 2263 6f6c 6f72 3a20 7265  style="color: re
+0000eee0: 643b 2062 6163 6b67 726f 756e 643a 2062  d; background: b
+0000eef0: 6c75 653b 223e 2729 290a 2020 2020 2020  lue;">')).      
+0000ef00: 2020 7365 6c66 2e61 7373 6572 7445 7175    self.assertEqu
+0000ef10: 616c 2831 2c20 6874 6d6c 2e63 6f75 6e74  al(1, html.count
+0000ef20: 2827 3c69 6d67 2073 7479 6c65 3d22 7769  ('<img style="wi
+0000ef30: 6474 683a 2031 3030 7078 3b22 2f3e 2729  dth: 100px;"/>')
+0000ef40: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0000ef50: 7373 6572 7445 7175 616c 2834 2c20 6874  ssertEqual(4, ht
+0000ef60: 6d6c 2e63 6f75 6e74 2827 3c74 6420 7374  ml.count('<td st
+0000ef70: 796c 653d 2262 6f72 6465 723a 206e 6f6e  yle="border: non
+0000ef80: 653b 223e 2729 290a 2020 2020 2020 2020  e;">')).        
+0000ef90: 0a20 2020 2064 6566 2074 6573 745f 7365  .    def test_se
+0000efa0: 7665 7261 6c5f 6172 6773 5f65 6469 745f  veral_args_edit_
+0000efb0: 6d6f 6465 5f69 735f 696e 5f73 7479 6c65  mode_is_in_style
+0000efc0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+0000efd0: 7465 6d70 6c61 7465 203d 2073 656c 662e  template = self.
+0000efe0: 7465 6d70 6c61 7465 5f63 6f6e 7465 6e74  template_content
+0000eff0: 2e66 6f72 6d61 7428 0a20 2020 2020 2020  .format(.       
+0000f000: 2020 2020 2027 613d 2263 6f6c 6f72 3a20       'a="color: 
+0000f010: 7265 643b 2062 6163 6b67 726f 756e 643a  red; background:
+0000f020: 2062 6c75 653b 2220 7464 3d22 626f 7264   blue;" td="bord
+0000f030: 6572 3a20 6e6f 6e65 3b22 2069 6d67 3d22  er: none;" img="
+0000f040: 7769 6474 683a 2031 3030 7078 3b22 270a  width: 100px;"'.
+0000f050: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0000f060: 2020 7470 6c20 3d20 5465 6d70 6c61 7465    tpl = Template
+0000f070: 2874 656d 706c 6174 6529 0a20 2020 2020  (template).     
+0000f080: 2020 2068 746d 6c20 3d20 7470 6c2e 7265     html = tpl.re
+0000f090: 6e64 6572 2843 6f6e 7465 7874 287b 2762  nder(Context({'b
+0000f0a0: 795f 656d 6169 6c27 3a20 4661 6c73 657d  y_email': False}
+0000f0b0: 2929 0a20 2020 2020 2020 2073 656c 662e  )).        self.
+0000f0c0: 6173 7365 7274 4571 7561 6c28 312c 2068  assertEqual(1, h
+0000f0d0: 746d 6c2e 636f 756e 7428 273c 7374 796c  tml.count('<styl
+0000f0e0: 653e 2729 290a 2020 2020 2020 2020 7365  e>')).        se
+0000f0f0: 6c66 2e61 7373 6572 7445 7175 616c 2831  lf.assertEqual(1
+0000f100: 2c20 6874 6d6c 2e63 6f75 6e74 2827 6120  , html.count('a 
+0000f110: 7b20 636f 6c6f 723a 2072 6564 3b20 6261  { color: red; ba
+0000f120: 636b 6772 6f75 6e64 3a20 626c 7565 3b20  ckground: blue; 
+0000f130: 7d27 2929 0a20 2020 2020 2020 2073 656c  }')).        sel
+0000f140: 662e 6173 7365 7274 4571 7561 6c28 312c  f.assertEqual(1,
+0000f150: 2068 746d 6c2e 636f 756e 7428 2769 6d67   html.count('img
+0000f160: 207b 2077 6964 7468 3a20 3130 3070 783b   { width: 100px;
+0000f170: 207d 2729 290a 2020 2020 2020 2020 7365   }')).        se
+0000f180: 6c66 2e61 7373 6572 7445 7175 616c 2831  lf.assertEqual(1
+0000f190: 2c20 6874 6d6c 2e63 6f75 6e74 2827 7464  , html.count('td
+0000f1a0: 207b 2062 6f72 6465 723a 206e 6f6e 653b   { border: none;
+0000f1b0: 207d 2729 290a 2020 2020 2020 2020 7365   }')).        se
+0000f1c0: 6c66 2e61 7373 6572 7445 7175 616c 2830  lf.assertEqual(0
+0000f1d0: 2c20 6874 6d6c 2e63 6f75 6e74 2827 3c61  , html.count('<a
+0000f1e0: 2073 7479 6c65 3d22 636f 6c6f 723a 2072   style="color: r
+0000f1f0: 6564 3b20 6261 636b 6772 6f75 6e64 3a20  ed; background: 
+0000f200: 626c 7565 3b22 3e27 2929 0a20 2020 2020  blue;">')).     
+0000f210: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0000f220: 7561 6c28 302c 2068 746d 6c2e 636f 756e  ual(0, html.coun
+0000f230: 7428 273c 696d 6720 7374 796c 653d 2277  t('<img style="w
+0000f240: 6964 7468 3a20 3130 3070 783b 223e 2729  idth: 100px;">')
+0000f250: 290a 2020 2020 2020 2020 7365 6c66 2e61  ).        self.a
+0000f260: 7373 6572 7445 7175 616c 2830 2c20 6874  ssertEqual(0, ht
+0000f270: 6d6c 2e63 6f75 6e74 2827 3c74 6420 7374  ml.count('<td st
+0000f280: 796c 653d 2262 6f72 6465 723a 206e 6f6e  yle="border: non
+0000f290: 653b 223e 2729 290a 2020 2020 2020 2020  e;">')).        
+0000f2a0: 0a20 2020 2064 6566 2074 6573 745f 636c  .    def test_cl
+0000f2b0: 6173 735f 7365 6c65 6374 6f72 5f65 6d61  ass_selector_ema
+0000f2c0: 696c 5f6d 6f64 655f 6973 5f69 6e6c 696e  il_mode_is_inlin
+0000f2d0: 6528 7365 6c66 293a 0a20 2020 2020 2020  e(self):.       
+0000f2e0: 2074 656d 706c 6174 6520 3d20 7365 6c66   template = self
+0000f2f0: 2e74 656d 706c 6174 655f 636f 6e74 656e  .template_conten
+0000f300: 742e 666f 726d 6174 2827 2274 6162 6c65  t.format('"table
+0000f310: 2e74 6869 732d 6f6e 6520 7464 223d 2262  .this-one td"="b
+0000f320: 6f72 6465 723a 206e 6f6e 653b 2227 290a  order: none;"').
+0000f330: 2020 2020 2020 2020 7470 6c20 3d20 5465          tpl = Te
+0000f340: 6d70 6c61 7465 2874 656d 706c 6174 6529  mplate(template)
+0000f350: 0a20 2020 2020 2020 2068 746d 6c20 3d20  .        html = 
+0000f360: 7470 6c2e 7265 6e64 6572 2843 6f6e 7465  tpl.render(Conte
+0000f370: 7874 287b 2762 795f 656d 6169 6c27 3a20  xt({'by_email': 
+0000f380: 5472 7565 7d29 290a 2020 2020 2020 2020  True})).        
+0000f390: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0000f3a0: 2830 2c20 6874 6d6c 2e63 6f75 6e74 2827  (0, html.count('
+0000f3b0: 3c73 7479 6c65 3e27 2929 0a20 2020 2020  <style>')).     
+0000f3c0: 2020 2073 656c 662e 6173 7365 7274 4571     self.assertEq
+0000f3d0: 7561 6c28 302c 2068 746d 6c2e 636f 756e  ual(0, html.coun
+0000f3e0: 7428 273c 6120 7374 796c 653d 2263 6f6c  t('<a style="col
+0000f3f0: 6f72 3a20 7265 643b 2062 6163 6b67 726f  or: red; backgro
+0000f400: 756e 643a 2062 6c75 653b 223e 2729 290a  und: blue;">')).
+0000f410: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0000f420: 6572 7445 7175 616c 2830 2c20 6874 6d6c  ertEqual(0, html
+0000f430: 2e63 6f75 6e74 2827 3c69 6d67 2073 7479  .count('<img sty
+0000f440: 6c65 3d22 7769 6474 683a 2031 3030 7078  le="width: 100px
+0000f450: 3b22 2f3e 2729 290a 2020 2020 2020 2020  ;"/>')).        
+0000f460: 7365 6c66 2e61 7373 6572 7445 7175 616c  self.assertEqual
+0000f470: 2832 2c20 6874 6d6c 2e63 6f75 6e74 2827  (2, html.count('
+0000f480: 3c74 6420 7374 796c 653d 2262 6f72 6465  <td style="borde
+0000f490: 723a 206e 6f6e 653b 223e 2729 290a 0a20  r: none;">')).. 
+0000f4a0: 2020 2064 6566 2074 6573 745f 646f 6e74     def test_dont
+0000f4b0: 5f6f 7665 7277 7269 7465 5f69 6e6c 696e  _overwrite_inlin
+0000f4c0: 6528 7365 6c66 293a 0a0a 2020 2020 2020  e(self):..      
+0000f4d0: 2020 7465 6d70 6c61 7465 5f63 6f6e 7465    template_conte
+0000f4e0: 6e74 203d 2022 2222 0a20 2020 2020 2020  nt = """.       
+0000f4f0: 2020 2020 207b 7b25 206c 6f61 6420 636f       {{% load co
+0000f500: 6f70 5f75 7469 6c73 2025 7d7d 0a20 2020  op_utils %}}.   
+0000f510: 2020 2020 2020 2020 207b 7b25 206e 6c66           {{% nlf
+0000f520: 5f63 7373 207b 307d 2025 7d7d 0a20 2020  _css {0} %}}.   
+0000f530: 2020 2020 2020 2020 2020 2020 203c 6120               <a 
+0000f540: 7374 796c 653d 2263 6f6c 6f72 3a20 2366  style="color: #f
+0000f550: 6666 223e 4f6e 653c 2f61 3e0a 2020 2020  ff">One</a>.    
+0000f560: 2020 2020 2020 2020 2020 2020 3c61 3e54              <a>T
+0000f570: 776f 3c2f 613e 0a20 2020 2020 2020 2020  wo</a>.         
+0000f580: 2020 207b 7b25 2065 6e64 5f6e 6c66 5f63     {{% end_nlf_c
+0000f590: 7373 2025 7d7d 0a20 2020 2020 2020 2022  ss %}}.        "
+0000f5a0: 2222 0a0a 2020 2020 2020 2020 7465 6d70  ""..        temp
+0000f5b0: 6c61 7465 203d 2074 656d 706c 6174 655f  late = template_
+0000f5c0: 636f 6e74 656e 742e 666f 726d 6174 2827  content.format('
+0000f5d0: 613d 2263 6f6c 6f72 3a20 7265 643b 2062  a="color: red; b
+0000f5e0: 6163 6b67 726f 756e 643a 2062 6c75 653b  ackground: blue;
+0000f5f0: 2227 290a 2020 2020 2020 2020 7470 6c20  "').        tpl 
+0000f600: 3d20 5465 6d70 6c61 7465 2874 656d 706c  = Template(templ
+0000f610: 6174 6529 0a20 2020 2020 2020 2068 746d  ate).        htm
+0000f620: 6c20 3d20 7470 6c2e 7265 6e64 6572 2843  l = tpl.render(C
+0000f630: 6f6e 7465 7874 287b 2762 795f 656d 6169  ontext({'by_emai
+0000f640: 6c27 3a20 5472 7565 7d29 290a 2020 2020  l': True})).    
+0000f650: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+0000f660: 7175 616c 2831 2c20 6874 6d6c 2e63 6f75  qual(1, html.cou
+0000f670: 6e74 2827 3c61 2073 7479 6c65 3d22 636f  nt('<a style="co
+0000f680: 6c6f 723a 2072 6564 3b20 6261 636b 6772  lor: red; backgr
+0000f690: 6f75 6e64 3a20 626c 7565 3b22 3e27 2929  ound: blue;">'))
+0000f6a0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000f6b0: 7365 7274 4571 7561 6c28 312c 2068 746d  sertEqual(1, htm
+0000f6c0: 6c2e 636f 756e 7428 273c 6120 7374 796c  l.count('<a styl
+0000f6d0: 653d 2263 6f6c 6f72 3a20 2366 6666 3b20  e="color: #fff; 
+0000f6e0: 6261 636b 6772 6f75 6e64 3a20 626c 7565  background: blue
+0000f6f0: 3b22 3e27 2929 0a0a 2020 2020 6465 6620  ;">'))..    def 
+0000f700: 7465 7374 5f6b 6565 705f 6f72 6465 725f  test_keep_order_
+0000f710: 696e 6c69 6e65 2873 656c 6629 3a0a 0a20  inline(self):.. 
+0000f720: 2020 2020 2020 2074 656d 706c 6174 655f         template_
+0000f730: 636f 6e74 656e 7420 3d20 2222 220a 2020  content = """.  
+0000f740: 2020 2020 2020 2020 2020 7b7b 2520 6c6f            {{% lo
+0000f750: 6164 2063 6f6f 705f 7574 696c 7320 257d  ad coop_utils %}
+0000f760: 7d0a 2020 2020 2020 2020 2020 2020 7b7b  }.            {{
+0000f770: 2520 6e6c 665f 6373 7320 7b30 7d20 257d  % nlf_css {0} %}
+0000f780: 7d0a 2020 2020 2020 2020 2020 2020 2020  }.              
+0000f790: 2020 3c61 2073 7479 6c65 3d22 6261 636b    <a style="back
+0000f7a0: 6772 6f75 6e64 3a20 2330 3030 3b20 636f  ground: #000; co
+0000f7b0: 6c6f 723a 2023 6666 663b 223e 4f6e 653c  lor: #fff;">One<
+0000f7c0: 2f61 3e0a 2020 2020 2020 2020 2020 2020  /a>.            
+0000f7d0: 2020 2020 3c61 3e54 776f 3c2f 613e 0a20      <a>Two</a>. 
+0000f7e0: 2020 2020 2020 2020 2020 207b 7b25 2065             {{% e
+0000f7f0: 6e64 5f6e 6c66 5f63 7373 2025 7d7d 0a20  nd_nlf_css %}}. 
+0000f800: 2020 2020 2020 2022 2222 0a0a 2020 2020         """..    
+0000f810: 2020 2020 7465 6d70 6c61 7465 203d 2074      template = t
+0000f820: 656d 706c 6174 655f 636f 6e74 656e 742e  emplate_content.
+0000f830: 666f 726d 6174 2827 613d 2263 6f6c 6f72  format('a="color
+0000f840: 3a20 7265 643b 2062 6163 6b67 726f 756e  : red; backgroun
+0000f850: 643a 2062 6c75 653b 2070 6164 6469 6e67  d: blue; padding
+0000f860: 3a20 303b 2227 290a 2020 2020 2020 2020  : 0;"').        
+0000f870: 7470 6c20 3d20 5465 6d70 6c61 7465 2874  tpl = Template(t
+0000f880: 656d 706c 6174 6529 0a20 2020 2020 2020  emplate).       
+0000f890: 2068 746d 6c20 3d20 7470 6c2e 7265 6e64   html = tpl.rend
+0000f8a0: 6572 2843 6f6e 7465 7874 287b 2762 795f  er(Context({'by_
+0000f8b0: 656d 6169 6c27 3a20 5472 7565 7d29 290a  email': True})).
+0000f8c0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000f8d0: 7365 7274 4571 7561 6c28 312c 2068 746d  sertEqual(1, htm
+0000f8e0: 6c2e 636f 756e 7428 273c 6120 7374 796c  l.count('<a styl
+0000f8f0: 653d 2262 6163 6b67 726f 756e 643a 2023  e="background: #
+0000f900: 3030 303b 2063 6f6c 6f72 3a20 2366 6666  000; color: #fff
+0000f910: 3b20 7061 6464 696e 673a 2030 3b22 3e27  ; padding: 0;">'
+0000f920: 2929 0a20 2020 2020 2020 2073 656c 662e  )).        self.
+0000f930: 6173 7365 7274 4571 7561 6c28 312c 2068  assertEqual(1, h
+0000f940: 746d 6c2e 636f 756e 7428 273c 6120 7374  tml.count('<a st
+0000f950: 796c 653d 2263 6f6c 6f72 3a20 7265 643b  yle="color: red;
+0000f960: 2062 6163 6b67 726f 756e 643a 2062 6c75   background: blu
+0000f970: 653b 2070 6164 6469 6e67 3a20 303b 223e  e; padding: 0;">
+0000f980: 2729 290a 0a20 2020 2064 6566 2074 6573  '))..    def tes
+0000f990: 745f 6163 6365 7074 5f71 756f 7465 2873  t_accept_quote(s
+0000f9a0: 656c 6629 3a0a 0a20 2020 2020 2020 2074  elf):..        t
+0000f9b0: 656d 706c 6174 655f 636f 6e74 656e 7420  emplate_content 
+0000f9c0: 3d20 2222 220a 2020 2020 2020 2020 2020  = """.          
+0000f9d0: 2020 7b7b 2520 6c6f 6164 2063 6f6f 705f    {{% load coop_
+0000f9e0: 7574 696c 7320 257d 7d0a 2020 2020 2020  utils %}}.      
+0000f9f0: 2020 2020 2020 7b7b 2520 6e6c 665f 6373        {{% nlf_cs
+0000fa00: 7320 7b30 7d20 257d 7d0a 2020 2020 2020  s {0} %}}.      
+0000fa10: 2020 2020 2020 2020 2020 3c61 2073 7479            <a sty
+0000fa20: 6c65 3d22 666f 6e74 2d66 616d 696c 793a  le="font-family:
+0000fa30: 2027 4172 6961 6c27 3b22 3e4f 6e65 3c2f   'Arial';">One</
+0000fa40: 613e 0a20 2020 2020 2020 2020 2020 2020  a>.             
+0000fa50: 2020 203c 613e 5477 6f3c 2f61 3e0a 2020     <a>Two</a>.  
+0000fa60: 2020 2020 2020 2020 2020 7b7b 2520 656e            {{% en
+0000fa70: 645f 6e6c 665f 6373 7320 257d 7d0a 2020  d_nlf_css %}}.  
+0000fa80: 2020 2020 2020 2222 220a 0a20 2020 2020        """..     
+0000fa90: 2020 2074 656d 706c 6174 6520 3d20 7465     template = te
+0000faa0: 6d70 6c61 7465 5f63 6f6e 7465 6e74 2e66  mplate_content.f
+0000fab0: 6f72 6d61 7428 2727 2761 3d22 666f 6e74  ormat('''a="font
+0000fac0: 2d66 616d 696c 793a 2027 5461 686f 6d61  -family: 'Tahoma
+0000fad0: 273b 2227 2727 290a 2020 2020 2020 2020  ';"''').        
+0000fae0: 7470 6c20 3d20 5465 6d70 6c61 7465 2874  tpl = Template(t
+0000faf0: 656d 706c 6174 6529 0a20 2020 2020 2020  emplate).       
+0000fb00: 2068 746d 6c20 3d20 7470 6c2e 7265 6e64   html = tpl.rend
+0000fb10: 6572 2843 6f6e 7465 7874 287b 2762 795f  er(Context({'by_
+0000fb20: 656d 6169 6c27 3a20 5472 7565 7d29 290a  email': True})).
+0000fb30: 2020 2020 2020 2020 7365 6c66 2e61 7373          self.ass
+0000fb40: 6572 7445 7175 616c 2831 2c20 6874 6d6c  ertEqual(1, html
+0000fb50: 2e63 6f75 6e74 2827 2727 3c61 2073 7479  .count('''<a sty
+0000fb60: 6c65 3d22 666f 6e74 2d66 616d 696c 793a  le="font-family:
+0000fb70: 2027 4172 6961 6c27 3b22 3e27 2727 2929   'Arial';">'''))
+0000fb80: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000fb90: 7365 7274 4571 7561 6c28 312c 2068 746d  sertEqual(1, htm
+0000fba0: 6c2e 636f 756e 7428 2727 273c 6120 7374  l.count('''<a st
+0000fbb0: 796c 653d 2266 6f6e 742d 6661 6d69 6c79  yle="font-family
+0000fbc0: 3a20 2754 6168 6f6d 6127 3b22 3e27 2727  : 'Tahoma';">'''
+0000fbd0: 2929 0a0a 2020 2020 6465 6620 7465 7374  ))..    def test
+0000fbe0: 5f63 7373 5f6f 7264 6572 2873 656c 6629  _css_order(self)
+0000fbf0: 3a0a 0a20 2020 2020 2020 2074 656d 706c  :..        templ
+0000fc00: 6174 655f 636f 6e74 656e 7420 3d20 2222  ate_content = ""
+0000fc10: 220a 2020 2020 2020 2020 2020 2020 7b7b  ".            {{
+0000fc20: 2520 6c6f 6164 2063 6f6f 705f 7574 696c  % load coop_util
+0000fc30: 7320 257d 7d0a 2020 2020 2020 2020 2020  s %}}.          
+0000fc40: 2020 7b7b 2520 6e6c 665f 6373 7320 7b30    {{% nlf_css {0
+0000fc50: 7d20 257d 7d0a 2020 2020 2020 2020 2020  } %}}.          
+0000fc60: 2020 2020 2020 3c61 3e4f 6e65 3c2f 613e        <a>One</a>
+0000fc70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000fc80: 203c 6469 7620 636c 6173 733d 2262 6c75   <div class="blu
+0000fc90: 6522 3e0a 2020 2020 2020 2020 2020 2020  e">.            
+0000fca0: 2020 2020 3c61 3e54 776f 3c2f 613e 0a20      <a>Two</a>. 
+0000fcb0: 2020 2020 2020 2020 2020 2020 2020 203c                 <
+0000fcc0: 2f64 6976 3e0a 2020 2020 2020 2020 2020  /div>.          
+0000fcd0: 2020 7b7b 2520 656e 645f 6e6c 665f 6373    {{% end_nlf_cs
+0000fce0: 7320 257d 7d0a 2020 2020 2020 2020 2222  s %}}.        ""
+0000fcf0: 220a 0a20 2020 2020 2020 2074 706c 203d  "..        tpl =
+0000fd00: 2054 656d 706c 6174 6528 7465 6d70 6c61   Template(templa
+0000fd10: 7465 5f63 6f6e 7465 6e74 2e66 6f72 6d61  te_content.forma
+0000fd20: 7428 2761 3d22 636f 6c6f 723a 2023 3030  t('a="color: #00
+0000fd30: 3022 2022 2e62 6c75 6520 6122 3d22 636f  0" ".blue a"="co
+0000fd40: 6c6f 723a 2023 6666 6622 2729 290a 2020  lor: #fff"')).  
+0000fd50: 2020 2020 2020 6874 6d6c 203d 2074 706c        html = tpl
+0000fd60: 2e72 656e 6465 7228 436f 6e74 6578 7428  .render(Context(
+0000fd70: 7b27 6279 5f65 6d61 696c 273a 2054 7275  {'by_email': Tru
+0000fd80: 657d 2929 0a20 2020 2020 2020 2073 656c  e})).        sel
+0000fd90: 662e 6173 7365 7274 4571 7561 6c28 322c  f.assertEqual(2,
+0000fda0: 2068 746d 6c2e 636f 756e 7428 2727 273c   html.count('''<
+0000fdb0: 6120 7374 796c 653d 2263 6f6c 6f72 3a20  a style="color: 
+0000fdc0: 2330 3030 3b22 3e27 2727 2929 0a20 2020  #000;">''')).   
+0000fdd0: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+0000fde0: 4571 7561 6c28 302c 2068 746d 6c2e 636f  Equal(0, html.co
+0000fdf0: 756e 7428 2727 273c 6120 7374 796c 653d  unt('''<a style=
+0000fe00: 2263 6f6c 6f72 3a20 2366 6666 273b 223e  "color: #fff';">
+0000fe10: 2727 2729 290a 0a20 2020 2020 2020 2074  '''))..        t
+0000fe20: 706c 203d 2054 656d 706c 6174 6528 7465  pl = Template(te
+0000fe30: 6d70 6c61 7465 5f63 6f6e 7465 6e74 2e66  mplate_content.f
+0000fe40: 6f72 6d61 7428 2722 2e62 6c75 6520 6122  ormat('".blue a"
+0000fe50: 3d22 636f 6c6f 723a 2023 6666 6622 2061  ="color: #fff" a
+0000fe60: 3d22 636f 6c6f 723a 2023 3030 3022 2729  ="color: #000"')
+0000fe70: 290a 2020 2020 2020 2020 6874 6d6c 203d  ).        html =
+0000fe80: 2074 706c 2e72 656e 6465 7228 436f 6e74   tpl.render(Cont
+0000fe90: 6578 7428 7b27 6279 5f65 6d61 696c 273a  ext({'by_email':
+0000fea0: 2054 7275 657d 2929 0a20 2020 2020 2020   True})).       
+0000feb0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+0000fec0: 6c28 312c 2068 746d 6c2e 636f 756e 7428  l(1, html.count(
+0000fed0: 2727 273c 6120 7374 796c 653d 2263 6f6c  '''<a style="col
+0000fee0: 6f72 3a20 2330 3030 3b22 3e27 2727 2929  or: #000;">'''))
+0000fef0: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+0000ff00: 7365 7274 4571 7561 6c28 312c 2068 746d  sertEqual(1, htm
+0000ff10: 6c2e 636f 756e 7428 2727 273c 6120 7374  l.count('''<a st
+0000ff20: 796c 653d 2263 6f6c 6f72 3a20 2366 6666  yle="color: #fff
+0000ff30: 3b22 3e27 2727 2929 0a0a 2020 2020 6465  ;">'''))..    de
+0000ff40: 6620 7465 7374 5f6e 6f5f 656e 645f 7461  f test_no_end_ta
+0000ff50: 6728 7365 6c66 293a 0a0a 2020 2020 2020  g(self):..      
+0000ff60: 2020 7465 6d70 6c61 7465 5f63 6f6e 7465    template_conte
+0000ff70: 6e74 203d 2022 2222 0a20 2020 2020 2020  nt = """.       
+0000ff80: 2020 2020 207b 7b25 206c 6f61 6420 636f       {{% load co
+0000ff90: 6f70 5f75 7469 6c73 2025 7d7d 0a20 2020  op_utils %}}.   
+0000ffa0: 2020 2020 2020 2020 207b 7b25 206e 6c66           {{% nlf
+0000ffb0: 5f63 7373 207b 307d 2025 7d7d 0a20 2020  _css {0} %}}.   
+0000ffc0: 2020 2020 2020 2020 2020 2020 203c 613e               <a>
+0000ffd0: 4f6e 653c 2f61 3e0a 2020 2020 2020 2020  One</a>.        
+0000ffe0: 2020 2020 2020 2020 3c68 7220 2f3e 0a20          <hr />. 
+0000fff0: 2020 2020 2020 2020 2020 2020 2020 203c                 <
+00010000: 613e 5477 6f3c 2f61 3e0a 2020 2020 2020  a>Two</a>.      
+00010010: 2020 2020 2020 7b7b 2520 656e 645f 6e6c        {{% end_nl
+00010020: 665f 6373 7320 257d 7d0a 2020 2020 2020  f_css %}}.      
+00010030: 2020 2222 220a 0a20 2020 2020 2020 2074    """..        t
+00010040: 656d 706c 6174 6520 3d20 7465 6d70 6c61  emplate = templa
+00010050: 7465 5f63 6f6e 7465 6e74 2e66 6f72 6d61  te_content.forma
+00010060: 7428 2768 723d 2263 6f6c 6f72 3a20 7265  t('hr="color: re
+00010070: 643b 2227 290a 2020 2020 2020 2020 7470  d;"').        tp
+00010080: 6c20 3d20 5465 6d70 6c61 7465 2874 656d  l = Template(tem
+00010090: 706c 6174 6529 0a20 2020 2020 2020 2068  plate).        h
+000100a0: 746d 6c20 3d20 7470 6c2e 7265 6e64 6572  tml = tpl.render
+000100b0: 2843 6f6e 7465 7874 287b 2762 795f 656d  (Context({'by_em
+000100c0: 6169 6c27 3a20 5472 7565 7d29 290a 2020  ail': True})).  
+000100d0: 2020 2020 2020 7365 6c66 2e61 7373 6572        self.asser
+000100e0: 7445 7175 616c 2831 2c20 6874 6d6c 2e63  tEqual(1, html.c
+000100f0: 6f75 6e74 2827 3c68 7220 7374 796c 653d  ount('<hr style=
+00010100: 2263 6f6c 6f72 3a20 7265 643b 222f 3e27  "color: red;"/>'
+00010110: 2929 0a0a 0a63 6c61 7373 2048 746d 6c46  ))...class HtmlF
+00010120: 6978 5465 7374 2842 6173 6554 6573 7443  ixTest(BaseTestC
+00010130: 6173 6529 3a0a 2020 2020 2222 2254 6573  ase):.    """Tes
+00010140: 7420 6469 7274 7920 6669 7873 2066 6f72  t dirty fixs for
+00010150: 206e 6577 736c 6574 7465 7220 6874 6d6c   newsletter html
+00010160: 2222 220a 0a20 2020 2064 6566 2074 6573  """..    def tes
+00010170: 745f 7374 7269 705f 615f 7461 6773 2873  t_strip_a_tags(s
+00010180: 656c 6629 3a0a 2020 2020 2020 2020 2222  elf):.        ""
+00010190: 224d 616b 6520 7375 7265 2074 6861 7420  "Make sure that 
+000101a0: 7468 6520 6120 7461 6773 2068 6176 6520  the a tags have 
+000101b0: 6e6f 2073 7061 6365 2069 6e73 6964 6522  no space inside"
+000101c0: 2222 0a20 2020 2020 2020 2068 746d 6c20  "".        html 
+000101d0: 3d20 2727 270a 2020 2020 2020 2020 3c70  = '''.        <p
+000101e0: 3e0a 2020 2020 2020 2020 203c 6831 3e54  >.         <h1>T
+000101f0: 6573 743c 2f68 313e 0a20 2020 2020 2020  est</h1>.       
+00010200: 2020 3c61 2063 6c61 7373 3d22 6c69 6e6b    <a class="link
+00010210: 2220 6872 6566 3d22 2f22 3e0a 2020 2020  " href="/">.    
+00010220: 2020 2020 2020 436f 6f6c 0a20 2020 2020        Cool.     
+00010230: 2020 2020 3c2f 613e 0a20 2020 2020 2020      </a>.       
+00010240: 2020 3c64 6976 3e0a 2020 2020 2020 2020    <div>.        
+00010250: 203c 6120 6872 6566 3d22 2f74 6573 7422   <a href="/test"
+00010260: 3e0a 2020 2020 2020 2020 2020 5465 7374  >.          Test
+00010270: 0a20 2020 2020 2020 2020 3c2f 613e 0a20  .         </a>. 
+00010280: 2020 2020 2020 2020 3c2f 6469 763e 0a20          </div>. 
+00010290: 2020 2020 2020 203c 2f70 3e0a 2020 2020         </p>.    
+000102a0: 2020 2020 2727 270a 0a20 2020 2020 2020      '''..       
+000102b0: 2073 6f75 7020 3d20 4265 6175 7469 6675   soup = Beautifu
+000102c0: 6c53 6f75 7028 6874 6d6c 290a 2020 2020  lSoup(html).    
+000102d0: 2020 2020 6669 7865 645f 6874 6d6c 203d      fixed_html =
+000102e0: 2073 7472 6970 5f61 5f74 6167 7328 736f   strip_a_tags(so
+000102f0: 7570 2e70 7265 7474 6966 7928 2929 0a0a  up.prettify())..
+00010300: 2020 2020 2020 2020 6578 7065 6374 6564          expected
+00010310: 5f68 746d 6c20 3d20 273c 703e 5c6e 203c  _html = '<p>\n <
+00010320: 6831 3e5c 6e20 2054 6573 745c 6e20 3c2f  h1>\n  Test\n </
+00010330: 6831 3e5c 6e20 3c61 2063 6c61 7373 3d22  h1>\n <a class="
+00010340: 6c69 6e6b 2220 6872 6566 3d22 2f22 3e43  link" href="/">C
+00010350: 6f6f 6c3c 2f61 3e5c 6e20 3c64 6976 3e5c  ool</a>\n <div>\
+00010360: 6e20 2027 205c 0a20 2020 2020 2020 2027  n  ' \.        '
+00010370: 3c61 2068 7265 663d 222f 7465 7374 223e  <a href="/test">
+00010380: 5465 7374 3c2f 613e 5c6e 203c 2f64 6976  Test</a>\n </div
+00010390: 3e5c 6e3c 2f70 3e5c 6e27 0a0a 2020 2020  >\n</p>\n'..    
+000103a0: 2020 2020 7365 6c66 2e61 7373 6572 7445      self.assertE
+000103b0: 7175 616c 2866 6978 6564 5f68 746d 6c2c  qual(fixed_html,
+000103c0: 2065 7870 6563 7465 645f 6874 6d6c 290a   expected_html).
+000103d0: 0a20 2020 2064 6566 2074 6573 745f 6e6f  .    def test_no
+000103e0: 5f61 5f74 6167 7328 7365 6c66 293a 0a20  _a_tags(self):. 
+000103f0: 2020 2020 2020 2022 2222 4d61 6b65 2073         """Make s
+00010400: 7572 6520 7468 6174 2063 6f6e 7465 6e74  ure that content
+00010410: 2069 7320 7265 7475 726e 6564 2070 726f   is returned pro
+00010420: 7065 726c 7920 6966 206e 6f20 6120 7461  perly if no a ta
+00010430: 6720 696e 2063 6f6e 7465 6e74 2222 220a  g in content""".
+00010440: 2020 2020 2020 2020 6874 6d6c 203d 2027          html = '
+00010450: 2727 0a20 2020 2020 2020 203c 703e 0a20  ''.        <p>. 
+00010460: 2020 2020 2020 2020 3c68 313e 5465 7374          <h1>Test
+00010470: 3c2f 6831 3e0a 2020 2020 2020 2020 3c2f  </h1>.        </
+00010480: 703e 0a20 2020 2020 2020 2027 2727 0a0a  p>.        '''..
+00010490: 2020 2020 2020 2020 736f 7570 203d 2042          soup = B
+000104a0: 6561 7574 6966 756c 536f 7570 2868 746d  eautifulSoup(htm
+000104b0: 6c29 0a20 2020 2020 2020 2066 6978 6564  l).        fixed
+000104c0: 5f68 746d 6c20 3d20 7374 7269 705f 615f  _html = strip_a_
+000104d0: 7461 6773 2873 6f75 702e 7072 6574 7469  tags(soup.pretti
+000104e0: 6679 2829 290a 0a20 2020 2020 2020 2065  fy())..        e
+000104f0: 7870 6563 7465 645f 6874 6d6c 203d 2027  xpected_html = '
+00010500: 3c70 3e5c 6e20 3c68 313e 5c6e 2020 5465  <p>\n <h1>\n  Te
+00010510: 7374 5c6e 203c 2f68 313e 5c6e 3c2f 703e  st\n </h1>\n</p>
+00010520: 5c6e 270a 0a20 2020 2020 2020 2073 656c  \n'..        sel
+00010530: 662e 6173 7365 7274 4571 7561 6c28 6669  f.assertEqual(fi
+00010540: 7865 645f 6874 6d6c 2c20 6578 7065 6374  xed_html, expect
+00010550: 6564 5f68 746d 6c29 0a0a 2020 2020 6465  ed_html)..    de
+00010560: 6620 7465 7374 5f61 766f 6964 5f6c 696e  f test_avoid_lin
+00010570: 655f 746f 6f5f 6c6f 6e67 2873 656c 6629  e_too_long(self)
+00010580: 3a0a 2020 2020 2020 2020 2222 226e 6577  :.        """new
+00010590: 736c 6574 7465 7220 7368 6f75 6c64 206e  sletter should n
+000105a0: 6f74 2063 6f6e 7461 696e 7320 6d6f 7265  ot contains more
+000105b0: 2074 6861 6e20 3939 3820 6368 6172 732e   than 998 chars.
+000105c0: 2046 6f72 6365 2073 6f6d 6520 656e 646c   Force some endl
+000105d0: 696e 6520 6966 2073 6f22 2222 0a20 2020  ine if so""".   
+000105e0: 2020 2020 2068 746d 6c20 3d20 2727 270a       html = '''.
+000105f0: 2020 2020 2020 2020 3c70 3e0a 2020 2020          <p>.    
+00010600: 2020 2020 203c 6831 3e54 6573 743c 2f68       <h1>Test</h
+00010610: 313e 0a20 2020 2020 2020 2020 3c61 2063  1>.         <a c
+00010620: 6c61 7373 3d22 6c69 6e6b 2220 6872 6566  lass="link" href
+00010630: 3d22 2f22 3e0a 2020 2020 2020 2020 2020  ="/">.          
+00010640: 7b30 7d0a 2020 2020 2020 2020 203c 2f61  {0}.         </a
+00010650: 3e0a 2020 2020 2020 2020 203c 6469 763e  >.         <div>
+00010660: 0a20 2020 2020 2020 2020 3c61 2068 7265  .         <a hre
+00010670: 663d 222f 7465 7374 223e 0a20 2020 2020  f="/test">.     
+00010680: 2020 2020 203c 6832 3e45 74c3 a93c 2f68       <h2>Et..</h
+00010690: 323e 0a20 2020 2020 2020 2020 3c2f 613e  2>.         </a>
+000106a0: 0a20 2020 2020 2020 2020 3c2f 6469 763e  .         </div>
+000106b0: 0a20 2020 2020 2020 203c 2f70 3e0a 2020  .        </p>.  
+000106c0: 2020 2020 2020 2727 272e 666f 726d 6174        '''.format
+000106d0: 2827 6162 6364 2027 202a 2033 3030 2920  ('abcd ' * 300) 
+000106e0: 2023 2031 3530 300a 0a20 2020 2020 2020   # 1500..       
+000106f0: 2066 6978 6564 5f68 746d 6c20 3d20 6176   fixed_html = av
+00010700: 6f69 645f 6c69 6e65 5f74 6f6f 5f6c 6f6e  oid_line_too_lon
+00010710: 6728 6874 6d6c 290a 0a20 2020 2020 2020  g(html)..       
+00010720: 206d 6178 5f6c 656e 6774 6820 3d20 300a   max_length = 0.
+00010730: 2020 2020 2020 2020 666f 7220 6c69 6e65          for line
+00010740: 2069 6e20 6669 7865 645f 6874 6d6c 2e73   in fixed_html.s
+00010750: 706c 6974 2827 5c6e 2729 3a0a 2020 2020  plit('\n'):.    
+00010760: 2020 2020 2020 2020 6d61 785f 6c65 6e67          max_leng
+00010770: 7468 203d 206d 6178 286d 6178 5f6c 656e  th = max(max_len
+00010780: 6774 682c 206c 656e 286c 696e 6529 290a  gth, len(line)).
+00010790: 0a20 2020 2020 2020 2073 656c 662e 6173  .        self.as
+000107a0: 7365 7274 4571 7561 6c28 6669 7865 645f  sertEqual(fixed_
+000107b0: 6874 6d6c 2e63 6f75 6e74 2827 6162 6364  html.count('abcd
+000107c0: 2729 2c20 3330 3029 0a20 2020 2020 2020  '), 300).       
+000107d0: 2073 656c 662e 6173 7365 7274 4571 7561   self.assertEqua
+000107e0: 6c28 6c65 6e28 6669 7865 645f 6874 6d6c  l(len(fixed_html
+000107f0: 2e73 706c 6974 6c69 6e65 7328 2929 2c20  .splitlines()), 
+00010800: 6c65 6e28 6874 6d6c 2e73 706c 6974 6c69  len(html.splitli
+00010810: 6e65 7328 2929 202b 2031 202b 2028 3135  nes()) + 1 + (15
+00010820: 3030 202f 2f20 3930 3029 290a 2020 2020  00 // 900)).    
+00010830: 2020 2020 7365 6c66 2e61 7373 6572 7454      self.assertT
+00010840: 7275 6528 6d61 785f 6c65 6e67 7468 203c  rue(max_length <
+00010850: 3d20 3930 3029 0a20 2020 2020 2020 2073  = 900).        s
+00010860: 656c 662e 6173 7365 7274 5472 7565 2866  elf.assertTrue(f
+00010870: 6978 6564 5f68 746d 6c2e 6669 6e64 2827  ixed_html.find('
+00010880: 3c68 313e 5465 7374 3c2f 6831 3e27 2920  <h1>Test</h1>') 
+00010890: 3e20 3029 0a20 2020 2020 2020 2073 656c  > 0).        sel
+000108a0: 662e 6173 7365 7274 5472 7565 2866 6978  f.assertTrue(fix
+000108b0: 6564 5f68 746d 6c2e 6669 6e64 2827 3c68  ed_html.find('<h
+000108c0: 323e 4574 c3a9 3c2f 6832 3e27 2920 3e20  2>Et..</h2>') > 
+000108d0: 3029 0a0a 2020 2020 6465 6620 7465 7374  0)..    def test
+000108e0: 5f61 766f 6964 5f6c 696e 655f 7665 7279  _avoid_line_very
+000108f0: 5f74 6f6f 5f6c 6f6e 6728 7365 6c66 293a  _too_long(self):
+00010900: 0a20 2020 2020 2020 2022 2222 6e65 7773  .        """news
+00010910: 6c65 7474 6572 2073 686f 756c 6420 6e6f  letter should no
+00010920: 7420 636f 6e74 6169 6e73 206d 6f72 6520  t contains more 
+00010930: 7468 616e 2039 3938 2063 6861 7273 2e20  than 998 chars. 
+00010940: 466f 7263 6520 736f 6d65 2065 6e64 6c69  Force some endli
+00010950: 6e65 2069 6620 736f 2222 220a 2020 2020  ne if so""".    
+00010960: 2020 2020 6874 6d6c 203d 2027 2727 0a20      html = '''. 
+00010970: 2020 2020 2020 203c 703e 0a20 2020 2020         <p>.     
+00010980: 2020 2020 3c68 313e 5465 7374 3c2f 6831      <h1>Test</h1
+00010990: 3e0a 2020 2020 2020 2020 203c 6120 636c  >.         <a cl
+000109a0: 6173 733d 226c 696e 6b22 2068 7265 663d  ass="link" href=
+000109b0: 222f 223e 0a20 2020 2020 2020 2020 207b  "/">.          {
+000109c0: 307d 0a20 2020 2020 2020 2020 3c2f 613e  0}.         </a>
+000109d0: 0a20 2020 2020 2020 2020 3c64 6976 3e0a  .         <div>.
+000109e0: 2020 2020 2020 2020 203c 6120 6872 6566           <a href
+000109f0: 3d22 2f74 6573 7422 3e0a 2020 2020 2020  ="/test">.      
+00010a00: 2020 2020 3c68 323e 4574 c3a9 3c2f 6832      <h2>Et..</h2
+00010a10: 3e0a 2020 2020 2020 2020 203c 2f61 3e0a  >.         </a>.
+00010a20: 2020 2020 2020 2020 203c 2f64 6976 3e0a           </div>.
+00010a30: 2020 2020 2020 2020 3c2f 703e 0a20 2020          </p>.   
+00010a40: 2020 2020 2027 2727 2e66 6f72 6d61 7428       '''.format(
+00010a50: 2761 6263 64c3 a920 2720 2a20 3630 3029  'abcd.. ' * 600)
+00010a60: 2020 2320 3432 3030 2063 6861 7261 6374    # 4200 charact
+00010a70: 6572 730a 0a20 2020 2020 2020 2066 6978  ers..        fix
+00010a80: 6564 5f68 746d 6c20 3d20 6176 6f69 645f  ed_html = avoid_
+00010a90: 6c69 6e65 5f74 6f6f 5f6c 6f6e 6728 6874  line_too_long(ht
+00010aa0: 6d6c 290a 0a20 2020 2020 2020 206d 6178  ml)..        max
+00010ab0: 5f6c 656e 6774 6820 3d20 300a 2020 2020  _length = 0.    
+00010ac0: 2020 2020 666f 7220 6c69 6e65 2069 6e20      for line in 
+00010ad0: 6669 7865 645f 6874 6d6c 2e73 706c 6974  fixed_html.split
+00010ae0: 2827 5c6e 2729 3a0a 2020 2020 2020 2020  ('\n'):.        
+00010af0: 2020 2020 6d61 785f 6c65 6e67 7468 203d      max_length =
+00010b00: 206d 6178 286d 6178 5f6c 656e 6774 682c   max(max_length,
+00010b10: 206c 656e 286c 696e 6529 290a 0a20 2020   len(line))..   
+00010b20: 2020 2020 2073 656c 662e 6173 7365 7274       self.assert
+00010b30: 4571 7561 6c28 6669 7865 645f 6874 6d6c  Equal(fixed_html
+00010b40: 2e63 6f75 6e74 2827 6162 6364 c3a9 2729  .count('abcd..')
+00010b50: 2c20 3630 3029 0a20 2020 2020 2020 2073  , 600).        s
+00010b60: 656c 662e 6173 7365 7274 4571 7561 6c28  elf.assertEqual(
+00010b70: 6c65 6e28 6669 7865 645f 6874 6d6c 2e73  len(fixed_html.s
+00010b80: 706c 6974 6c69 6e65 7328 2929 2c20 6c65  plitlines()), le
+00010b90: 6e28 6874 6d6c 2e73 706c 6974 6c69 6e65  n(html.splitline
+00010ba0: 7328 2929 202b 2031 202b 2028 3432 3030  s()) + 1 + (4200
+00010bb0: 202f 2f20 3930 3029 290a 2020 2020 2020   // 900)).      
+00010bc0: 2020 7365 6c66 2e61 7373 6572 7454 7275    self.assertTru
+00010bd0: 6528 6d61 785f 6c65 6e67 7468 203c 3d20  e(max_length <= 
+00010be0: 3930 3029 0a20 2020 2020 2020 2073 656c  900).        sel
+00010bf0: 662e 6173 7365 7274 5472 7565 2866 6978  f.assertTrue(fix
+00010c00: 6564 5f68 746d 6c2e 6669 6e64 2827 3c68  ed_html.find('<h
+00010c10: 313e 5465 7374 3c2f 6831 3e27 2920 3e20  1>Test</h1>') > 
+00010c20: 3029 0a20 2020 2020 2020 2073 656c 662e  0).        self.
+00010c30: 6173 7365 7274 5472 7565 2866 6978 6564  assertTrue(fixed
+00010c40: 5f68 746d 6c2e 6669 6e64 2827 3c68 323e  _html.find('<h2>
+00010c50: 4574 c3a9 3c2f 6832 3e27 2920 3e20 3029  Et..</h2>') > 0)
+00010c60: 0a0a 2020 2020 6465 6620 7465 7374 5f61  ..    def test_a
+00010c70: 766f 6964 5f6c 696e 655f 746f 6f5f 6c6f  void_line_too_lo
+00010c80: 6e67 5f6e 6f5f 6368 616e 6765 2873 656c  ng_no_change(sel
+00010c90: 6629 3a0a 2020 2020 2020 2020 2222 226e  f):.        """n
+00010ca0: 6577 736c 6574 7465 7220 7368 6f75 6c64  ewsletter should
+00010cb0: 206e 6f74 2063 6f6e 7461 696e 7320 6d6f   not contains mo
+00010cc0: 7265 2074 6861 6e20 3939 3820 6368 6172  re than 998 char
+00010cd0: 732e 2046 6f72 6365 2073 6f6d 6520 656e  s. Force some en
+00010ce0: 646c 696e 6520 6966 2073 6f22 2222 0a20  dline if so""". 
+00010cf0: 2020 2020 2020 2068 746d 6c20 3d20 2727         html = ''
+00010d00: 270a 2020 2020 2020 2020 3c70 3e0a 2020  '.        <p>.  
+00010d10: 2020 2020 2020 203c 6831 3e54 6573 743c         <h1>Test<
+00010d20: 2f68 313e 0a20 2020 2020 2020 2020 3c61  /h1>.         <a
+00010d30: 2063 6c61 7373 3d22 6c69 6e6b 2220 6872   class="link" hr
+00010d40: 6566 3d22 2f22 3e0a 2020 2020 2020 2020  ef="/">.        
+00010d50: 2020 436f 6f6c 0a20 2020 2020 2020 2020    Cool.         
+00010d60: 3c2f 613e 0a20 2020 2020 2020 2020 3c64  </a>.         <d
+00010d70: 6976 3e0a 2020 2020 2020 2020 203c 6120  iv>.         <a 
+00010d80: 6872 6566 3d22 2f74 6573 7422 3e0a 2020  href="/test">.  
+00010d90: 2020 2020 2020 2020 5465 7374 0a20 2020          Test.   
+00010da0: 2020 2020 2020 3c2f 613e 0a20 2020 2020        </a>.     
+00010db0: 2020 2020 3c2f 6469 763e 0a20 2020 2020      </div>.     
+00010dc0: 2020 203c 2f70 3e0a 2020 2020 2020 2020     </p>.        
+00010dd0: 2727 270a 0a20 2020 2020 2020 2066 6978  '''..        fix
+00010de0: 6564 5f68 746d 6c20 3d20 6176 6f69 645f  ed_html = avoid_
+00010df0: 6c69 6e65 5f74 6f6f 5f6c 6f6e 6728 6874  line_too_long(ht
+00010e00: 6d6c 290a 2020 2020 2020 2020 7365 6c66  ml).        self
+00010e10: 2e61 7373 6572 7445 7175 616c 2866 6978  .assertEqual(fix
+00010e20: 6564 5f68 746d 6c2c 2068 746d 6c29 0a    ed_html, html).
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_permissions.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_permissions.py`

 * *Files 10% similar despite different names*

```diff
@@ -1,15 +1,15 @@
 # -*- coding: utf-8 -*-
 
 from django.conf import settings
 
-from coop_cms.models import BaseArticle
-from coop_cms.settings import get_article_class
-from coop_cms.tests import BaseArticleTest
-from coop_cms.utils import get_login_url
+from ..models import BaseArticle
+from ..settings import get_article_class
+from ..utils import get_login_url
+from . import BaseArticleTest
 
 
 class PermissionMiddlewareTest(BaseArticleTest):
     
     def setUp(self):
         super(PermissionMiddlewareTest, self).setUp()
         self._MIDDLEWARE = settings.MIDDLEWARE
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_settings.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_settings.py`

 * *Files 8% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 # -*- coding: utf-8 -*-
 
 from django.test.utils import override_settings
 
-from coop_cms.forms.articles import ArticleSettingsForm, NewArticleForm
-from coop_cms.settings import load_class
-from coop_cms.tests import BaseTestCase
+from ..forms.articles import ArticleSettingsForm, NewArticleForm
+from ..settings import load_class
+from . import BaseTestCase
 
 
 class LoadClassTest(BaseTestCase):
 
     @override_settings(COOP_CMS_ARTICLE_SETTINGS_FORM='coop_cms.forms.ArticleSettingsForm')
     def test_load_value(self):
         form_class = load_class('COOP_CMS_ARTICLE_SETTINGS_FORM', 'coop_cms.forms.NewArticleForm')
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_sitemap.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_sitemap.py`

 * *Files 2% similar despite different names*

```diff
@@ -7,19 +7,20 @@
 from django.contrib.sitemaps.views import sitemap as sitemap_view
 from django.test.client import RequestFactory
 from django.urls import reverse
 from django.utils.translation import activate
 
 from model_mommy import mommy
 
-from coop_cms.models import BaseArticle, SiteSettings
-from coop_cms.settings import get_article_class, has_localized_urls, is_multilang
-from coop_cms.sitemap import get_sitemaps
-from coop_cms.tests import BaseTestCase
-from coop_cms.utils import get_url_in_language, slugify
+from ..models import BaseArticle, SiteSettings
+from ..settings import get_article_class, has_localized_urls, is_multilang
+from ..sitemap import get_sitemaps
+from ..utils import get_url_in_language, slugify
+
+from . import BaseTestCase
 
 
 class SitemapTest(BaseTestCase):
     
     def setUp(self):
         self._site2 = mommy.make(Site, id=settings.SITE_ID+1)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_slugs.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_slugs.py`

 * *Files 2% similar despite different names*

```diff
@@ -3,17 +3,17 @@
 from unittest import skipIf
 
 from django.conf import settings
 from django.contrib.sites.models import Site
 from django.test.utils import override_settings
 from django.utils.translation import get_language
 
-from coop_cms.settings import is_localized, is_multilang, get_article_class
-from coop_cms.tests import BaseTestCase
-from coop_cms.utils import make_locale_path, slugify
+from ..settings import is_localized, is_multilang, get_article_class
+from ..utils import make_locale_path
+from . import BaseTestCase
 
 
 class ArticleSlugTestCase(BaseTestCase):
     """test slug"""
     
     def tearDown(self):
         """after each test"""
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_special_pages.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_special_pages.py`

 * *Files 9% similar despite different names*

```diff
@@ -5,17 +5,17 @@
 
 from django.conf import settings
 from django.contrib.auth.models import AnonymousUser
 from django.middleware.csrf import REASON_NO_REFERER, REASON_NO_CSRF_COOKIE
 from django.test.client import RequestFactory
 from django.test.utils import override_settings
 
-from coop_cms.tests import BaseTestCase, BeautifulSoup
-from coop_cms.settings import install_csrf_failure_view
-from coop_cms.views.webutils import csrf_failure
+from ..settings import install_csrf_failure_view
+from ..views.webutils import csrf_failure
+from . import BaseTestCase, BeautifulSoup
 
 
 @skipIf(getattr(settings, 'COOP_CMS_DO_NOT_INSTALL_CSRF_FAILURE_VIEW', False), "coop_cms csrf failure disabled")
 class CsrfFailureTest(BaseTestCase):
     """Check custom page on CSRF failure"""
     
     def test_view_reason_cookie(self):
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_templates.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_templates.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,16 +1,16 @@
 # -*- coding: utf-8 -*-
 
 from django.conf import settings
 from django.urls import reverse
 
 from model_mommy import mommy
 
-from coop_cms.settings import get_article_class
-from coop_cms.tests import BaseArticleTest
+from ..settings import get_article_class
+from . import BaseArticleTest
 
 
 class TemplateTest(BaseArticleTest):
     """It should display articles with the right template"""
 
     def setUp(self):
         super(TemplateTest, self).setUp()
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_templatetags.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_templatetags.py`

 * *Files 2% similar despite different names*

```diff
@@ -6,23 +6,23 @@
 from django.conf import settings
 from django.contrib.auth.models import User, Permission, AnonymousUser
 from django.contrib.contenttypes.models import ContentType
 from django.contrib.sites.models import Site
 from django.template import Template, Context
 from django.test.client import RequestFactory
 from django.urls import reverse
-from django.utils.translation import ugettext as _
+from django.utils.translation import gettext as _
 
 from model_mommy import mommy
 
-from coop_cms.models import Link, NavNode, BaseArticle, MediaFilter, Image
-from coop_cms.moves import get_response_json
-from coop_cms.settings import is_localized, is_multilang, get_article_class, get_navtree_class
-from coop_cms.templatetags.coop_utils import get_part, get_parts, group_in_sublists, find_css, reduced_page_range
-from coop_cms.tests import BaseTestCase, BeautifulSoup
+from ..models import Link, NavNode, BaseArticle, MediaFilter, Image
+from ..moves import get_response_json
+from ..settings import is_localized, is_multilang, get_article_class, get_navtree_class
+from ..templatetags.coop_utils import get_part, get_parts, group_in_sublists, find_css, reduced_page_range
+from . import BaseTestCase, BeautifulSoup
 
 
 class CmsEditTagTest(BaseTestCase):
     """Cms templatetags"""
 
     def setUp(self):
         super(CmsEditTagTest, self).setUp()
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/tests/test_utils.py` & `apidev-coop_cms-1.6.0/coop_cms/tests/test_utils.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,11 +1,11 @@
 # -*- coding: utf-8 -*-
 
-from coop_cms.tests import BaseArticleTest
-from coop_cms.utils import dehtml
+from ..utils import dehtml
+from . import BaseArticleTest
 
 
 class DehtmlTest(BaseArticleTest):
     
     def test_simple_text(self):
         text = "This is a simple text"
         self.assertEqual(dehtml(text), text)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/thumbnail_backend.py` & `apidev-coop_cms-1.6.0/coop_cms/thumbnail_backend.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/translation.py` & `apidev-coop_cms-1.6.0/coop_cms/translation.py`

 * *Files 2% similar despite different names*

```diff
@@ -1,64 +1,56 @@
 # -*- coding: utf-8 -*-
 """modeltranslation settings"""
 
 from modeltranslation.translator import translator, TranslationOptions  # pylint: disable=F0401
 
-from coop_cms.models import (
+from .models import (
     Alias, ArticleCategory, Fragment, NavNode, Newsletter, PieceOfHtml, SiteSettings, validate_slug, Link
 )
-from coop_cms.settings import get_eastern_languages
+from .settings import get_eastern_languages
 
 
 class PieceOfHtmlTranslationOptions(TranslationOptions):
     """translation"""
-    fields = ('content',)
-translator.register(PieceOfHtml, PieceOfHtmlTranslationOptions)
+    fields = ('content', )
 
 
 class FragmentTranslationOptions(TranslationOptions):
     """translation"""
-    fields = ('content',)
-translator.register(Fragment, FragmentTranslationOptions)
+    fields = ('content', )
 
 
 class NavNodeTranslationOptions(TranslationOptions):
     """translation"""
-    fields = ('label',)
-translator.register(NavNode, NavNodeTranslationOptions)
+    fields = ('label', )
 
 
 class ArticleCategoryTranslationOptions(TranslationOptions):
     """translation"""
-    fields = ('name',)
-translator.register(ArticleCategory, ArticleCategoryTranslationOptions)
+    fields = ('name', )
 
 
 class SiteSettingsTranslationOptions(TranslationOptions):
     """translation"""
-    fields = ('homepage_url', 'homepage_article',)
-translator.register(SiteSettings, SiteSettingsTranslationOptions)
+    fields = ('homepage_url', 'homepage_article', )
 
 
 class AliasTranslationOptions(TranslationOptions):
     """translation"""
-    fields = ('path', 'redirect_url',)
-translator.register(Alias, AliasTranslationOptions)
+    fields = ('path', 'redirect_url', )
 
 
 class NewsletterTranslationOptions(TranslationOptions):
     """translation"""
     fields = ('subject', 'content',)
-translator.register(Newsletter, NewsletterTranslationOptions)
 
 
 class LinkTranslationOptions(TranslationOptions):
     """translation"""
     fields = ('url',)
-translator.register(Link, LinkTranslationOptions)
 
 
 class BaseArticleTranslationOptions(TranslationOptions):
     """
     Handle eastern languages (russian, chinese, japanese...) and slugs : Do not validate in this case
     Inherit the ArticleTranslationOptions from this base class
     """
@@ -81,7 +73,16 @@
             if validate_slug in translation_field.validators:
                 translation_field.validators.remove(validate_slug)
             translation_field.validators = [
                 BaseArticleTranslationOptions.SlugValidator(translation_field.language in get_eastern_languages())
             ] + translation_field.validators
         super(BaseArticleTranslationOptions, self).add_translation_field(field, translation_field)
 
+
+translator.register(PieceOfHtml, PieceOfHtmlTranslationOptions)
+translator.register(Fragment, FragmentTranslationOptions)
+translator.register(NavNode, NavNodeTranslationOptions)
+translator.register(ArticleCategory, ArticleCategoryTranslationOptions)
+translator.register(SiteSettings, SiteSettingsTranslationOptions)
+translator.register(Alias, AliasTranslationOptions)
+translator.register(Newsletter, NewsletterTranslationOptions)
+translator.register(Link, LinkTranslationOptions)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/urls.py` & `apidev-coop_cms-1.6.0/coop_cms/urls.py`

 * *Files 22% similar despite different names*

```diff
@@ -1,135 +1,134 @@
 # -*- coding:utf-8 -*-
 """urls"""
 
 from django.conf import settings
+from django.urls import include, path, re_path
 
-from django.conf.urls import include, url
-
-from coop_cms import sitemap
-from coop_cms.settings import (
-    get_article_views, install_csrf_failure_view, change_site_id
+from . import sitemap
+from .settings import (
+    get_article_views, install_csrf_failure_view, change_site_domain
 )
-from coop_cms.views.newsletters import NewsletterView, NewsletterPdfView
-from coop_cms.views import articles, fragments, homepage, links, navigation, newsletters, medialib, webutils
-from coop_cms.views.webutils import DebugErrorCodeView
+from .views.newsletters import NewsletterView, NewsletterPdfView
+from .views import articles, fragments, homepage, links, navigation, newsletters, medialib, webutils
+from .views.webutils import DebugErrorCodeView
 
 article_views = get_article_views()
 article_view = article_views['article_view']
 edit_article_view = article_views['edit_article_view']
 
 install_csrf_failure_view()
-change_site_id()
+change_site_domain()
 
 
 urlpatterns = [
-    url(r'^htm-editor/', include('coop_html_editor.urls')),
+    path('htm-editor/', include('coop_html_editor.urls')),
 
-    url(r'^cms/change-template/(?P<article_id>\d*)/$', articles.change_template, name="coop_cms_change_template"),
-    url(r'^cms/settings/(?P<article_id>\d*)/$', articles.article_settings, name="coop_cms_article_settings"),
-    url(r'^cms/new/$', articles.new_article, name="coop_cms_new_article"),
-    url(r'^cms/new/article/$', articles.new_article, name="coop_cms_new_article"),
-    url(r'^cms/update-logo/(?P<article_id>\d*)/$', articles.update_logo, name="coop_cms_update_logo"),
-    url(r'^cms/articles/$', articles.view_all_articles, name="coop_cms_view_all_articles"),
-    url(r'^cms/$', articles.view_all_articles),
-    url(r'articles/(?P<slug>[-\w]+)/$', articles.ArticlesByCategoryView.as_view(), name="coop_cms_articles_category"),
+    path('cms/change-template/<int:article_id>/', articles.change_template, name="coop_cms_change_template"),
+    path('cms/settings/<int:article_id>/', articles.article_settings, name="coop_cms_article_settings"),
+    path('cms/new/', articles.new_article, name="coop_cms_new_article"),
+    path('cms/new/article/', articles.new_article, name="coop_cms_new_article"),
+    path('cms/update-logo/<int:article_id>/', articles.update_logo, name="coop_cms_update_logo"),
+    path('cms/articles/', articles.view_all_articles, name="coop_cms_view_all_articles"),
+    path('cms/', articles.view_all_articles),
+    path('articles/<slug:slug>/', articles.ArticlesByCategoryView.as_view(), name="coop_cms_articles_category"),
 
-    url(r'^cms/fragments/add/$', fragments.add_fragment, name='coop_cms_add_fragment'),
-    url(r'^cms/fragments/edit/$', fragments.edit_fragments, name='coop_cms_edit_fragments'),
+    path('cms/fragments/add/', fragments.add_fragment, name='coop_cms_add_fragment'),
+    path('cms/fragments/edit/', fragments.edit_fragments, name='coop_cms_edit_fragments'),
 
-    url(r'^cms/set-homepage/(?P<article_id>\d*)/$', homepage.set_homepage, name='coop_cms_set_homepage'),
+    path('cms/set-homepage/<int:article_id>)/', homepage.set_homepage, name='coop_cms_set_homepage'),
 
-    url(r'^cms/new/link/$', links.new_link, name="coop_cms_new_link"),
+    path('cms/new/link/', links.new_link, name="coop_cms_new_link"),
 
-    url(r'^cms/tree/(?P<tree_id>\d*)/$', navigation.process_nav_edition, name='navigation_tree'),
+    path('cms/tree/<int:tree_id>/', navigation.process_nav_edition, name='navigation_tree'),
 
-    url(r'^cms/newsletter/new/$', newsletters.newsletter_settings, name='coop_cms_new_newsletter'),
-    url(
-        r'^cms/newsletter/settings/(?P<newsletter_id>\d+)/$',
+    path('cms/newsletter/new/', newsletters.newsletter_settings, name='coop_cms_new_newsletter'),
+    path(
+        'cms/newsletter/settings/<int:newsletter_id>/',
         newsletters.newsletter_settings,
         name='coop_cms_newsletter_settings'
     ),
-    url(
-        r'^cms/newsletter/(?P<id>\d+)/$',
+    path(
+        'cms/newsletter/<int:id>/',
         NewsletterView.as_view(),
         name='coop_cms_view_newsletter'
     ),
-    url(
-        r'^cms/newsletter-pdf/(?P<id>\d+)/$',
+    path(
+        'cms/newsletter-pdf/<int:id>/',
         NewsletterPdfView.as_view(),
         name='coop_cms_newsletter_pdf'
     ),
-    url(
-        r'^cms/newsletter/(?P<id>\d+)/cms_edit/$',
+    path(
+        'cms/newsletter/<int:id>/cms_edit/',
         NewsletterView.as_view(edit_mode=True),
-        name='coop_cms_edit_newsletter'),
-
-    url(
-        r'^cms/newsletter/change-template/(?P<newsletter_id>\d+)/$',
+        name='coop_cms_edit_newsletter'
+    ),
+    path(
+        'cms/newsletter/change-template/<int:newsletter_id>/',
         newsletters.change_newsletter_template,
         name="coop_cms_change_newsletter_template"
     ),
-    url(
-        r'^cms/newsletter/test/(?P<newsletter_id>\d+)/$',
+    path(
+        'cms/newsletter/test/<int:newsletter_id>/',
         newsletters.test_newsletter,
         name="coop_cms_test_newsletter"
     ),
-    url(
-        r'^cms/newsletter/schedule/(?P<newsletter_id>\d+)/$',
+    path(
+        'cms/newsletter/schedule/<int:newsletter_id>/',
         newsletters.schedule_newsletter_sending,
         name="coop_cms_schedule_newsletter_sending"
     ),
 
-    url(r'^cms/media-images/$', medialib.show_media, {'media_type': 'image'}, name='coop_cms_media_images'),
-    url(r'^cms/media-documents/$', medialib.show_media, {'media_type': 'document'}, name='coop_cms_media_documents'),
-    url(
-        r'^cms/media-photologue/$',
+    path('cms/media-images/', medialib.show_media, {'media_type': 'image'}, name='coop_cms_media_images'),
+    path('cms/media-documents/', medialib.show_media, {'media_type': 'document'}, name='coop_cms_media_documents'),
+    path(
+        'cms/media-photologue/',
         medialib.show_media,
         {'media_type': 'photologue'},
         name='coop_cms_media_photologue'
     ),
-    url(r'^cms/upload-image/$', medialib.upload_image, name="coop_cms_upload_image"),
-    url(r'^cms/upload-doc/$', medialib.upload_doc, name="coop_cms_upload_doc"),
-    url(r'^cms/private-download/(?P<doc_id>\d*)/$', medialib.download_doc, name='coop_cms_download_doc'),
+    path('cms/upload-image/', medialib.upload_image, name="coop_cms_upload_image"),
+    path('cms/upload-doc/', medialib.upload_doc, name="coop_cms_upload_doc"),
+    path('cms/private-download/<int:doc_id>/', medialib.download_doc, name='coop_cms_download_doc'),
 
-    url(r'cms/change-language/$', webutils.change_language, name='coop_cms_change_language'),
-    url(r'cms/swicth-language/$', webutils.switch_language_popup, name='coop_cms_switch_language_popup'),
+    path('cms/change-language/', webutils.change_language, name='coop_cms_change_language'),
+    path('cms/swicth-language/', webutils.switch_language_popup, name='coop_cms_switch_language_popup'),
 
-    url(
-        r'^cms/accept-cookies-message/',
+    path(
+        'cms/accept-cookies-message/',
         webutils.accept_cookies_message,
         name='coop_cms_accept_cookies_message'
     ),
 ]
 
 if settings.DEBUG:
     urlpatterns += [
-        url(
+        re_path(
             r'^cms/debug-error-code/(?P<error_code>\d{3})/$',
             DebugErrorCodeView.as_view(),
             name='coop_cms_debug_404'
         ),
     ]
 
 if not getattr(settings, "COOP_CMS_DISABLE_DEFAULT_SITEMAP", False):
     urlpatterns += sitemap.urlpatterns
 
 if 'coop_cms.apps.rss_sync' in settings.INSTALLED_APPS:
     urlpatterns += [
-        url(r'^rss-sync/', include('coop_cms.apps.rss_sync.urls')),
+        path('rss-sync/', include('coop_cms.apps.rss_sync.urls')),
     ]
 
 if 'coop_cms.apps.test_app' in settings.INSTALLED_APPS:
     urlpatterns += [
-        url(r'^this-should-be-only-in-test-mode', include('coop_cms.apps.test_app.urls')),
+        path('this-should-be-only-in-test-mode', include('coop_cms.apps.test_app.urls')),
     ]
 
 # keep these at the end
 urlpatterns += [
-    url(r'^(?P<url>[-\w]+)/cms_publish/$', articles.publish_article, name='coop_cms_publish_article'),
-    url(r'^(?P<url>[-\w]+)/cms_cancel/$', articles.cancel_edit_article, name='coop_cms_cancel_edit_article'),
-    url(r'^$', homepage.homepage, name='coop_cms_homepage'),
-    url(r'^(?P<slug>[-\w]+)/cms_edit/$', edit_article_view.as_view(edit_mode=True), name='coop_cms_edit_article'),
-    url(r'^(?P<slug>[-\w]+)/$', article_view.as_view(), name='coop_cms_view_article'),
-    url(r'^(?P<path>.+)$', articles.AliasView.as_view(), name='coop_cms_view_alias'),
-    url(r'^coop_bar/', include('coop_bar.urls')),
+    re_path(r'(?P<url>[-\w]+)/cms_publish/$', articles.publish_article, name='coop_cms_publish_article'),
+    re_path(r'^(?P<url>[-\w]+)/cms_cancel/$', articles.cancel_edit_article, name='coop_cms_cancel_edit_article'),
+    path('', homepage.homepage, name='coop_cms_homepage'),
+    re_path(r'^(?P<slug>[-\w]+)/cms_edit/$', edit_article_view.as_view(edit_mode=True), name='coop_cms_edit_article'),
+    re_path(r'^(?P<slug>[-\w]+)/$', article_view.as_view(), name='coop_cms_view_article'),
+    re_path(r'^(?P<path>.+)$', articles.AliasView.as_view(), name='coop_cms_view_alias'),
+    path('coop_bar/', include('coop_bar.urls')),
 ]
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/utils/__init__.py` & `apidev-coop_cms-1.6.0/coop_cms/utils/__init__.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/utils/emails.py` & `apidev-coop_cms-1.6.0/coop_cms/utils/emails.py`

 * *Files 2% similar despite different names*

```diff
@@ -5,15 +5,15 @@
 
 from django.conf import settings
 from django.contrib.sites.models import Site
 from django.core.mail import get_connection, EmailMultiAlternatives
 from django.template.loader import get_template
 from django.utils import translation
 
-from coop_cms.settings import get_newsletter_context_callbacks, get_eastern_languages
+from ..settings import get_newsletter_context_callbacks, get_eastern_languages
 
 from .text import dehtml
 from .i18n import activate_lang, get_language
 
 
 def strip_a_tags(pretty_html_text):
     """
@@ -180,10 +180,11 @@
         html_text = the_template.render(context_dict)
     except Exception:
         # import traceback
         # print(traceback.print_exc())
         raise
 
     html_text = make_links_absolute(html_text, newsletter)
+    subject = ' '.join(newsletter.subject.split('\n'))
+    subject = ' '.join(subject.split('\r'))
 
-
-    return _send_email(newsletter.subject, html_text, dests, list_unsubscribe)
+    return _send_email(subject, html_text, dests, list_unsubscribe)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/utils/i18n.py` & `apidev-coop_cms-1.6.0/coop_cms/utils/i18n.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/utils/loaders.py` & `apidev-coop_cms-1.6.0/coop_cms/utils/loaders.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/utils/pagination.py` & `apidev-coop_cms-1.6.0/coop_cms/utils/pagination.py`

 * *Files identical despite different names*

### Comparing `apidev-coop_cms-1.5.9/coop_cms/utils/requests.py` & `apidev-coop_cms-1.6.0/coop_cms/utils/requests.py`

 * *Files 14% similar despite different names*

```diff
@@ -1,13 +1,13 @@
 # -*- coding: utf-8 -*-
 """utils"""
 
 from threading import current_thread
 
-from coop_cms.moves import MiddlewareMixin
+from ..moves import MiddlewareMixin
 
 
 class RequestNotFound(Exception):
     """exception"""
     pass
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/utils/text.py` & `apidev-coop_cms-1.6.0/coop_cms/utils/text.py`

 * *Files 14% similar despite different names*

```diff
@@ -4,16 +4,16 @@
 from re import sub
 from sys import stderr
 from traceback import print_exc
 
 from django.utils.text import slugify as ascii_slugify
 from slugify import slugify as unicode_slugify
 
-from coop_cms.moves import HTMLParser
-from coop_cms.settings import get_eastern_languages
+from ..moves import HTMLParser
+from ..settings import get_eastern_languages
 
 from .i18n import get_language
 
 
 class _DeHTMLParser(HTMLParser):
     """html to text parser"""
     def __init__(self, allow_spaces=False, allow_html_chars=False):
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/utils/xsendfile.py` & `apidev-coop_cms-1.6.0/coop_cms/utils/xsendfile.py`

 * *Files 12% similar despite different names*

```diff
@@ -1,19 +1,17 @@
 # -*- coding: utf-8 -*-
 
 # Borrowed from https://bitbucket.org/wkornewald/django-filetransfers
 
 import mimetypes
 
-from django.conf import settings
-
 from django.http import HttpResponse
 from django.utils.encoding import smart_str
 
-from ..settings import is_xsendfile_disabled
+from ..settings import is_xsendfile_disabled, xsendfile_no_file_size
 
 
 class ChunkedFile(object):
     def __init__(self, file):
         self.file = file
 
     def __iter__(self):
@@ -54,8 +52,11 @@
         save_as = filename
     if not content_type:
         content_type = mimetypes.guess_type(filename)[0]
 
     if is_xsendfile_disabled():
         return chunk_serve_file(request, file, save_as=save_as, content_type=content_type)
     else:
-        return xsendfile_serve_file(request, file, save_as=save_as, content_type=content_type)
+        no_file_size = xsendfile_no_file_size()
+        return xsendfile_serve_file(
+            request, file, save_as=save_as, content_type=content_type, no_file_size=no_file_size
+        )
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/views/articles.py` & `apidev-coop_cms-1.6.0/coop_cms/views/articles.py`

 * *Files 4% similar despite different names*

```diff
@@ -6,34 +6,35 @@
 from django.conf import settings
 from django.contrib.auth.decorators import login_required
 from django.contrib.contenttypes.models import ContentType
 from django.contrib.messages.api import success as success_message
 from django.core.exceptions import PermissionDenied
 from django.http import HttpResponse, Http404, HttpResponseRedirect
 from django.shortcuts import render, get_object_or_404
-from django.template import TemplateDoesNotExist
+from django.template.exceptions import TemplateDoesNotExist
 from django.template.loader import get_template
+from django.urls import reverse
 from django.views.generic.base import TemplateView
-from django.utils.translation import ugettext as _
+from django.utils.translation import gettext as _
 from django.views.generic import View
 
 from colorbox.decorators import popup_redirect
 
-from coop_cms.exceptions import ArticleNotAllowed
-from coop_cms.forms.articles import ArticleLogoForm, ArticleTemplateForm, PublishArticleForm
-from coop_cms import models
-from coop_cms.generic_views import EditableObjectView
-from coop_cms.logger import logger
-from coop_cms.moves import reverse, is_authenticated
-from coop_cms.settings import (
+from ..exceptions import ArticleNotAllowed
+from ..forms.articles import ArticleLogoForm, ArticleTemplateForm, PublishArticleForm
+from .. import models
+from ..generic_views import EditableObjectView
+from ..logger import logger
+from ..moves import is_authenticated
+from ..settings import (
     get_article_class, get_article_form, get_article_settings_form, get_new_article_form,
     get_articles_category_page_size, homepage_no_redirection
 )
-from coop_cms.shortcuts import get_article_or_404, get_headlines, redirect_if_alias
-from coop_cms.utils import get_model_name, get_model_app, paginate
+from ..shortcuts import get_article_or_404, get_headlines, redirect_if_alias
+from ..utils import get_model_name, get_model_app, paginate
 
 
 def get_article_template(article):
     """get article template"""
     template = article.template
     if not template:
         template = 'coop_cms/article.html'
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/views/fragments.py` & `apidev-coop_cms-1.6.0/coop_cms/views/fragments.py`

 * *Files 10% similar despite different names*

```diff
@@ -2,20 +2,20 @@
 """fragments are block of html which can be dynamically added"""
 
 from django.contrib.auth.decorators import login_required
 from django.contrib.contenttypes.models import ContentType
 from django.core.exceptions import PermissionDenied
 from django.forms.models import modelformset_factory
 from django.shortcuts import render
-from django.utils.translation import ugettext as _
+from django.utils.translation import gettext as _
 
 from colorbox.decorators import popup_close
 
-from coop_cms.forms.fragments import AddFragmentForm, EditFragmentForm
-from coop_cms import models
+from ..forms.fragments import AddFragmentForm, EditFragmentForm
+from .. import models
 
 
 @login_required
 @popup_close
 def add_fragment(request):
     """add a fragment to the current template"""
 
@@ -52,22 +52,30 @@
     content_type = ContentType.objects.get_for_model(models.Fragment)
     perm = '{0}.add_{1}'.format(content_type.app_label, content_type.model)
     if not request.user.has_perm(perm):
         raise PermissionDenied
 
     edit_fragment_formset = modelformset_factory(models.Fragment, EditFragmentForm, extra=0)
 
+    fragments = models.Fragment.objects.all()
+    try:
+        filter_id = int(request.GET.get('filter', 0))
+    except ValueError:
+        filter_id = 0
+    if filter_id:
+        fragments = fragments.filter(filter__extra_id=filter_id)
+
     if request.method == "POST":
-        formset = edit_fragment_formset(request.POST, queryset=models.Fragment.objects.all())
+        formset = edit_fragment_formset(request.POST, queryset=fragments)
         if formset.is_valid():
             formset.save()
             # popup_close decorator will close and refresh
             return None
     else:
-        formset = edit_fragment_formset(queryset=models.Fragment.objects.all())
+        formset = edit_fragment_formset(queryset=fragments)
 
     context_dict = {
         'form': formset,
         'title': _("Edit fragments of this template?"),
     }
 
     return render(
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/views/homepage.py` & `apidev-coop_cms-1.6.0/coop_cms/views/homepage.py`

 * *Files 15% similar despite different names*

```diff
@@ -2,40 +2,38 @@
 """homepage management"""
 
 from django.contrib.auth.decorators import login_required
 from django.contrib.sites.models import Site
 from django.core.exceptions import PermissionDenied
 from django.http import Http404, HttpResponseRedirect
 from django.shortcuts import render, get_object_or_404
-from django.urls import reverse_lazy
-from django.utils.translation import ugettext as _
+from django.urls import reverse_lazy, reverse
+from django.utils.translation import gettext as _
 
 from colorbox.decorators import popup_redirect
 
-from coop_cms import models
-from coop_cms.moves import reverse
-from coop_cms.settings import cms_no_homepage, get_article_class, homepage_no_redirection, get_article_views
-from coop_cms.models import get_homepage_url, get_homepage_article
+from .. import models
+from ..settings import cms_no_homepage, get_article_class, homepage_no_redirection, get_article_views
 
 
 def homepage(request):
     """view homepage"""
     if cms_no_homepage():
         raise Http404
 
     if homepage_no_redirection():
-        article_slug = get_homepage_article()
+        article_slug = models.get_homepage_article()
 
         if article_slug:
             article_views = get_article_views()
             article_view = article_views['article_view']
             return article_view.as_view(as_homepage=True)(request, slug=article_slug)
 
     else:
-        homepage_url = get_homepage_url()
+        homepage_url = models.get_homepage_url()
         if homepage_url:
             return HttpResponseRedirect(homepage_url)
 
     return HttpResponseRedirect(reverse('coop_cms_view_all_articles'))
 
 
 @login_required(login_url=reverse_lazy('login'))
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/views/links.py` & `apidev-coop_cms-1.6.0/coop_cms/views/links.py`

 * *Files 7% similar despite different names*

```diff
@@ -3,22 +3,21 @@
 
 from django.contrib.auth.decorators import login_required
 from django.contrib.contenttypes.models import ContentType
 from django.contrib.messages.api import success as success_message
 from django.core.exceptions import PermissionDenied
 from django.http import HttpResponseRedirect
 from django.shortcuts import render
-from django.urls import reverse_lazy
-from django.utils.translation import ugettext as _
+from django.urls import reverse_lazy, reverse
+from django.utils.translation import gettext as _
 
 from colorbox.decorators import popup_redirect
 
-from coop_cms.forms.content import NewLinkForm
-from coop_cms import models
-from coop_cms.moves import reverse
+from ..forms.content import NewLinkForm
+from .. import models
 
 
 @login_required(login_url=reverse_lazy('login'))
 @popup_redirect
 def new_link(request):
     """new link"""
     content_type = ContentType.objects.get_for_model(models.Link)
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/views/medialib.py` & `apidev-coop_cms-1.6.0/coop_cms/views/medialib.py`

 * *Files 6% similar despite different names*

```diff
@@ -7,22 +7,22 @@
 
 from django.conf import settings
 from django.contrib.auth.decorators import login_required
 from django.core.exceptions import PermissionDenied
 from django.http import HttpResponse, Http404
 from django.shortcuts import render, get_object_or_404
 from django.template.loader import get_template
-from django.urls import reverse_lazy
+from django.urls import reverse_lazy, reverse
 
-from coop_cms.forms.content import AddDocForm, AddImageForm
-from coop_cms.logger import logger
-from coop_cms import models
-from coop_cms.moves import make_context, reverse
-from coop_cms.utils import paginate
-from coop_cms.utils.xsendfile import serve_file
+from ..forms.content import AddDocForm, AddImageForm
+from ..logger import logger
+from .. import models
+from ..moves import make_context
+from ..utils import paginate
+from ..utils.xsendfile import serve_file
 
 
 def _get_photologue_media(request):
     """get photologue media"""
     # Only if django-photologue is installed
     if "photologue" in settings.INSTALLED_APPS:
         from photologue.models import Photo, Gallery
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/views/navigation.py` & `apidev-coop_cms-1.6.0/coop_cms/views/navigation.py`

 * *Files 2% similar despite different names*

```diff
@@ -6,21 +6,22 @@
 from django.db.models.aggregates import Max
 from django.contrib.auth.decorators import login_required
 from django.contrib.contenttypes.models import ContentType
 from django.core.exceptions import ValidationError, PermissionDenied
 from django.http import HttpResponse, Http404
 from django.shortcuts import get_object_or_404
 from django.template.loader import select_template
-from django.utils.translation import ugettext as _
+from django.urls import reverse
+from django.utils.translation import gettext as _
 
-from coop_cms import models
-from coop_cms.moves import make_context, reverse
-from coop_cms.settings import get_navtree_class
-from coop_cms.logger import logger
-from coop_cms.utils import get_model_app, get_model_label, get_model_name
+from .. import models
+from ..moves import make_context
+from ..settings import get_navtree_class
+from ..logger import logger
+from ..utils import get_model_app, get_model_label, get_model_name
 
 
 def view_navnode(request, tree):
     """show info about the node when selected"""
     try:
         response = {}
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/views/newsletters.py` & `apidev-coop_cms-1.6.0/coop_cms/views/newsletters.py`

 * *Files 4% similar despite different names*

```diff
@@ -5,30 +5,30 @@
 import sys
 from tempfile import NamedTemporaryFile
 
 from django.conf import settings
 from django.contrib.auth.decorators import login_required
 from django.contrib import messages
 from django.contrib.sites.models import Site
-from django.core.exceptions import PermissionDenied, ValidationError
+from django.core.exceptions import PermissionDenied
 from django.http import HttpResponseRedirect
 from django.shortcuts import render, get_object_or_404
-from django.utils.encoding import smart_text
-from django.utils.translation import ugettext as _
+from django.utils.encoding import smart_str
+from django.utils.translation import gettext as _
 from django.views.generic import View
 
 from colorbox.decorators import popup_redirect
 
-from coop_cms.forms.newsletters import NewsletterSchedulingForm, NewsletterTemplateForm, NewsletterHandleRecipients
-from coop_cms import models
-from coop_cms.generic_views import EditableObjectView
-from coop_cms.logger import logger
-from coop_cms.optionals import convert_to_pdf, make_absolute_paths, PDFResponse
-from coop_cms.settings import get_newsletter_form, get_newsletter_settings_form
-from coop_cms.utils import send_newsletter, slugify
+from ..forms.newsletters import NewsletterSchedulingForm, NewsletterTemplateForm, NewsletterHandleRecipients
+from .. import models
+from ..generic_views import EditableObjectView
+from ..logger import logger
+from ..optionals import convert_to_pdf, make_absolute_paths, PDFResponse
+from ..settings import get_newsletter_form, get_newsletter_settings_form
+from ..utils import send_newsletter, slugify
 
 
 @login_required
 @popup_redirect
 def newsletter_settings(request, newsletter_id=None):
     """edit or created newsletter"""
 
@@ -122,14 +122,15 @@
                 return HttpResponseRedirect(newsletter.get_absolute_url())
     else:
         form = NewsletterHandleRecipients()
 
     context["form"] = form
     return render(request, 'coop_cms/popup_test_newsletter.html', context)
 
+
 @login_required
 @popup_redirect
 def schedule_newsletter_sending(request, newsletter_id):
     """schedule sending"""
     newsletter = get_object_or_404(models.Newsletter, id=newsletter_id)
     instance = models.NewsletterSending(newsletter=newsletter)
 
@@ -164,15 +165,15 @@
     def get_context_data(self):
         """context"""
         context_data = super(NewsletterView, self).get_context_data()
         context_data.update({
             'title': self.object.subject,
             'by_email': self.request.GET.get('by_email', False),
             'editable': self.editable,
-            'current_site': Site.objects.get_current(),
+            'current_site': self.object.site or Site.objects.get_current(),
             'COOP_CMS_SITE_PREFIX': settings.COOP_CMS_SITE_PREFIX,
         })
         return context_data
 
     def after_save(self, article):
         """after save"""
         pass
@@ -214,15 +215,15 @@
     def save_to_temporary_file(self, content):
         """
         put content into a temporary file
         Inspired by django-wkhtmltopdf
         """
 
         # Turn path to absolute
-        content = smart_text(content)
+        content = smart_str(content)
         content = make_absolute_paths(content)
 
         try:
             # Python3 has 'buffering' arg instead of 'bufsize'
             temp_file = NamedTemporaryFile(
                 mode='w+b', buffering=-1, suffix='.html', prefix='tmp', dir=None, delete=True)
         except TypeError:
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/views/webutils.py` & `apidev-coop_cms-1.6.0/coop_cms/views/webutils.py`

 * *Files 3% similar despite different names*

```diff
@@ -5,25 +5,25 @@
 from urllib.parse import urlparse
 
 from django.conf import settings
 from django.http import HttpResponse, Http404, HttpResponseRedirect, HttpResponseForbidden
 from django.middleware.csrf import REASON_NO_REFERER, REASON_NO_CSRF_COOKIE
 from django.shortcuts import render
 from django.template.loader import get_template
-from django.utils.translation import check_for_language, activate, get_language, ugettext as _
+from django.utils.translation import check_for_language, activate, get_language, gettext as _
 from django.views.decorators.csrf import csrf_exempt
 from django.views.generic import TemplateView
 
 from colorbox.decorators import popup_redirect
 
-from coop_cms.forms.webutils import LanguageSelectionForm
-from coop_cms.logger import logger
-from coop_cms.moves import make_context
-from coop_cms.settings import get_article_class, is_localized
-from coop_cms.utils import strip_locale_path, make_locale_path
+from ..forms.webutils import LanguageSelectionForm
+from ..logger import logger
+from ..moves import make_context
+from ..settings import get_article_class, is_localized
+from ..utils import strip_locale_path, make_locale_path
 
 
 @csrf_exempt
 def accept_cookies_message(request):
     """store if the user accept or not the cookies"""
     if request.method == 'POST':
         try:
```

### Comparing `apidev-coop_cms-1.5.9/coop_cms/widgets.py` & `apidev-coop_cms-1.6.0/coop_cms/widgets.py`

 * *Files 14% similar despite different names*

```diff
@@ -1,19 +1,20 @@
 # -*- coding: utf-8 -*-
 """widgets"""
 
 from django.core.exceptions import ObjectDoesNotExist
 from django.forms import TextInput as DjangoTextInput
-from django.utils.translation import ugettext as _
+from django.urls import reverse
+from django.utils.translation import gettext as _
 from django.utils.safestring import mark_safe
 
-import floppyforms.__future__ as floppyforms
+import floppyforms as floppyforms
 
-from coop_cms.models import NavType
-from coop_cms.utils import get_text_from_template
+from .models import NavType
+from .utils import get_text_from_template
 
 
 class ReadOnlyInput(floppyforms.widgets.Input):
     """readonly input"""
     template_name = 'coop_cms/widgets/readonlyinput.html'
```

### Comparing `apidev-coop_cms-1.5.9/setup.py` & `apidev-coop_cms-1.6.0/setup.py`

 * *Files 19% similar despite different names*

```diff
@@ -10,35 +10,35 @@
     from setuptools import setup, find_packages
 
 VERSION = __import__('coop_cms').__version__
 
 import os
 
 
-def read(fname):
-    return open(os.path.join(os.path.dirname(__file__), fname)).read()
+def read(file_name):
+    return open(os.path.join(os.path.dirname(__file__), file_name)).read()
 
 
 setup(
     name='apidev-coop_cms',
     version=VERSION,
     description='Small CMS built around a tree navigation open to any django models',
     packages=find_packages(),
     include_package_data=True,
     author='Luc Jean',
     author_email='ljean@apidev.fr',
     license='BSD',
     zip_safe=False,
     install_requires=[
-        'django >= 2.2.13, <3.0',
+        'django >= 2.2.13',
         'django-extensions',
         'sorl-thumbnail',
-        'apidev-coop_colorbox >= 1.5.1',
-        'apidev-coop_bar >= 1.5.2',
-        'coop_html_editor >= 1.3.1',
+        'apidev-coop_colorbox >= 1.6.0',
+        'apidev-coop_bar >= 1.6.0',
+        'coop_html_editor >= 1.4.0',
         'feedparser',
         'beautifulsoup4',
         'model_mommy',
         'unicode-slugify',
     ],
     long_description=open('README.rst').read(),
     url='https://github.com/ljean/coop_cms/',
```

